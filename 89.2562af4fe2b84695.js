(self.webpackChunkteeb_webmap=self.webpackChunkteeb_webmap||[]).push([[89],{3089:(Is,Wi,Et)=>{"use strict";Et.r(Wi),Et.d(Wi,{LayersModule:()=>Tb});var Ae=Et(6895),Vt=Et(6962);function ee(a){a.stopPropagation()}const fe=class Mt{constructor(t){this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},ze=class Bi{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function Ie(a,t){return a>t?1:a<t?-1:0}function ni(a,t,e){const n=a.length;if(a[0]<=t)return 0;if(t<=a[n-1])return n-1;{let o;if(e>0){for(o=1;o<n;++o)if(a[o]<t)return o-1}else if(e<0){for(o=1;o<n;++o)if(a[o]<=t)return o}else for(o=1;o<n;++o){if(a[o]==t)return o;if(a[o]<t)return"function"==typeof e?e(t,a[o-1],a[o])>0?o-1:o:a[o-1]-t<t-a[o]?o-1:o}return n-1}}function Re(a,t,e){for(;t<e;){const n=a[t];a[t]=a[e],a[e]=n,++t,--e}}function cs(a,t){const e=Array.isArray(t)?t:[t],n=e.length;for(let o=0;o<n;o++)a[a.length]=e[o]}function Q(a,t){const e=a.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(a[n]!==t[n])return!1;return!0}function ft(){return!0}function ct(){return!1}function U(){}function Ot(a){for(const t in a)delete a[t]}function jt(a){let t;for(t in a)return!1;return!t}const Qt=class Wt extends ze{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),o=n[t]||(n[t]=[]);o.includes(e)||o.push(e)}dispatchEvent(t){const e="string"==typeof t,n=e?t:t.type,o=this.listeners_&&this.listeners_[n];if(!o)return;const c=e?new fe(t):t;c.target||(c.target=this.eventTarget_||this);const f=this.dispatching_||(this.dispatching_={}),g=this.pendingRemovals_||(this.pendingRemovals_={});let y;n in f||(f[n]=0,g[n]=0),++f[n];for(let w=0,S=o.length;w<S;++w)if(y="handleEvent"in o[w]?o[w].handleEvent(c):o[w].call(this,c),!1===y||c.propagationStopped){y=!1;break}if(0==--f[n]){let w=g[n];for(delete g[n];w--;)this.removeEventListener(n,U);delete f[n]}return y}disposeInternal(){this.listeners_&&Ot(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const n=this.listeners_&&this.listeners_[t];if(n){const o=n.indexOf(e);-1!==o&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[o]=U,++this.pendingRemovals_[t]):(n.splice(o,1),0===n.length&&delete this.listeners_[t]))}}};function At(a,t,e,n,o){if(n&&n!==a&&(e=e.bind(n)),o){const f=e;e=function(){a.removeEventListener(t,e),f.apply(this,arguments)}}const c={target:a,type:t,listener:e};return a.addEventListener(t,e),c}function se(a,t,e,n){return At(a,t,e,n,!0)}function Lt(a){a&&a.target&&(a.target.removeEventListener(a.type,a.listener),Ot(a))}const ri=class _i extends Qt{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,o=new Array(n);for(let c=0;c<n;++c)o[c]=At(this,t[c],e);return o}return At(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const o=t.length;n=new Array(o);for(let c=0;c<o;++c)n[c]=se(this,t[c],e)}else n=se(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)!function Xe(a){if(Array.isArray(a))for(let t=0,e=a.length;t<e;++t)Lt(a[t]);else Lt(a)}(n);else if(Array.isArray(t))for(let o=0,c=t.length;o<c;++o)this.removeEventListener(t[o],e);else this.removeEventListener(t,e)}};function bt(){throw new Error("Unimplemented abstract method.")}let Cr=0;function Dt(a){return a.ol_uid||(a.ol_uid=String(++Cr))}class Rs extends fe{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}const ye=class us extends ri{constructor(t){super(),Dt(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new Rs(n,t,e)),n="propertychange",this.hasListener(n)&&this.dispatchEvent(new Rs(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const o=this.values_||(this.values_={});if(n)o[t]=e;else{const c=o[t];o[t]=e,c!==e&&this.notify(t,c)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){!t.values_||Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],jt(this.values_)&&(this.values_=null),e||this.notify(t,n)}}},Sr={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class hn extends Error{constructor(t){const e=Sr[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}const ds=hn;function Tt(a,t){if(!a)throw new ds(t)}function Ut(a,t,e){return Math.min(Math.max(a,t),e)}function fs(a,t,e,n,o,c){const f=o-e,g=c-n;if(0!==f||0!==g){const y=((a-e)*f+(t-n)*g)/(f*f+g*g);y>1?(e=o,n=c):y>0&&(e+=f*y,n+=g*y)}return Ci(a,t,e,n)}function Ci(a,t,e,n){const o=e-a,c=n-t;return o*o+c*c}function Hi(a){return a*Math.PI/180}function Si(a,t){const e=a%t;return e*t<0?e+t:e}function Ai(a,t,e){return a+e*(t-a)}function ga(a,t){const e=Math.pow(10,t);return Math.round(a*e)/e}function Ls(a,t){return Math.floor(ga(a,t))}function Ps(a,t){return Math.ceil(ga(a,t))}const dn=class Ar extends ye{constructor(t){super(),this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e.opacity=void 0!==t.opacity?t.opacity:1,Tt("number"==typeof e.opacity,64),e.visible=void 0===t.visible||t.visible,e.zIndex=t.zIndex,e.maxResolution=void 0!==t.maxResolution?t.maxResolution:1/0,e.minResolution=void 0!==t.minResolution?t.minResolution:0,e.minZoom=void 0!==t.minZoom?t.minZoom:-1/0,e.maxZoom=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Ut(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return bt()}getLayerStatesArray(t){return bt()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return bt()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set("extent",t)}setMaxResolution(t){this.set("maxResolution",t)}setMinResolution(t){this.set("minResolution",t)}setMaxZoom(t){this.set("maxZoom",t)}setMinZoom(t){this.set("minZoom",t)}setOpacity(t){Tt("number"==typeof t,64),this.set("opacity",t)}setVisible(t){this.set("visible",t)}setZIndex(t){this.set("zIndex",t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}};function pa(a,t){if(!a.visible)return!1;const e=t.resolution;if(e<a.minResolution||e>=a.maxResolution)return!1;const n=t.zoom;return n>a.minZoom&&n<=a.maxZoom}const Mi=class Mr extends dn{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(t.source?t.source:null)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Lt(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&&(this.sourceChangeKey_=At(t,"change",this.handleSourceChange_,this)),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(e=>e([]))}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}render(t,e){const n=this.getRenderer();if(n.prepareFrame(t))return this.rendered=!0,n.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set("map",t)}getMapInternal(){return this.get("map")}setMap(t){this.mapPrecomposeKey_&&(Lt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Lt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=At(t,"precompose",function(e){const o=e.frameState.layerStatesArray,c=this.getLayerState(!1);Tt(!o.some(function(f){return f.layer===c.layer}),67),o.push(c)},this),this.mapRenderKey_=At(this,"change",t.render,t),this.changed())}setSource(t){this.set("source",t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}},gn=class fn extends Mi{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(t){this.set("preload",t)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(t){this.set("useInterimTilesOnError",t)}getData(t){return super.getData(t)}},kr=class pn extends ri{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return bt()}getData(t){return null}prepareFrame(t){return bt()}renderFrame(t,e){return bt()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return function(o,c){const f=this.loadedTileCallback.bind(this,n,o);return t.forEachLoadedTile(e,o,c,f)}.bind(this)}forEachFeatureAtCoordinate(t,e,n,o,c){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){2===t.target.getState()&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return 2!=e&&3!=e&&t.addEventListener("change",this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},xn=class mn extends fe{constructor(t,e,n,o){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=o}},li=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Er=li.includes("firefox"),ma=(li.includes("safari")&&!li.includes("chrom")&&(li.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(li)),li.includes("webkit")&&!li.includes("edge")),yn=li.includes("macintosh"),vn=typeof devicePixelRatio<"u"?devicePixelRatio:1,Fs=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,bn=typeof Image<"u"&&Image.prototype.decode,wn=function(){let a=!1;try{const t=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return a}();function ue(a,t){const e=t[0],n=t[1];return t[0]=a[0]*e+a[2]*n+a[4],t[1]=a[1]*e+a[3]*n+a[5],t}function We(a,t,e,n,o,c,f,g){const y=Math.sin(c),w=Math.cos(c);return a[0]=n*w,a[1]=o*y,a[2]=-n*y,a[3]=o*w,a[4]=f*n*w-g*n*y+t,a[5]=f*o*y+g*o*w+e,a}function i(a,t){const e=function s(a){return a[0]*a[3]-a[1]*a[2]}(t);Tt(0!==e,32);const n=t[0],o=t[1],c=t[2],f=t[3],g=t[4],y=t[5];return a[0]=f/e,a[1]=-o/e,a[2]=-c/e,a[3]=n/e,a[4]=(c*y-f*g)/e,a[5]=-(n*y-o*g)/e,a}let r;function l(a){const t="matrix("+a.join(", ")+")";if(Fs)return t;const e=r||(r=document.createElement("div"));return e.style.transform=t,e.style.transform}new Array(6);const h=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,d=/^([a-z]*)$|^hsla?\(.*\)$/i;function u(a){return"string"==typeof a?a:A(a)}const m=function(){const t={};let e=0;return function(n){let o;if(t.hasOwnProperty(n))o=t[n];else{if(e>=1024){let c=0;for(const f in t)0==(3&c++)&&(delete t[f],--e)}o=function b(a){let t,e,n,o,c;if(d.exec(a)&&(a=function p(a){const t=document.createElement("div");if(t.style.color=a,""!==t.style.color){document.body.appendChild(t);const e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}(a)),h.exec(a)){const f=a.length-1;let g;g=f<=4?1:2;const y=4===f||8===f;t=parseInt(a.substr(1+0*g,g),16),e=parseInt(a.substr(1+1*g,g),16),n=parseInt(a.substr(1+2*g,g),16),o=y?parseInt(a.substr(1+3*g,g),16):255,1==g&&(t=(t<<4)+t,e=(e<<4)+e,n=(n<<4)+n,y&&(o=(o<<4)+o)),c=[t,e,n,o/255]}else a.startsWith("rgba(")?(c=a.slice(5,-1).split(",").map(Number),_(c)):a.startsWith("rgb(")?(c=a.slice(4,-1).split(",").map(Number),c.push(1),_(c)):Tt(!1,14);return c}(n),t[n]=o,++e}return o}}();function v(a){return Array.isArray(a)?a:m(a)}function _(a){return a[0]=Ut(a[0]+.5|0,0,255),a[1]=Ut(a[1]+.5|0,0,255),a[2]=Ut(a[2]+.5|0,0,255),a[3]=Ut(a[3],0,1),a}function A(a){let t=a[0];t!=(0|t)&&(t=t+.5|0);let e=a[1];e!=(0|e)&&(e=e+.5|0);let n=a[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+t+","+e+","+n+","+(void 0===a[3]?1:Math.round(100*a[3])/100)+")"}function k(a,t,e,n){let o;return o=e&&e.length?e.shift():Fs?new OffscreenCanvas(a||300,t||300):document.createElement("canvas"),a&&(o.width=a),t&&(o.height=t),o.getContext("2d",n)}function R(a){const t=a.canvas;t.width=1,t.height=1,a.clearRect(0,0,1,1)}function O(a){let t=a.offsetWidth;const e=getComputedStyle(a);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),t}function N(a){let t=a.offsetHeight;const e=getComputedStyle(a);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10),t}function z(a,t){const e=t.parentNode;e&&e.replaceChild(a,t)}function x(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function C(a){for(;a.lastChild;)a.removeChild(a.lastChild)}function W(a){const t=[1/0,1/0,-1/0,-1/0];for(let e=0,n=a.length;e<n;++e)ae(t,a[e]);return t}function H(a,t,e){return e?(e[0]=a[0]-t,e[1]=a[1]-t,e[2]=a[2]+t,e[3]=a[3]+t,e):[a[0]-t,a[1]-t,a[2]+t,a[3]+t]}function et(a,t){return t?(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t):a.slice()}function tt(a,t,e){let n,o;return n=t<a[0]?a[0]-t:a[2]<t?t-a[2]:0,o=e<a[1]?a[1]-e:a[3]<e?e-a[3]:0,n*n+o*o}function at(a,t){return Zt(a,t[0],t[1])}function pt(a,t){return a[0]<=t[0]&&t[2]<=a[2]&&a[1]<=t[1]&&t[3]<=a[3]}function Zt(a,t,e){return a[0]<=t&&t<=a[2]&&a[1]<=e&&e<=a[3]}function Xt(a,t){const f=t[0],g=t[1];let y=0;return f<a[0]?y|=16:f>a[2]&&(y|=4),g<a[1]?y|=8:g>a[3]&&(y|=2),0===y&&(y=1),y}function ie(a,t,e,n,o){return o?(o[0]=a,o[1]=t,o[2]=e,o[3]=n,o):[a,t,e,n]}function ge(a){return ie(1/0,1/0,-1/0,-1/0,a)}function ci(a,t){return a[0]==t[0]&&a[2]==t[2]&&a[1]==t[1]&&a[3]==t[3]}function ae(a,t){t[0]<a[0]&&(a[0]=t[0]),t[0]>a[2]&&(a[2]=t[0]),t[1]<a[1]&&(a[1]=t[1]),t[1]>a[3]&&(a[3]=t[1])}function fl(a,t,e,n,o){for(;e<n;e+=o)Cu(a,t[e],t[e+1]);return a}function Cu(a,t,e){a[0]=Math.min(a[0],t),a[1]=Math.min(a[1],e),a[2]=Math.max(a[2],t),a[3]=Math.max(a[3],e)}function gl(a,t){let e;return e=t(kn(a)),!!(e||(e=t(va(a)),e)||(e=t(En(a)),e)||(e=t(Ui(a)),e))&&e}function Mn(a){let t=0;return Fr(a)||(t=Kt(a)*$e(a)),t}function kn(a){return[a[0],a[1]]}function va(a){return[a[2],a[1]]}function Ds(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function Su(a,t){let e;return"bottom-left"===t?e=kn(a):"bottom-right"===t?e=va(a):"top-left"===t?e=Ui(a):"top-right"===t?e=En(a):Tt(!1,13),e}function Pr(a,t,e,n,o){const[c,f,g,y,w,S,M,I]=Or(a,t,e,n);return ie(Math.min(c,g,w,M),Math.min(f,y,S,I),Math.max(c,g,w,M),Math.max(f,y,S,I),o)}function Or(a,t,e,n){const o=t*n[0]/2,c=t*n[1]/2,f=Math.cos(e),g=Math.sin(e),y=o*f,w=o*g,S=c*f,M=c*g,I=a[0],F=a[1];return[I-y+M,F-w-S,I-y-M,F-w+S,I+y-M,F+w+S,I+y+M,F+w-S,I-y+M,F-w-S]}function $e(a){return a[3]-a[1]}function Ns(a,t,e){const n=e||[1/0,1/0,-1/0,-1/0];return Le(a,t)?(n[0]=a[0]>t[0]?a[0]:t[0],n[1]=a[1]>t[1]?a[1]:t[1],n[2]=a[2]<t[2]?a[2]:t[2],n[3]=a[3]<t[3]?a[3]:t[3]):ge(n),n}function Ui(a){return[a[0],a[3]]}function En(a){return[a[2],a[3]]}function Kt(a){return a[2]-a[0]}function Le(a,t){return a[0]<=t[2]&&a[2]>=t[0]&&a[1]<=t[3]&&a[3]>=t[1]}function Fr(a){return a[2]<a[0]||a[3]<a[1]}function pl(a,t){const e=t.getExtent(),n=Ds(a);if(t.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){const o=Kt(e),f=Math.floor((n[0]-e[0])/o)*o;a[0]-=f,a[2]-=f}return a}const ml=[];let zs=null;const xl=class Ru extends kr{constructor(t){super(t),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){let o;zs||function Iu(){const a=document.createElement("canvas");a.width=1,a.height=1,zs=a.getContext("2d")}(),zs.clearRect(0,0,1,1);try{zs.drawImage(t,e,n,1,1,0,0,1,1),o=zs.getImageData(0,0,1,1).data}catch{return zs=null,null}return o}getBackground(t){let n=this.getLayer().getBackground();return"function"==typeof n&&(n=n(t.viewState.resolution)),n||void 0}useContainer(t,e,n){const o=this.getLayer().getClassName();let c,f;if(t&&t.className===o&&(!n||t&&t.style.backgroundColor&&Q(v(t.style.backgroundColor),v(n)))){const g=t.firstElementChild;g instanceof HTMLCanvasElement&&(f=g.getContext("2d"))}if(f&&f.canvas.style.transform===e?(this.container=t,this.context=f,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){c=document.createElement("div"),c.className=o;let g=c.style;g.position="absolute",g.width="100%",g.height="100%",f=k();const y=f.canvas;c.appendChild(y),g=y.style,g.position="absolute",g.left="0",g.transformOrigin="top left",this.container=c,this.context=f}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const o=Ui(n),c=En(n),f=va(n),g=kn(n);ue(e.coordinateToPixelTransform,o),ue(e.coordinateToPixelTransform,c),ue(e.coordinateToPixelTransform,f),ue(e.coordinateToPixelTransform,g);const y=this.inversePixelTransform;ue(y,o),ue(y,c),ue(y,f),ue(y,g),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(c[0]),Math.round(c[1])),t.lineTo(Math.round(f[0]),Math.round(f[1])),t.lineTo(Math.round(g[0]),Math.round(g[1])),t.clip()}dispatchRenderEvent_(t,e,n){const o=this.getLayer();if(o.hasListener(t)){const c=new xn(t,this.inversePixelTransform,n,e);o.dispatchEvent(c)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_("prerender",t,e)}postRender(t,e){this.dispatchRenderEvent_("postrender",t,e)}getRenderTransform(t,e,n,o,c,f,g){const S=o/e;return We(this.tempTransform,c/2,f/2,S,-S,-n,-t[0]+g,-t[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}};function yl(a){return Math.pow(a,3)}function ps(a){return 1-yl(1-a)}function Dr(a){return 3*a*a-2*a*a*a}function Lu(a){return a}const vl=class Pu extends Qt{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent("change")}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){bt()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;const o=e-n+1e3/60;return o>=this.transition_?1:yl(o/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}};function Nr(a,t,e){const n=a;let o=!0,c=!1,f=!1;const g=[se(n,"load",function(){f=!0,c||t()})];return n.src&&bn?(c=!0,n.decode().then(function(){o&&t()}).catch(function(y){o&&(f?t():e())})):g.push(se(n,"error",e)),function(){o=!1,g.forEach(Lt)}}const bl=class Ou extends vl{constructor(t,e,n,o,c,f){super(t,e,f),this.crossOrigin_=o,this.src_=n,this.key=n,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.unlisten_=null,this.tileLoadFunction_=c}getImage(){return this.image_}setImage(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function Fu(){const a=k(1,1);return a.fillStyle="rgba(0,0,0,0)",a.fillRect(0,0,1,1),a.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;this.state=t.naturalWidth&&t.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Nr(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}},Zi={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},Tn=class zu{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Zi[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},ba=6378137,Xs=Math.PI*ba,Xu=[-Xs,-Xs,Xs,Xs],Yu=[-180,-85,180,85],In=ba*Math.log(Math.tan(Math.PI/2));class Ys extends Tn{constructor(t){super({code:t,units:"m",extent:Xu,global:!0,worldExtent:Yu,getPointResolution:function(e,n){return e/Math.cosh(n[1]/ba)}})}}const wl=[new Ys("EPSG:3857"),new Ys("EPSG:102100"),new Ys("EPSG:102113"),new Ys("EPSG:900913"),new Ys("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ys("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Wu(a,t,e){const n=a.length;e=e>1?e:2,void 0===t&&(t=e>2?a.slice():new Array(n));for(let o=0;o<n;o+=e){t[o]=Xs*a[o]/180;let c=ba*Math.log(Math.tan(Math.PI*(+a[o+1]+90)/360));c>In?c=In:c<-In&&(c=-In),t[o+1]=c}return t}function Bu(a,t,e){const n=a.length;e=e>1?e:2,void 0===t&&(t=e>2?a.slice():new Array(n));for(let o=0;o<n;o+=e)t[o]=180*a[o]/Xs,t[o+1]=360*Math.atan(Math.exp(a[o+1]/ba))/Math.PI-90;return t}const _l=[-180,-90,180,90],Hu=6378137*Math.PI/180;class ms extends Tn{constructor(t,e){super({code:t,units:"degrees",extent:_l,axisOrientation:e,global:!0,metersPerUnit:Hu,worldExtent:_l})}}const Cl=[new ms("CRS:84"),new ms("EPSG:4326","neu"),new ms("urn:ogc:def:crs:OGC:1.3:CRS84"),new ms("urn:ogc:def:crs:OGC:2:84"),new ms("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ms("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ms("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Rn={},ti={};function Ws(a,t,e){const n=a.getCode(),o=t.getCode();n in ti||(ti[n]={}),ti[n][o]=e}function Sl(a,t){let e;return a in ti&&t in ti[a]&&(e=ti[a][t]),e}function Ln(a,t){let e=!0;for(let n=a.length-1;n>=0;--n)if(a[n]!=t[n]){e=!1;break}return e}function zr(a,t){const e=Math.cos(t),n=Math.sin(t),c=a[1]*e+a[0]*n;return a[0]=a[0]*e-a[1]*n,a[1]=c,a}function kl(a,t){if(t.canWrapX()){const e=Kt(t.getExtent()),n=El(a,t,e);n&&(a[0]-=n*e)}return a}function El(a,t,e){const n=t.getExtent();let o=0;return t.canWrapX()&&(a[0]<n[0]||a[0]>n[2])&&(e=e||Kt(n),o=Math.floor((a[0]-n[0])/e)),o}function Xr(a,t,e){e=e||6371008.8;const n=Hi(a[1]),o=Hi(t[1]),c=(o-n)/2,f=Hi(t[0]-a[0])/2,g=Math.sin(c)*Math.sin(c)+Math.sin(f)*Math.sin(f)*Math.cos(n)*Math.cos(o);return 2*e*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))}let Wr=!0;function Tl(a){Wr=!(void 0===a||a)}function Br(a,t,e){if(void 0!==t)for(let n=0,o=a.length;n<o;++n)t[n]=a[n];else t=a.slice();return t}function Gr(a,t,e){if(void 0!==t&&a!==t){for(let n=0,o=a.length;n<o;++n)t[n]=a[n];a=t}return a}function Il(a){(function ju(a,t){Rn[a]=t})(a.getCode(),a),Ws(a,a,Br)}function ne(a){return"string"==typeof a?function Vu(a){return Rn[a]||Rn[a.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(a):a||null}function Fn(a,t,e,n){let o;const c=(a=ne(a)).getPointResolutionFunc();if(c){if(o=c(t,e),n&&n!==a.getUnits()){const f=a.getMetersPerUnit();f&&(o=o*f/Zi[n])}}else{const f=a.getUnits();if("degrees"==f&&!n||"degrees"==n)o=t;else{const g=xs(a,ne("EPSG:4326"));if(g===Gr&&"degrees"!==f)o=t*a.getMetersPerUnit();else{let w=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];w=g(w,w,2),o=(Xr(w.slice(0,2),w.slice(2,4))+Xr(w.slice(4,6),w.slice(6,8)))/2}const y=n?Zi[n]:a.getMetersPerUnit();void 0!==y&&(o/=y)}}return o}function Hr(a){(function td(a){a.forEach(Il)})(a),a.forEach(function(t){a.forEach(function(e){t!==e&&Ws(t,e,Br)})})}function Vr(a,t){return a?"string"==typeof a?ne(a):a:ne(t)}function Rl(a){return function(t,e,n){const o=t.length;n=void 0!==n?n:2,e=void 0!==e?e:new Array(o);for(let c=0;c<o;c+=n){const f=a(t.slice(c,c+n)),g=f.length;for(let y=0,w=n;y<w;++y)e[c+y]=y>=g?t[c+y]:f[y]}return e}}function id(a,t,e,n){const o=ne(a),c=ne(t);Ws(o,c,Rl(e)),Ws(c,o,Rl(n))}function jr(a,t){return Tl(),Gs(a,"EPSG:4326",void 0!==t?t:"EPSG:3857")}function Bs(a,t){if(a===t)return!0;const e=a.getUnits()===t.getUnits();return(a.getCode()===t.getCode()||xs(a,t)===Br)&&e}function xs(a,t){let o=Sl(a.getCode(),t.getCode());return o||(o=Gr),o}function wa(a,t){return xs(ne(a),ne(t))}function Gs(a,t,e){return wa(t,e)(a,void 0,a.length)}function Ur(a,t,e,n){return function Eu(a,t,e,n){let o=[];if(n>1){const g=a[2]-a[0],y=a[3]-a[1];for(let w=0;w<n;++w)o.push(a[0]+g*w/n,a[1],a[2],a[1]+y*w/n,a[2]-g*w/n,a[3],a[0],a[3]-y*w/n)}else o=[a[0],a[1],a[2],a[1],a[2],a[3],a[0],a[3]];t(o,o,2);const c=[],f=[];for(let g=0,y=o.length;g<y;g+=2)c.push(o[g]),f.push(o[g+1]);return function J(a,t,e){return ie(Math.min.apply(null,a),Math.min.apply(null,t),Math.max.apply(null,a),Math.max.apply(null,t),e)}(c,f,e)}(a,wa(t,e),void 0,n)}let Me=null;function Zr(){return Me}function qr(a,t){return a}function ki(a,t){return Wr&&!Ln(a,[0,0])&&a[0]>=-180&&a[0]<=180&&a[1]>=-90&&a[1]<=90&&(Wr=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),a}function Kr(a,t){return a}function ys(a,t){return a}function Ll(a,t,e){return function(n){let o,c;if(a.canWrapX()){const f=a.getExtent(),g=Kt(f);c=El(n=n.slice(0),a,g),c&&(n[0]=n[0]-c*g),n[0]=Ut(n[0],f[0],f[2]),n[1]=Ut(n[1],f[1],f[3]),o=e(n)}else o=e(n);return c&&t.canWrapX()&&(o[0]+=c*Kt(t.getExtent())),o}}!function nd(){Hr(wl),Hr(Cl),function ed(a,t,e,n){a.forEach(function(o){t.forEach(function(c){Ws(o,c,e),Ws(c,o,n)})})}(Cl,wl,Wu,Bu)}();let Jr;const Ol=[];function Fl(a,t,e,n,o){a.beginPath(),a.moveTo(0,0),a.lineTo(t,e),a.lineTo(n,o),a.closePath(),a.save(),a.clip(),a.fillRect(0,0,Math.max(t,n)+1,Math.max(e,o)),a.restore()}function Qr(a,t){return Math.abs(a[4*t]-210)>2||Math.abs(a[4*t+3]-191.25)>2}function $r(a,t,e,n){const o=Gs(e,t,a);let c=Fn(t,n,e);const f=t.getMetersPerUnit();void 0!==f&&(c*=f);const g=a.getMetersPerUnit();void 0!==g&&(c/=g);const y=a.getExtent();if(!y||at(y,o)){const w=Fn(a,c,o)/c;isFinite(w)&&w>0&&(c/=w)}return c}const to=class dd extends vl{constructor(t,e,n,o,c,f,g,y,w,S,M,I){super(c,0,{interpolate:!!I}),this.renderEdges_=void 0!==M&&M,this.pixelRatio_=g,this.gutter_=y,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=o,this.wrappedTileCoord_=f||c,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const F=o.getTileCoordExtent(this.wrappedTileCoord_),D=this.targetTileGrid_.getExtent();let X=this.sourceTileGrid_.getExtent();const Y=D?Ns(F,D):F;if(0===Mn(Y))return void(this.state=4);const G=t.getExtent();G&&(X=X?Ns(X,G):G);const V=o.getResolution(this.wrappedTileCoord_[0]),j=function cd(a,t,e,n){const o=Ds(e);let c=$r(a,t,o,n);return(!isFinite(c)||c<=0)&&gl(e,function(f){return c=$r(a,t,f,n),isFinite(c)&&c>0}),c}(t,n,Y,V);if(!isFinite(j)||j<=0)return void(this.state=4);if(this.triangulation_=new class od{constructor(t,e,n,o,c,f){this.sourceProj_=t,this.targetProj_=e;let g={};const y=wa(this.targetProj_,this.sourceProj_);this.transformInv_=function(V){const j=V[0]+"/"+V[1];return g[j]||(g[j]=y(V)),g[j]},this.maxSourceExtent_=o,this.errorThresholdSquared_=c*c,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&Kt(o)==Kt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Kt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Kt(this.targetProj_.getExtent()):null;const w=Ui(n),S=En(n),M=va(n),I=kn(n),F=this.transformInv_(w),D=this.transformInv_(S),X=this.transformInv_(M),Y=this.transformInv_(I),G=10+(f?Math.max(0,Math.ceil(Math.log2(Mn(n)/(f*f*256*256)))):0);if(this.addQuad_(w,S,M,I,F,D,X,Y,G),this.wrapsXInSource_){let V=1/0;this.triangles_.forEach(function(j,Z,$){V=Math.min(V,j.source[0][0],j.source[1][0],j.source[2][0])}),this.triangles_.forEach(function(j){if(Math.max(j.source[0][0],j.source[1][0],j.source[2][0])-V>this.sourceWorldWidth_/2){const Z=[[j.source[0][0],j.source[0][1]],[j.source[1][0],j.source[1][1]],[j.source[2][0],j.source[2][1]]];Z[0][0]-V>this.sourceWorldWidth_/2&&(Z[0][0]-=this.sourceWorldWidth_),Z[1][0]-V>this.sourceWorldWidth_/2&&(Z[1][0]-=this.sourceWorldWidth_),Z[2][0]-V>this.sourceWorldWidth_/2&&(Z[2][0]-=this.sourceWorldWidth_);const $=Math.min(Z[0][0],Z[1][0],Z[2][0]);Math.max(Z[0][0],Z[1][0],Z[2][0])-$<this.sourceWorldWidth_/2&&(j.source=Z)}}.bind(this))}g={}}addTriangle_(t,e,n,o,c,f){this.triangles_.push({source:[o,c,f],target:[t,e,n]})}addQuad_(t,e,n,o,c,f,g,y,w){const S=W([c,f,g,y]),M=this.sourceWorldWidth_?Kt(S)/this.sourceWorldWidth_:null,I=this.sourceWorldWidth_,F=this.sourceProj_.canWrapX()&&M>.5&&M<1;let D=!1;if(w>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(D=Kt(W([t,e,n,o]))/this.targetWorldWidth_>.25||D),!F&&this.sourceProj_.isGlobal()&&M&&(D=M>.25||D)),!D&&this.maxSourceExtent_&&isFinite(S[0])&&isFinite(S[1])&&isFinite(S[2])&&isFinite(S[3])&&!Le(S,this.maxSourceExtent_))return;let X=0;if(!(D||isFinite(c[0])&&isFinite(c[1])&&isFinite(f[0])&&isFinite(f[1])&&isFinite(g[0])&&isFinite(g[1])&&isFinite(y[0])&&isFinite(y[1])))if(w>0)D=!0;else if(X=(isFinite(c[0])&&isFinite(c[1])?0:8)+(isFinite(f[0])&&isFinite(f[1])?0:4)+(isFinite(g[0])&&isFinite(g[1])?0:2)+(isFinite(y[0])&&isFinite(y[1])?0:1),1!=X&&2!=X&&4!=X&&8!=X)return;if(w>0){if(!D){const G=this.transformInv_([(t[0]+n[0])/2,(t[1]+n[1])/2]);let V;V=F?(Si(c[0],I)+Si(g[0],I))/2-Si(G[0],I):(c[0]+g[0])/2-G[0];const j=(c[1]+g[1])/2-G[1];D=V*V+j*j>this.errorThresholdSquared_}if(D){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const Y=[(e[0]+n[0])/2,(e[1]+n[1])/2],G=this.transformInv_(Y),V=[(o[0]+t[0])/2,(o[1]+t[1])/2],j=this.transformInv_(V);this.addQuad_(t,e,Y,V,c,f,G,j,w-1),this.addQuad_(V,Y,n,o,j,G,g,y,w-1)}else{const Y=[(t[0]+e[0])/2,(t[1]+e[1])/2],G=this.transformInv_(Y),V=[(n[0]+o[0])/2,(n[1]+o[1])/2],j=this.transformInv_(V);this.addQuad_(t,Y,V,o,c,G,j,y,w-1),this.addQuad_(Y,e,n,V,G,f,g,j,w-1)}return}}if(F){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&X)&&this.addTriangle_(t,n,o,c,g,y),0==(14&X)&&this.addTriangle_(t,n,e,c,g,f),X&&(0==(13&X)&&this.addTriangle_(e,o,t,f,y,c),0==(7&X)&&this.addTriangle_(e,o,n,f,y,g))}calculateSourceExtent(){const t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,n,o){const c=e.source;ae(t,c[0]),ae(t,c[1]),ae(t,c[2])}),t}getTriangles(){return this.triangles_}}(t,n,Y,X,j*(void 0!==S?S:.5),V),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=e.getZForResolution(j);let $=this.triangulation_.calculateSourceExtent();if(X&&(t.canWrapX()?($[1]=Ut($[1],X[1],X[3]),$[3]=Ut($[3],X[1],X[3])):$=Ns($,X)),Mn($)){const it=e.getTileRangeForExtentAndZ($,this.sourceZ_);for(let ut=it.minX;ut<=it.maxX;ut++)for(let ht=it.minY;ht<=it.maxY;ht++){const vt=w(this.sourceZ_,ut,ht,g);vt&&this.sourceTiles_.push(vt)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(function(e,n,o){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),o="number"==typeof n?n:n[0],c="number"==typeof n?n:n[1],f=this.targetTileGrid_.getResolution(e),g=this.sourceTileGrid_.getResolution(this.sourceZ_),y=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function ud(a,t,e,n,o,c,f,g,y,w,S,M){const I=k(Math.round(e*a),Math.round(e*t),Ol);if(M||(I.imageSmoothingEnabled=!1),0===y.length)return I.canvas;function F(Z){return Math.round(Z*e)/e}I.scale(e,e),I.globalCompositeOperation="lighter";const D=[1/0,1/0,-1/0,-1/0];y.forEach(function(Z,$,it){!function we(a,t){t[0]<a[0]&&(a[0]=t[0]),t[2]>a[2]&&(a[2]=t[2]),t[1]<a[1]&&(a[1]=t[1]),t[3]>a[3]&&(a[3]=t[3])}(D,Z.extent)});const X=Kt(D),Y=$e(D),G=k(Math.round(e*X/n),Math.round(e*Y/n));M||(G.imageSmoothingEnabled=!1);const V=e/n;y.forEach(function(Z,$,it){const ut=Z.extent[0]-D[0],ht=-(Z.extent[3]-D[3]),vt=Kt(Z.extent),Ct=$e(Z.extent);Z.image.width>0&&Z.image.height>0&&G.drawImage(Z.image,w,w,Z.image.width-2*w,Z.image.height-2*w,ut*V,ht*V,vt*V,Ct*V)});const j=Ui(f);return g.getTriangles().forEach(function(Z,$,it){const ut=Z.source,ht=Z.target;let vt=ut[0][0],Ct=ut[0][1],Pt=ut[1][0],Nt=ut[1][1],Rt=ut[2][0],de=ut[2][1];const Ft=F((ht[0][0]-j[0])/c),mt=F(-(ht[0][1]-j[1])/c),xt=F((ht[1][0]-j[0])/c),_t=F(-(ht[1][1]-j[1])/c),$t=F((ht[2][0]-j[0])/c),te=F(-(ht[2][1]-j[1])/c),me=vt,nt=Ct;vt=0,Ct=0,Pt-=me,Nt-=nt,Rt-=me,de-=nt;const Ht=function Gi(a){const t=a.length;for(let n=0;n<t;n++){let o=n,c=Math.abs(a[n][n]);for(let g=n+1;g<t;g++){const y=Math.abs(a[g][n]);y>c&&(c=y,o=g)}if(0===c)return null;const f=a[o];a[o]=a[n],a[n]=f;for(let g=n+1;g<t;g++){const y=-a[g][n]/a[n][n];for(let w=n;w<t+1;w++)n==w?a[g][w]=0:a[g][w]+=y*a[n][w]}}const e=new Array(t);for(let n=t-1;n>=0;n--){e[n]=a[n][t]/a[n][n];for(let o=n-1;o>=0;o--)a[o][t]-=a[o][n]*e[n]}return e}([[Pt,Nt,0,0,xt-Ft],[Rt,de,0,0,$t-Ft],[0,0,Pt,Nt,_t-mt],[0,0,Rt,de,te-mt]]);if(Ht){if(I.save(),I.beginPath(),function hd(){if(void 0===Jr){const a=document.createElement("canvas").getContext("2d");a.globalCompositeOperation="lighter",a.fillStyle="rgba(210, 0, 0, 0.75)",Fl(a,4,5,4,0),Fl(a,4,5,0,5);const t=a.getImageData(0,0,3,3).data;Jr=Qr(t,0)||Qr(t,4)||Qr(t,8)}return Jr}()||!M){I.moveTo(xt,_t);const Jt=4,rs=Ft-xt,bi=mt-_t;for(let be=0;be<Jt;be++)I.lineTo(xt+F((be+1)*rs/Jt),_t+F(be*bi/(Jt-1))),be!=Jt-1&&I.lineTo(xt+F((be+1)*rs/Jt),_t+F((be+1)*bi/(Jt-1)));I.lineTo($t,te)}else I.moveTo(xt,_t),I.lineTo(Ft,mt),I.lineTo($t,te);I.clip(),I.transform(Ht[0],Ht[2],Ht[1],Ht[3],Ft,mt),I.translate(D[0]-me,D[3]-nt),I.scale(n/e,-n/e),I.drawImage(G.canvas,0,0),I.restore()}}),S&&(I.save(),I.globalCompositeOperation="source-over",I.strokeStyle="black",I.lineWidth=1,g.getTriangles().forEach(function(Z,$,it){const ut=Z.target,ht=(ut[0][0]-j[0])/c,vt=-(ut[0][1]-j[1])/c,Ct=(ut[1][0]-j[0])/c,Pt=-(ut[1][1]-j[1])/c,Nt=(ut[2][0]-j[0])/c,Rt=-(ut[2][1]-j[1])/c;I.beginPath(),I.moveTo(Ct,Pt),I.lineTo(ht,vt),I.lineTo(Nt,Rt),I.closePath(),I.stroke()}),I.restore()),I.canvas}(o,c,this.pixelRatio_,g,this.sourceTileGrid_.getExtent(),f,y,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,o){const c=e.getState();if(0==c||1==c){t++;const f=At(e,"change",function(g){const y=e.getState();(2==y||3==y||4==y)&&(Lt(f),t--,0===t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(f)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,n,o){0==e.getState()&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Lt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(R(this.canvas_.getContext("2d")),Ol.push(this.canvas_),this.canvas_=null),super.release()}};class Dl{constructor(t,e,n,o){this.minX=t,this.maxX=e,this.minY=n,this.maxY=o}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Hs(a,t,e,n,o){return void 0!==o?(o.minX=a,o.maxX=t,o.minY=e,o.maxY=n,o):new Dl(a,t,e,n)}const Nl=Dl;function zl(a,t,e){return void 0===e&&(e=[0,0]),e[0]=a[0]+2*t,e[1]=a[1]+2*t,e}function Xl(a){return a[0]>0&&a[1]>0}function Yl(a,t,e){return void 0===e&&(e=[0,0]),e[0]=a[0]*t+.5|0,e[1]=a[1]*t+.5|0,e}function ke(a,t){return Array.isArray(a)?a:(void 0===t?t=[a,a]:(t[0]=a,t[1]=a),t)}const gd=class fd extends xl{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new Nl(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),o=e.getUseInterimTilesOnError();return 2==n||4==n||3==n&&!o}getTile(t,e,n,o){const c=o.pixelRatio,f=o.viewState.projection,g=this.getLayer();let w=g.getSource().getTile(t,e,n,c,f);return 3==w.getState()&&g.getUseInterimTilesOnError()&&g.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(w)||(w=w.getInterimTile()),w}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),o=ue(e.pixelToCoordinateTransform,t.slice()),c=n.getExtent();if(c&&!at(c,o))return null;const f=e.pixelRatio,g=e.viewState.projection,y=e.viewState,w=n.getRenderSource(),S=w.getTileGridForProjection(y.projection),M=w.getTilePixelRatio(e.pixelRatio);for(let I=S.getZForResolution(y.resolution);I>=S.getMinZoom();--I){const F=S.getTileCoordForCoordAndZ(o,I),D=w.getTile(I,F[1],F[2],f,g);if(!(D instanceof bl||D instanceof to)||D instanceof to&&4===D.getState())return null;if(2!==D.getState())continue;const X=S.getOrigin(I),Y=ke(S.getTileSize(I)),G=S.getResolution(I),V=Math.floor(M*((o[0]-X[0])/G-F[1]*Y[0])),j=Math.floor(M*((X[1]-o[1])/G-F[2]*Y[1])),Z=Math.round(M*w.getGutterForProjection(y.projection));return this.getImageData(D.getImage(),V+Z,j+Z)}return null}loadedTileCallback(t,e,n){return!!this.isDrawableTile(n)&&super.loadedTileCallback(t,e,n)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],o=t.viewState,c=o.projection,f=o.resolution,g=o.center,y=o.rotation,w=t.pixelRatio,S=this.getLayer(),M=S.getSource(),I=M.getRevision(),F=M.getTileGridForProjection(c),D=F.getZForResolution(f,M.zDirection),X=F.getResolution(D);let Y=t.extent;const G=t.viewState.resolution,V=M.getTilePixelRatio(w),j=Math.round(Kt(Y)/G*w),Z=Math.round($e(Y)/G*w),$=n.extent&&ys(n.extent);$&&(Y=Ns(Y,ys(n.extent)));const it=X*j/2/V,ut=X*Z/2/V,ht=[g[0]-it,g[1]-ut,g[0]+it,g[1]+ut],vt=F.getTileRangeForExtentAndZ(Y,D),Ct={};Ct[D]={};const Pt=this.createLoadedTileFinder(M,c,Ct),Nt=this.tmpExtent,Rt=this.tmpTileRange_;this.newTiles_=!1;const de=y?Or(o.center,G,y,t.size):void 0;for(let He=vt.minX;He<=vt.maxX;++He)for(let Ht=vt.minY;Ht<=vt.maxY;++Ht){if(y&&!F.tileCoordIntersectsViewport([D,He,Ht],de))continue;const Jt=this.getTile(D,He,Ht,t);if(this.isDrawableTile(Jt)){const be=Dt(this);if(2==Jt.getState()){Ct[D][Jt.tileCoord.toString()]=Jt;let Ni=Jt.inTransition(be);Ni&&1!==n.opacity&&(Jt.endTransition(be),Ni=!1),!this.newTiles_&&(Ni||!this.renderedTiles.includes(Jt))&&(this.newTiles_=!0)}if(1===Jt.getAlpha(be,t.time))continue}const rs=F.getTileCoordChildTileRange(Jt.tileCoord,Rt,Nt);let bi=!1;rs&&(bi=Pt(D+1,rs)),bi||F.forEachTileCoordParentTileRange(Jt.tileCoord,Pt,Rt,Nt)}const Ft=X/f*w/V;We(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/w,1/w,y,-j/2,-Z/2);const mt=l(this.pixelTransform);this.useContainer(e,mt,this.getBackground(t));const xt=this.context,_t=xt.canvas;i(this.inversePixelTransform,this.pixelTransform),We(this.tempTransform,j/2,Z/2,Ft,Ft,0,-j/2,-Z/2),_t.width!=j||_t.height!=Z?(_t.width=j,_t.height=Z):this.containerReused||xt.clearRect(0,0,j,Z),$&&this.clipUnrotated(xt,t,$),M.getInterpolate()||(xt.imageSmoothingEnabled=!1),this.preRender(xt,t),this.renderedTiles.length=0;let te,me,nt,$t=Object.keys(Ct).map(Number);$t.sort(Ie),1!==n.opacity||this.containerReused&&!M.getOpaque(t.viewState.projection)?(te=[],me=[]):$t=$t.reverse();for(let He=$t.length-1;He>=0;--He){const Ht=$t[He],Jt=M.getTilePixelSize(Ht,w,c),bi=F.getResolution(Ht)/X,be=Jt[0]*bi*Ft,Ni=Jt[1]*bi*Ft,la=F.getTileCoordForCoordAndZ(Ui(ht),Ht),pr=F.getTileCoordExtent(la),ha=ue(this.tempTransform,[V*(pr[0]-ht[0])/X,V*(ht[3]-pr[3])/X]),mr=V*M.getGutterForProjection(c),os=Ct[Ht];for(const nn in os){const ls=os[nn],xr=ls.tileCoord,yr=la[1]-xr[1],vr=Math.round(ha[0]-(yr-1)*be),ca=la[2]-xr[2],nl=Math.round(ha[1]-(ca-1)*Ni),De=Math.round(ha[0]-yr*be),Ke=Math.round(ha[1]-ca*Ni),ai=vr-De,zi=nl-Ke,ua=D===Ht,Ts=ua&&1!==ls.getAlpha(Dt(this),t.time);let hs=!1;if(!Ts)if(te){nt=[De,Ke,De+ai,Ke,De+ai,Ke+zi,De,Ke+zi];for(let da=0,br=te.length;da<br;++da)if(D!==Ht&&Ht<me[da]){const Te=te[da];Le([De,Ke,De+ai,Ke+zi],[Te[0],Te[3],Te[4],Te[7]])&&(hs||(xt.save(),hs=!0),xt.beginPath(),xt.moveTo(nt[0],nt[1]),xt.lineTo(nt[2],nt[3]),xt.lineTo(nt[4],nt[5]),xt.lineTo(nt[6],nt[7]),xt.moveTo(Te[6],Te[7]),xt.lineTo(Te[4],Te[5]),xt.lineTo(Te[2],Te[3]),xt.lineTo(Te[0],Te[1]),xt.clip())}te.push(nt),me.push(Ht)}else xt.clearRect(De,Ke,ai,zi);this.drawTileImage(ls,t,De,Ke,ai,zi,mr,ua),te&&!Ts?(hs&&xt.restore(),this.renderedTiles.unshift(ls)):this.renderedTiles.push(ls),this.updateUsedTiles(t.usedTiles,M,ls)}}return this.renderedRevision=I,this.renderedResolution=X,this.extentChanged=!this.renderedExtent_||!ci(this.renderedExtent_,ht),this.renderedExtent_=ht,this.renderedPixelRatio=w,this.renderedProjection=c,this.manageTilePyramid(t,M,F,w,c,Y,D,S.getPreload()),this.scheduleExpireCache(t,M),this.postRender(xt,t),n.extent&&xt.restore(),xt.imageSmoothingEnabled=!0,mt!==_t.style.transform&&(_t.style.transform=mt),this.container}drawTileImage(t,e,n,o,c,f,g,y){const w=this.getTileImage(t);if(!w)return;const S=Dt(this),M=e.layerStatesArray[e.layerIndex],I=M.opacity*(y?t.getAlpha(S,e.time):1),F=I!==this.context.globalAlpha;F&&(this.context.save(),this.context.globalAlpha=I),this.context.drawImage(w,g,g,w.width-2*g,w.height-2*g,n,o,c,f),F&&this.context.restore(),I!==M.opacity?e.animate=!0:y&&t.endTransition(S)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=function(o,c,f){const g=Dt(o);g in f.usedTiles&&o.expireCache(f.viewState.projection,f.usedTiles[g])}.bind(null,e);t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const o=Dt(e);o in t||(t[o]={}),t[o][n.getKey()]=!0}manageTilePyramid(t,e,n,o,c,f,g,y,w){const S=Dt(e);S in t.wantedTiles||(t.wantedTiles[S]={});const M=t.wantedTiles[S],I=t.tileQueue,F=n.getMinZoom(),D=t.viewState.rotation,X=D?Or(t.viewState.center,t.viewState.resolution,D,t.size):void 0;let G,V,j,Z,$,it,Y=0;for(it=F;it<=g;++it)for(V=n.getTileRangeForExtentAndZ(f,it,V),j=n.getResolution(it),Z=V.minX;Z<=V.maxX;++Z)for($=V.minY;$<=V.maxY;++$)D&&!n.tileCoordIntersectsViewport([it,Z,$],X)||(g-it<=y?(++Y,G=e.getTile(it,Z,$,o,c),0==G.getState()&&(M[G.getKey()]=!0,I.isKeyQueued(G.getKey())||I.enqueue([G,S,n.getTileCoordCenter(G.tileCoord),j])),void 0!==w&&w(G)):e.useTile(it,Z,$,c));e.updateCacheSize(Y,c)}},eo=class pd extends gn{constructor(t){super(t)}createRenderer(){return new gd(this)}};function Wl(a,t,e,n){return void 0!==n?(n[0]=a,n[1]=t,n[2]=e,n):[a,t,e]}function _a(a,t,e){return a+"/"+t+"/"+e}function Bl(a){return _a(a[0],a[1],a[2])}function Gl(a){return(a[1]<<a[0])+a[2]}const Hl=class bd extends class md{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return Tt(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return Tt(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let n,e=0;for(n=this.newest_;n;n=n.older)t[e++]=n.key_;return t}getValues(){const t=new Array(this.count_);let n,e=0;for(n=this.newest_;n;n=n.older)t[e++]=n.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){Tt(!(t in this.entries_),16);const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const n=function yd(a){return a.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(o){o.tileCoord[0]!==n&&(this.remove(Bl(o.tileCoord)),o.release())}.bind(this))}};function Vl(a){return a?Array.isArray(a)?function(t){return a}:"function"==typeof a?a:function(t){return[a]}:null}const jl=class wd extends ye{constructor(t){super(),this.projection=ne(t.projection),this.attributions_=Vl(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(n,o){e.viewResolver=n,e.viewRejector=o})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return bt()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Vl(t),this.changed()}setState(t){this.state_=t,this.changed()}};function Sd(a,t,e,n,o){return!gl(o,function(f){return!vs(a,t,e,n,f[0],f[1])})}function vs(a,t,e,n,o,c){let f=0,g=a[e-n],y=a[e-n+1];for(;t<e;t+=n){const w=a[t],S=a[t+1];y<=c?S>c&&(w-g)*(c-y)-(o-g)*(S-y)>0&&f++:S<=c&&(w-g)*(c-y)-(o-g)*(S-y)<0&&f--,g=w,y=S}return 0!==f}function ao(a,t,e,n,o,c){if(0===e.length||!vs(a,t,e[0],n,o,c))return!1;for(let f=1,g=e.length;f<g;++f)if(vs(a,e[f-1],e[f],n,o,c))return!1;return!0}function no(a,t,e,n,o){const c=fl([1/0,1/0,-1/0,-1/0],a,t,e,n);return!!Le(o,c)&&(!!(pt(o,c)||c[0]>=o[0]&&c[2]<=o[2]||c[1]>=o[1]&&c[3]<=o[3])||function Cd(a,t,e,n,o){let c;for(t+=n;t<e;t+=n)if(c=o(a.slice(t-n,t),a.slice(t,t+n)),c)return c;return!1}(a,t,e,n,function(f,g){return function ku(a,t,e){let n=!1;const o=Xt(a,t),c=Xt(a,e);if(1===o||1===c)n=!0;else{const f=a[0],g=a[1],y=a[2],w=a[3],I=e[0],F=e[1],D=(F-t[1])/(I-t[0]);let X,Y;!!(2&c)&&!(2&o)&&(X=I-(F-w)/D,n=X>=f&&X<=y),!n&&!!(4&c)&&!(4&o)&&(Y=F-(I-y)*D,n=Y>=g&&Y<=w),!n&&!!(8&c)&&!(8&o)&&(X=I-(F-g)/D,n=X>=f&&X<=y),!n&&16&c&&!(16&o)&&(Y=F-(I-f)*D,n=Y>=g&&Y<=w)}return n}(o,f,g)}))}function Ul(a,t,e,n,o){return!!(no(a,t,e,n,o)||vs(a,t,e,n,o[0],o[1])||vs(a,t,e,n,o[0],o[3])||vs(a,t,e,n,o[2],o[1])||vs(a,t,e,n,o[2],o[3]))}const Ad=[0,0,0],ql=class Md{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Tt(function B(a,t,e){const n=t||Ie;return a.every(function(o,c){if(0===c)return!0;const f=n(a[c-1],o);return!(f>0||e&&0===f)})}(this.resolutions_,function(o,c){return c-o},!0),17),!t.origins)for(let o=0,c=this.resolutions_.length-1;o<c;++o)if(e){if(this.resolutions_[o]/this.resolutions_[o+1]!==e){e=void 0;break}}else e=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Tt(this.origins_.length==this.resolutions_.length,20));const n=t.extent;void 0!==n&&!this.origin_&&!this.origins_&&(this.origin_=Ui(n)),Tt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Tt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,Tt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(o,c){const f=new Nl(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(n){const g=this.getTileRangeForExtentAndZ(n,c);f.minX=Math.max(g.minX,f.minX),f.maxX=Math.min(g.maxX,f.maxX),f.minY=Math.max(g.minY,f.minY),f.maxY=Math.min(g.maxY,f.maxY)}return f},this):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const o=this.getTileRangeForExtentAndZ(t,e);for(let c=o.minX,f=o.maxX;c<=f;++c)for(let g=o.minY,y=o.maxY;g<=y;++g)n([e,c,g])}forEachTileCoordParentTileRange(t,e,n,o){let c,f,g,y=null,w=t[0]-1;for(2===this.zoomFactor_?(f=t[1],g=t[2]):y=this.getTileCoordExtent(t,o);w>=this.minZoom;){if(2===this.zoomFactor_?(f=Math.floor(f/2),g=Math.floor(g/2),c=Hs(f,f,g,g,n)):c=this.getTileRangeForExtentAndZ(y,w,n),e(w,c))return!0;--w}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const c=2*t[1],f=2*t[2];return Hs(c,c+1,f,f+1,e)}const o=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const o=t[0],c=t[1],f=t[2];if(e===o)return Hs(c,f,c,f,n);if(this.zoomFactor_){const y=Math.pow(this.zoomFactor_,e-o),w=Math.floor(c*y),S=Math.floor(f*y);return e<o?Hs(w,w,S,S,n):Hs(w,Math.floor(y*(c+1))-1,S,Math.floor(y*(f+1))-1,n)}const g=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(g,e,n)}getTileRangeExtent(t,e,n){const o=this.getOrigin(t),c=this.getResolution(t),f=ke(this.getTileSize(t),this.tmpSize_);return ie(o[0]+e.minX*f[0]*c,o[1]+e.minY*f[1]*c,o[0]+(e.maxX+1)*f[0]*c,o[1]+(e.maxY+1)*f[1]*c,n)}getTileRangeForExtentAndZ(t,e,n){const o=Ad;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,o);const c=o[1],f=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,o),Hs(c,o[1],f,o[2],n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=ke(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*o[0]*n,e[1]-(t[2]+.5)*o[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),o=this.getResolution(t[0]),c=ke(this.getTileSize(t[0]),this.tmpSize_),f=n[0]+t[1]*c[0]*o,g=n[1]-(t[2]+1)*c[1]*o;return ie(f,g,f+c[0]*o,g+c[1]*o,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,o,c){const f=this.getZForResolution(n),g=n/this.getResolution(f),y=this.getOrigin(f),w=ke(this.getTileSize(f),this.tmpSize_);let S=g*(t-y[0])/n/w[0],M=g*(y[1]-e)/n/w[1];return o?(S=Ps(S,5)-1,M=Ps(M,5)-1):(S=Ls(S,5),M=Ls(M,5)),Wl(f,S,M,c)}getTileCoordForXYAndZ_(t,e,n,o,c){const f=this.getOrigin(n),g=this.getResolution(n),y=ke(this.getTileSize(n),this.tmpSize_);let w=(t-f[0])/g/y[0],S=(f[1]-e)/g/y[1];return o?(w=Ps(w,5)-1,S=Ps(S,5)-1):(w=Ls(w,5),S=Ls(S,5)),Wl(n,w,S,c)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){return Ut(ni(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return Ul(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let o=this.minZoom;o<e;++o)n[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=n}};function Kl(a){let t=a.getDefaultTileGrid();return t||(t=function Id(a,t,e,n){return function Ed(a,t,e,n){n=void 0!==n?n:"top-left";const o=Jl(a,t,e);return new ql({extent:a,origin:Su(a,n),resolutions:o,tileSize:e})}(ro(a),t,e,n)}(a),a.setDefaultTileGrid(t)),t}function Jl(a,t,e,n){t=void 0!==t?t:42,e=ke(void 0!==e?e:256);const o=$e(a),c=Kt(a);n=n>0?n:Math.max(c/e[0],o/e[1]);const f=t+1,g=new Array(f);for(let y=0;y<f;++y)g[y]=n/Math.pow(2,y);return g}function ro(a){let t=(a=ne(a)).getExtent();if(!t){const e=180*Zi.degrees/a.getMetersPerUnit();t=ie(-e,-e,e,e)}return t}class Ld extends fe{constructor(t,e){super(t),this.tile=e}}const Pd=class Rd extends jl{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileGrid&&ke(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new Hl(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}forEachLoadedTile(t,e,n,o){const c=this.getTileCacheForProjection(t);if(!c)return!1;let g,y,w,f=!0;for(let S=n.minX;S<=n.maxX;++S)for(let M=n.minY;M<=n.maxY;++M)y=_a(e,S,M),w=!1,c.containsKey(y)&&(g=c.get(y),w=2===g.getState(),w&&(w=!1!==o(g))),w||(f=!1);return f}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(t,e,n,o,c){return bt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Kl(t)}getTileCacheForProjection(t){const e=this.getProjection();return Tt(null===e||Bs(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const o=this.getTileGridForProjection(n),c=this.getTilePixelRatio(e),f=ke(o.getTileSize(t),this.tmpSize);return 1==c?f:Yl(f,c,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=function kd(a,t,e){const n=t[0],o=a.getTileCoordCenter(t),c=ro(e);if(at(c,o))return t;{const f=Kt(c),g=Math.ceil((c[0]-o[0])/f);return o[0]+=f*g,a.getTileCoordForCoordAndZ(o,n)}}(n,t,e)),function vd(a,t){const e=a[0],n=a[1],o=a[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const c=t.getFullTileRange(e);return!c||c.containsXY(n,o)}(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,o){}};function Od(a,t){const e=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,c=/\{-y\}/g;return function(f,g,y){if(f)return a.replace(e,f[0].toString()).replace(n,f[1].toString()).replace(o,f[2].toString()).replace(c,function(){const S=t.getFullTileRange(f[0]);return Tt(S,55),(S.getHeight()-f[2]-1).toString()})}}class oo extends Pd{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===oo.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=Dt(e),o=e.getState();let c;1==o?(this.tileLoadingKeys_[n]=!0,c="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],c=3==o?"tileloaderror":2==o?"tileloadend":void 0),null!=c&&this.dispatchEvent(new Ld(c,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=function Nd(a){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(a);if(e){const n=e[1].charCodeAt(0),o=e[2].charCodeAt(0);let c;for(c=n;c<=o;++c)t.push(a.replace(e[0],String.fromCharCode(c)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(a),e){const n=parseInt(e[2],10);for(let o=parseInt(e[1],10);o<=n;o++)t.push(a.replace(e[0],o.toString()));return t}return t.push(a),t}(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function Fd(a,t){const e=a.length,n=new Array(e);for(let o=0;o<e;++o)n[o]=Od(a[o],t);return function Dd(a){return 1===a.length?a[0]:function(t,e,n){if(t){const c=Si(Gl(t),a.length);return a[c](t,e,n)}}}(n)}(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const o=_a(t,e,n);this.tileCache.containsKey(o)&&this.tileCache.get(o)}}const zd=oo;function Yd(a,t){a.getImage().src=t}const Ql=class Xd extends zd{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Yd,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:bl,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const o in this.tileCacheForProjection){const c=this.tileCacheForProjection[o];c.expireCache(c==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Bs(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!Bs(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||Bs(e,t)))return this.tileGrid;{const n=Dt(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Kl(t)),this.tileGridForProjection[n]}}getTileCacheForProjection(t){const e=this.getProjection();if(!e||Bs(e,t))return this.tileCache;{const n=Dt(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Hl(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}}createTile_(t,e,n,o,c,f){const g=[t,e,n],y=this.getTileCoordForTileUrlFunction(g,c),w=y?this.tileUrlFunction(y,o,c):void 0,S=new this.tileClass(g,void 0!==w?0:4,void 0!==w?w:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return S.key=f,S.addEventListener("change",this.handleTileChange.bind(this)),S}getTile(t,e,n,o,c){const f=this.getProjection();if(!f||!c||Bs(f,c))return this.getTileInternal(t,e,n,o,f||c);{const g=this.getTileCacheForProjection(c),y=[t,e,n];let w;const S=Bl(y);g.containsKey(S)&&(w=g.get(S));const M=this.getKey();if(w&&w.key==M)return w;{const I=this.getTileGridForProjection(f),F=this.getTileGridForProjection(c),D=this.getTileCoordForTileUrlFunction(y,c),X=new to(f,I,c,F,y,D,this.getTilePixelRatio(o),this.getGutter(),function(Y,G,V,j){return this.getTileInternal(Y,G,V,j,f)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return X.key=M,w?(X.interimTile=w,X.refreshInterimChain(),g.replace(S,X)):g.set(S,X),X}}}getTileInternal(t,e,n,o,c){let f=null;const g=_a(t,e,n),y=this.getKey();if(this.tileCache.containsKey(g)){if(f=this.tileCache.get(g),f.key!=y){const w=f;f=this.createTile_(t,e,n,o,c,y),f.interimTile=0==w.getState()?w.interimTile:w,f.refreshInterimChain(),this.tileCache.replace(g,f)}}else f=this.createTile_(t,e,n,o,c,y),this.tileCache.set(g,f);return f}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){const n=ne(t);if(n){const o=Dt(n);o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}},Bd=class Wd extends Ql{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:function Td(a){const t=a||{},e=t.extent||ne("EPSG:3857").getExtent(),n={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:Jl(e,t.maxZoom,t.tileSize,t.maxResolution)};return new ql(n)}({extent:ro(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}},Dn="1.3.0";function $l(a,t){const e=[];Object.keys(t).forEach(function(o){null!=t[o]&&e.push(o+"="+encodeURIComponent(t[o]))});const n=e.join("&");return a=a.replace(/[?&]$/,""),(a+=a.includes("?")?"&":"?")+n}const th=class Hd extends Ql{constructor(t){t=t||{};const e=Object.assign({},t.params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!(!("TRANSPARENT"in e)||e.TRANSPARENT),projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=[1/0,1/0,-1/0,-1/0],this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,n,o){const c=ne(n),f=this.getProjection();let g=this.getTileGrid();g||(g=this.getTileGridForProjection(c));const y=g.getZForResolution(e,this.zDirection),w=g.getTileCoordForCoordAndZ(t,y);if(g.getResolutions().length<=w[0])return;let S=g.getResolution(w[0]),M=g.getTileCoordExtent(w,this.tmpExtent_),I=ke(g.getTileSize(w[0]),this.tmpSize);const F=this.gutter_;0!==F&&(I=zl(I,F,this.tmpSize),M=H(M,S*F,M)),f&&f!==c&&(S=$r(f,c,t,S),M=Ur(M,c,f),t=Gs(t,c,f));const D={SERVICE:"WMS",VERSION:Dn,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(D,this.params_,o);const X=Math.floor((t[0]-M[0])/S),Y=Math.floor((M[3]-t[1])/S);return D[this.v13_?"I":"X"]=X,D[this.v13_?"J":"Y"]=Y,this.getRequestUrl_(w,I,M,1,f||c,D)}getLegendUrl(t,e){if(void 0===this.urls[0])return;const n={SERVICE:"WMS",VERSION:Dn,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){const o=this.params_.LAYERS;if(Array.isArray(o)&&1!==o.length)return;n.LAYER=o}if(void 0!==t){const o=this.getProjection()?this.getProjection().getMetersPerUnit():1;n.SCALE=t*o/28e-5}return Object.assign(n,e),$l(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,n,o,c,f){const g=this.urls;if(!g)return;if(f.WIDTH=e[0],f.HEIGHT=e[1],f[this.v13_?"CRS":"SRS"]=c.getCode(),"STYLES"in this.params_||(f.STYLES=""),1!=o)switch(this.serverType_){case"geoserver":const M=90*o+.5|0;"FORMAT_OPTIONS"in f?f.FORMAT_OPTIONS+=";dpi:"+M:f.FORMAT_OPTIONS="dpi:"+M;break;case"mapserver":f.MAP_RESOLUTION=90*o;break;case"carmentaserver":case"qgis":f.DPI=90*o;break;default:Tt(!1,52)}const y=c.getAxisOrientation(),w=n;if(this.v13_&&"ne"==y.substr(0,2)){let M;M=n[0],w[0]=n[1],w[1]=M,M=n[2],w[2]=n[3],w[3]=M}let S;return f.BBOX=w.join(","),S=1==g.length?g[0]:g[Si(Gl(t),g.length)],$l(S,f)}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0;const e=[];for(const n in this.params_)e[t++]=n+"-"+this.params_[n];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){this.v13_=function Gd(a,t){const e=(""+a).split("."),n=(""+t).split(".");for(let o=0;o<Math.max(e.length,n.length);o++){const c=parseInt(e[o]||"0",10),f=parseInt(n[o]||"0",10);if(c>f)return 1;if(f>c)return-1}return 0}(this.params_.VERSION||Dn,"1.3")>=0}tileUrlFunction(t,e,n){let o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(n)),o.getResolutions().length<=t[0])return;1!=e&&(!this.hidpi_||void 0===this.serverType_)&&(e=1);const c=o.getResolution(t[0]);let f=o.getTileCoordExtent(t,this.tmpExtent_),g=ke(o.getTileSize(t[0]),this.tmpSize);const y=this.gutter_;0!==y&&(g=zl(g,y,this.tmpSize),f=H(f,c*y,f)),1!=e&&(g=Yl(g,e,this.tmpSize));const w={SERVICE:"WMS",VERSION:Dn,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(w,this.params_),this.getRequestUrl_(t,g,f,e,n,w)}};var Ca=Et(7579),eh=Et(5698),Sa=Et(2722),ih=Et(2340),q=Et(4650),Vs=Et(1514),Vd=Et(2083);Et(9038);class Nn extends fe{constructor(t,e,n){super(t),this.element=e,this.index=n}}const Ue=class jd extends ye{constructor(t,e){if(super(),this.unique_=!!(e=e||{}).unique,this.array_=t||[],this.unique_)for(let n=0,o=this.array_.length;n<o;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,o=e.length;n<o;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get("length")}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Nn("add",e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,o=e.length;n<o;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Nn("remove",e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const o=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Nn("remove",o,t)),this.dispatchEvent(new Nn("add",e,t))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(t,e){for(let n=0,o=this.array_.length;n<o;++n)if(this.array_[n]===t&&n!==e)throw new ds(58)}};function ah(a,t,e){return t+":"+a+":"+(e?u(e):"null")}const zn=new class Ud{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];0==(3&t++)&&!n.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,n){const o=ah(t,e,n);return o in this.cache_?this.cache_[o]:null}set(t,e,n,o){const c=ah(t,e,n);this.cache_[c]=o,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};function qd(a,t){zn.expire()}const Kd=class Zd extends ze{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){bt()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;We(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),i(o,n)}forEachFeatureAtCoordinate(t,e,n,o,c,f,g,y){let w;const S=e.viewState;function M(Z,$,it,ut){return c.call(f,$,Z?it:null,ut)}const I=S.projection,F=kl(t.slice(),I),D=[[0,0]];if(I.canWrapX()&&o){const $=Kt(I.getExtent());D.push([-$,0],[$,0])}const X=e.layerStatesArray,Y=X.length,G=[],V=[];for(let Z=0;Z<D.length;Z++)for(let $=Y-1;$>=0;--$){const it=X[$],ut=it.layer;if(ut.hasRenderer()&&pa(it,S)&&g.call(y,ut)){const ht=ut.getRenderer(),vt=ut.getSource();if(ht&&vt){const Ct=vt.getWrapX()?F:t,Pt=M.bind(null,it.managed);V[0]=Ct[0]+D[Z][0],V[1]=Ct[1]+D[Z][1],w=ht.forEachFeatureAtCoordinate(V,e,n,Pt,G)}if(w)return w}}if(0===G.length)return;const j=1/G.length;return G.forEach((Z,$)=>Z.distanceSq+=$*j),G.sort((Z,$)=>Z.distanceSq-$.distanceSq),G.some(Z=>w=Z.callback(Z.feature,Z.layer,Z.geometry)),w}hasFeatureAtCoordinate(t,e,n,o,c,f){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,o,ft,this,c,f)}getMap(){return this.map_}renderFrame(t){bt()}scheduleExpireIconCache(t){zn.canExpireCache()&&t.postRenderFunctions.push(qd)}},Xn="ol-hidden",ui="ol-unselectable",nh="ol-unsupported",bs="ol-control",Yn="ol-collapsed",Qd=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),rh=["style","variant","weight","size","lineHeight","family"],oh=function(a){const t=a.match(Qd);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,o=rh.length;n<o;++n){const c=t[n+1];void 0!==c&&(e[rh[n]]=c)}return e.families=e.family.split(/,\s?/),e},lh="10px sans-serif",Ei="#000",Wn="round",Aa=[],js="round",Ea="#000",Ta="center",Bn="middle",ws=[0,0,0,0],Ti=new ye;let lo,Us=null;const ho={},$d=function(){const t="32px ",e=["monospace","serif"],n=e.length,o="wmytzilWMYTZIL@#/&?$%10\uf013";let c,f;function g(w,S,M){let I=!0;for(let F=0;F<n;++F){const D=e[F];if(f=Gn(w+" "+S+" "+t+D,o),M!=D){const X=Gn(w+" "+S+" "+t+M+","+D,o);I=I&&X!=f}}return!!I}function y(){let w=!0;const S=Ti.getKeys();for(let M=0,I=S.length;M<I;++M){const F=S[M];Ti.get(F)<100&&(g.apply(this,F.split("\n"))?(Ot(ho),Us=null,lo=void 0,Ti.set(F,100)):(Ti.set(F,Ti.get(F)+1,!0),w=!1))}w&&(clearInterval(c),c=void 0)}return function(w){const S=oh(w);if(!S)return;const M=S.families;for(let I=0,F=M.length;I<F;++I){const D=M[I],X=S.style+"\n"+S.weight+"\n"+D;void 0===Ti.get(X)&&(Ti.set(X,100,!0),g(S.style,S.weight,D)||(Ti.set(X,0,!0),void 0===c&&(c=setInterval(y,32))))}}}(),tf=function(){let a;return function(t){let e=ho[t];if(null==e){if(Fs){const n=oh(t),o=hh(t,"\u017dg");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else a||(a=document.createElement("div"),a.innerHTML="M",a.style.minHeight="0",a.style.maxHeight="none",a.style.height="auto",a.style.padding="0",a.style.border="none",a.style.position="absolute",a.style.display="block",a.style.left="-99999px"),a.style.font=t,document.body.appendChild(a),e=a.offsetHeight,document.body.removeChild(a);ho[t]=e}return e}}();function hh(a,t){return Us||(Us=k(1,1)),a!=lo&&(Us.font=a,lo=Us.font),Us.measureText(t)}function Gn(a,t){return hh(a,t).width}function ch(a,t,e){if(t in e)return e[t];const n=t.split("\n").reduce((o,c)=>Math.max(o,Gn(a,c)),0);return e[t]=n,n}const rf=class nf extends Kd{constructor(t){super(t),this.fontChangeListenerKey_=At(Ti,"propertychange",t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=ui+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const o=new xn(t,void 0,e);n.dispatchEvent(o)}}disposeInternal(){Lt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent("precompose",t);const e=t.layerStatesArray.sort(function(f,g){return f.zIndex-g.zIndex}),n=t.viewState;this.children_.length=0;const o=[];let c=null;for(let f=0,g=e.length;f<g;++f){const y=e[f];t.layerIndex=f;const w=y.layer,S=w.getSourceState();if(!pa(y,n)||"ready"!=S&&"undefined"!=S){w.unrender();continue}const M=w.render(t,c);!M||(M!==c&&(this.children_.push(M),c=M),"getDeclutter"in w&&o.push(w))}for(let f=o.length-1;f>=0;--f)o[f].renderDeclutter(t);(function T(a,t){const e=a.childNodes;for(let n=0;;++n){const o=e[n],c=t[n];if(!o&&!c)break;if(o!==c){if(!o){a.appendChild(c);continue}if(!c){a.removeChild(o),--n;continue}a.insertBefore(c,o)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}};class Ki extends fe{constructor(t,e){super(t),this.layer=e}}class uo extends dn{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),n?Array.isArray(n)?n=new Ue(n.slice(),{unique:!0}):Tt("function"==typeof n.getArray,43):n=new Ue(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Lt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(At(t,"add",this.handleLayersAdd_,this),At(t,"remove",this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Lt);Ot(this.listenerKeys_);const e=t.getArray();for(let n=0,o=e.length;n<o;n++){const c=e[n];this.registerLayerListeners_(c),this.dispatchEvent(new Ki("addlayer",c))}this.changed()}registerLayerListeners_(t){const e=[At(t,"propertychange",this.handleLayerChange_,this),At(t,"change",this.handleLayerChange_,this)];t instanceof uo&&e.push(At(t,"addlayer",this.handleLayerGroupAdd_,this),At(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Dt(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Ki("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Ki("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Ki("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=Dt(e);this.listenerKeys_[n].forEach(Lt),delete this.listenerKeys_[n],this.dispatchEvent(new Ki("removelayer",e)),this.changed()}getLayers(){return this.get("layers")}setLayers(t){const e=this.getLayers();if(e){const n=e.getArray();for(let o=0,c=n.length;o<c;++o)this.dispatchEvent(new Ki("removelayer",n[o]))}this.set("layers",t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach(function(f){f.getLayerStatesArray(e)});const o=this.getLayerState();let c=o.zIndex;!t&&void 0===o.zIndex&&(c=0);for(let f=n,g=e.length;f<g;f++){const y=e[f];y.opacity*=o.opacity,y.visible=y.visible&&o.visible,y.maxResolution=Math.min(y.maxResolution,o.maxResolution),y.minResolution=Math.max(y.minResolution,o.minResolution),y.minZoom=Math.max(y.minZoom,o.minZoom),y.maxZoom=Math.min(y.maxZoom,o.maxZoom),void 0!==o.extent&&(y.extent=void 0!==y.extent?Ns(y.extent,o.extent):o.extent),void 0===y.zIndex&&(y.zIndex=c)}return e}getSourceState(){return"ready"}}const Hn=uo,Zs=class of extends fe{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}},Ji=class lf extends Zs{constructor(t,e,n,o,c,f){super(t,e,c),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==o&&o,this.activePointers=f}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},oe={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},cf=class hf extends Qt{constructor(t,e){super(t),this.map_=t,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=At(n,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=At(n,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!wn&&{passive:!1})}emulateClick_(t){let e=new Ji(oe.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Ji(oe.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const n=new Ji(oe.SINGLECLICK,this.map_,t);this.dispatchEvent(n)}.bind(this),250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==oe.POINTERUP||e.type==oe.POINTERCANCEL){delete this.trackedTouches_[n];for(const o in this.trackedTouches_)if(this.trackedTouches_[o].target!==e.target){delete this.trackedTouches_[o];break}}else(e.type==oe.POINTERDOWN||e.type==oe.POINTERMOVE)&&(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Ji(oe.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(Lt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new Ji(oe.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(const n in t){const o=t[n];this.down_[n]="function"==typeof o?U:o}if(0===this.dragListenerKeys_.length){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(At(n,oe.POINTERMOVE,this.handlePointerMove_,this),At(n,oe.POINTERUP,this.handlePointerUp_,this),At(this.element_,oe.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(At(this.element_.getRootNode(),oe.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Ji(oe.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Ji(oe.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&("boolean"!=typeof t.cancelable||!0===t.cancelable)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Lt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Lt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Lt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},Vn=1/0,Be={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function uh(a,t,e){return function(n,o,c,f,g){if(!n)return;if(!o&&!t)return n;const y=t?0:c[0]*o,w=t?0:c[1]*o,S=g?g[0]:0,M=g?g[1]:0;let I=a[0]+y/2+S,F=a[2]-y/2+S,D=a[1]+w/2+M,X=a[3]-w/2+M;I>F&&(I=(F+I)/2,F=I),D>X&&(D=(X+D)/2,X=D);let Y=Ut(n[0],I,F),G=Ut(n[1],D,X);if(f&&e&&o){const V=30*o;Y+=-V*Math.log(1+Math.max(0,I-n[0])/V)+V*Math.log(1+Math.max(0,n[0]-F)/V),G+=-V*Math.log(1+Math.max(0,D-n[1])/V)+V*Math.log(1+Math.max(0,n[1]-X)/V)}return[Y,G]}}function mf(a){return a}function fo(a,t,e,n){const o=Kt(t)/e[0],c=$e(t)/e[1];return n?Math.min(a,Math.max(o,c)):Math.min(a,Math.min(o,c))}function go(a,t,e){let n=Math.min(a,t);return n*=Math.log(1+50*Math.max(0,a/t-1))/50+1,e&&(n=Math.max(n,e),n/=Math.log(1+50*Math.max(0,e/a-1))/50+1),Ut(n,e/2,2*t)}function dh(a,t,e,n,o){return e=void 0===e||e,function(c,f,g,y){if(void 0!==c){const w=n?fo(a,n,g,o):a;return e&&y?go(c,w,t):Ut(c,t,w)}}}function po(a){if(void 0!==a)return 0}function fh(a){if(void 0!==a)return a}function _s(a,t,e,n,o,c){c=c||[];let f=0;for(let g=t;g<e;g+=n){const y=a[g],w=a[g+1];c[f++]=o[0]*y+o[2]*w+o[4],c[f++]=o[1]*y+o[3]*w+o[5]}return c&&c.length!=f&&(c.length=f),c}function gh(a,t,e,n,o,c,f){f=f||[];const g=Math.cos(o),y=Math.sin(o),w=c[0],S=c[1];let M=0;for(let I=t;I<e;I+=n){const F=a[I]-w,D=a[I+1]-S;f[M++]=w+F*g-D*y,f[M++]=S+F*y+D*g;for(let X=I+2;X<I+n;++X)f[M++]=a[X]}return f&&f.length!=M&&(f.length=M),f}const ph=[1,0,0,1,0,0],Sf=class Cf extends ye{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function wt(a){let e,n,o,t=!1;return function(){const c=Array.prototype.slice.call(arguments);return(!t||this!==o||!Q(c,n))&&(t=!0,o=this,n=c,e=a.apply(this,arguments)),e}}(function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);const o=this.clone();return o.applyTransform(n),o.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return bt()}closestPointXY(t,e,n,o){return bt()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return this.closestPointXY(t[0],t[1],e=e||[NaN,NaN],1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return bt()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&ge(e),this.extentRevision_=this.getRevision()}return function Au(a,t){return t?(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t):a}(this.extent_,t)}rotate(t,e){bt()}scale(t,e,n){bt()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return bt()}getType(){return bt()}applyTransform(t){bt()}intersectsExtent(t){return bt()}translate(t,e){bt()}transform(t,e){const n=ne(t),o="tile-pixels"==n.getUnits()?function(c,f,g){const y=n.getExtent(),w=n.getWorldExtent(),S=$e(w)/$e(y);return We(ph,w[0],w[3],S,-S,0,0,0),_s(c,0,c.length,g,ph,f),wa(n,e)(c,f,g)}:wa(n,e);return this.applyTransform(o),this}};function mh(a){let t;return"XY"==a?t=2:"XYZ"==a||"XYM"==a?t=3:"XYZM"==a&&(t=4),t}const mo=class Af extends Sf{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return function Lr(a,t,e,n,o){return fl(ge(o),a,t,e,n)}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return bt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=mh(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){bt()}setLayout(t,e,n){let o;if(t)o=mh(t);else{for(let c=0;c<n;++c){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}o=e.length,t=function Mf(a){let t;return 2==a?t="XY":3==a?t="XYZ":4==a&&(t="XYZM"),t}(o)}this.layout=t,this.stride=o}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const o=this.getStride();gh(n,0,n.length,o,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=Ds(this.getExtent()));const o=this.getFlatCoordinates();if(o){const c=this.getStride();(function wf(a,t,e,n,o,c,f,g){g=g||[];const y=f[0],w=f[1];let S=0;for(let M=t;M<e;M+=n){const F=a[M+1]-w;g[S++]=y+o*(a[M]-y),g[S++]=w+c*F;for(let D=M+2;D<M+n;++D)g[S++]=a[D]}g&&g.length!=S&&(g.length=S)})(o,0,o.length,c,t,e,n,o),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const o=this.getStride();(function _f(a,t,e,n,o,c,f){f=f||[];let g=0;for(let y=t;y<e;y+=n){f[g++]=a[y]+o,f[g++]=a[y+1]+c;for(let w=y+2;w<y+n;++w)f[g++]=a[w]}f&&f.length!=g&&(f.length=g)})(n,0,n.length,o,t,e,n),this.changed()}}};function xh(a,t,e,n,o,c,f){const g=a[t],y=a[t+1],w=a[e]-g,S=a[e+1]-y;let M;if(0===w&&0===S)M=t;else{const I=((o-g)*w+(c-y)*S)/(w*w+S*S);if(I>1)M=e;else{if(I>0){for(let F=0;F<n;++F)f[F]=Ai(a[t+F],a[e+F],I);return void(f.length=n)}M=t}}for(let I=0;I<n;++I)f[I]=a[M+I];f.length=n}function yh(a,t,e,n,o){let c=a[t],f=a[t+1];for(t+=n;t<e;t+=n){const g=a[t],y=a[t+1],w=Ci(c,f,g,y);w>o&&(o=w),c=g,f=y}return o}function bh(a,t,e,n,o,c,f,g,y,w,S){if(t==e)return w;let M,I;if(0===o){if(I=Ci(f,g,a[t],a[t+1]),I<w){for(M=0;M<n;++M)y[M]=a[t+M];return y.length=n,I}return w}S=S||[NaN,NaN];let F=t+n;for(;F<e;)if(xh(a,F-n,F,n,f,g,S),I=Ci(f,g,S[0],S[1]),I<w){for(w=I,M=0;M<n;++M)y[M]=S[M];y.length=n,F+=n}else F+=n*Math.max((Math.sqrt(I)-Math.sqrt(w))/o|0,1);if(c&&(xh(a,e-n,t,n,f,g,S),I=Ci(f,g,S[0],S[1]),I<w)){for(w=I,M=0;M<n;++M)y[M]=S[M];y.length=n}return w}function _h(a,t,e,n){for(let o=0,c=e.length;o<c;++o){const f=e[o];for(let g=0;g<n;++g)a[t++]=f[g]}return t}function Cs(a,t){return t*Math.round(a/t)}function Rf(a,t,e,n,o,c,f){if(t==e)return f;let w,S,g=Cs(a[t],o),y=Cs(a[t+1],o);t+=n,c[f++]=g,c[f++]=y;do{if(w=Cs(a[t],o),S=Cs(a[t+1],o),(t+=n)==e)return c[f++]=w,c[f++]=S,f}while(w==g&&S==y);for(;t<e;){const M=Cs(a[t],o),I=Cs(a[t+1],o);if(t+=n,M==w&&I==S)continue;const F=w-g,D=S-y,X=M-g,Y=I-y;F*Y==D*X&&(F<0&&X<F||F==X||F>0&&X>F)&&(D<0&&Y<D||D==Y||D>0&&Y>D)?(w=M,S=I):(c[f++]=w,c[f++]=S,g=w,y=S,w=M,S=I)}return c[f++]=w,c[f++]=S,f}function qs(a,t,e,n,o){o=void 0!==o?o:[];let c=0;for(let f=t;f<e;f+=n)o[c++]=a.slice(f,f+n);return o.length=c,o}function jn(a,t,e,n,o){o=void 0!==o?o:[];let c=0;for(let f=0,g=e.length;f<g;++f){const y=e[f];o[c++]=qs(a,t,y,n,o[c]),t=y}return o.length=c,o}function Ah(a,t,e,n,o){o=void 0!==o?o:[];let c=0;for(let f=0,g=e.length;f<g;++f){const y=e[f];o[c++]=1===y.length&&y[0]===t?[]:jn(a,t,y,n,o[c]),t=y[y.length-1]}return o.length=c,o}function Mh(a,t,e,n){let o=0,c=a[e-n],f=a[e-n+1];for(;t<e;t+=n){const g=a[t],y=a[t+1];o+=f*g-c*y,c=g,f=y}return o/2}class Un extends mo{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new Un(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,o){return o<tt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(yh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,o))}getArea(){return Mh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return qs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=function xo(a,t,e,n,o,c,f){const g=(e-t)/n;if(g<3){for(;t<e;t+=n)c[f++]=a[t],c[f++]=a[t+1];return f}const y=new Array(g);y[0]=1,y[g-1]=1;const w=[t,e-n];let S=0;for(;w.length>0;){const M=w.pop(),I=w.pop();let F=0;const D=a[I],X=a[I+1],Y=a[M],G=a[M+1];for(let V=I+n;V<M;V+=n){const $=fs(a[V],a[V+1],D,X,Y,G);$>F&&(S=V,F=$)}F>o&&(y[(S-t)/n]=1,I+n<S&&w.push(I,S),S+n<M&&w.push(S,M))}for(let M=0;M<g;++M)y[M]&&(c[f++]=a[t+M*n],c[f++]=a[t+M*n+1]);return f}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Un(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=_h(this.flatCoordinates,0,t,this.stride),this.changed()}}const Eh=Un;class yo extends mo{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new yo(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,o){const c=this.flatCoordinates,f=Ci(t,e,c[0],c[1]);if(f<o){const g=this.stride;for(let y=0;y<g;++y)n[y]=c[y];return n.length=g,f}return o}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return function hi(a,t){const e=a[0],n=a[1];return ie(e,n,e,n,t)}(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Zt(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function Ef(a,t,e,n){for(let o=0,c=e.length;o<c;++o)a[t++]=e[o];return t}(this.flatCoordinates,0,t),this.changed()}}const vo=yo;function Lf(a,t,e,n){for(;t<e-n;){for(let o=0;o<n;++o){const c=a[t+o];a[t+o]=a[e-n+o],a[e-n+o]=c}t+=n,e-=n}}function bo(a,t,e,n){let o=0,c=a[e-n],f=a[e-n+1];for(;t<e;t+=n){const g=a[t],y=a[t+1];o+=(g-c)*(y+f),c=g,f=y}return 0===o?void 0:o>0}function wo(a,t,e,n,o){o=void 0!==o&&o;for(let c=0,f=e.length;c<f;++c){const g=e[c],y=bo(a,t,g,n);(0===c?o&&y||!o&&!y:o&&!y||!o&&y)&&Lf(a,t,g,n),t=g}return t}class Ss extends mo{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?cs(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ss(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,o){return o<tt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function vh(a,t,e,n,o){for(let c=0,f=e.length;c<f;++c){const g=e[c];o=yh(a,t,g,n,o),t=g}return o}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function wh(a,t,e,n,o,c,f,g,y,w,S){S=S||[NaN,NaN];for(let M=0,I=e.length;M<I;++M){const F=e[M];w=bh(a,t,F,n,o,c,f,g,y,w,S),t=F}return w}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,o))}containsXY(t,e){return ao(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return function kh(a,t,e,n){let o=0;for(let c=0,f=e.length;c<f;++c){const g=e[c];o+=Mh(a,t,g,n),t=g}return o}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),wo(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,jn(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Ds(this.getExtent());this.flatInteriorPoint_=function Th(a,t,e,n,o,c,f){let g,y,w,S,M,I,F;const D=o[c+1],X=[];for(let V=0,j=e.length;V<j;++V){const Z=e[V];for(S=a[Z-n],I=a[Z-n+1],g=t;g<Z;g+=n)M=a[g],F=a[g+1],(D<=I&&F<=D||I<=D&&D<=F)&&(w=(D-I)/(F-I)*(M-S)+S,X.push(w)),S=M,I=F}let Y=NaN,G=-1/0;for(X.sort(Ie),S=X[0],g=1,y=X.length;g<y;++g){M=X[g];const V=Math.abs(M-S);V>G&&(w=(S+M)/2,ao(a,t,e,n,w,D)&&(Y=w,G=V)),S=M}return isNaN(Y)&&(Y=o[c]),f?(f.push(Y,D,G),f):[Y,D,G]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new vo(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Eh(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,o=[];let c=0;for(let f=0,g=n.length;f<g;++f){const y=n[f],w=new Eh(e.slice(c,y),t);o.push(w),c=y}return o}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;!function Ih(a,t,e,n,o){o=void 0!==o&&o;for(let c=0,f=e.length;c<f;++c){const g=e[c],y=bo(a,t,g,n);if(0===c){if(o&&y||!o&&!y)return!1}else if(o&&!y||!o&&y)return!1;t=g}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=wo(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=function Sh(a,t,e,n,o,c,f,g){for(let y=0,w=e.length;y<w;++y){const S=e[y];f=Rf(a,t,S,n,o,c,f),g.push(f),t=S}return f}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new Ss(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return function Zl(a,t,e,n,o){if(!Ul(a,t,e[0],n,o))return!1;if(1===e.length)return!0;for(let c=1,f=e.length;c<f;++c)if(Sd(a,e[c-1],e[c],n,o)&&!no(a,e[c-1],e[c],n,o))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=function Ch(a,t,e,n,o){o=o||[];let c=0;for(let f=0,g=e.length;f<g;++f){const y=_h(a,t,e[f],n);o[c++]=y,t=y}return o.length=c,o}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const Pf=Ss;function Zn(a){const t=a[0],e=a[1],n=a[2],o=a[3],c=[t,e,t,o,n,o,n,e,t,e];return new Ss(c,"XY",[c.length])}function qn(a,t){setTimeout(function(){a(t)},0)}function Co(a,t,e,n,o){const c=Math.cos(-o);let f=Math.sin(-o),g=a[0]*c-a[1]*f,y=a[1]*c+a[0]*f;return g+=(t[0]/2-e[0])*n,y+=(e[1]-t[1]/2)*n,f=-f,[g*c-y*f,y*c+g*f]}const Ii=class Ff extends ye{constructor(t){super(),t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.projection_=Vr(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,t.projection&&Tl(),t.center&&(t.center=ki(t.center)),t.extent&&(t.extent=ys(t.extent)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const g in Be)delete e[g];this.setProperties(e,!0);const n=function Nf(a){let t,e,n,f=void 0!==a.minZoom?a.minZoom:0,g=void 0!==a.maxZoom?a.maxZoom:28;const y=void 0!==a.zoomFactor?a.zoomFactor:2,w=void 0!==a.multiWorld&&a.multiWorld,S=void 0===a.smoothResolutionConstraint||a.smoothResolutionConstraint,M=void 0!==a.showFullExtent&&a.showFullExtent,I=Vr(a.projection,"EPSG:3857"),F=I.getExtent();let D=a.constrainOnlyCenter,X=a.extent;if(!w&&!X&&I.isGlobal()&&(D=!1,X=F),void 0!==a.resolutions){const Y=a.resolutions;e=Y[f],n=void 0!==Y[g]?Y[g]:Y[Y.length-1],t=a.constrainResolution?function xf(a,t,e,n){return t=void 0===t||t,function(o,c,f,g){if(void 0!==o){const y=a[0],w=a[a.length-1],S=e?fo(y,e,f,n):y;if(g)return t?go(o,S,w):Ut(o,w,S);const M=Math.min(S,o),I=Math.floor(ni(a,M,c));return a[I]>S&&I<a.length-1?a[I+1]:a[I]}}}(Y,S,!D&&X,M):dh(e,n,S,!D&&X,M)}else{const G=(F?Math.max(Kt(F),$e(F)):360*Zi.degrees/I.getMetersPerUnit())/256/Math.pow(2,0),V=G/Math.pow(2,28);e=a.maxResolution,void 0!==e?f=0:e=G/Math.pow(y,f),n=a.minResolution,void 0===n&&(n=void 0!==a.maxZoom?void 0!==a.maxResolution?e/Math.pow(y,g):G/Math.pow(y,g):V),g=f+Math.floor(Math.log(e/n)/Math.log(y)),n=e/Math.pow(y,g-f),t=a.constrainResolution?function yf(a,t,e,n,o,c){return n=void 0===n||n,e=void 0!==e?e:0,function(f,g,y,w){if(void 0!==f){const S=o?fo(t,o,y,c):t;if(w)return n?go(f,S,e):Ut(f,e,S);const M=1e-9,I=Math.ceil(Math.log(t/S)/Math.log(a)-M),F=-g*(.5-M)+.5,D=Math.min(S,f),X=Math.floor(Math.log(t/D)/Math.log(a)+F),Y=Math.max(I,X);return Ut(t/Math.pow(a,Y),e,S)}}}(y,e,n,S,!D&&X,M):dh(e,n,S,!D&&X,M)}return{constraint:t,maxResolution:e,minResolution:n,minZoom:f,zoomFactor:y}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const o=function Df(a){if(void 0!==a.extent)return uh(a.extent,a.constrainOnlyCenter,void 0===a.smoothExtentConstraint||a.smoothExtentConstraint);const t=Vr(a.projection,"EPSG:3857");if(!0!==a.multiWorld&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,uh(e,!1,!1)}return mf}(t),c=n.constraint,f=function zf(a){if(void 0===a.enableRotation||a.enableRotation){const e=a.constrainRotation;return void 0===e||!0===e?function bf(a){return a=a||Hi(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=a?0:t:void 0}}():!1===e?fh:"number"==typeof e?function vf(a){const t=2*Math.PI/a;return function(e,n){return n?e:void 0!==e?e=Math.floor(e/t+.5)*t:void 0}}(e):fh}return po}(t);this.constraints_={center:o,resolution:c,rotation:f},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenter();if(n){const o=t||[0,0,0,0];e=e||[0,0,0,0];const c=this.getResolution();this.setCenterInternal([n[0]+c/2*(o[3]-e[3]+e[1]-o[1]),n[1]-c/2*(o[0]-e[0]+e[2]-o[2])])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let o=arguments[n];o.center&&(o=Object.assign({},o),o.center=ki(o.center,this.getProjection())),o.anchor&&(o=Object.assign({},o),o.anchor=ki(o.anchor,this.getProjection())),e[n]=o}this.animateInternal.apply(this,e)}animateInternal(t){let n,e=arguments.length;e>1&&"function"==typeof arguments[e-1]&&(n=arguments[e-1],--e);let o=0;for(;o<e&&!this.isDef();++o){const S=arguments[o];S.center&&this.setCenterInternal(S.center),void 0!==S.zoom?this.setZoom(S.zoom):S.resolution&&this.setResolution(S.resolution),void 0!==S.rotation&&this.setRotation(S.rotation)}if(o===e)return void(n&&qn(n,!0));let c=Date.now(),f=this.targetCenter_.slice(),g=this.targetResolution_,y=this.targetRotation_;const w=[];for(;o<e;++o){const S=arguments[o],M={start:c,complete:!1,anchor:S.anchor,duration:void 0!==S.duration?S.duration:1e3,easing:S.easing||Dr,callback:n};if(S.center&&(M.sourceCenter=f,M.targetCenter=S.center.slice(),f=M.targetCenter),void 0!==S.zoom?(M.sourceResolution=g,M.targetResolution=this.getResolutionForZoom(S.zoom),g=M.targetResolution):S.resolution&&(M.sourceResolution=g,M.targetResolution=S.resolution,g=M.targetResolution),void 0!==S.rotation){M.sourceRotation=y;const I=Si(S.rotation-y+Math.PI,2*Math.PI)-Math.PI;M.targetRotation=y+I,y=M.targetRotation}(a=M).sourceCenter&&a.targetCenter&&!Ln(a.sourceCenter,a.targetCenter)||a.sourceResolution!==a.targetResolution||a.sourceRotation!==a.targetRotation?c+=M.duration:M.complete=!0,w.push(M)}var a;this.animations_.push(w),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let t;this.setHint(0,-this.hints_[0]);for(let e=0,n=this.animations_.length;e<n;++e){const o=this.animations_[e];if(o[0].callback&&qn(o[0].callback,!1),!t)for(let c=0,f=o.length;c<f;++c){const g=o[c];if(!g.complete){t=g.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const o=this.animations_[n];let c=!0;for(let f=0,g=o.length;f<g;++f){const y=o[f];if(y.complete)continue;const w=t-y.start;let S=y.duration>0?w/y.duration:1;S>=1?(y.complete=!0,S=1):c=!1;const M=y.easing(S);if(y.sourceCenter){const I=y.sourceCenter[0],F=y.sourceCenter[1],D=y.targetCenter[0],X=y.targetCenter[1];this.nextCenter_=y.targetCenter,this.targetCenter_=[I+M*(D-I),F+M*(X-F)]}if(y.sourceResolution&&y.targetResolution){const I=1===M?y.targetResolution:y.sourceResolution+M*(y.targetResolution-y.sourceResolution);if(y.anchor){const F=this.getViewportSize_(this.getRotation()),D=this.constraints_.resolution(I,0,F,!0);this.targetCenter_=this.calculateCenterZoom(D,y.anchor)}this.nextResolution_=y.targetResolution,this.targetResolution_=I,this.applyTargetState_(!0)}if(void 0!==y.sourceRotation&&void 0!==y.targetRotation){const I=1===M?Si(y.targetRotation+Math.PI,2*Math.PI)-Math.PI:y.sourceRotation+M*(y.targetRotation-y.sourceRotation);if(y.anchor){const F=this.constraints_.rotation(I,!0);this.targetCenter_=this.calculateCenterRotate(F,y.anchor)}this.nextRotation_=y.targetRotation,this.targetRotation_=I}if(this.applyTargetState_(!0),e=!0,!y.complete)break}if(c){this.animations_[n]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const f=o[0].callback;f&&qn(f,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const o=this.getCenterInternal();return void 0!==o&&(n=[o[0]-e[0],o[1]-e[1]],zr(n,t-this.getRotation()),function Uu(a,t){a[0]+=+t[0],a[1]+=+t[1]}(n,e)),n}calculateCenterZoom(t,e){let n;const o=this.getCenterInternal(),c=this.getResolution();return void 0!==o&&void 0!==c&&(n=[e[0]-t*(e[0]-o[0])/c,e[1]-t*(e[1]-o[1])/c]),n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],o=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(o*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&qr(t,this.getProjection())}getCenterInternal(){return this.get(Be.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return Kr(this.calculateExtentInternal(t),this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();Tt(e,1);const n=this.getResolution();Tt(void 0!==n,2);const o=this.getRotation();return Tt(void 0!==o,3),Pr(e,n,o,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Be.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(ys(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=Kt(t)/e[0],o=$e(t)/e[1];return Math.max(n,o)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),o=Math.log(e/this.minResolution_)/Math.log(t);return function(c){return e/Math.pow(t,c*o)}}getRotation(){return this.get(Be.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),c=Math.log(n/this.minResolution_)/e;return function(f){return Math.log(n/f)/e/c}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let o=this.getCenterInternal();const c=this.padding_;if(c){const f=this.getViewportSizeMinusPadding_();o=Co(o,this.getViewportSize_(),[f[0]/2+c[3],f[1]/2+c[0]],e,n)}return{center:o.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let n,o,e=this.minZoom_||0;if(this.resolutions_){const c=ni(this.resolutions_,t,1);e=c,n=this.resolutions_[c],o=c==this.resolutions_.length-1?2:n/this.resolutions_[c+1]}else n=this.maxResolution_,o=this.zoomFactor_;return e+Math.log(n/t)/Math.log(o)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=Ut(Math.floor(t),0,this.resolutions_.length-2);return this.resolutions_[e]/Math.pow(this.resolutions_[e]/this.resolutions_[e+1],Ut(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(Tt(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Tt(!Fr(t),25),n=Zn(ys(t,this.getProjection()));else if("Circle"===t.getType()){const o=ys(t.getExtent(),this.getProjection());n=Zn(o),n.rotate(this.getRotation(),Ds(o))}else{const o=Zr();n=o?t.clone().transform(o,this.getProjection()):t}this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),o=Math.sin(-e),c=t.getFlatCoordinates(),f=t.getStride();let g=1/0,y=1/0,w=-1/0,S=-1/0;for(let M=0,I=c.length;M<I;M+=f){const F=c[M]*n-c[M+1]*o,D=c[M]*o+c[M+1]*n;g=Math.min(g,F),y=Math.min(y,D),w=Math.max(w,F),S=Math.max(S,D)}return[g,y,w,S]}fitInternal(t,e){let n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());const o=void 0!==e.padding?e.padding:[0,0,0,0],c=void 0!==e.nearest&&e.nearest;let f;f=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const g=this.rotatedExtentForGeometry(t);let y=this.getResolutionForExtentInternal(g,[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]);y=isNaN(y)?f:Math.max(y,f),y=this.getConstrainedResolution(y,c?0:1);const w=this.getRotation(),S=Math.sin(w),M=Math.cos(w),I=Ds(g);I[0]+=(o[1]-o[3])/2*y,I[1]+=(o[0]-o[2])/2*y;const X=this.getConstrainedCenter([I[0]*M-I[1]*S,I[1]*M+I[0]*S],y),Y=e.callback?e.callback:U;void 0!==e.duration?this.animateInternal({resolution:y,center:X,duration:e.duration,easing:e.easing},Y):(this.targetResolution_=y,this.targetCenter_=X,this.applyTargetState_(!1,!0),qn(Y,!0))}centerOn(t,e,n){this.centerOnInternal(ki(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(Co(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,o){let c;const f=this.padding_;if(f&&t){const g=this.getViewportSizeMinusPadding_(-n),y=Co(t,o,[g[0]/2+f[3],g[1]/2+f[0]],e,n);c=[t[0]-y[0],t[1]-y[1]]}return c}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=qr(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&ki(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),c=this.constraints_.resolution(this.targetResolution_*t,0,o,n);e&&(this.targetCenter_=this.calculateCenterZoom(c,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=ki(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&ki(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,o=this.constraints_.rotation(this.targetRotation_,n),c=this.getViewportSize_(o),f=this.constraints_.resolution(this.targetResolution_,0,c,n),g=this.constraints_.center(this.targetCenter_,f,c,n,this.calculateCenterShift(this.targetCenter_,f,o,c));this.get(Be.ROTATION)!==o&&this.set(Be.ROTATION,o),this.get(Be.RESOLUTION)!==f&&(this.set(Be.RESOLUTION,f),this.set("zoom",this.getZoom(),!0)),(!g||!this.get(Be.CENTER)||!Ln(this.get(Be.CENTER),g))&&this.set(Be.CENTER,g),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const o=e||0,c=this.constraints_.rotation(this.targetRotation_),f=this.getViewportSize_(c),g=this.constraints_.resolution(this.targetResolution_,o,f),y=this.constraints_.center(this.targetCenter_,g,f,!1,this.calculateCenterShift(this.targetCenter_,g,c,f));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=g,this.targetRotation_=c,this.targetCenter_=y,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==g||this.getRotation()!==c||!this.getCenterInternal()||!Ln(this.getCenterInternal(),y))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:c,center:y,resolution:g,duration:t,easing:ps,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(t,e,n){n=n&&ki(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.setHint(1,-1),this.resolveConstraints(t,e,n)}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}},Ri=class Yf extends ye{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){x(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&x(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)Lt(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==U&&this.listenerKeys.push(At(t,"postrender",this.render,this)),t.render())}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}},Rh=class Wf extends Ri{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",o=void 0!==t.expandClassName?t.expandClassName:e+"-expand",c=void 0!==t.collapseLabel?t.collapseLabel:"\u203a",f=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof c?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=c,this.collapseLabel_.className=f):this.collapseLabel_=c;const g=void 0!==t.label?t.label:"i";"string"==typeof g?(this.label_=document.createElement("span"),this.label_.textContent=g,this.label_.className=o):this.label_=g;const y=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(y),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const S=this.element;S.className=e+" "+ui+" "+bs+(this.collapsed_&&this.collapsible_?" "+Yn:"")+(this.collapsible_?"":" ol-uncollapsible"),S.appendChild(this.toggleButton_),S.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e={},n=[];let o=!0;const c=t.layerStatesArray;for(let f=0,g=c.length;f<g;++f){const y=c[f];if(!pa(y,t.viewState))continue;const w=y.layer.getSource();if(!w)continue;const S=w.getAttributions();if(!S)continue;const M=S(t);if(M)if(o=o&&!1!==w.getAttributionsCollapsible(),Array.isArray(M))for(let I=0,F=M.length;I<F;++I)M[I]in e||(n.push(M[I]),e[M[I]]=!0);else M in e||(n.push(M),e[M]=!0)}return this.overrideCollapsible_||this.setCollapsible(o),n}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Q(e,this.renderedAttributions_)){C(this.ulElement_);for(let o=0,c=e.length;o<c;++o){const f=document.createElement("li");f.innerHTML=e[o],this.ulElement_.appendChild(f)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Yn),this.collapsed_?z(this.collapseLabel_,this.label_):z(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},Gf=class Bf extends Ri{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"\u21e7",o=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=o,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(o));const c=t.tipLabel?t.tipLabel:"Reset rotation",f=document.createElement("button");f.className=e+"-reset",f.setAttribute("type","button"),f.title=c,f.appendChild(this.label_),f.addEventListener("click",this.handleClick_.bind(this),!1);const y=this.element;y.className=e+" "+ui+" "+bs,y.appendChild(f),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Xn)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const n=e.getRotation();void 0!==n&&(this.duration_>0&&n%(2*Math.PI)!=0?e.animate({rotation:0,duration:this.duration_,easing:ps}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const o="rotate("+n+"rad)";if(this.autoHide_){const c=this.element.classList.contains(Xn);c||0!==n?c&&0!==n&&this.element.classList.remove(Xn):this.element.classList.add(Xn)}this.label_.style.transform=o}this.rotation_=n}},Lh=class Hf extends Ri{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,o=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",c=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",f=void 0!==t.zoomInLabel?t.zoomInLabel:"+",g=void 0!==t.zoomOutLabel?t.zoomOutLabel:"\u2013",y=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",w=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",S=document.createElement("button");S.className=o,S.setAttribute("type","button"),S.title=y,S.appendChild("string"==typeof f?document.createTextNode(f):f),S.addEventListener("click",this.handleClick_.bind(this,n),!1);const M=document.createElement("button");M.className=c,M.setAttribute("type","button"),M.title=w,M.appendChild("string"==typeof g?document.createTextNode(g):g),M.addEventListener("click",this.handleClick_.bind(this,-n),!1);const F=this.element;F.className=e+" "+ui+" "+bs,F.appendChild(S),F.appendChild(M),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const n=this.getMap().getView();if(!n)return;const o=n.getZoom();if(void 0!==o){const c=n.getConstrainedZoom(o+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:c,duration:this.duration_,easing:ps})):n.setZoom(c)}}};function So(a,t,e,n){const o=a.getZoom();if(void 0===o)return;const c=a.getConstrainedZoom(o+t),f=a.getResolutionForZoom(c);a.getAnimating()&&a.cancelAnimations(),a.animate({resolution:f,anchor:e,duration:void 0!==n?n:250,easing:ps})}const Ra=class jf extends ye{constructor(t){super(),t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set("active",t)}setMap(t){this.map_=t}},qf=class Zf extends Ra{constructor(t){super(),this.delta_=(t=t||{}).delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==oe.DBLCLICK){const n=t.originalEvent,c=t.coordinate,f=n.shiftKey?-this.delta_:this.delta_;So(t.map.getView(),f,c,this.duration_),n.preventDefault(),e=!0}return!e}};function Ao(a){const t=a.length;let e=0,n=0;for(let o=0;o<t;o++)e+=a[o].clientX,n+=a[o].clientY;return[e/t,n/t]}const La=class Kf extends Ra{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==oe.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==oe.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==oe.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==oe.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function Mo(a){const t=arguments;return function(e){let n=!0;for(let o=0,c=t.length;o<c&&(n=n&&t[o](e),n);++o);return n}}const Jf=function(a){const t=a.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Oh=function(a){return!a.map.getTargetElement().hasAttribute("tabindex")||function(a){const t=a.map.getTargetElement(),e=a.map.getOwnerDocument().activeElement;return t.contains(e)}(a)},$f=ft,Fh=function(a){const t=a.originalEvent;return 0==t.button&&!(ma&&yn&&t.ctrlKey)},Dh=function(a){const t=a.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},tg=function(a){const t=a.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Nh=function(a){const t=a.originalEvent,e=t.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e&&!t.target.isContentEditable},ko=function(a){const t=a.originalEvent;return Tt(void 0!==t,56),"mouse"==t.pointerType},eg=function(a){const t=a.originalEvent;return Tt(void 0!==t,56),t.isPrimary&&0===t.button},sg=class ig extends La{constructor(t){super({stopDown:ct}),this.kinetic_=(t=t||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const e=t.condition?t.condition:Mo(Dh,eg);this.condition_=t.onFocusOnly?Mo(Oh,e):e,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const e=this.targetPointers,n=Ao(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const o=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],f=t.map.getView();(function Ku(a,t){a[0]*=t,a[1]*=t})(o,f.getResolution()),zr(o,f.getRotation()),f.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const o=this.kinetic_.getDistance(),c=this.kinetic_.getAngle(),f=n.getCenterInternal(),g=e.getPixelFromCoordinateInternal(f),y=e.getCoordinateFromPixelInternal([g[0]-o*Math.cos(c),g[1]-o*Math.sin(c)]);n.animateInternal({center:n.getConstrainedCenter(y),duration:500,easing:ps})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},ng=class ag extends La{constructor(t){t=t||{},super({stopDown:ct}),this.condition_=t.condition?t.condition:Jf,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!ko(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===po)return;const o=e.getSize(),c=t.pixel,f=Math.atan2(o[1]/2-c[1],c[0]-o[0]/2);void 0!==this.lastAngle_&&n.adjustRotationInternal(-(f-this.lastAngle_)),this.lastAngle_=f}handleUpEvent(t){return!ko(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!!(ko(t)&&Fh(t)&&this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},og=class rg extends ze{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",o=this.element_.style;o.left=Math.min(t[0],e[0])+n,o.top=Math.min(t[1],e[1])+n,o.width=Math.abs(e[0]-t[0])+n,o.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,o=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new Pf([o])}getGeometry(){return this.geometry_}};class Eo extends fe{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}const hg=class lg extends La{constructor(t){super(),this.box_=new og((t=t||{}).className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Fh,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const o=n[0]-e[0],c=n[1]-e[1];return o*o+c*c>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Eo("boxdrag",t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Eo(e?"boxend":"boxcancel",t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Eo("boxstart",t.coordinate,t)),!0)}onBoxEnd(t){}},ug=class cg extends hg{constructor(t){super({condition:(t=t||{}).condition?t.condition:tg,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const n=this.getMap().getView();let o=this.getGeometry();if(this.out_){const c=n.rotatedExtentForGeometry(o),f=n.getResolutionForExtentInternal(c),g=n.getResolution()/f;o=o.clone(),o.scale(g*g)}n.fitInternal(o,{duration:this.duration_,easing:ps})}},fg=class dg extends Ra{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return Dh(e)&&Nh(e)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if("keydown"==t.type){const n=t.originalEvent,o=n.keyCode;if(this.condition_(t)&&(40==o||37==o||39==o||38==o)){const f=t.map.getView(),g=f.getResolution()*this.pixelDelta_;let y=0,w=0;40==o?w=-g:37==o?y=-g:39==o?y=g:w=g;const S=[y,w];zr(S,f.getRotation()),function Uf(a,t,e){const n=a.getCenterInternal();n&&a.animateInternal({duration:void 0!==e?e:250,easing:Lu,center:a.getConstrainedCenter([n[0]+t[0],n[1]+t[1]])})}(f,S,this.duration_),n.preventDefault(),e=!0}}return!e}},pg=class gg extends Ra{constructor(t){super(),this.condition_=(t=t||{}).condition?t.condition:Nh,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if("keydown"==t.type||"keypress"==t.type){const n=t.originalEvent,o=n.charCode;if(this.condition_(t)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){const c=t.map,f=o=="+".charCodeAt(0)?this.delta_:-this.delta_;So(c.getView(),f,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}},vg=class yg extends Ra{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:$f;this.condition_=t.onFocusOnly?Mo(Oh,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||"wheel"!==t.type)return!0;const n=t.map,o=t.originalEvent;let c;if(o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),"wheel"==t.type&&(c=o.deltaY,Er&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(c/=vn),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(c*=40)),0===c)return!1;this.lastDelta_=c;const f=Date.now();void 0===this.startTime_&&(this.startTime_=f),(!this.mode_||f-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(c)<4?"trackpad":"wheel");const g=n.getView();if("trackpad"===this.mode_&&!g.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(g.getAnimating()&&g.cancelAnimations(),g.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),g.adjustZoom(-c/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=f,!1;this.totalDelta_+=c;const y=Math.max(this.timeout_-(f-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),y),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-Ut(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),So(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},wg=class bg extends La{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=ct),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],o=this.targetPointers[1],c=Math.atan2(o.clientY-n.clientY,o.clientX-n.clientX);if(void 0!==this.lastAngle_){const S=c-this.lastAngle_;this.rotationDelta_+=S,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=S}this.lastAngle_=c;const f=t.map,g=f.getView();if(g.getConstraints().rotation===po)return;const y=f.getViewport().getBoundingClientRect(),w=Ao(this.targetPointers);w[0]-=y.left,w[1]-=y.top,this.anchor_=f.getCoordinateFromPixelInternal(w),this.rotating_&&(f.render(),g.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},Cg=class _g extends La{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=ct),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],o=this.targetPointers[1],c=n.clientX-o.clientX,f=n.clientY-o.clientY,g=Math.sqrt(c*c+f*f);void 0!==this.lastDistance_&&(e=this.lastDistance_/g),this.lastDistance_=g;const y=t.map,w=y.getView();1!=e&&(this.lastScaleDelta_=e);const S=y.getViewport().getBoundingClientRect(),M=Ao(this.targetPointers);M[0]-=S.left,M[1]-=S.top,this.anchor_=y.getCoordinateFromPixelInternal(M),y.render(),w.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};function zh(a){a=a||{};const t=new Ue,e=new class mg{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const o=this.points_[e+2]-this.points_[n+2];if(o<1e3/60)return!1;const c=this.points_[e]-this.points_[n],f=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(f,c),this.initialVelocity_=Math.sqrt(c*c+f*f)/o,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===a.altShiftDragRotate||a.altShiftDragRotate)&&t.push(new ng),(void 0===a.doubleClickZoom||a.doubleClickZoom)&&t.push(new qf({delta:a.zoomDelta,duration:a.zoomDuration})),(void 0===a.dragPan||a.dragPan)&&t.push(new sg({onFocusOnly:a.onFocusOnly,kinetic:e})),(void 0===a.pinchRotate||a.pinchRotate)&&t.push(new wg),(void 0===a.pinchZoom||a.pinchZoom)&&t.push(new Cg({duration:a.zoomDuration})),(void 0===a.keyboard||a.keyboard)&&(t.push(new fg),t.push(new pg({delta:a.zoomDelta,duration:a.zoomDuration}))),(void 0===a.mouseWheelZoom||a.mouseWheelZoom)&&t.push(new vg({onFocusOnly:a.onFocusOnly,duration:a.zoomDuration})),(void 0===a.shiftDragZoom||a.shiftDragZoom)&&t.push(new ug({duration:a.zoomDuration})),t}function Xh(a){a instanceof Mi?a.setMapInternal(null):a instanceof Hn&&a.getLayers().forEach(Xh)}function Yh(a,t){if(a instanceof Mi)a.setMapInternal(t);else if(a instanceof Hn){const e=a.getLayers().getArray();for(let n=0,o=e.length;n<o;++n)Yh(e[n],t)}}const Wh=class Sg extends ye{constructor(t){super();const e=function Ag(a){let t=null;void 0!==a.keyboardEventTarget&&(t="string"==typeof a.keyboardEventTarget?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget);const e={},n=a.layers&&"function"==typeof a.layers.getLayers?a.layers:new Hn({layers:a.layers});let o,c,f;return e.layergroup=n,e.target=a.target,e.view=a.view instanceof Ii?a.view:new Ii,void 0!==a.controls&&(Array.isArray(a.controls)?o=new Ue(a.controls.slice()):(Tt("function"==typeof a.controls.getArray,47),o=a.controls)),void 0!==a.interactions&&(Array.isArray(a.interactions)?c=new Ue(a.interactions.slice()):(Tt("function"==typeof a.interactions.getArray,48),c=a.interactions)),void 0!==a.overlays?Array.isArray(a.overlays)?f=new Ue(a.overlays.slice()):(Tt("function"==typeof a.overlays.getArray,49),f=a.overlays):f=new Ue,{controls:o,interactions:c,keyboardEventTarget:t,overlays:f,values:e}}(t=t||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:vn,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=e.controls||function Vf(a){a=a||{};const t=new Ue;return(void 0===a.zoom||a.zoom)&&t.push(new Lh(a.zoomOptions)),(void 0===a.rotate||a.rotate)&&t.push(new Gf(a.rotateOptions)),(void 0===a.attribution||a.attribution)&&t.push(new Rh(a.attributionOptions)),t}(),this.interactions=e.interactions||zh({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new class ff extends class uf{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Ot(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const o=this.keyFunction_(n);return delete this.queuedElements_[o],n}enqueue(t){Tt(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=Vn&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,o=e.length,c=e[t],f=n[t],g=t;for(;t<o>>1;){const y=this.getLeftChildIndex_(t),w=this.getRightChildIndex_(t),S=w<o&&n[w]<n[y]?w:y;e[t]=e[S],n[t]=n[S],t=S}e[t]=c,n[t]=f,this.siftDown_(g,t)}siftDown_(t,e){const n=this.elements_,o=this.priorities_,c=n[e],f=o[e];for(;e>t;){const g=this.getParentIndex_(e);if(!(o[g]>f))break;n[e]=n[g],o[e]=o[g],e=g}n[e]=c,o[e]=f}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let o=0;const c=e.length;let f,g,y;for(g=0;g<c;++g)f=e[g],y=t(f),y==Vn?delete this.queuedElements_[this.keyFunction_(f)]:(n[o]=y,e[o++]=f);e.length=o,n.length=o,this.heapify_()}}{constructor(t,e){super(function(n){return t.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener("change",this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(2===n||3===n||4===n){3!==n&&e.removeEventListener("change",this.boundHandleTileChange_);const o=e.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let o,c,f,n=0;for(;this.tilesLoading_<t&&n<e&&this.getCount()>0;)c=this.dequeue()[0],f=c.getKey(),o=c.getState(),0===o&&!(f in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[f]=!0,++this.tilesLoading_,++n,c.load())}}(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(e.values);const n=this;t.view&&!(t.view instanceof Ii)&&t.view.then(function(o){n.setView(new Ii(o))}),this.controls.addEventListener("add",function(o){o.element.setMap(this)}.bind(this)),this.controls.addEventListener("remove",function(o){o.element.setMap(null)}.bind(this)),this.interactions.addEventListener("add",function(o){o.element.setMap(this)}.bind(this)),this.interactions.addEventListener("remove",function(o){o.element.setMap(null)}.bind(this)),this.overlays_.addEventListener("add",function(o){this.addOverlayInternal_(o.element)}.bind(this)),this.overlays_.addEventListener("remove",function(o){const c=o.element.getId();void 0!==c&&delete this.overlayIdIndex_[c.toString()],o.element.setMap(null)}.bind(this)),this.controls.forEach(function(o){o.setMap(this)}.bind(this)),this.interactions.forEach(function(o){o.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Yh(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const o=this.getCoordinateFromPixelInternal(t);return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,!1!==n.checkWrapped,e,null,void 0!==n.layerFilter?n.layerFilter:ft,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,function(o){n.push(o)},e),n}getAllLayers(){const t=[];return function e(n){n.forEach(function(o){o instanceof Hn?e(o.getLayers()):t.push(o)})}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,void 0!==(e=void 0!==e?e:{}).hitTolerance?e.hitTolerance:0,!1!==e.checkWrapped,void 0!==e.layerFilter?e.layerFilter:ft,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]}getTarget(){return this.get("target")}getTargetElement(){const t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null}getCoordinateFromPixel(t){return qr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?ue(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(t){const e=this.getLayerGroup();if(t instanceof Ue)return void e.setLayers(t);const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const o=t[e];if(!o.visible)continue;const c=o.layer.getRenderer();if(c&&!c.ready)return!0;const f=o.layer.getSource();if(f&&f.loading)return!0}return!1}getPixelFromCoordinate(t){const e=ki(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?ue(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,o){return function pf(a,t,e,n,o){if(!a||!(e in a.wantedTiles)||!a.wantedTiles[e][t.getKey()])return Vn;const c=a.viewState.center,f=n[0]-c[0],g=n[1]-c[1];return 65536*Math.log(o)+Math.sqrt(f*f+g*g)/o}(this.frameState_,t,e,n,o)}handleBrowserEvent(t,e){const n=new Ji(e=e||t.type,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if("pointerdown"===n||"wheel"===n||"keydown"===n){const o=this.getOwnerDocument(),c=this.viewport_.getRootNode?this.viewport_.getRootNode():o,f=e.target;if(this.overlayContainerStopEvent_.contains(f)||!(c===o?o.documentElement:c).contains(f))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const o=this.getInteractions().getArray().slice();for(let c=o.length-1;c>=0;c--){const f=o[c];if(f.getMap()===this&&f.getActive()&&this.getTargetElement()&&(!f.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let o=this.maxTilesLoading_,c=o;if(t){const f=t.viewHints;if(f[0]||f[1]){const g=Date.now()-t.time>8;o=g?0:8,c=g?0:2}}e.getTilesLoading()<o&&(e.reprioritize(),e.loadMoreTiles(o,c))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Zs("loadend",this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Zs("loadstart",this,t))));const n=this.postRenderFunctions_;for(let o=0,c=n.length;o<c;++o)n[o](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let e=0,n=this.targetChangeHandlerKeys_.length;e<n;++e)Lt(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,x(this.viewport_)}const t=this.getTargetElement();if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new rf(this)),this.mapBrowserEventHandler_=new cf(this,this.moveTolerance_);for(const o in oe)this.mapBrowserEventHandler_.addEventListener(oe[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!wn&&{passive:!1});const e=this.getOwnerDocument().defaultView,n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[At(n,"keydown",this.handleBrowserEvent,this),At(n,"keypress",this.handleBrowserEvent,this),At(e,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Lt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Lt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=At(t,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=At(t,"change",this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Lt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Ki("addlayer",t)),this.layerGroupPropertyListenerKeys_=[At(t,"propertychange",this.render,this),At(t,"change",this.render,this),At(t,"addlayer",this.handleLayerAdd_,this),At(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const o=t[e].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Xh(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),o=this.frameState_;let c=null;if(void 0!==e&&Xl(e)&&n&&n.isDef()){const f=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),g=n.getState();if(c={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Pr(g.center,g.resolution,g.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:g,viewHints:f,wantedTiles:{},mapId:Dt(this),renderTargets:{}},g.nextCenter&&g.nextResolution){const y=isNaN(g.nextRotation)?g.rotation:g.nextRotation;c.nextExtent=Pr(g.nextCenter,g.nextResolution,y,e)}}this.frameState_=c,this.renderer_.renderFrame(c),c&&(c.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,c.postRenderFunctions),o&&(!this.previousExtent_||!Fr(this.previousExtent_)&&!ci(c.extent,this.previousExtent_))&&(this.dispatchEvent(new Zs("movestart",this,o)),this.previousExtent_=ge(this.previousExtent_)),this.previousExtent_&&!c.viewHints[0]&&!c.viewHints[1]&&!ci(c.extent,this.previousExtent_)&&(this.dispatchEvent(new Zs("moveend",this,c)),et(c.extent,this.previousExtent_))),this.dispatchEvent(new Zs("postrender",this,c)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Ki("removelayer",e)),this.set("layergroup",t)}setSize(t){this.set("size",t)}setTarget(t){this.set("target",t)}setView(t){if(!t||t instanceof Ii)return void this.set("view",t);this.set("view",new Ii);const e=this;t.then(function(n){e.setView(new Ii(n))})}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),o=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),c=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);!isNaN(o)&&!isNaN(c)&&(e=[o,c],!Xl(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()}updateViewportSize_(){const t=this.getView();if(t){let e;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}}};var Gh=.0066943799901413165,Pa=484813681109536e-20,st=Math.PI/2,dt=1e-10,ve=.017453292519943295,gi=57.29577951308232,Bt=Math.PI/4,Oa=2*Math.PI,ce=3.14159265359,Oe={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const Lg={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var Hh=/[\s_\-\/\(\)]/g;function Qi(a,t){if(a[t])return a[t];for(var c,e=Object.keys(a),n=t.toLowerCase().replace(Hh,""),o=-1;++o<e.length;)if((c=e[o]).toLowerCase().replace(Hh,"")===n)return a[c]}function Io(a){var n,o,c,t={},e=a.split("+").map(function(g){return g.trim()}).filter(function(g){return g}).reduce(function(g,y){var w=y.split("=");return w.push(!0),g[w[0].toLowerCase()]=w[1],g},{}),f={proj:"projName",datum:"datumCode",rf:function(g){t.rf=parseFloat(g)},lat_0:function(g){t.lat0=g*ve},lat_1:function(g){t.lat1=g*ve},lat_2:function(g){t.lat2=g*ve},lat_ts:function(g){t.lat_ts=g*ve},lon_0:function(g){t.long0=g*ve},lon_1:function(g){t.long1=g*ve},lon_2:function(g){t.long2=g*ve},alpha:function(g){t.alpha=parseFloat(g)*ve},gamma:function(g){t.rectified_grid_angle=parseFloat(g)},lonc:function(g){t.longc=g*ve},x_0:function(g){t.x0=parseFloat(g)},y_0:function(g){t.y0=parseFloat(g)},k_0:function(g){t.k0=parseFloat(g)},k:function(g){t.k0=parseFloat(g)},a:function(g){t.a=parseFloat(g)},b:function(g){t.b=parseFloat(g)},r_a:function(){t.R_A=!0},zone:function(g){t.zone=parseInt(g,10)},south:function(){t.utmSouth=!0},towgs84:function(g){t.datum_params=g.split(",").map(function(y){return parseFloat(y)})},to_meter:function(g){t.to_meter=parseFloat(g)},units:function(g){t.units=g;var y=Qi(Lg,g);y&&(t.to_meter=y.to_meter)},from_greenwich:function(g){t.from_greenwich=g*ve},pm:function(g){var y=Qi(Oe,g);t.from_greenwich=(y||parseFloat(g))*ve},nadgrids:function(g){"@null"===g?t.datumCode="none":t.nadgrids=g},axis:function(g){var y="ewnsud";3===g.length&&-1!==y.indexOf(g.substr(0,1))&&-1!==y.indexOf(g.substr(1,1))&&-1!==y.indexOf(g.substr(2,1))&&(t.axis=g)},approx:function(){t.approx=!0}};for(n in e)o=e[n],n in f?"function"==typeof(c=f[n])?c(o):t[c]=o:t[n]=o;return"string"==typeof t.datumCode&&"WGS84"!==t.datumCode&&(t.datumCode=t.datumCode.toLowerCase()),t}var Og=/\s/,Fg=/[A-Za-z]/,Dg=/[A-Za-z84_]/,Qn=/[,\]]/,Zh=/[\d\.E\-\+]/;function Li(a){if("string"!=typeof a)throw new Error("not a string");this.text=a.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function qh(a,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var o=e.reduce(function(c,f){return Js(f,c),c},t?{}:a);t&&(a[t]=o)}function Js(a,t){if(Array.isArray(a)){var e=a.shift();if("PARAMETER"===e&&(e=a.shift()),1===a.length)return Array.isArray(a[0])?(t[e]={},void Js(a[0],t[e])):void(t[e]=a[0]);if(a.length)if("TOWGS84"!==e){if("AXIS"===e)return e in t||(t[e]=[]),void t[e].push(a);var n;switch(Array.isArray(e)||(t[e]={}),e){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[e]={name:a[0].toLowerCase(),convert:a[1]},void(3===a.length&&Js(a[2],t[e]));case"SPHEROID":case"ELLIPSOID":return t[e]={name:a[0],a:a[1],rf:a[2]},void(4===a.length&&Js(a[3],t[e]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return a[0]=["name",a[0]],void qh(t,e,a);default:for(n=-1;++n<a.length;)if(!Array.isArray(a[n]))return Js(a,t[e]);return qh(t,e,a)}}else t[e]=a;else t[e]=!0}else t[a]=!0}function pi(a){return.017453292519943295*a}function Kh(a){var t=function Ng(a){return new Li(a).output()}(a),e=t.shift(),n=t.shift();t.unshift(["name",n]),t.unshift(["type",e]);var o={};return Js(t,o),function Yg(a){if("GEOGCS"===a.type?a.projName="longlat":"LOCAL_CS"===a.type?(a.projName="identity",a.local=!0):a.projName="object"==typeof a.PROJECTION?Object.keys(a.PROJECTION)[0]:a.PROJECTION,a.AXIS){for(var t="",e=0,n=a.AXIS.length;e<n;++e){var o=[a.AXIS[e][0].toLowerCase(),a.AXIS[e][1].toLowerCase()];-1!==o[0].indexOf("north")||("y"===o[0]||"lat"===o[0])&&"north"===o[1]?t+="n":-1!==o[0].indexOf("south")||("y"===o[0]||"lat"===o[0])&&"south"===o[1]?t+="s":-1!==o[0].indexOf("east")||("x"===o[0]||"lon"===o[0])&&"east"===o[1]?t+="e":(-1!==o[0].indexOf("west")||("x"===o[0]||"lon"===o[0])&&"west"===o[1])&&(t+="w")}2===t.length&&(t+="u"),3===t.length&&(a.axis=t)}a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),"metre"===a.units&&(a.units="meter"),a.UNIT.convert&&("GEOGCS"===a.type?a.DATUM&&a.DATUM.SPHEROID&&(a.to_meter=a.UNIT.convert*a.DATUM.SPHEROID.a):a.to_meter=a.UNIT.convert));var c=a.GEOGCS;function f(w){return w*(a.to_meter||1)}"GEOGCS"===a.type&&(c=a),c&&(a.datumCode=c.DATUM?c.DATUM.name.toLowerCase():c.name.toLowerCase(),"d_"===a.datumCode.slice(0,2)&&(a.datumCode=a.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===a.datumCode||"new_zealand_1949"===a.datumCode)&&(a.datumCode="nzgd49"),("wgs_1984"===a.datumCode||"world_geodetic_system_1984"===a.datumCode)&&("Mercator_Auxiliary_Sphere"===a.PROJECTION&&(a.sphere=!0),a.datumCode="wgs84"),"_ferro"===a.datumCode.slice(-6)&&(a.datumCode=a.datumCode.slice(0,-6)),"_jakarta"===a.datumCode.slice(-8)&&(a.datumCode=a.datumCode.slice(0,-8)),~a.datumCode.indexOf("belge")&&(a.datumCode="rnb72"),c.DATUM&&c.DATUM.SPHEROID&&(a.ellps=c.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===a.ellps.toLowerCase().slice(0,13)&&(a.ellps="intl"),a.a=c.DATUM.SPHEROID.a,a.rf=parseFloat(c.DATUM.SPHEROID.rf,10)),c.DATUM&&c.DATUM.TOWGS84&&(a.datum_params=c.DATUM.TOWGS84),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36"),~a.datumCode.indexOf("osni_1952")&&(a.datumCode="osni52"),(~a.datumCode.indexOf("tm65")||~a.datumCode.indexOf("geodetic_datum_of_1965"))&&(a.datumCode="ire65"),"ch1903+"===a.datumCode&&(a.datumCode="ch1903"),~a.datumCode.indexOf("israel")&&(a.datumCode="isr93")),a.b&&!isFinite(a.b)&&(a.b=a.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",pi],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",pi],["x0","false_easting",f],["y0","false_northing",f],["long0","central_meridian",pi],["lat0","latitude_of_origin",pi],["lat0","standard_parallel_1",pi],["lat1","standard_parallel_1",pi],["lat2","standard_parallel_2",pi],["azimuth","Azimuth"],["alpha","azimuth",pi],["srsCode","name"]].forEach(function(w){return function Xg(a,t){var e=t[0],n=t[1];!(e in a)&&n in a&&(a[e]=a[n],3===t.length&&(a[e]=t[2](a[e])))}(a,w)}),!a.long0&&a.longc&&("Albers_Conic_Equal_Area"===a.projName||"Lambert_Azimuthal_Equal_Area"===a.projName)&&(a.long0=a.longc),a.lat_ts||!a.lat1||"Stereographic_South_Pole"!==a.projName&&"Polar Stereographic (variant B)"!==a.projName?!a.lat_ts&&a.lat0&&"Polar_Stereographic"===a.projName&&(a.lat_ts=a.lat0,a.lat0=pi(a.lat0>0?90:-90)):(a.lat0=pi(a.lat1>0?90:-90),a.lat_ts=a.lat1)}(o),o}function Ze(a){var t=this;if(2===arguments.length){var e=arguments[1];Ze[a]="string"==typeof e?"+"===e.charAt(0)?Io(arguments[1]):Kh(arguments[1]):e}else if(1===arguments.length){if(Array.isArray(a))return a.map(function(n){Array.isArray(n)?Ze.apply(t,n):Ze(n)});if("string"==typeof a){if(a in Ze)return Ze[a]}else"EPSG"in a?Ze["EPSG:"+a.EPSG]=a:"ESRI"in a?Ze["ESRI:"+a.ESRI]=a:"IAU2000"in a?Ze["IAU2000:"+a.IAU2000]=a:console.log(a);return}}Li.prototype.readCharicter=function(){var a=this.text[this.place++];if(4!==this.state)for(;Og.test(a);){if(this.place>=this.text.length)return;a=this.text[this.place++]}switch(this.state){case 1:return this.neutral(a);case 2:return this.keyword(a);case 4:return this.quoted(a);case 5:return this.afterquote(a);case 3:return this.number(a);case-1:return}},Li.prototype.afterquote=function(a){if('"'===a)return this.word+='"',void(this.state=4);if(Qn.test(a))return this.word=this.word.trim(),void this.afterItem(a);throw new Error("havn't handled \""+a+'" in afterquote yet, index '+this.place)},Li.prototype.afterItem=function(a){return","===a?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===a?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Li.prototype.number=function(a){if(!Zh.test(a)){if(Qn.test(a))return this.word=parseFloat(this.word),void this.afterItem(a);throw new Error("havn't handled \""+a+'" in number yet, index '+this.place)}this.word+=a},Li.prototype.quoted=function(a){'"'!==a?this.word+=a:this.state=5},Li.prototype.keyword=function(a){if(Dg.test(a))this.word+=a;else{if("["===a){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=1)}if(!Qn.test(a))throw new Error("havn't handled \""+a+'" in keyword yet, index '+this.place);this.afterItem(a)}},Li.prototype.neutral=function(a){if(Fg.test(a))return this.word=a,void(this.state=2);if('"'===a)return this.word="",void(this.state=4);if(Zh.test(a))return this.word=a,void(this.state=3);if(!Qn.test(a))throw new Error("havn't handled \""+a+'" in neutral yet, index '+this.place);this.afterItem(a)},Li.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function Mg(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]}(Ze);const $n=Ze;var Gg=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Vg=["3857","900913","3785","102113"];function Jh(a,t){var e,n;if(a=a||{},!t)return a;for(n in t)void 0!==(e=t[n])&&(a[n]=e);return a}function mi(a,t,e){var n=a*t;return e/Math.sqrt(1-n*n)}function Da(a){return a<0?-1:1}function gt(a){return Math.abs(a)<=ce?a:a-Da(a)*Oa}function ei(a,t,e){var n=a*e;return n=Math.pow((1-n)/(1+n),.5*a),Math.tan(.5*(st-t))/n}function Na(a,t){for(var n,o,e=.5*a,c=st-2*Math.atan(t),f=0;f<=15;f++)if(n=a*Math.sin(c),c+=o=st-2*Math.atan(t*Math.pow((1-n)/(1+n),e))-c,Math.abs(o)<=1e-10)return c;return-9999}function Qh(a){return a}var ap=[{init:function Jg(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):mi(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function Qg(a){var n,o,t=a.x,e=a.y;if(e*gi>90&&e*gi<-90&&t*gi>180&&t*gi<-180)return null;if(Math.abs(Math.abs(e)-st)<=dt)return null;if(this.sphere)n=this.x0+this.a*this.k0*gt(t-this.long0),o=this.y0+this.a*this.k0*Math.log(Math.tan(Bt+.5*e));else{var c=Math.sin(e),f=ei(this.e,e,c);n=this.x0+this.a*this.k0*gt(t-this.long0),o=this.y0-this.a*this.k0*Math.log(f)}return a.x=n,a.y=o,a},inverse:function $g(a){var n,o,t=a.x-this.x0,e=a.y-this.y0;if(this.sphere)o=st-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var c=Math.exp(-e/(this.a*this.k0));if(-9999===(o=Na(this.e,c)))return null}return n=gt(this.long0+t/(this.a*this.k0)),a.x=n,a.y=o,a},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function ip(){},forward:Qh,inverse:Qh,names:["longlat","identity"]}],tr={},er=[];function $h(a,t){var e=er.length;return a.names?(er[e]=a,a.names.forEach(function(n){tr[n.toLowerCase()]=e}),this):(console.log(t),!0)}const op={start:function rp(){ap.forEach($h)},add:$h,get:function np(a){if(!a)return!1;var t=a.toLowerCase();return typeof tr[t]<"u"&&er[tr[t]]?er[tr[t]]:void 0}};var It={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},lp=It.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};It.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var pe={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var tc={};function pp(a){if(0===a.length)return null;var t="@"===a[0];return t&&(a=a.slice(1)),"null"===a?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:a,mandatory:!t,grid:tc[a]||null,isNull:!1}}function Qs(a){return a/3600*Math.PI/180}function Lo(a,t,e){return String.fromCharCode.apply(null,new Uint8Array(a.buffer.slice(t,e)))}function vp(a){return a.map(function(t){return[Qs(t.longitudeShift),Qs(t.latitudeShift)]})}function bp(a,t,e){return{name:Lo(a,t+8,t+16).trim(),parent:Lo(a,t+24,t+24+8).trim(),lowerLatitude:a.getFloat64(t+72,e),upperLatitude:a.getFloat64(t+88,e),lowerLongitude:a.getFloat64(t+104,e),upperLongitude:a.getFloat64(t+120,e),latitudeInterval:a.getFloat64(t+136,e),longitudeInterval:a.getFloat64(t+152,e),gridNodeCount:a.getInt32(t+168,e)}}function wp(a,t,e,n){for(var o=t+176,f=[],g=0;g<e.gridNodeCount;g++){var y={latitudeShift:a.getFloat32(o+16*g,n),longitudeShift:a.getFloat32(o+16*g+4,n),latitudeAccuracy:a.getFloat32(o+16*g+8,n),longitudeAccuracy:a.getFloat32(o+16*g+12,n)};f.push(y)}return f}function $s(a,t){if(!(this instanceof $s))return new $s(a);t=t||function(w){if(w)throw w};var e=function qg(a){if(!function Wg(a){return"string"==typeof a}(a))return a;if(function Bg(a){return a in $n}(a))return $n[a];if(function Hg(a){return Gg.some(function(t){return a.indexOf(t)>-1})}(a)){var t=Kh(a);if(function jg(a){var t=Qi(a,"authority");if(t){var e=Qi(t,"epsg");return e&&Vg.indexOf(e)>-1}}(t))return $n["EPSG:3857"];var e=function Ug(a){var t=Qi(a,"extension");if(t)return Qi(t,"proj4")}(t);return e?Io(e):t}return function Zg(a){return"+"===a[0]}(a)?Io(a):void 0}(a);if("object"==typeof e){var n=$s.projections.get(e.projName);if(n){if(e.datumCode&&"none"!==e.datumCode){var o=Qi(pe,e.datumCode);o&&(e.datum_params=e.datum_params||(o.towgs84?o.towgs84.split(","):null),e.ellps=o.ellipse,e.datumName=o.datumName?o.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var c=function cp(a,t,e,n,o){if(!a){var c=Qi(It,n);c||(c=lp),a=c.a,t=c.b,e=c.rf}return e&&!t&&(t=(1-1/e)*a),(0===e||Math.abs(a-t)<dt)&&(o=!0,t=a),{a,b:t,rf:e,sphere:o}}(e.a,e.b,e.rf,e.ellps,e.sphere),f=function hp(a,t,e,n){var o=a*a,c=t*t,f=(o-c)/o,g=0;return n?(o=(a*=1-f*(.16666666666666666+f*(.04722222222222222+.022156084656084655*f)))*a,f=0):g=Math.sqrt(f),{es:f,e:g,ep2:(o-c)/c}}(c.a,c.b,0,e.R_A),g=function gp(a){return void 0===a?null:a.split(",").map(pp)}(e.nadgrids),y=e.datum||function up(a,t,e,n,o,c,f){var g={};return g.datum_type=void 0===a||"none"===a?5:4,t&&(g.datum_params=t.map(parseFloat),(0!==g.datum_params[0]||0!==g.datum_params[1]||0!==g.datum_params[2])&&(g.datum_type=1),g.datum_params.length>3&&(0!==g.datum_params[3]||0!==g.datum_params[4]||0!==g.datum_params[5]||0!==g.datum_params[6])&&(g.datum_type=2,g.datum_params[3]*=Pa,g.datum_params[4]*=Pa,g.datum_params[5]*=Pa,g.datum_params[6]=g.datum_params[6]/1e6+1)),f&&(g.datum_type=3,g.grids=f),g.a=e,g.b=n,g.es=o,g.ep2=c,g}(e.datumCode,e.datum_params,c.a,c.b,f.es,f.ep2,g);Jh(this,e),Jh(this,n),this.a=c.a,this.b=c.b,this.rf=c.rf,this.sphere=c.sphere,this.es=f.es,this.e=f.e,this.ep2=f.ep2,this.datum=y,this.init(),t(null,this)}else t(a)}else t(a)}($s.projections=op).start();const za=$s;function ec(a,t,e){var f,g,w,n=a.x,o=a.y,c=a.z?a.z:0;if(o<-st&&o>-1.001*st)o=-st;else if(o>st&&o<1.001*st)o=st;else{if(o<-st)return{x:-1/0,y:-1/0,z:a.z};if(o>st)return{x:1/0,y:1/0,z:a.z}}return n>Math.PI&&(n-=2*Math.PI),g=Math.sin(o),w=Math.cos(o),{x:((f=e/Math.sqrt(1-t*(g*g)))+c)*w*Math.cos(n),y:(f+c)*w*Math.sin(n),z:(f*(1-t)+c)*g}}function ic(a,t,e,n){var g,y,w,S,M,I,F,D,X,Y,G,V,j,ut,vt,Z=a.x,$=a.y,it=a.z?a.z:0;if(g=Math.sqrt(Z*Z+$*$),y=Math.sqrt(Z*Z+$*$+it*it),g/e<1e-12){if(ut=0,y/e<1e-12)return vt=-n,{x:a.x,y:a.y,z:a.z}}else ut=Math.atan2($,Z);w=it/y,D=(S=g/y)*(1-t)*(M=1/Math.sqrt(1-t*(2-t)*S*S)),X=w*M,j=0;do{j++,I=t*(F=e/Math.sqrt(1-t*X*X))/(F+(vt=g*D+it*X-F*(1-t*X*X))),V=(G=w*(M=1/Math.sqrt(1-I*(2-I)*S*S)))*D-(Y=S*(1-I)*M)*X,D=Y,X=G}while(V*V>1e-24&&j<30);return{x:ut,y:Math.atan(G/Math.abs(Y)),z:vt}}function ir(a){return 1===a||2===a}function sc(a,t,e){if(null===a.grids||0===a.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-e.x,y:e.y},o={x:Number.NaN,y:Number.NaN},f=[],g=0;g<a.grids.length;g++){var y=a.grids[g];if(f.push(y.name),y.isNull){o=n;break}if(null!==y.grid){var w=y.grid.subgrids[0],S=(Math.abs(w.del[1])+Math.abs(w.del[0]))/1e4;if(!(w.ll[1]-S>n.y||w.ll[0]-S>n.x||w.ll[1]+(w.lim[1]-1)*w.del[1]+S<n.y||w.ll[0]+(w.lim[0]-1)*w.del[0]+S<n.x||(o=Mp(n,t,w),isNaN(o.x))))break}else if(y.mandatory)return console.log("Unable to find mandatory grid '"+y.name+"'"),-1}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*gi+" "+n.y*gi+" tried: '"+f+"'"),-1):(e.x=-o.x,e.y=o.y,0)}function Mp(a,t,e){var n={x:Number.NaN,y:Number.NaN};if(isNaN(a.x))return n;var o={x:a.x,y:a.y};o.x-=e.ll[0],o.y-=e.ll[1],o.x=gt(o.x-Math.PI)+Math.PI;var c=ac(o,e);if(t){if(isNaN(c.x))return n;c.x=o.x-c.x,c.y=o.y-c.y;var y,w,f=9;do{if(w=ac(c,e),isNaN(w.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}c.x+=(y={x:o.x-(w.x+c.x),y:o.y-(w.y+c.y)}).x,c.y+=y.y}while(f--&&Math.abs(y.x)>1e-12&&Math.abs(y.y)>1e-12);if(f<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=gt(c.x+e.ll[0]),n.y=c.y+e.ll[1]}else isNaN(c.x)||(n.x=a.x+c.x,n.y=a.y+c.y);return n}function ac(a,t){var f,e={x:a.x/t.del[0],y:a.y/t.del[1]},n_x=Math.floor(e.x),n_y=Math.floor(e.y),o_x=e.x-1*n_x,o_y=e.y-1*n_y,c={x:Number.NaN,y:Number.NaN};if(n_x<0||n_x>=t.lim[0]||n_y<0||n_y>=t.lim[1])return c;var g_x=t.cvs[f=n_y*t.lim[0]+n_x][0],g_y=t.cvs[f][1];f++;var y_x=t.cvs[f][0],y_y=t.cvs[f][1],w_x=t.cvs[f+=t.lim[0]][0],w_y=t.cvs[f][1];f--;var S_y=t.cvs[f][1],M=o_x*o_y,I=o_x*(1-o_y),F=(1-o_x)*(1-o_y),D=(1-o_x)*o_y;return c.x=F*g_x+I*y_x+D*t.cvs[f][0]+M*w_x,c.y=F*g_y+I*y_y+D*S_y+M*w_y,c}function nc(a,t,e){var f,g,y,n=e.x,o=e.y,c=e.z||0,w={};for(y=0;y<3;y++)if(!t||2!==y||void 0!==e.z)switch(0===y?(f=n,g=-1!=="ew".indexOf(a.axis[y])?"x":"y"):1===y?(f=o,g=-1!=="ns".indexOf(a.axis[y])?"y":"x"):(f=c,g="z"),a.axis[y]){case"e":case"n":w[g]=f;break;case"w":case"s":w[g]=-f;break;case"u":void 0!==e[g]&&(w.z=f);break;case"d":void 0!==e[g]&&(w.z=-f);break;default:return null}return w}function rc(a){var t={x:a[0],y:a[1]};return a.length>2&&(t.z=a[2]),a.length>3&&(t.m=a[3]),t}function oc(a){if("function"==typeof Number.isFinite){if(Number.isFinite(a))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof a||a!=a||!isFinite(a))throw new TypeError("coordinates must be finite numbers")}function sr(a,t,e,n){var o,c=void 0!==(e=Array.isArray(e)?rc(e):{x:e.x,y:e.y,z:e.z,m:e.m}).z;if(function kp(a){oc(a.x),oc(a.y)}(e),a.datum&&t.datum&&function Ep(a,t){return(1===a.datum.datum_type||2===a.datum.datum_type||3===a.datum.datum_type)&&"WGS84"!==t.datumCode||(1===t.datum.datum_type||2===t.datum.datum_type||3===t.datum.datum_type)&&"WGS84"!==a.datumCode}(a,t)&&(e=sr(a,o=new za("WGS84"),e,n),a=o),n&&"enu"!==a.axis&&(e=nc(a,!1,e)),"longlat"===a.projName)e={x:e.x*ve,y:e.y*ve,z:e.z||0};else if(a.to_meter&&(e={x:e.x*a.to_meter,y:e.y*a.to_meter,z:e.z||0}),!(e=a.inverse(e)))return;if(a.from_greenwich&&(e.x+=a.from_greenwich),e=function Ap(a,t,e){if(function _p(a,t){return!(a.datum_type!==t.datum_type||a.a!==t.a||Math.abs(a.es-t.es)>5e-11)&&(1===a.datum_type?a.datum_params[0]===t.datum_params[0]&&a.datum_params[1]===t.datum_params[1]&&a.datum_params[2]===t.datum_params[2]:2!==a.datum_type||a.datum_params[0]===t.datum_params[0]&&a.datum_params[1]===t.datum_params[1]&&a.datum_params[2]===t.datum_params[2]&&a.datum_params[3]===t.datum_params[3]&&a.datum_params[4]===t.datum_params[4]&&a.datum_params[5]===t.datum_params[5]&&a.datum_params[6]===t.datum_params[6])}(a,t)||5===a.datum_type||5===t.datum_type)return e;var n=a.a,o=a.es;if(3===a.datum_type){if(0!==sc(a,!1,e))return;n=6378137,o=Gh}var f=t.a,g=t.b,y=t.es;return 3===t.datum_type&&(f=6378137,g=6356752.314,y=Gh),o!==y||n!==f||ir(a.datum_type)||ir(t.datum_type)?(e=ec(e,o,n),ir(a.datum_type)&&(e=function Cp(a,t,e){if(1===t)return{x:a.x+e[0],y:a.y+e[1],z:a.z+e[2]};if(2===t){var f=e[3],g=e[4],y=e[5],w=e[6];return{x:w*(a.x-y*a.y+g*a.z)+e[0],y:w*(y*a.x+a.y-f*a.z)+e[1],z:w*(-g*a.x+f*a.y+a.z)+e[2]}}}(e,a.datum_type,a.datum_params)),ir(t.datum_type)&&(e=function Sp(a,t,e){if(1===t)return{x:a.x-e[0],y:a.y-e[1],z:a.z-e[2]};if(2===t){var f=e[3],g=e[4],y=e[5],w=e[6],S=(a.x-e[0])/w,M=(a.y-e[1])/w,I=(a.z-e[2])/w;return{x:S+y*M-g*I,y:-y*S+M+f*I,z:g*S-f*M+I}}}(e,t.datum_type,t.datum_params)),e=ic(e,y,f,g),3!==t.datum_type||0===sc(t,!0,e)?e:void 0):e}(a.datum,t.datum,e))return t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),"longlat"===t.projName?e={x:e.x*gi,y:e.y*gi,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),n&&"enu"!==t.axis?nc(t,!0,e):(c||delete e.z,e)}var lc=za("WGS84");function Po(a,t,e,n){var o,c,f;return Array.isArray(e)?(o=sr(a,t,e,n)||{x:NaN,y:NaN},e.length>2?typeof a.name<"u"&&"geocent"===a.name||typeof t.name<"u"&&"geocent"===t.name?"number"==typeof o.z?[o.x,o.y,o.z].concat(e.splice(3)):[o.x,o.y,e[2]].concat(e.splice(3)):[o.x,o.y].concat(e.splice(2)):[o.x,o.y]):(c=sr(a,t,e,n),2===(f=Object.keys(e)).length||f.forEach(function(g){if(typeof a.name<"u"&&"geocent"===a.name||typeof t.name<"u"&&"geocent"===t.name){if("x"===g||"y"===g||"z"===g)return}else if("x"===g||"y"===g)return;c[g]=e[g]}),c)}function hc(a){return a instanceof za?a:a.oProj?a.oProj:za(a)}const Ge=function Tp(a,t,e){a=hc(a);var o,n=!1;return typeof t>"u"?(t=a,a=lc,n=!0):(typeof t.x<"u"||Array.isArray(t))&&(e=t,t=a,a=lc,n=!0),t=hc(t),e?Po(a,t,e):(o={forward:function(c,f){return Po(a,t,c,f)},inverse:function(c,f){return Po(t,a,c,f)}},n&&(o.oProj=t),o)};const Ip={forward:fc,inverse:function Rp(a){var t=Fo(xc(a.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]},toPoint:gc};function fc(a,t){return t=t||5,function Op(a,t){var e="00000"+a.easting,n="00000"+a.northing;return a.zoneNumber+a.zoneLetter+function Fp(a,t,e){var n=mc(e);return function Dp(a,t,e){var n=e-1,o="AJSAJS".charCodeAt(n),c="AFAFAF".charCodeAt(n),f=o+a-1,g=c+t,y=!1;return f>90&&(f=f-90+65-1,y=!0),(73===f||o<73&&f>73||(f>73||o<73)&&y)&&f++,(79===f||o<79&&f>79||(f>79||o<79)&&y)&&73==++f&&f++,f>90&&(f=f-90+65-1),g>86?(g=g-86+65-1,y=!0):y=!1,(73===g||c<73&&g>73||(g>73||c<73)&&y)&&g++,(79===g||c<79&&g>79||(g>79||c<79)&&y)&&73==++g&&g++,g>86&&(g=g-86+65-1),String.fromCharCode(f)+String.fromCharCode(g)}(Math.floor(a/1e5),Math.floor(t/1e5)%20,n)}(a.easting,a.northing,a.zoneNumber)+e.substr(e.length-5,t)+n.substr(n.length-5,t)}(function Lp(a){var g,y,w,S,M,X,Y,t=a.lat,e=a.lon,n=6378137,o=.00669438,c=.9996,F=Oo(t),D=Oo(e);Y=Math.floor((e+180)/6)+1,180===e&&(Y=60),t>=56&&t<64&&e>=3&&e<12&&(Y=32),t>=72&&t<84&&(e>=0&&e<9?Y=31:e>=9&&e<21?Y=33:e>=21&&e<33?Y=35:e>=33&&e<42&&(Y=37)),X=Oo(6*(Y-1)-180+3),g=o/(1-o),y=n/Math.sqrt(1-o*Math.sin(F)*Math.sin(F)),w=Math.tan(F)*Math.tan(F),S=g*Math.cos(F)*Math.cos(F);var G=c*y*((M=Math.cos(F)*(D-X))+(1-w+S)*M*M*M/6+(5-18*w+w*w+72*S-58*g)*M*M*M*M*M/120)+5e5,V=c*(n*(.9983242984503243*F-.002514607064228144*Math.sin(2*F)+2639046602129982e-21*Math.sin(4*F)-35*o*o*o/3072*Math.sin(6*F))+y*Math.tan(F)*(M*M/2+(5-w+9*S+4*S*S)*M*M*M*M/24+(61-58*w+w*w+600*S-330*g)*M*M*M*M*M*M/720));return t<0&&(V+=1e7),{northing:Math.round(V),easting:Math.round(G),zoneNumber:Y,zoneLetter:Pp(t)}}({lat:a[1],lon:a[0]}),t)}function gc(a){var t=Fo(xc(a.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Oo(a){return a*(Math.PI/180)}function pc(a){return a/Math.PI*180}function Fo(a){var t=a.northing,e=a.easting,n=a.zoneLetter,o=a.zoneNumber;if(o<0||o>60)return null;var y,S,M,I,F,D,Y,G,V,c=.9996,f=6378137,g=.00669438,w=(1-Math.sqrt(1-g))/(1+Math.sqrt(1-g)),j=e-5e5,Z=t;n<"N"&&(Z-=1e7),Y=6*(o-1)-180+3,y=g/(1-g),V=(G=Z/c/6367449.145945056)+(3*w/2-27*w*w*w/32)*Math.sin(2*G)+(21*w*w/16-55*w*w*w*w/32)*Math.sin(4*G)+151*w*w*w/96*Math.sin(6*G),S=f/Math.sqrt(1-g*Math.sin(V)*Math.sin(V)),M=Math.tan(V)*Math.tan(V),I=y*Math.cos(V)*Math.cos(V),F=f*(1-g)/Math.pow(1-g*Math.sin(V)*Math.sin(V),1.5),D=j/(S*c);var $=V-S*Math.tan(V)/F*(D*D/2-(5+3*M+10*I-4*I*I-9*y)*D*D*D*D/24+(61+90*M+298*I+45*M*M-252*y-3*I*I)*D*D*D*D*D*D/720);$=pc($);var ut,it=(D-(1+2*M+I)*D*D*D/6+(5-2*I+28*M-3*I*I+8*y+24*M*M)*D*D*D*D*D/120)/Math.cos(V);if(it=Y+pc(it),a.accuracy){var ht=Fo({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});ut={top:ht.lat,right:ht.lon,bottom:$,left:it}}else ut={lat:$,lon:it};return ut}function Pp(a){var t="Z";return 84>=a&&a>=72?t="X":72>a&&a>=64?t="W":64>a&&a>=56?t="V":56>a&&a>=48?t="U":48>a&&a>=40?t="T":40>a&&a>=32?t="S":32>a&&a>=24?t="R":24>a&&a>=16?t="Q":16>a&&a>=8?t="P":8>a&&a>=0?t="N":0>a&&a>=-8?t="M":-8>a&&a>=-16?t="L":-16>a&&a>=-24?t="K":-24>a&&a>=-32?t="J":-32>a&&a>=-40?t="H":-40>a&&a>=-48?t="G":-48>a&&a>=-56?t="F":-56>a&&a>=-64?t="E":-64>a&&a>=-72?t="D":-72>a&&a>=-80&&(t="C"),t}function mc(a){var t=a%6;return 0===t&&(t=6),t}function xc(a){if(a&&0===a.length)throw"MGRSPoint coverting from nothing";for(var o,t=a.length,e=null,n="",c=0;!/[A-Z]/.test(o=a.charAt(c));){if(c>=2)throw"MGRSPoint bad conversion from: "+a;n+=o,c++}var f=parseInt(n,10);if(0===c||c+3>t)throw"MGRSPoint bad conversion from: "+a;var g=a.charAt(c++);if(g<="A"||"B"===g||"Y"===g||g>="Z"||"I"===g||"O"===g)throw"MGRSPoint zone letter "+g+" not handled: "+a;e=a.substring(c,c+=2);for(var y=mc(f),w=function Np(a,t){for(var e="AJSAJS".charCodeAt(t-1),n=1e5,o=!1;e!==a.charCodeAt(0);){if(73==++e&&e++,79===e&&e++,e>90){if(o)throw"Bad character: "+a;e=65,o=!0}n+=1e5}return n}(e.charAt(0),y),S=function zp(a,t){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var e="AFAFAF".charCodeAt(t-1),n=0,o=!1;e!==a.charCodeAt(0);){if(73==++e&&e++,79===e&&e++,e>86){if(o)throw"Bad character: "+a;e=65,o=!0}n+=1e5}return n}(e.charAt(1),y);S<Xp(g);)S+=2e6;var M=t-c;if(M%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+a;var X,Y,G,I=M/2,F=0,D=0;return I>0&&(X=1e5/Math.pow(10,I),Y=a.substring(c,c+I),F=parseFloat(Y)*X,G=a.substring(c+I),D=parseFloat(G)*X),{easting:F+w,northing:D+S,zoneLetter:g,zoneNumber:f,accuracy:X}}function Xp(a){var t;switch(a){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+a}function ea(a,t,e){if(!(this instanceof ea))return new ea(a,t,e);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("object"==typeof a)this.x=a.x,this.y=a.y,this.z=a.z||0;else if("string"==typeof a&&typeof t>"u"){var n=a.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=a,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}ea.fromMGRS=function(a){return new ea(gc(a))},ea.prototype.toMGRS=function(a){return fc([this.x,this.y],a)};const Yp=ea;var vc=.01953125,bc=.01068115234375;function wc(a){var t=[];t[0]=1-a*(.25+a*(.046875+a*(vc+a*bc))),t[1]=a*(.75-a*(.046875+a*(vc+a*bc)));var e=a*a;return t[2]=e*(.46875-a*(.013020833333333334+.007120768229166667*a)),t[3]=(e*=a)*(.3645833333333333-.005696614583333333*a),t[4]=e*a*.3076171875,t}function ar(a,t,e,n){return n[0]*a-(e*=t)*(n[1]+(t*=t)*(n[2]+t*(n[3]+t*n[4])))}function _c(a,t,e){for(var n=1/(1-t),o=a,c=20;c;--c){var f=Math.sin(o),g=1-t*f*f;if(o-=g=(ar(o,f,Math.cos(o),e)-a)*(g*Math.sqrt(g))*n,Math.abs(g)<dt)return o}return o}const nr={init:function Jp(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=wc(this.es),this.ml0=ar(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function Qp(a){var o,c,f,e=a.y,n=gt(a.x-this.long0),g=Math.sin(e),y=Math.cos(e);if(this.es){var S=y*n,M=Math.pow(S,2),I=this.ep2*Math.pow(y,2),F=Math.pow(I,2),D=Math.abs(y)>dt?Math.tan(e):0,X=Math.pow(D,2),Y=Math.pow(X,2);o=1-this.es*Math.pow(g,2),S/=Math.sqrt(o);var G=ar(e,g,y,this.en);c=this.a*(this.k0*S*(1+M/6*(1-X+I+M/20*(5-18*X+Y+14*I-58*X*I+M/42*(61+179*Y-Y*X-479*X)))))+this.x0,f=this.a*(this.k0*(G-this.ml0+g*n*S/2*(1+M/12*(5-X+9*I+4*F+M/30*(61+Y-58*X+270*I-330*X*I+M/56*(1385+543*Y-Y*X-3111*X))))))+this.y0}else{var w=y*Math.sin(n);if(Math.abs(Math.abs(w)-1)<dt)return 93;if(c=.5*this.a*this.k0*Math.log((1+w)/(1-w))+this.x0,f=y*Math.cos(n)/Math.sqrt(1-Math.pow(w,2)),(w=Math.abs(f))>=1){if(w-1>dt)return 93;f=0}else f=Math.acos(f);e<0&&(f=-f),f=this.a*this.k0*(f-this.lat0)+this.y0}return a.x=c,a.y=f,a},inverse:function $p(a){var t,e,n,o,c=1/this.a*(a.x-this.x0),f=1/this.a*(a.y-this.y0);if(this.es)if(e=_c(t=this.ml0+f/this.k0,this.es,this.en),Math.abs(e)<st){var M=Math.sin(e),I=Math.cos(e),F=Math.abs(I)>dt?Math.tan(e):0,D=this.ep2*Math.pow(I,2),X=Math.pow(D,2),Y=Math.pow(F,2),G=Math.pow(Y,2);t=1-this.es*Math.pow(M,2);var V=c*Math.sqrt(t)/this.k0,j=Math.pow(V,2);n=e-(t*=F)*j/(1-this.es)*.5*(1-j/12*(5+3*Y-9*D*Y+D-4*X-j/30*(61+90*Y-252*D*Y+45*G+46*D-j/56*(1385+3633*Y+4095*G+1574*G*Y)))),o=gt(this.long0+V*(1-j/6*(1+2*Y+D-j/20*(5+28*Y+24*G+8*D*Y+6*D-j/42*(61+662*Y+1320*G+720*G*Y))))/I)}else n=st*Da(f),o=0;else{var g=Math.exp(c/this.k0),y=.5*(g-1/g),S=Math.cos(this.lat0+f/this.k0);t=Math.sqrt((1-Math.pow(S,2))/(1+Math.pow(y,2))),n=Math.asin(t),f<0&&(n=-n),o=0===y&&0===S?0:gt(Math.atan2(y,S)+this.long0)}return a.x=o,a.y=n,a},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Cc(a){var t=Math.exp(a);return(t-1/t)/2}function ii(a,t){a=Math.abs(a),t=Math.abs(t);var e=Math.max(a,t),n=Math.min(a,t)/(e||1);return e*Math.sqrt(1+Math.pow(n,2))}function Do(a,t){for(var f,e=2*Math.cos(2*t),n=a.length-1,o=a[n],c=0;--n>=0;)f=e*o-c+a[n],c=o,o=f;return t+f*Math.sin(2*t)}function Sc(a,t,e){for(var D,X,n=Math.sin(t),o=Math.cos(t),c=Cc(e),f=function am(a){var t=Math.exp(a);return(t+1/t)/2}(e),g=2*o*f,y=-2*n*c,w=a.length-1,S=a[w],M=0,I=0,F=0;--w>=0;)D=I,X=M,S=g*(I=S)-D-y*(M=F)+a[w],F=y*I-X+g*M;return[(g=n*f)*S-(y=o*c)*F,g*F+y*S]}const rr={init:function nm(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(nr.init.apply(this),this.forward=nr.forward,this.inverse=nr.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var a=this.es/(1+Math.sqrt(1-this.es)),t=a/(2-a),e=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),this.cgb[1]=(e*=t)*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=e*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),this.cgb[2]=(e*=t)*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=e*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),this.cgb[3]=(e*=t)*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=e*(1237/630+t*(t*(-24832/14175)-2.4)),this.cgb[4]=(e*=t)*(4174/315+t*(-144838/6237)),this.cbg[4]=e*(-734/315+t*(109598/31185)),this.cgb[5]=(e*=t)*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=e*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=e*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),this.utg[2]=(e*=t)*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=e*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),this.utg[3]=(e*=t)*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=e*(49561/161280+t*(-179/168+t*(6601661/7257600))),this.utg[4]=(e*=t)*(-4583/161280+t*(108847/3991680)),this.gtu[4]=e*(34729/80640+t*(-3418889/1995840)),this.utg[5]=(e*=t)*(-20648693/638668800),this.gtu[5]=.6650675310896665*e;var n=Do(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function sm(a,t){for(var f,e=2*Math.cos(t),n=a.length-1,o=a[n],c=0;--n>=0;)f=e*o-c+a[n],c=o,o=f;return Math.sin(t)*f}(this.gtu,2*n))},forward:function rm(a){var t=gt(a.x-this.long0),e=a.y;e=Do(this.cbg,e);var n=Math.sin(e),o=Math.cos(e),c=Math.sin(t),f=Math.cos(t);e=Math.atan2(n,f*o),t=Math.atan2(c*o,ii(n,o*f)),t=function im(a){var t=Math.abs(a);return t=function em(a){var t=1+a,e=t-1;return 0===e?a:a*Math.log(t)/e}(t*(1+t/(ii(1,t)+1))),a<0?-t:t}(Math.tan(t));var y,w,g=Sc(this.gtu,2*e,2*t);return e+=g[0],t+=g[1],Math.abs(t)<=2.623395162778?(y=this.a*(this.Qn*t)+this.x0,w=this.a*(this.Qn*e+this.Zb)+this.y0):(y=1/0,w=1/0),a.x=y,a.y=w,a},inverse:function om(a){var n,o,t=1/this.a*(a.x-this.x0),e=1/this.a*(a.y-this.y0);if(e=(e-this.Zb)/this.Qn,t/=this.Qn,Math.abs(t)<=2.623395162778){var c=Sc(this.utg,2*e,2*t);e+=c[0],t+=c[1],t=Math.atan(Cc(t));var f=Math.sin(e),g=Math.cos(e),y=Math.sin(t),w=Math.cos(t);e=Math.atan2(f*w,ii(y,w*g)),n=gt((t=Math.atan2(y,w*g))+this.long0),o=Do(this.cgb,e)}else n=1/0,o=1/0;return a.x=n,a.y=o,a},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},fm={init:function um(){var a=function hm(a,t){if(void 0===a){if((a=Math.floor(30*(gt(t)+Math.PI)/Math.PI)+1)<0)return 0;if(a>60)return 60}return a}(this.zone,this.long0);if(void 0===a)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(a)-183)*ve,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,rr.init.apply(this),this.forward=rr.forward,this.inverse=rr.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function No(a,t){return Math.pow((1-a)/(1+a),t)}const zo={init:function pm(){var a=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Bt)/(Math.pow(Math.tan(.5*this.lat0+Bt),this.C)*No(this.e*a,this.ratexp))},forward:function mm(a){var t=a.x,e=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+Bt),this.C)*No(this.e*Math.sin(e),this.ratexp))-st,a.x=this.C*t,a},inverse:function xm(a){for(var e=a.x/this.C,n=a.y,o=Math.pow(Math.tan(.5*n+Bt)/this.K,1/this.C),c=20;c>0&&(n=2*Math.atan(o*No(this.e*Math.sin(a.y),-.5*this.e))-st,!(Math.abs(n-a.y)<1e-14));--c)a.y=n;return c?(a.x=e,a.y=n,a):null},names:["gauss"]},Cm={init:function vm(){zo.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function bm(a){var t,e,n,o;return a.x=gt(a.x-this.long0),zo.forward.apply(this,[a]),t=Math.sin(a.y),e=Math.cos(a.y),n=Math.cos(a.x),a.x=(o=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*n))*e*Math.sin(a.x),a.y=o*(this.cosc0*t-this.sinc0*e*n),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a},inverse:function wm(a){var t,e,n,o,c;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,c=Math.sqrt(a.x*a.x+a.y*a.y)){var f=2*Math.atan2(c,this.R2);t=Math.sin(f),e=Math.cos(f),o=Math.asin(e*this.sinc0+a.y*t*this.cosc0/c),n=Math.atan2(a.x*t,c*this.cosc0*e-a.y*this.sinc0*t)}else o=this.phic0,n=0;return a.x=n,a.y=o,zo.inverse.apply(this,[a]),a.x=gt(a.x+this.long0),a},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Tm={init:function Am(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=dt&&(this.k0=.5*(1+Da(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=dt&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=dt&&(this.k0=.5*this.cons*mi(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ei(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=mi(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-st,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function Mm(a){var c,f,g,y,w,S,t=a.x,e=a.y,n=Math.sin(e),o=Math.cos(e),M=gt(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=dt&&Math.abs(e+this.lat0)<=dt?(a.x=NaN,a.y=NaN,a):this.sphere?(c=2*this.k0/(1+this.sinlat0*n+this.coslat0*o*Math.cos(M)),a.x=this.a*c*o*Math.sin(M)+this.x0,a.y=this.a*c*(this.coslat0*n-this.sinlat0*o*Math.cos(M))+this.y0,a):(f=2*Math.atan(this.ssfn_(e,n,this.e))-st,y=Math.cos(f),g=Math.sin(f),Math.abs(this.coslat0)<=dt?(w=ei(this.e,e*this.con,this.con*n),a.x=this.x0+(S=2*this.a*this.k0*w/this.cons)*Math.sin(t-this.long0),a.y=this.y0-this.con*S*Math.cos(t-this.long0),a):(Math.abs(this.sinlat0)<dt?(c=2*this.a*this.k0/(1+y*Math.cos(M)),a.y=c*g):(c=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*g+this.cosX0*y*Math.cos(M))),a.y=c*(this.cosX0*g-this.sinX0*y*Math.cos(M))+this.y0),a.x=c*y*Math.sin(M)+this.x0,a))},inverse:function km(a){a.x-=this.x0,a.y-=this.y0;var t,e,o,c,f=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var g=2*Math.atan(f/(2*this.a*this.k0));return t=this.long0,e=this.lat0,f<=dt?(a.x=t,a.y=e,a):(e=Math.asin(Math.cos(g)*this.sinlat0+a.y*Math.sin(g)*this.coslat0/f),t=Math.abs(this.coslat0)<dt?gt(this.lat0>0?this.long0+Math.atan2(a.x,-1*a.y):this.long0+Math.atan2(a.x,a.y)):gt(this.long0+Math.atan2(a.x*Math.sin(g),f*this.coslat0*Math.cos(g)-a.y*this.sinlat0*Math.sin(g))),a.x=t,a.y=e,a)}if(Math.abs(this.coslat0)<=dt){if(f<=dt)return e=this.lat0,a.x=t=this.long0,a.y=e,a;a.x*=this.con,a.y*=this.con,e=this.con*Na(this.e,f*this.cons/(2*this.a*this.k0)),t=this.con*gt(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else o=2*Math.atan(f*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,f<=dt?c=this.X0:(c=Math.asin(Math.cos(o)*this.sinX0+a.y*Math.sin(o)*this.cosX0/f),t=gt(this.long0+Math.atan2(a.x*Math.sin(o),f*this.cosX0*Math.cos(o)-a.y*this.sinX0*Math.sin(o)))),e=-1*Na(this.e,Math.tan(.5*(st+c)));return a.x=t,a.y=e,a},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function Sm(a,t,e){return t*=e,Math.tan(.5*(st+a))*Math.pow((1-t)/(1+t),.5*e)}},Om={init:function Im(){var a=this.lat0;this.lambda0=this.long0;var t=Math.sin(a),e=this.a,o=1/this.rf,c=2*o-Math.pow(o,2),f=this.e=Math.sqrt(c);this.R=this.k0*e*Math.sqrt(1-c)/(1-c*Math.pow(t,2)),this.alpha=Math.sqrt(1+c/(1-c)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(t/this.alpha);var g=Math.log(Math.tan(Math.PI/4+this.b0/2)),y=Math.log(Math.tan(Math.PI/4+a/2)),w=Math.log((1+f*t)/(1-f*t));this.K=g-this.alpha*y+this.alpha*f/2*w},forward:function Rm(a){var t=Math.log(Math.tan(Math.PI/4-a.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),o=2*(Math.atan(Math.exp(-this.alpha*(t+e)+this.K))-Math.PI/4),c=this.alpha*(a.x-this.lambda0),f=Math.atan(Math.sin(c)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(c))),g=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(c));return a.y=this.R/2*Math.log((1+Math.sin(g))/(1-Math.sin(g)))+this.y0,a.x=this.R*f+this.x0,a},inverse:function Lm(a){for(var n=(a.x-this.x0)/this.R,o=2*(Math.atan(Math.exp((a.y-this.y0)/this.R))-Math.PI/4),c=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(n)),f=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),g=this.lambda0+f/this.alpha,y=0,w=c,S=-1e3,M=0;Math.abs(w-S)>1e-7;){if(++M>20)return;y=1/this.alpha*(Math.log(Math.tan(Math.PI/4+c/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(w))/2)),S=w,w=2*Math.atan(Math.exp(y))-Math.PI/2}return a.x=g,a.y=w,a},names:["somerc"]};var ia=1e-7;const Ym={init:function Dm(){var a,t,e,n,o,c,f,g,y,w,M,S=0,I=0,F=0,D=0,X=0,Y=0,G=0;this.no_off=function Fm(a){var e="object"==typeof a.PROJECTION?Object.keys(a.PROJECTION)[0]:a.PROJECTION;return"no_uoff"in a||"no_off"in a||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(e)}(this),this.no_rot="no_rot"in this;var j=!1;"alpha"in this&&(j=!0);var Z=!1;if("rectified_grid_angle"in this&&(Z=!0),j&&(G=this.alpha),Z&&(S=this.rectified_grid_angle*ve),j||Z)I=this.longc;else if(F=this.long1,X=this.lat1,D=this.long2,Y=this.lat2,Math.abs(X-Y)<=ia||(a=Math.abs(X))<=ia||Math.abs(a-st)<=ia||Math.abs(Math.abs(this.lat0)-st)<=ia||Math.abs(Math.abs(Y)-st)<=ia)throw new Error;var $=1-this.es;t=Math.sqrt($),Math.abs(this.lat0)>dt?(g=Math.sin(this.lat0),e=Math.cos(this.lat0),a=1-this.es*g*g,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/$),this.A=this.B*this.k0*t/a,(o=(n=this.B*t/(e*Math.sqrt(a)))*n-1)<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=n,this.E*=Math.pow(ei(this.e,this.lat0,g),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=o=1),j||Z?(j?(M=Math.asin(Math.sin(G)/n),Z||(S=G)):(M=S,G=Math.asin(n*Math.sin(M))),this.lam0=I-Math.asin(.5*(o-1/o)*Math.tan(M))/this.B):(c=Math.pow(ei(this.e,X,Math.sin(X)),this.B),f=Math.pow(ei(this.e,Y,Math.sin(Y)),this.B),o=this.E/c,y=(f-c)/(f+c),w=((w=this.E*this.E)-f*c)/(w+f*c),(a=F-D)<-Math.pi?D-=Oa:a>Math.pi&&(D+=Oa),this.lam0=gt(.5*(F+D)-Math.atan(w*Math.tan(.5*this.B*(F-D))/y)/this.B),M=Math.atan(2*Math.sin(this.B*gt(F-this.lam0))/(o-1/o)),S=G=Math.asin(n*Math.sin(M))),this.singam=Math.sin(M),this.cosgam=Math.cos(M),this.sinrot=Math.sin(S),this.cosrot=Math.cos(S),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(G))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*M,this.v_pole_n=this.ArB*Math.log(Math.tan(Bt-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(Bt+o))},forward:function Nm(a){var e,n,o,c,f,g,y,w,t={};if(a.x=a.x-this.lam0,Math.abs(Math.abs(a.y)-st)>dt){if(e=.5*((f=this.E/Math.pow(ei(this.e,a.y,Math.sin(a.y)),this.B))-(g=1/f)),n=.5*(f+g),c=Math.sin(this.B*a.x),o=(e*this.singam-c*this.cosgam)/n,Math.abs(Math.abs(o)-1)<dt)throw new Error;w=.5*this.ArB*Math.log((1-o)/(1+o)),g=Math.cos(this.B*a.x),y=Math.abs(g)<ia?this.A*a.x:this.ArB*Math.atan2(e*this.cosgam+c*this.singam,g)}else w=a.y>0?this.v_pole_n:this.v_pole_s,y=this.ArB*a.y;return this.no_rot?(t.x=y,t.y=w):(t.x=w*this.cosrot+(y-=this.u_0)*this.sinrot,t.y=y*this.cosrot-w*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function zm(a){var t,e,n,o,c,f,g,y={};if(a.x=1/this.a*(a.x-this.x0),a.y=1/this.a*(a.y-this.y0),this.no_rot?(e=a.y,t=a.x):(e=a.x*this.cosrot-a.y*this.sinrot,t=a.y*this.cosrot+a.x*this.sinrot+this.u_0),o=.5*((n=Math.exp(-this.BrA*e))-1/n),c=.5*(n+1/n),g=((f=Math.sin(this.BrA*t))*this.cosgam+o*this.singam)/c,Math.abs(Math.abs(g)-1)<dt)y.x=0,y.y=g<0?-st:st;else{if(y.y=this.E/Math.sqrt((1+g)/(1-g)),y.y=Na(this.e,Math.pow(y.y,1/this.B)),y.y===1/0)throw new Error;y.x=-this.rB*Math.atan2(o*this.cosgam-f*this.singam,Math.cos(this.BrA*t))}return y.x+=this.lam0,y},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Vm={init:function Wm(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<dt)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),n=mi(this.e,t,e),o=ei(this.e,this.lat1,t),c=Math.sin(this.lat2),f=Math.cos(this.lat2),g=mi(this.e,c,f),y=ei(this.e,this.lat2,c),w=ei(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>dt?Math.log(n/g)/Math.log(o/y):t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(w,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function Bm(a){var t=a.x,e=a.y;Math.abs(2*Math.abs(e)-Math.PI)<=dt&&(e=Da(e)*(st-2*dt));var o,c,n=Math.abs(Math.abs(e)-st);if(n>dt)o=ei(this.e,e,Math.sin(e)),c=this.a*this.f0*Math.pow(o,this.ns);else{if((n=e*this.ns)<=0)return null;c=0}var f=this.ns*gt(t-this.long0);return a.x=this.k0*(c*Math.sin(f))+this.x0,a.y=this.k0*(this.rh-c*Math.cos(f))+this.y0,a},inverse:function Gm(a){var t,e,n,o,c,f=(a.x-this.x0)/this.k0,g=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(f*f+g*g),e=1):(t=-Math.sqrt(f*f+g*g),e=-1);var y=0;if(0!==t&&(y=Math.atan2(e*f,e*g)),0!==t||this.ns>0){if(e=1/this.ns,n=Math.pow(t/(this.a*this.f0),e),-9999===(o=Na(this.e,n)))return null}else o=-st;return c=gt(y/this.ns+this.long0),a.x=c,a.y=o,a},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},Km={init:function jm(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function Um(a){var t,e,n,o,c,f,g,w=a.y,S=gt(a.x-this.long0);return t=Math.pow((1+this.e*Math.sin(w))/(1-this.e*Math.sin(w)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(w/2+this.s45),this.alfa)/t)-this.s45),n=-S*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(n)),c=Math.asin(Math.cos(e)*Math.sin(n)/Math.cos(o)),f=this.n*c,g=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),a.y=g*Math.cos(f)/1,a.x=g*Math.sin(f)/1,this.czech||(a.y*=-1,a.x*=-1),a},inverse:function Zm(a){var t,e,n,o,f,g,y,w=a.x;a.x=a.y,a.y=w,this.czech||(a.y*=-1,a.x*=-1),f=Math.sqrt(a.x*a.x+a.y*a.y),o=Math.atan2(a.y,a.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/f,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),e=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(t)),a.x=this.long0-e/this.alfa,g=t,y=0;var S=0;do{a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(g))/(1-this.e*Math.sin(g)),this.e/2))-this.s45),Math.abs(g-a.y)<1e-10&&(y=1),g=a.y,S+=1}while(0===y&&S<15);return S>=15?null:a},names:["Krovak","krovak"]};function Ee(a,t,e,n,o){return a*o-t*Math.sin(2*o)+e*Math.sin(4*o)-n*Math.sin(6*o)}function Wa(a){return 1-.25*a*(1+a/16*(3+1.25*a))}function Ba(a){return.375*a*(1+.25*a*(1+.46875*a))}function Ga(a){return.05859375*a*a*(1+.75*a)}function Ha(a){return a*a*a*(35/3072)}function sa(a,t,e){var n=t*e;return a/Math.sqrt(1-n*n)}function aa(a){return Math.abs(a)<st?a:a-Da(a)*Math.PI}function or(a,t,e,n,o){var c,f;c=a/t;for(var g=0;g<15;g++)if(c+=f=(a-(t*c-e*Math.sin(2*c)+n*Math.sin(4*c)-o*Math.sin(6*c)))/(t-2*e*Math.cos(2*c)+4*n*Math.cos(4*c)-6*o*Math.cos(6*c)),Math.abs(f)<=1e-10)return c;return NaN}const ex={init:function Jm(){this.sphere||(this.e0=Wa(this.es),this.e1=Ba(this.es),this.e2=Ga(this.es),this.e3=Ha(this.es),this.ml0=this.a*Ee(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function Qm(a){var t,e,n=a.x,o=a.y;if(n=gt(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(o)*Math.sin(n)),e=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var c=Math.sin(o),f=Math.cos(o),g=sa(this.a,this.e,c),y=Math.tan(o)*Math.tan(o),w=n*Math.cos(o),S=w*w,M=this.es*f*f/(1-this.es);t=g*w*(1-S*y*(1/6-(8-y+8*M)*S/120)),e=this.a*Ee(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+g*c/f*S*(.5+(5-y+6*M)*S/24)}return a.x=t+this.x0,a.y=e+this.y0,a},inverse:function $m(a){a.x-=this.x0,a.y-=this.y0;var n,o,t=a.x/this.a,e=a.y/this.a;if(this.sphere){var c=e+this.lat0;n=Math.asin(Math.sin(c)*Math.cos(t)),o=Math.atan2(Math.tan(t),Math.cos(c))}else{var g=or(this.ml0/this.a+e,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(g)-st)<=dt)return a.x=this.long0,a.y=st,e<0&&(a.y*=-1),a;var y=sa(this.a,this.e,Math.sin(g)),w=y*y*y/this.a/this.a*(1-this.es),S=Math.pow(Math.tan(g),2),M=t*this.a/y,I=M*M;n=g-y*Math.tan(g)/w*M*M*(.5-(1+3*S)*M*M/24),o=M*(1-I*(S/3+(1+3*S)*S*I/15))/Math.cos(g)}return a.x=gt(o+this.long0),a.y=aa(n),a},names:["Cassini","Cassini_Soldner","cass"]};function $i(a,t){var e;return a>1e-7?(1-a*a)*(t/(1-(e=a*t)*e)-.5/a*Math.log((1-e)/(1+e))):2*t}const yx={init:function rx(){var t,a=Math.abs(this.lat0);if(this.mode=Math.abs(a-st)<dt?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<dt?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=$i(this.e,1),this.mmf=.5/(1-this.es),this.apa=function px(a){var t,e=[];return e[0]=.3333333333333333*a,e[0]+=.17222222222222222*(t=a*a),e[1]=.06388888888888888*t,e[0]+=.10257936507936508*(t*=a),e[1]+=.0664021164021164*t,e[2]=.016415012942191543*t,e}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=$i(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function ox(a){var t,e,n,o,c,f,g,y,w,S,M=a.x,I=a.y;if(M=gt(M-this.long0),this.sphere){if(c=Math.sin(I),S=Math.cos(I),n=Math.cos(M),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((e=this.mode===this.EQUIT?1+S*n:1+this.sinph0*c+this.cosph0*S*n)<=dt)return null;t=(e=Math.sqrt(2/e))*S*Math.sin(M),e*=this.mode===this.EQUIT?c:this.cosph0*c-this.sinph0*S*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(I+this.lat0)<dt)return null;e=Bt-.5*I,t=(e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)))*Math.sin(M),e*=n}}else{switch(g=0,y=0,w=0,n=Math.cos(M),o=Math.sin(M),c=Math.sin(I),f=$i(this.e,c),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=f/this.qp,y=Math.sqrt(1-g*g)),this.mode){case this.OBLIQ:w=1+this.sinb1*g+this.cosb1*y*n;break;case this.EQUIT:w=1+y*n;break;case this.N_POLE:w=st+I,f=this.qp-f;break;case this.S_POLE:w=I-st,f=this.qp+f}if(Math.abs(w)<dt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:w=Math.sqrt(2/w),e=this.mode===this.OBLIQ?this.ymf*w*(this.cosb1*g-this.sinb1*y*n):(w=Math.sqrt(2/(1+y*n)))*g*this.ymf,t=this.xmf*w*y*o;break;case this.N_POLE:case this.S_POLE:f>=0?(t=(w=Math.sqrt(f))*o,e=n*(this.mode===this.S_POLE?w:-w)):t=e=0}}return a.x=this.a*t+this.x0,a.y=this.a*e+this.y0,a},inverse:function lx(a){a.x-=this.x0,a.y-=this.y0;var n,o,c,f,g,y,w,t=a.x/this.a,e=a.y/this.a;if(this.sphere){var M,S=0,I=0;if((o=.5*(M=Math.sqrt(t*t+e*e)))>1)return null;switch(o=2*Math.asin(o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(I=Math.sin(o),S=Math.cos(o)),this.mode){case this.EQUIT:o=Math.abs(M)<=dt?0:Math.asin(e*I/M),t*=I,e=S*M;break;case this.OBLIQ:o=Math.abs(M)<=dt?this.lat0:Math.asin(S*this.sinph0+e*I*this.cosph0/M),t*=I*this.cosph0,e=(S-Math.sin(o)*this.sinph0)*M;break;case this.N_POLE:e=-e,o=st-o;break;case this.S_POLE:o-=st}n=0!==e||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(t,e):0}else{if(w=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,(y=Math.sqrt(t*t+e*e))<dt)return a.x=this.long0,a.y=this.lat0,a;f=2*Math.asin(.5*y/this.rq),c=Math.cos(f),t*=f=Math.sin(f),this.mode===this.OBLIQ?(g=this.qp*(w=c*this.sinb1+e*f*this.cosb1/y),e=y*this.cosb1*c-e*this.sinb1*f):(g=this.qp*(w=e*f/y),e=y*c)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),!(g=t*t+e*e))return a.x=this.long0,a.y=this.lat0,a;w=1-g/this.qp,this.mode===this.S_POLE&&(w=-w)}n=Math.atan2(t,e),o=function mx(a,t){var e=a+a;return a+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}(Math.asin(w),this.apa)}return a.x=gt(this.long0+n),a.y=o,a},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function ts(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)}const Sx={init:function vx(){Math.abs(this.lat1+this.lat2)<dt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=mi(this.e3,this.sin_po,this.cos_po),this.qs1=$i(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=mi(this.e3,this.sin_po,this.cos_po),this.qs2=$i(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=$i(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>dt?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function bx(a){var t=a.x,e=a.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var n=$i(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,c=this.ns0*gt(t-this.long0),f=o*Math.sin(c)+this.x0,g=this.rh-o*Math.cos(c)+this.y0;return a.x=f,a.y=g,a},inverse:function wx(a){var t,n,o,c,f;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(t=Math.sqrt(a.x*a.x+a.y*a.y),n=1):(t=-Math.sqrt(a.x*a.x+a.y*a.y),n=-1),o=0,0!==t&&(o=Math.atan2(n*a.x,n*a.y)),n=t*this.ns0/this.a,f=this.sphere?Math.asin((this.c-n*n)/(2*this.ns0)):this.phi1z(this.e3,(this.c-n*n)/this.ns0),c=gt(o/this.ns0+this.long0),a.x=c,a.y=f,a},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function _x(a,t){var e,o,c,f,g=ts(.5*t);if(a<dt)return g;for(var y=a*a,w=1;w<=25;w++)if(g+=f=.5*(c=1-(o=a*(e=Math.sin(g)))*o)*c/Math.cos(g)*(t/(1-y)-e/c+.5/a*Math.log((1-o)/(1+o))),Math.abs(f)<=1e-7)return g;return null}},Tx={init:function Ax(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function Mx(a){var t,e,n,o,f,g,y,S=a.y;return n=gt(a.x-this.long0),t=Math.sin(S),e=Math.cos(S),o=Math.cos(n),(f=this.sin_p14*t+this.cos_p14*e*o)>0||Math.abs(f)<=dt?(g=this.x0+1*this.a*e*Math.sin(n)/f,y=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*e*o)/f):(g=this.x0+this.infinity_dist*e*Math.sin(n),y=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*o)),a.x=g,a.y=y,a},inverse:function kx(a){var t,e,n,o,c,f;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(t=Math.sqrt(a.x*a.x+a.y*a.y))?(o=Math.atan2(t,this.rc),e=Math.sin(o),f=ts((n=Math.cos(o))*this.sin_p14+a.y*e*this.cos_p14/t),c=Math.atan2(a.x*e,t*this.cos_p14*n-a.y*this.sin_p14*e),c=gt(this.long0+c)):(f=this.phic0,c=0),a.x=c,a.y=f,a},names:["gnom"]},Fx={init:function Rx(){this.sphere||(this.k0=mi(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function Lx(a){var n,o,e=a.y,c=gt(a.x-this.long0);if(this.sphere)n=this.x0+this.a*c*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var f=$i(this.e,Math.sin(e));n=this.x0+this.a*this.k0*c,o=this.y0+this.a*f*.5/this.k0}return a.x=n,a.y=o,a},inverse:function Px(a){var t,e;return a.x-=this.x0,a.y-=this.y0,this.sphere?(t=gt(this.long0+a.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(e=function Ix(a,t){var e=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*st:st;for(var o,c,f,g,n=Math.asin(.5*t),y=0;y<30;y++)if(c=Math.sin(n),f=Math.cos(n),g=a*c,n+=o=Math.pow(1-g*g,2)/(2*f)*(t/(1-a*a)-c/(1-g*g)+.5/a*Math.log((1-g)/(1+g))),Math.abs(o)<=1e-10)return n;return NaN}(this.e,2*a.y*this.k0/this.a),t=gt(this.long0+a.x/(this.a*this.k0))),a.x=t,a.y=e,a},names:["cea"]},Yx={init:function Dx(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function Nx(a){var e=a.y,n=gt(a.x-this.long0),o=aa(e-this.lat0);return a.x=this.x0+this.a*n*this.rc,a.y=this.y0+this.a*o,a},inverse:function zx(a){var e=a.y;return a.x=gt(this.long0+(a.x-this.x0)/(this.a*this.rc)),a.y=aa(this.lat0+(e-this.y0)/this.a),a},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Vx={init:function Wx(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Wa(this.es),this.e1=Ba(this.es),this.e2=Ga(this.es),this.e3=Ha(this.es),this.ml0=this.a*Ee(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function Bx(a){var n,o,c,e=a.y,f=gt(a.x-this.long0);if(c=f*Math.sin(e),this.sphere)Math.abs(e)<=dt?(n=this.a*f,o=-1*this.a*this.lat0):(n=this.a*Math.sin(c)/Math.tan(e),o=this.a*(aa(e-this.lat0)+(1-Math.cos(c))/Math.tan(e)));else if(Math.abs(e)<=dt)n=this.a*f,o=-1*this.ml0;else{var g=sa(this.a,this.e,Math.sin(e))/Math.tan(e);n=g*Math.sin(c),o=this.a*Ee(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+g*(1-Math.cos(c))}return a.x=n+this.x0,a.y=o+this.y0,a},inverse:function Gx(a){var t,e,n,o,c,f,g,y,w;if(n=a.x-this.x0,o=a.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=dt)t=gt(n/this.a+this.long0),e=0;else{var S;for(g=n*n/this.a/this.a+(f=this.lat0+o/this.a)*f,y=f,c=20;c;--c)if(y+=w=-1*(f*(y*(S=Math.tan(y))+1)-y-.5*(y*y+g)*S)/((y-f)/S-1),Math.abs(w)<=dt){e=y;break}t=gt(this.long0+Math.asin(n*Math.tan(y)/this.a)/Math.sin(e))}else if(Math.abs(o+this.ml0)<=dt)e=0,t=gt(this.long0+n/this.a);else{var M,I,F,D,X;for(g=n*n/this.a/this.a+(f=(this.ml0+o)/this.a)*f,y=f,c=20;c;--c)if(X=this.e*Math.sin(y),M=Math.sqrt(1-X*X)*Math.tan(y),I=this.a*Ee(this.e0,this.e1,this.e2,this.e3,y),F=this.e0-2*this.e1*Math.cos(2*y)+4*this.e2*Math.cos(4*y)-6*this.e3*Math.cos(6*y),y-=w=(f*(M*(D=I/this.a)+1)-D-.5*M*(D*D+g))/(this.es*Math.sin(2*y)*(D*D+g-2*f*D)/(4*M)+(f-D)*(M*F-2/Math.sin(2*y))-F),Math.abs(w)<=dt){e=y;break}M=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=gt(this.long0+Math.asin(n*M/this.a)/Math.sin(e))}return a.x=t,a.y=e,a},names:["Polyconic","poly"]},Kx={init:function jx(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function Ux(a){var t,f=(a.y-this.lat0)/Pa*1e-5,g=a.x-this.long0,y=1,w=0;for(t=1;t<=10;t++)w+=this.A[t]*(y*=f);var X,S=w,M=g,I=1,F=0,Y=0,G=0;for(t=1;t<=6;t++)X=F*S+I*M,Y=Y+this.B_re[t]*(I=I*S-F*M)-this.B_im[t]*(F=X),G=G+this.B_im[t]*I+this.B_re[t]*F;return a.x=G*this.a+this.x0,a.y=Y*this.a+this.y0,a},inverse:function Zx(a){var t,M,f=(a.y-this.y0)/this.a,g=(a.x-this.x0)/this.a,y=1,w=0,I=0,F=0;for(t=1;t<=6;t++)M=w*f+y*g,I=I+this.C_re[t]*(y=y*f-w*g)-this.C_im[t]*(w=M),F=F+this.C_im[t]*y+this.C_re[t]*w;for(var D=0;D<this.iterations;D++){var V,X=I,Y=F,j=f,Z=g;for(t=2;t<=6;t++)V=Y*I+X*F,j+=(t-1)*(this.B_re[t]*(X=X*I-Y*F)-this.B_im[t]*(Y=V)),Z+=(t-1)*(this.B_im[t]*X+this.B_re[t]*Y);X=1,Y=0;var $=this.B_re[1],it=this.B_im[1];for(t=2;t<=6;t++)V=Y*I+X*F,$+=t*(this.B_re[t]*(X=X*I-Y*F)-this.B_im[t]*(Y=V)),it+=t*(this.B_im[t]*X+this.B_re[t]*Y);var ut=$*$+it*it;I=(j*$+Z*it)/ut,F=(Z*$-j*it)/ut}var ht=I,vt=F,Ct=1,Pt=0;for(t=1;t<=9;t++)Pt+=this.D[t]*(Ct*=ht);var Nt=this.lat0+Pt*Pa*1e5;return a.x=this.long0+vt,a.y=Nt,a},names:["New_Zealand_Map_Grid","nzmg"]},e0={init:function Jx(){},forward:function Qx(a){var e=a.y,n=gt(a.x-this.long0),o=this.x0+this.a*n,c=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return a.x=o,a.y=c,a},inverse:function $x(a){a.x-=this.x0,a.y-=this.y0;var t=gt(this.long0+a.x/this.a),e=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=t,a.y=e,a},names:["Miller_Cylindrical","mill"]},l0={init:function a0(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=wc(this.es)},forward:function n0(a){var t,e,n=a.x,o=a.y;if(n=gt(n-this.long0),this.sphere){if(this.m)for(var c=this.n*Math.sin(o),f=20;f;--f){var g=(this.m*o+Math.sin(o)-c)/(this.m+Math.cos(o));if(o-=g,Math.abs(g)<dt)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;t=this.a*this.C_x*n*(this.m+Math.cos(o)),e=this.a*this.C_y*o}else{var y=Math.sin(o),w=Math.cos(o);e=this.a*ar(o,y,w,this.en),t=this.a*n*w/Math.sqrt(1-this.es*y*y)}return a.x=t,a.y=e,a},inverse:function r0(a){var t,n,o;return a.x-=this.x0,n=a.x/this.a,a.y-=this.y0,t=a.y/this.a,this.sphere?(t/=this.C_y,n/=this.C_x*(this.m+Math.cos(t)),this.m?t=ts((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=ts(Math.sin(t)/this.n)),n=gt(n+this.long0),t=aa(t)):(t=_c(a.y/this.a,this.es,this.en),(o=Math.abs(t))<st?(o=Math.sin(t),n=gt(this.long0+a.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(t)))):o-dt<st&&(n=this.long0)),a.x=n,a.y=t,a},names:["Sinusoidal","sinu"]},f0={init:function h0(){},forward:function c0(a){for(var e=a.y,n=gt(a.x-this.long0),o=e,c=Math.PI*Math.sin(e);;){var f=-(o+Math.sin(o)-c)/(1+Math.cos(o));if(o+=f,Math.abs(f)<dt)break}o/=2,Math.PI/2-Math.abs(e)<dt&&(n=0);var g=.900316316158*this.a*n*Math.cos(o)+this.x0,y=1.4142135623731*this.a*Math.sin(o)+this.y0;return a.x=g,a.y=y,a},inverse:function u0(a){var t,e;a.x-=this.x0,a.y-=this.y0,e=a.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var n=gt(this.long0+a.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var o=Math.asin(e);return a.x=n,a.y=o,a},names:["Mollweide","moll"]},y0={init:function g0(){Math.abs(this.lat1+this.lat2)<dt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Wa(this.es),this.e1=Ba(this.es),this.e2=Ga(this.es),this.e3=Ha(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=mi(this.e,this.sinphi,this.cosphi),this.ml1=Ee(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<dt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=mi(this.e,this.sinphi,this.cosphi),this.ml2=Ee(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ee(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function p0(a){var n,t=a.x,e=a.y;if(this.sphere)n=this.a*(this.g-e);else{var o=Ee(this.e0,this.e1,this.e2,this.e3,e);n=this.a*(this.g-o)}var c=this.ns*gt(t-this.long0),f=this.x0+n*Math.sin(c),g=this.y0+this.rh-n*Math.cos(c);return a.x=f,a.y=g,a},inverse:function m0(a){var t,e,n,o;a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns>=0?(e=Math.sqrt(a.x*a.x+a.y*a.y),t=1):(e=-Math.sqrt(a.x*a.x+a.y*a.y),t=-1);var c=0;return 0!==e&&(c=Math.atan2(t*a.x,t*a.y)),this.sphere?(o=gt(this.long0+c/this.ns),n=aa(this.g-e/this.a),a.x=o,a.y=n,a):(n=or(this.g-e/this.a,this.e0,this.e1,this.e2,this.e3),o=gt(this.long0+c/this.ns),a.x=o,a.y=n,a)},names:["Equidistant_Conic","eqdc"]},C0={init:function v0(){this.R=this.a},forward:function b0(a){var o,c,e=a.y,n=gt(a.x-this.long0);Math.abs(e)<=dt&&(o=this.x0+this.R*n,c=this.y0);var f=ts(2*Math.abs(e/Math.PI));(Math.abs(n)<=dt||Math.abs(Math.abs(e)-st)<=dt)&&(o=this.x0,c=e>=0?this.y0+Math.PI*this.R*Math.tan(.5*f):this.y0+Math.PI*this.R*-Math.tan(.5*f));var g=.5*Math.abs(Math.PI/n-n/Math.PI),y=g*g,w=Math.sin(f),S=Math.cos(f),M=S/(w+S-1),F=M*(2/w-1),D=F*F,X=Math.PI*this.R*(g*(M-D)+Math.sqrt(y*(M-D)*(M-D)-(D+y)*(M*M-D)))/(D+y);n<0&&(X=-X),o=this.x0+X;var Y=y+M;return X=Math.PI*this.R*(F*Y-g*Math.sqrt((D+y)*(y+1)-Y*Y))/(D+y),c=e>=0?this.y0+X:this.y0-X,a.x=o,a.y=c,a},inverse:function w0(a){var t,e,n,o,c,f,g,y,w,S,M,I;return a.x-=this.x0,a.y-=this.y0,M=Math.PI*this.R,c=(n=a.x/M)*n+(o=a.y/M)*o,M=3*(o*o/(y=-2*(f=-Math.abs(o)*(1+c))+1+2*o*o+c*c)+(2*(g=f-2*o*o+n*n)*g*g/y/y/y-9*f*g/y/y)/27)/(w=(f-g*g/3/y)/y)/(S=2*Math.sqrt(-w/3)),Math.abs(M)>1&&(M=M>=0?1:-1),I=Math.acos(M)/3,e=a.y>=0?(-S*Math.cos(I+Math.PI/3)-g/3/y)*Math.PI:-(-S*Math.cos(I+Math.PI/3)-g/3/y)*Math.PI,t=Math.abs(n)<dt?this.long0:gt(this.long0+Math.PI*(c-1+Math.sqrt(1+2*(n*n-o*o)+c*c))/2/n),a.x=t,a.y=e,a},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},E0={init:function S0(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function A0(a){var f,g,y,w,S,M,I,F,D,X,Y,G,V,j,Z,$,it,ut,ht,vt,Ct,Pt,t=a.x,e=a.y,n=Math.sin(a.y),o=Math.cos(a.y),c=gt(t-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=dt?(a.x=this.x0+this.a*(st-e)*Math.sin(c),a.y=this.y0-this.a*(st-e)*Math.cos(c),a):Math.abs(this.sin_p12+1)<=dt?(a.x=this.x0+this.a*(st+e)*Math.sin(c),a.y=this.y0+this.a*(st+e)*Math.cos(c),a):(ut=this.sin_p12*n+this.cos_p12*o*Math.cos(c),it=($=Math.acos(ut))?$/Math.sin($):1,a.x=this.x0+this.a*it*o*Math.sin(c),a.y=this.y0+this.a*it*(this.cos_p12*n-this.sin_p12*o*Math.cos(c)),a):(f=Wa(this.es),g=Ba(this.es),y=Ga(this.es),w=Ha(this.es),Math.abs(this.sin_p12-1)<=dt?(S=this.a*Ee(f,g,y,w,st),M=this.a*Ee(f,g,y,w,e),a.x=this.x0+(S-M)*Math.sin(c),a.y=this.y0-(S-M)*Math.cos(c),a):Math.abs(this.sin_p12+1)<=dt?(S=this.a*Ee(f,g,y,w,st),M=this.a*Ee(f,g,y,w,e),a.x=this.x0+(S+M)*Math.sin(c),a.y=this.y0+(S+M)*Math.cos(c),a):(I=n/o,F=sa(this.a,this.e,this.sin_p12),D=sa(this.a,this.e,n),X=Math.atan((1-this.es)*I+this.es*F*this.sin_p12/(D*o)),ht=0===(Y=Math.atan2(Math.sin(c),this.cos_p12*Math.tan(X)-this.sin_p12*Math.cos(c)))?Math.asin(this.cos_p12*Math.sin(X)-this.sin_p12*Math.cos(X)):Math.abs(Math.abs(Y)-Math.PI)<=dt?-Math.asin(this.cos_p12*Math.sin(X)-this.sin_p12*Math.cos(X)):Math.asin(Math.sin(c)*Math.cos(X)/Math.sin(Y)),G=this.e*this.sin_p12/Math.sqrt(1-this.es),V=this.e*this.cos_p12*Math.cos(Y)/Math.sqrt(1-this.es),a.x=this.x0+($=F*ht*(1-(vt=ht*ht)*(Z=V*V)*(1-Z)/6+(Ct=vt*ht)/8*(j=G*V)*(1-2*Z)+(Pt=Ct*ht)/120*(Z*(4-7*Z)-3*G*G*(1-7*Z))-Pt*ht/48*j))*Math.sin(Y),a.y=this.y0+$*Math.cos(Y),a))},inverse:function M0(a){var t,e,n,o,c,f,g,y,w,S,M,I,D,X,Y,G,V,j,Z,$,it,ut,ht;return a.x-=this.x0,a.y-=this.y0,this.sphere?(t=Math.sqrt(a.x*a.x+a.y*a.y))>2*st*this.a?void 0:(e=t/this.a,n=Math.sin(e),o=Math.cos(e),c=this.long0,Math.abs(t)<=dt?f=this.lat0:(f=ts(o*this.sin_p12+a.y*n*this.cos_p12/t),g=Math.abs(this.lat0)-st,c=Math.abs(g)<=dt?gt(this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y)):gt(this.long0+Math.atan2(a.x*n,t*this.cos_p12*o-a.y*this.sin_p12*n))),a.x=c,a.y=f,a):(y=Wa(this.es),w=Ba(this.es),S=Ga(this.es),M=Ha(this.es),Math.abs(this.sin_p12-1)<=dt?(f=or(((I=this.a*Ee(y,w,S,M,st))-(t=Math.sqrt(a.x*a.x+a.y*a.y)))/this.a,y,w,S,M),c=gt(this.long0+Math.atan2(a.x,-1*a.y)),a.x=c,a.y=f,a):Math.abs(this.sin_p12+1)<=dt?(I=this.a*Ee(y,w,S,M,st),f=or(((t=Math.sqrt(a.x*a.x+a.y*a.y))-I)/this.a,y,w,S,M),c=gt(this.long0+Math.atan2(a.x,a.y)),a.x=c,a.y=f,a):(t=Math.sqrt(a.x*a.x+a.y*a.y),Y=Math.atan2(a.x,a.y),D=sa(this.a,this.e,this.sin_p12),G=Math.cos(Y),Z=3*this.es*(1-(j=-(V=this.e*this.cos_p12*G)*V/(1-this.es)))*this.sin_p12*this.cos_p12*G/(1-this.es),ut=1-j*(it=($=t/D)-j*(1+j)*Math.pow($,3)/6-Z*(1+3*j)*Math.pow($,4)/24)*it/2-$*it*it*it/6,X=Math.asin(this.sin_p12*Math.cos(it)+this.cos_p12*Math.sin(it)*G),c=gt(this.long0+Math.asin(Math.sin(Y)*Math.sin(it)/Math.cos(X))),ht=Math.sin(X),f=Math.atan2((ht-this.es*ut*this.sin_p12)*Math.tan(X),ht*(1-this.es)),a.x=c,a.y=f,a))},names:["Azimuthal_Equidistant","aeqd"]},P0={init:function T0(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function I0(a){var t,e,n,o,f,g,y,S=a.y;return n=gt(a.x-this.long0),t=Math.sin(S),e=Math.cos(S),o=Math.cos(n),((f=this.sin_p14*t+this.cos_p14*e*o)>0||Math.abs(f)<=dt)&&(g=1*this.a*e*Math.sin(n),y=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*e*o)),a.x=g,a.y=y,a},inverse:function R0(a){var t,e,n,o,c,f,g;return a.x-=this.x0,a.y-=this.y0,e=ts((t=Math.sqrt(a.x*a.x+a.y*a.y))/this.a),n=Math.sin(e),o=Math.cos(e),f=this.long0,Math.abs(t)<=dt?(g=this.lat0,a.x=f,a.y=g,a):(g=ts(o*this.sin_p14+a.y*n*this.cos_p14/t),c=Math.abs(this.lat0)-st,Math.abs(c)<=dt?(f=gt(this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y)),a.x=f,a.y=g,a):(f=gt(this.long0+Math.atan2(a.x*n,t*this.cos_p14*o-a.y*this.sin_p14*n)),a.x=f,a.y=g,a))},names:["ortho"]};function lr(a,t,e,n){var o;return a<dt?(n.value=1,o=0):(o=Math.atan2(t,e),Math.abs(o)<=Bt?n.value=1:o>Bt&&o<=st+Bt?(n.value=2,o-=st):o>st+Bt||o<=-(st+Bt)?(n.value=3,o=o>=0?o-ce:o+ce):(n.value=4,o+=st)),o}function na(a,t){var e=a+t;return e<-ce?e+=Oa:e>+ce&&(e-=Oa),e}const z0={init:function O0(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=st-Bt/2?5:this.lat0<=-(st-Bt/2)?6:Math.abs(this.long0)<=Bt?1:Math.abs(this.long0)<=st+Bt?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function F0(a){var e,n,o,c,f,g,t={x:0,y:0},y={value:0};if(a.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(a.y)):a.y,n=a.x,5===this.face)c=st-e,n>=Bt&&n<=st+Bt?(y.value=1,o=n-st):n>st+Bt||n<=-(st+Bt)?(y.value=2,o=n>0?n-ce:n+ce):n>-(st+Bt)&&n<=-Bt?(y.value=3,o=n+st):(y.value=4,o=n);else if(6===this.face)c=st+e,n>=Bt&&n<=st+Bt?(y.value=1,o=-n+st):n<Bt&&n>=-Bt?(y.value=2,o=-n):n<-Bt&&n>=-(st+Bt)?(y.value=3,o=-n-st):(y.value=4,o=n>0?-n+ce:-n-ce);else{var w,S,M,I,F,D;2===this.face?n=na(n,+st):3===this.face?n=na(n,+ce):4===this.face&&(n=na(n,-st)),I=Math.sin(e),F=Math.cos(e),D=Math.sin(n),w=F*Math.cos(n),S=F*D,M=I,1===this.face?o=lr(c=Math.acos(w),M,S,y):2===this.face?o=lr(c=Math.acos(S),M,-w,y):3===this.face?o=lr(c=Math.acos(-w),M,-S,y):4===this.face?o=lr(c=Math.acos(-S),M,w,y):(c=o=0,y.value=1)}return g=Math.atan(12/ce*(o+Math.acos(Math.sin(o)*Math.cos(Bt))-st)),f=Math.sqrt((1-Math.cos(c))/(Math.cos(g)*Math.cos(g))/(1-Math.cos(Math.atan(1/Math.cos(o))))),2===y.value?g+=st:3===y.value?g+=ce:4===y.value&&(g+=1.5*ce),t.x=f*Math.cos(g),t.y=f*Math.sin(g),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,a.x=t.x,a.y=t.y,a},inverse:function D0(a){var e,n,o,c,f,g,y,w,S,X,Y,G,t={lam:0,phi:0},M={value:0};if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,n=Math.atan(Math.sqrt(a.x*a.x+a.y*a.y)),e=Math.atan2(a.y,a.x),a.x>=0&&a.x>=Math.abs(a.y)?M.value=1:a.y>=0&&a.y>=Math.abs(a.x)?(M.value=2,e-=st):a.x<0&&-a.x>=Math.abs(a.y)?(M.value=3,e=e<0?e+ce:e-ce):(M.value=4,e+=st),S=ce/12*Math.tan(e),f=Math.sin(S)/(Math.cos(S)-1/Math.sqrt(2)),g=Math.atan(f),(y=1-(o=Math.cos(e))*o*(c=Math.tan(n))*c*(1-Math.cos(Math.atan(1/Math.cos(g)))))<-1?y=-1:y>1&&(y=1),5===this.face)w=Math.acos(y),t.phi=st-w,t.lam=1===M.value?g+st:2===M.value?g<0?g+ce:g-ce:3===M.value?g-st:g;else if(6===this.face)w=Math.acos(y),t.phi=w-st,t.lam=1===M.value?-g+st:2===M.value?-g:3===M.value?-g-st:g<0?-g-ce:-g+ce;else{var I,F,D;S=(I=y)*I,F=(S+=(D=S>=1?0:Math.sqrt(1-S)*Math.sin(g))*D)>=1?0:Math.sqrt(1-S),2===M.value?(S=F,F=-D,D=S):3===M.value?(F=-F,D=-D):4===M.value&&(S=F,F=D,D=-S),2===this.face?(S=I,I=-F,F=S):3===this.face?(I=-I,F=-F):4===this.face&&(S=I,I=F,F=-S),t.phi=Math.acos(-D)-st,t.lam=Math.atan2(F,I),2===this.face?t.lam=na(t.lam,-st):3===this.face?t.lam=na(t.lam,-ce):4===this.face&&(t.lam=na(t.lam,+st))}return 0!==this.es&&(X=t.phi<0?1:0,Y=Math.tan(t.phi),G=this.b/Math.sqrt(Y*Y+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-G*G)/(this.one_minus_f*G)),X&&(t.phi=-t.phi)),t.lam+=this.long0,a.x=t.lam,a.y=t.phi,a},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var Xo=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Va=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],hr=function(a,t){return a[0]+t*(a[1]+t*(a[2]+t*a[3]))};const j0={init:function B0(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function G0(a){var t=gt(a.x-this.long0),e=Math.abs(a.y),n=Math.floor(11.459155902616464*e);n<0?n=0:n>=18&&(n=17);var o={x:hr(Xo[n],e=gi*(e-.08726646259971647*n))*t,y:hr(Va[n],e)};return a.y<0&&(o.y=-o.y),o.x=o.x*this.a*.8487+this.x0,o.y=o.y*this.a*1.3523+this.y0,o},inverse:function H0(a){var t={x:(a.x-this.x0)/(.8487*this.a),y:Math.abs(a.y-this.y0)/(1.3523*this.a)};if(t.y>=1)t.x/=Xo[18][0],t.y=a.y<0?-st:st;else{var e=Math.floor(18*t.y);for(e<0?e=0:e>=18&&(e=17);;)if(Va[e][0]>t.y)--e;else{if(!(Va[e+1][0]<=t.y))break;++e}var n=Va[e],o=5*(t.y-n[0])/(Va[e+1][0]-n[0]);o=function W0(a,t,e,n){for(var o=t;n;--n){var c=a(o);if(o-=c,Math.abs(c)<e)break}return o}(function(c){return(hr(n,c)-t.y)/function(a,t){return a[1]+t*(2*a[2]+3*t*a[3])}(n,c)},o,dt,100),t.x/=hr(Xo[e],o),t.y=(5*e+o)*ve,a.y<0&&(t.y=-t.y)}return t.x=gt(t.x+this.long0),t},names:["Robinson","robin"]},J0={init:function U0(){this.name="geocent"},forward:function Z0(a){return ec(a,this.es,this.a)},inverse:function q0(a){return ic(a,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var ja={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const iy={init:function Q0(){if(Object.keys(ja).forEach(function(e){if(typeof this[e]>"u")this[e]=ja[e].def;else{if(ja[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);ja[e].num&&(this[e]=parseFloat(this[e]))}ja[e].degrees&&(this[e]=this[e]*ve)}.bind(this)),Math.abs(Math.abs(this.lat0)-st)<dt?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<dt?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var a=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(a),this.sw=Math.sin(a)},forward:function $0(a){a.x-=this.long0;var o,c,f,g,t=Math.sin(a.y),e=Math.cos(a.y),n=Math.cos(a.x);switch(this.mode){case 3:c=this.sinph0*t+this.cosph0*e*n;break;case 2:c=e*n;break;case 1:c=-t;break;case 0:c=t}switch(o=(c=this.pn1/(this.p-c))*e*Math.sin(a.x),this.mode){case 3:c*=this.cosph0*t-this.sinph0*e*n;break;case 2:c*=t;break;case 0:c*=-e*n;break;case 1:c*=e*n}return o=(o*this.cg-c*this.sg)*this.cw*(g=1/((f=c*this.cg+o*this.sg)*this.sw*this.h1+this.cw)),c=f*g,a.x=o*this.a,a.y=c*this.a,a},inverse:function ty(a){a.x/=this.a,a.y/=this.a;var e,n,o,t={x:a.x,y:a.y};a.x=(e=this.pn1*a.x*(o=1/(this.pn1-a.y*this.sw)))*this.cg+(n=this.pn1*a.y*this.cw*o)*this.sg,a.y=n*this.cg-e*this.sg;var c=ii(a.x,a.y);if(Math.abs(c)<dt)t.x=0,t.y=a.y;else{var f,g;switch(g=1-c*c*this.pfact,g=(this.p-Math.sqrt(g))/(this.pn1/c+c/this.pn1),f=Math.sqrt(1-g*g),this.mode){case 3:t.y=Math.asin(f*this.sinph0+a.y*g*this.cosph0/c),a.y=(f-this.sinph0*Math.sin(t.y))*c,a.x*=g*this.cosph0;break;case 2:t.y=Math.asin(a.y*g/c),a.y=f*c,a.x*=g;break;case 0:t.y=Math.asin(f),a.y=-a.y;break;case 1:t.y=-Math.asin(f)}t.x=Math.atan2(a.x,a.y)}return a.x=t.x+this.long0,a.y=t.y,a},names:["Tilted_Perspective","tpers"]},oy={init:function sy(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var a=1-this.es,t=1/a;this.radius_p=Math.sqrt(a),this.radius_p2=a,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function ay(a){var n,o,c,f,t=a.x,e=a.y;if(t-=this.long0,"ellipse"===this.shape){e=Math.atan(this.radius_p2*Math.tan(e));var g=this.radius_p/ii(this.radius_p*Math.cos(e),Math.sin(e));if(o=g*Math.cos(t)*Math.cos(e),c=g*Math.sin(t)*Math.cos(e),f=g*Math.sin(e),(this.radius_g-o)*o-c*c-f*f*this.radius_p_inv2<0)return a.x=Number.NaN,a.y=Number.NaN,a;n=this.radius_g-o,this.flip_axis?(a.x=this.radius_g_1*Math.atan(c/ii(f,n)),a.y=this.radius_g_1*Math.atan(f/n)):(a.x=this.radius_g_1*Math.atan(c/n),a.y=this.radius_g_1*Math.atan(f/ii(c,n)))}else"sphere"===this.shape&&(n=Math.cos(e),o=Math.cos(t)*n,c=Math.sin(t)*n,f=Math.sin(e),n=this.radius_g-o,this.flip_axis?(a.x=this.radius_g_1*Math.atan(c/ii(f,n)),a.y=this.radius_g_1*Math.atan(f/n)):(a.x=this.radius_g_1*Math.atan(c/n),a.y=this.radius_g_1*Math.atan(f/ii(c,n))));return a.x=a.x*this.a,a.y=a.y*this.a,a},inverse:function ny(a){var o,c,f,g,t=-1,e=0,n=0;if(a.x=a.x/this.a,a.y=a.y/this.a,"ellipse"===this.shape){this.flip_axis?(n=Math.tan(a.y/this.radius_g_1),e=Math.tan(a.x/this.radius_g_1)*ii(1,n)):(e=Math.tan(a.x/this.radius_g_1),n=Math.tan(a.y/this.radius_g_1)*ii(1,e));var y=n/this.radius_p;if((f=(c=2*this.radius_g*t)*c-4*(o=e*e+y*y+t*t)*this.C)<0)return a.x=Number.NaN,a.y=Number.NaN,a;g=(-c-Math.sqrt(f))/(2*o),t=this.radius_g+g*t,e*=g,n*=g,a.x=Math.atan2(e,t),a.y=Math.atan(n*Math.cos(a.x)/t),a.y=Math.atan(this.radius_p_inv2*Math.tan(a.y))}else if("sphere"===this.shape){if(this.flip_axis?(n=Math.tan(a.y/this.radius_g_1),e=Math.tan(a.x/this.radius_g_1)*Math.sqrt(1+n*n)):(e=Math.tan(a.x/this.radius_g_1),n=Math.tan(a.y/this.radius_g_1)*Math.sqrt(1+e*e)),(f=(c=2*this.radius_g*t)*c-4*(o=e*e+n*n+t*t)*this.C)<0)return a.x=Number.NaN,a.y=Number.NaN,a;g=(-c-Math.sqrt(f))/(2*o),t=this.radius_g+g*t,e*=g,n*=g,a.x=Math.atan2(e,t),a.y=Math.atan(n*Math.cos(a.x)/t)}return a.x=a.x+this.long0,a},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};Ge.defaultDatum="WGS84",Ge.Proj=za,Ge.WGS84=new Ge.Proj("WGS84"),Ge.Point=Yp,Ge.toPoint=rc,Ge.defs=$n,Ge.nadgrid=function fp(a,t){var e=new DataView(t),n=function mp(a){var t=a.getInt32(8,!1);return 11!==t&&(11!==(t=a.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(e),o=function xp(a,t){return{nFields:a.getInt32(8,t),nSubgridFields:a.getInt32(24,t),nSubgrids:a.getInt32(40,t),shiftType:Lo(a,56,64).trim(),fromSemiMajorAxis:a.getFloat64(120,t),fromSemiMinorAxis:a.getFloat64(136,t),toSemiMajorAxis:a.getFloat64(152,t),toSemiMinorAxis:a.getFloat64(168,t)}}(e,n);o.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var c=function yp(a,t,e){for(var o=[],c=0;c<t.nSubgrids;c++){var f=bp(a,176,e),g=wp(a,176,f,e),y=Math.round(1+(f.upperLongitude-f.lowerLongitude)/f.longitudeInterval),w=Math.round(1+(f.upperLatitude-f.lowerLatitude)/f.latitudeInterval);o.push({ll:[Qs(f.lowerLongitude),Qs(f.lowerLatitude)],del:[Qs(f.longitudeInterval),Qs(f.latitudeInterval)],lim:[y,w],count:f.gridNodeCount,cvs:vp(g)})}return o}(e,o,n),f={header:o,subgrids:c};return tc[a]=f,f},Ge.transform=sr,Ge.mgrs=Ip,Ge.version="__VERSION__",function ly(a){a.Proj.projections.add(nr),a.Proj.projections.add(rr),a.Proj.projections.add(fm),a.Proj.projections.add(Cm),a.Proj.projections.add(Tm),a.Proj.projections.add(Om),a.Proj.projections.add(Ym),a.Proj.projections.add(Vm),a.Proj.projections.add(Km),a.Proj.projections.add(ex),a.Proj.projections.add(yx),a.Proj.projections.add(Sx),a.Proj.projections.add(Tx),a.Proj.projections.add(Fx),a.Proj.projections.add(Yx),a.Proj.projections.add(Vx),a.Proj.projections.add(Kx),a.Proj.projections.add(e0),a.Proj.projections.add(l0),a.Proj.projections.add(f0),a.Proj.projections.add(y0),a.Proj.projections.add(C0),a.Proj.projections.add(E0),a.Proj.projections.add(P0),a.Proj.projections.add(z0),a.Proj.projections.add(j0),a.Proj.projections.add(J0),a.Proj.projections.add(iy),a.Proj.projections.add(oy)}(Ge);const Tc=Ge;var cy=Et(646);const uy=function(a,t){return{width:a,height:t}};function dy(a,t){if(1&a&&(q.TgZ(0,"div",1)(1,"div",2),q.Hsn(2),q.qZA()()),2&a){const e=q.oxw();q.xp6(1),q.s9C("id",e.target),q.Q6J("ngStyle",q.WLB(2,uy,e._width,e._height))}}const fy=["*"];let Ua=(()=>{class a{constructor(e,n,o){this.elementRef=e,this.cdRef=n,this.fuseLoadingService=o,this.lat=-34.603490361131385,this.lon=-58.382037891217465,this.loading=!1,this.ready=new q.vpe,this.target="",this.extent=[-100.546875,-46.073231,-4.570313,17.644022]}set width(e){e?(this._width=e,this.setSize()):this._width="100%",this.updateMapSize()}set height(e){e?(this._height=e,this.setSize()):this._height="500px",this.updateMapSize()}onWindowResize(){this.map.updateSize()}ngOnInit(){this.target="map-"+Math.random().toString(36).substring(2)}ngAfterViewInit(){const e=this;this.mapEl=this.elementRef.nativeElement.querySelector("#"+this.target),this.setSize(),Tc.defs("EPSG:4674","+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs"),function hy(a){const t=Object.keys(a.defs),e=t.length;let n,o;for(n=0;n<e;++n){const c=t[n];if(!ne(c)){const f=a.defs(c);let g=f.units;!g&&"longlat"===f.projName&&(g="degrees"),Il(new Tn({code:c,axisOrientation:f.axis,metersPerUnit:f.to_meter,units:g}))}}for(n=0;n<e;++n){const c=t[n],f=ne(c);for(o=0;o<e;++o){const g=t[o],y=ne(g);if(!Sl(c,g))if(a.defs[c]===a.defs[g])Hr([f,y]);else{const w=a(c,g);id(f,y,Ll(f,y,w.forward),Ll(y,f,w.inverse))}}}}(Tc);const n=[-180,-90,180,90];ne("EPSG:4674").setExtent(this.extent),ne("EPSG:4674").setWorldExtent(n),this.projection=new Tn({code:"EPSG:4674",units:"m",extent:this.extent,worldExtent:n});const o=new Ii({center:jr([this.lon,this.lat],this.projection.getCode()),zoom:this.zoom,minZoom:2,maxZoom:20,extent:this.extent,projection:this.projection});this.map=new Wh({target:this.target,interactions:zh({altShiftDragRotate:!1,pinchRotate:!1}),view:o}),this.map.on("loadstart",()=>{e.fuseLoadingService.show()}),this.map.on("loadend",()=>{e.fuseLoadingService.hide()}),this.cdRef.detectChanges(),setTimeout(()=>{this.ready.emit(this.map)})}updateMapSize(){this.map?.updateSize()}ngOnChanges(e){}setSize(){if(this.mapEl){const e=this.mapEl.style;e.height=this.coerceCssPixelValue(this._height)||"500px",e.width=this.coerceCssPixelValue(this._width)||"100%"}}addLayer(e){this.map.addLayer(e),this.cdRef.detectChanges()}setMarker(e){this.map.addLayer(e),this.cdRef.detectChanges()}setFeatures(e){this.map.addLayer(e);const n=e.getSource().getExtent();this.map.getView().fit(n),this.cdRef.detectChanges()}setControl(e){this.map.addControl(e)}coerceCssPixelValue(e){return null==e?"":/([A-Za-z%]+)$/.test(e)?e:`${e}px`}ngOnDestroy(){}}return a.\u0275fac=function(e){return new(e||a)(q.Y36(q.SBq),q.Y36(q.sBO),q.Y36(cy.c))},a.\u0275cmp=q.Xpm({type:a,selectors:[["ol-map"]],hostBindings:function(e,n){1&e&&q.NdJ("resize",function(c){return n.onWindowResize(c)},!1,q.Jf7)},inputs:{lat:"lat",lon:"lon",loading:"loading",zoom:"zoom",width:"width",height:"height"},outputs:{ready:"ready"},features:[q.TTD],ngContentSelectors:fy,decls:1,vars:1,consts:[["class","map-container",4,"ngIf"],[1,"map-container"],[1,"map",3,"id","ngStyle"]],template:function(e,n){1&e&&(q.F$t(),q.YNc(0,dy,3,5,"div",0)),2&e&&q.Q6J("ngIf",0!==n._height&&0!==n._width)},dependencies:[Ae.O5,Ae.PC],styles:["[_nghost-%COMP%]     .ol-viewport{border-radius:5px;box-shadow:0 2px 4px #00000080}.map-container[_ngcontent-%COMP%]{width:100%;height:100%!important;position:relative}"]}),a})(),Lc=(()=>{class a{constructor(e,n){this.olMap=e,this.cdRef=n,this.layer={}}ngOnInit(){if(this.olMap.map){let e=!1;this.olMap.map.getLayers().forEach(n=>{n.get("key")===this.layer.get("key")&&(e=!0)}),e||this.olMap.addLayer(this.layer)}else setTimeout(()=>{this.ngOnInit()},10);this.cdRef.detectChanges()}}return a.\u0275fac=function(e){return new(e||a)(q.Y36(Ua),q.Y36(q.sBO))},a.\u0275cmp=q.Xpm({type:a,selectors:[["ol-layer"]],inputs:{layer:"layer"},decls:0,vars:0,template:function(e,n){}}),a})();const Pc=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function Fc(a){const t=a.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&a.fullscreenEnabled)}function Dc(a){return!(!a.webkitIsFullScreen&&!a.fullscreenElement)}function Nc(a){a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()}const vy=class my extends Ri{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.keys_=void 0!==t.keys&&t.keys,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==t.className?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==t.activeClassName?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==t.inactiveClassName?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const e=void 0!==t.label?t.label:"\u2922";this.labelNode_="string"==typeof e?document.createTextNode(e):e;const n=void 0!==t.labelActive?t.labelActive:"\xd7";this.labelActiveNode_="string"==typeof n?document.createTextNode(n):n;const o=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=o,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener("click",this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${ui} ${bs}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const e=t.getOwnerDocument();if(Fc(e))if(Dc(e))!function yy(a){a.exitFullscreen?a.exitFullscreen():a.webkitExitFullscreen&&a.webkitExitFullscreen()}(e);else{let n;n=this.source_?"string"==typeof this.source_?e.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function xy(a){a.webkitRequestFullscreen?a.webkitRequestFullscreen():Nc(a)}(n):Nc(n)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const e=this.isInFullscreen_;this.isInFullscreen_=Dc(t.getOwnerDocument()),e!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(z(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):(z(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),t.updateSize())}setClassName_(t,e){e?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const e=this.getMap();e&&e.removeChangeListener("target",this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener("target",this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let n=0,o=t.length;n<o;++n)Lt(t[n]);t.length=0;const e=this.getMap();if(e){const n=e.getOwnerDocument();Fc(n)?this.element.classList.remove(nh):this.element.classList.add(nh);for(let o=0,c=Pc.length;o<c;++o)t.push(At(n,Pc[o],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}},Yo="projection",zc="coordinateFormat",wy=class by extends Ri{constructor(t){t=t||{};const e=document.createElement("div");e.className=void 0!==t.className?t.className:"ol-mouse-position",super({element:e,render:t.render,target:t.target}),this.addChangeListener(Yo,this.handleProjectionChanged_),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.renderOnMouseOut_=void 0!==t.placeholder,this.placeholder_=this.renderOnMouseOut_?t.placeholder:"&#160;",this.renderedHTML_=e.innerHTML,this.mapProjection_=null,this.transform_=null}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(zc)}getProjection(){return this.get(Yo)}handleMouseMove(t){const e=this.getMap();this.updateHTML_(e.getEventPixel(t))}handleMouseOut(t){this.updateHTML_(null)}setMap(t){if(super.setMap(t),t){const e=t.getViewport();this.listenerKeys.push(At(e,"pointermove",this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(At(e,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(t){this.set(zc,t)}setProjection(t){this.set(Yo,ne(t))}updateHTML_(t){let e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){const c=this.getProjection();this.transform_=c?xs(this.mapProjection_,c):Gr}const o=this.getMap().getCoordinateFromPixelInternal(t);if(o){const c=Zr();c&&(this.transform_=xs(this.mapProjection_,c)),this.transform_(o,o);const f=this.getCoordinateFormat();e=f?f(o):o.toString()}}(!this.renderedHTML_||e!==this.renderedHTML_)&&(this.element.innerHTML=e,this.renderedHTML_=e)}render(t){const e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}},Cy=class _y extends ye{constructor(t){super(),this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){C(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(x(this.element),Lt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=At(t,"postrender",this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set("element",t)}setMap(t){this.set("map",t)}setOffset(t){this.set("offset",t)}setPosition(t){this.set("position",t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get("position"))return;const n=this.getRect(e.getTargetElement(),e.getSize()),o=this.getElement(),c=this.getRect(o,[O(o),N(o)]),f=void 0===(t=t||{}).margin?20:t.margin;if(!pt(n,c)){const g=c[0]-n[0],y=n[2]-c[2],w=c[1]-n[1],S=n[3]-c[3],M=[0,0];if(g<0?M[0]=g-f:y<0&&(M[0]=Math.abs(y)+f),w<0?M[1]=w-f:S<0&&(M[1]=Math.abs(S)+f),0!==M[0]||0!==M[1]){const I=e.getView().getCenterInternal(),F=e.getPixelFromCoordinateInternal(I);if(!F)return;const D=[F[0]+M[0],F[1]+M[1]],X=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(D),duration:X.duration,easing:X.easing})}}}getRect(t,e){const n=t.getBoundingClientRect(),o=n.left+window.pageXOffset,c=n.top+window.pageYOffset;return[o,c,o+e[0],c+e[1]]}setPositioning(t){this.set("positioning",t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const n=t.getPixelFromCoordinate(e),o=t.getSize();this.updateRenderedPosition(n,o)}updateRenderedPosition(t,e){const n=this.element.style,o=this.getOffset(),c=this.getPositioning();this.setVisible(!0);let y="0%",w="0%";"bottom-right"==c||"center-right"==c||"top-right"==c?y="-100%":("bottom-center"==c||"center-center"==c||"top-center"==c)&&(y="-50%"),"bottom-left"==c||"bottom-center"==c||"bottom-right"==c?w="-100%":("center-left"==c||"center-center"==c||"center-right"==c)&&(w="-50%");const S=`translate(${y}, ${w}) translate(${Math.round(t[0]+o[0])+"px"}, ${Math.round(t[1]+o[1])+"px"})`;this.rendered.transform_!=S&&(this.rendered.transform_=S,n.transform=S)}getOptions(){return this.options}},Ay=class Sy extends Ri{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===t.collapsed||t.collapsed,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==t.rotateWithView&&t.rotateWithView,this.viewExtent_=void 0;const e=void 0!==t.className?t.className:"ol-overviewmap",n=void 0!==t.tipLabel?t.tipLabel:"Overview map",o=void 0!==t.collapseLabel?t.collapseLabel:"\u2039";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;const c=void 0!==t.label?t.label:"\u203a";"string"==typeof c?(this.label_=document.createElement("span"),this.label_.textContent=c):this.label_=c;const f=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,g=document.createElement("button");g.setAttribute("type","button"),g.title=n,g.appendChild(f),g.addEventListener("click",this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=t.view;const y=new Wh({view:t.view,controls:new Ue,interactions:new Ue});this.ovmap_=y,t.layers&&t.layers.forEach(function(V){y.addLayer(V)});const w=document.createElement("div");w.className="ol-overviewmap-box",w.style.boxSizing="border-box",this.boxOverlay_=new Cy({position:[0,0],positioning:"center-center",element:w}),this.ovmap_.addOverlay(this.boxOverlay_);const M=this.element;M.className=e+" "+ui+" "+bs+(this.collapsed_&&this.collapsible_?" "+Yn:"")+(this.collapsible_?"":" ol-uncollapsible"),M.appendChild(this.ovmapDiv_),M.appendChild(g);const I=this,F=this.boxOverlay_,D=this.boxOverlay_.getElement(),Y=function(V){const j=function(V){return{clientX:V.clientX,clientY:V.clientY}}(V),Z=y.getEventCoordinateInternal(j);F.setPosition(Z)},G=function(V){const j=y.getEventCoordinateInternal(V);I.getMap().getView().setCenterInternal(j),window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",G)};D.addEventListener("mousedown",function(){window.addEventListener("mousemove",Y),window.addEventListener("mouseup",G)})}setMap(t){const e=this.getMap();if(t!==e){if(e){const n=e.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(super.setMap(t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(At(t,"propertychange",this.handleMapPropertyChange_,this));const n=t.getView();n&&(this.bindView_(n),n.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(t){if("view"===t.key){const e=t.oldValue;e&&this.unbindView_(e);const n=this.getMap().getView();this.bindView_(n)}else!this.ovmap_.isRendered()&&("target"===t.key||"size"===t.key)&&this.ovmap_.updateSize()}bindView_(t){if(!this.view_){const e=new Ii({projection:t.getProjection()});this.ovmap_.setView(e)}t.addChangeListener(Be.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(t){t.removeChangeListener(Be.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),c=t.getView().calculateExtentInternal(n);if(this.viewExtent_&&ci(c,this.viewExtent_))return;this.viewExtent_=c;const f=e.getSize(),y=e.getView().calculateExtentInternal(f),w=e.getPixelFromCoordinateInternal(Ui(c)),S=e.getPixelFromCoordinateInternal(va(c)),M=Math.abs(w[0]-S[0]),I=Math.abs(w[1]-S[1]),F=f[0],D=f[1];M<.1*F||I<.1*D||M>.75*F||I>.75*D?this.resetExtent_():pt(y,c)||this.recenter_()}resetExtent_(){const t=this.getMap(),e=this.ovmap_,n=t.getSize(),c=t.getView().calculateExtentInternal(n),f=e.getView(),g=Math.log(7.5)/Math.LN2;(function Mu(a,t){const e=(a[2]-a[0])/2*(t-1),n=(a[3]-a[1])/2*(t-1);a[0]-=e,a[2]+=e,a[1]-=n,a[3]+=n})(c,1/(.1*Math.pow(2,g/2))),f.fitInternal(Zn(c))}recenter_(){const t=this.getMap(),e=this.ovmap_,n=t.getView();e.getView().setCenterInternal(n.getCenterInternal())}updateBox_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),o=t.getView(),c=e.getView(),f=this.rotateWithView_?0:-o.getRotation(),g=this.boxOverlay_,y=this.boxOverlay_.getElement(),w=o.getCenterInternal(),S=o.getResolution(),M=c.getResolution(),I=n[0]*S/M,F=n[1]*S/M;g.setPosition(w),y&&(y.style.width=I+"px",y.style.height=F+"px",y.style.transform="rotate("+f+"rad)")}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=se(this.ovmap_,"postrender",function(t){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(t){t.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(Yn),this.collapsed_?z(this.collapseLabel_,this.label_):z(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())}setCollapsed(t){!this.collapsible_||this.collapsed_===t||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(t){this.validateExtent_(),this.updateBox_()}},Wo="units",My=[1,2,5],qa=25.4/.28,Ey=class ky extends Ri{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target});const n=void 0!==t.className?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+ui,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Wo,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(Wo)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(Wo,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=t.center,n=t.projection,o=this.getUnits();let f=Fn(n,t.resolution,e,"degrees"==o?"degrees":"m");const g=this.minWidth_*(this.dpi_||qa)/qa,y=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||qa)/qa:void 0;let w=g*f,S="";if("degrees"==o){const j=Zi.degrees;w*=j,w<j/60?(S="\u2033",f*=3600):w<j?(S="\u2032",f*=60):S="\xb0"}else"imperial"==o?w<.9144?(S="in",f/=.0254):w<1609.344?(S="ft",f/=.3048):(S="mi",f/=1609.344):"nautical"==o?(f/=1852,S="NM"):"metric"==o?w<.001?(S="\u03bcm",f*=1e6):w<1?(S="mm",f*=1e3):w<1e3?S="m":(S="km",f/=1e3):"us"==o?w<.9144?(S="in",f*=39.37):w<1609.344?(S="ft",f/=.30480061):(S="mi",f/=1609.3472):Tt(!1,33);let I,F,D,X,Y,G,M=3*Math.floor(Math.log(g*f)/Math.log(10));for(;;){D=Math.floor(M/3);const j=Math.pow(10,D);if(I=My[(M%3+3)%3]*j,F=Math.round(I/f),isNaN(F))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==y&&F>=y){I=X,F=Y,D=G;break}if(F>=g)break;X=I,Y=F,G=D,++M}const V=this.scaleBar_?this.createScaleBar(F,I,S):I.toFixed(D<0?-D:0)+" "+S;this.renderedHTML_!=V&&(this.innerElement_.innerHTML=V,this.renderedHTML_=V),this.renderedWidth_!=F&&(this.innerElement_.style.width=F+"px",this.renderedWidth_=F),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,n){const o=this.getScaleForResolution(),c=o<1?Math.round(1/o).toLocaleString()+" : 1":"1 : "+Math.round(o).toLocaleString(),f=this.scaleBarSteps_,g=t/f,y=[this.createMarker("absolute")];for(let S=0;S<f;++S)y.push(`<div><div class="ol-scale-singlebar ${S%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even"}" style="width: ${g}px;"></div>`+this.createMarker("relative")+(S%2==0||2===f?this.createStepText(S,t,!1,e,n):"")+"</div>");return y.push(this.createStepText(f,t,!0,e,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+c+"</div>":"")+y.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${"absolute"===t?3:-10}px;"></div>`}createStepText(t,e,n,o,c){const g=(0===t?0:Math.round(o/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+c);return`<div class="ol-scale-step-text" style="margin-left: ${0===t?-3:e/this.scaleBarSteps_*-1}px;text-align: ${0===t?"left":"center"};min-width: ${0===t?0:e/this.scaleBarSteps_*2}px;left: ${n?e+"px":"unset"};">`+g+"</div>"}getScaleForResolution(){return Fn(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||qa)}render(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}},Iy=class Ty extends Ri{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=0,this.heightLimit_=0,this.widthLimit_=0,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==t.duration?t.duration:200;const e=void 0!==t.className?t.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=e+"-thumb "+ui;const o=this.element;o.className=e+" "+ui+" "+bs,o.appendChild(n),o.addEventListener("pointerdown",this.handleDraggerStart_.bind(this),!1),o.addEventListener("pointermove",this.handleDraggerDrag_.bind(this),!1),o.addEventListener("pointerup",this.handleDraggerEnd_.bind(this),!1),o.addEventListener("click",this.handleContainerClick_.bind(this),!1),n.addEventListener("click",ee,!1)}setMap(t){super.setMap(t),t&&t.render()}initSlider_(){const t=this.element;let e=t.offsetWidth,n=t.offsetHeight;if(0===e&&0===n)return this.sliderInitialized_=!1;const o=getComputedStyle(t);e-=parseFloat(o.paddingRight)+parseFloat(o.paddingLeft),n-=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom);const c=t.firstElementChild,f=getComputedStyle(c),g=c.offsetWidth+parseFloat(f.marginRight)+parseFloat(f.marginLeft),y=c.offsetHeight+parseFloat(f.marginTop)+parseFloat(f.marginBottom);return this.thumbSize_=[g,y],e>n?(this.direction_=1,this.widthLimit_=e-g):(this.direction_=0,this.heightLimit_=n-y),this.sliderInitialized_=!0}handleContainerClick_(t){const e=this.getMap().getView(),n=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),o=this.getResolutionForPosition_(n),c=e.getConstrainedZoom(e.getZoomForResolution(o));e.animateInternal({zoom:c,duration:this.duration_,easing:ps})}handleDraggerStart_(t){if(!this.dragging_&&t.target===this.element.firstElementChild){const e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){const n=this.handleDraggerDrag_,o=this.handleDraggerEnd_,c=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(At(c,"pointermove",n,this),At(c,"pointerup",o,this))}}}handleDraggerDrag_(t){if(this.dragging_){const o=this.getRelativePosition_(t.clientX-this.startX_,t.clientY-this.startY_);this.currentResolution_=this.getResolutionForPosition_(o),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(Lt),this.dragListenerKeys_.length=0)}setThumbPosition_(t){const e=this.getPositionForResolution_(t),n=this.element.firstElementChild;1==this.direction_?n.style.left=this.widthLimit_*e+"px":n.style.top=this.heightLimit_*e+"px"}getRelativePosition_(t,e){let n;return n=1===this.direction_?t/this.widthLimit_:e/this.heightLimit_,Ut(n,0,1)}getResolutionForPosition_(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)}getPositionForResolution_(t){return Ut(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)}render(t){if(!t.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}},Ly=class Ry extends Ri{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const e=void 0!==t.className?t.className:"ol-zoom-extent",n=void 0!==t.label?t.label:"E",o=void 0!==t.tipLabel?t.tipLabel:"Fit to extent",c=document.createElement("button");c.setAttribute("type","button"),c.title=o,c.appendChild("string"==typeof n?document.createTextNode(n):n),c.addEventListener("click",this.handleClick_.bind(this),!1);const g=this.element;g.className=e+" "+ui+" "+bs,g.appendChild(c)}handleClick_(t){t.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const e=this.getMap().getView(),n=this.extent?this.extent:e.getProjection().getExtent();e.fitInternal(Zn(n))}};let Xc=(()=>{class a{constructor(e){this.olMap=e,this.control="",this.options={}}ngOnInit(){switch(this.control.toLocaleLowerCase()){case"fullscreen":this.chooseControl=new vy(this.options);break;case"mouseposition":this.chooseControl=new wy(this.options);break;case"overviewmap":this.chooseControl=new Ay(this.options);break;case"scaleline":this.chooseControl=new Ey(this.options);break;case"zoomslider":this.chooseControl=new Iy(this.options);break;case"zoomtoextend":this.chooseControl=new Ly(this.options);break;case"attribution":this.chooseControl=new Rh(this.options);break;default:this.chooseControl=new Lh(this.options)}this.olMap.map?this.olMap.setControl(this.chooseControl):setTimeout(()=>{this.ngOnInit()},10)}ngOnDestroy(){}}return a.\u0275fac=function(e){return new(e||a)(q.Y36(Ua))},a.\u0275cmp=q.Xpm({type:a,selectors:[["ol-control"]],inputs:{control:"control",options:"options"},decls:0,vars:0,template:function(e,n){}}),a})();const Py=["containerMap"];function Oy(a,t){1&a&&q._UZ(0,"ol-layer",8),2&a&&q.Q6J("layer",t.$implicit)}let Fy=(()=>{class a{constructor(e,n,o,c,f,g,y,w){this.cdr=e,this.layersService=n,this.limitsService=o,this.countryService=c,this.biomesService=f,this.statesService=g,this.municipalitiesService=y,this.wfsService=w,this.layers=[],this.unsubscribeAll=new Ca.x,this.lays=[],this.limits=[],this.extentOptions={extent:[-12273952.2539,-4285365.5538,176110.9132,269058.3396]},this.layers=[new eo({properties:{key:"mapbox",type:"bmap",visible:!0},source:new Bd({wrapX:!1,attributions:"\xa9 <a href='https://www.mapbox.com/about/maps/'>Mapbox</a>",url:"https://api.mapbox.com/styles/v1/mapbox/light-v10/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoidGhhcmxlc2FuZHJhZGUiLCJhIjoiY2thaHAxcDM5MGx2dzJ4dDExaGQ0bGF3ciJ9.kiB2OzG3Q0THur8XLUW3Gg"}),visible:!0})]}setDimensions(){const e=this.containerMap?.nativeElement.getBoundingClientRect();!e||(this.mapWidth=e.width<300?300:e.width-20,this.mapHeight=e.height-70,this.cdr.detectChanges())}ngOnInit(){}subscriptions(){this.layersService.layers$.pipe((0,eh.q)(1)).pipe((0,Sa.R)(this.unsubscribeAll)).subscribe({next:e=>{this.limitsService.get(e);const n=(e=e.filter(o=>!o.Name.includes("teeb:camada_"))).filter(o=>o.Name.includes("teeb:camada_"));this.lays=e,this.limits=n}}),this.layersService.layers$.pipe((0,Sa.R)(this.unsubscribeAll)).subscribe({next:e=>{this.handleLayers(e)}})}handleLayers(e){Array.isArray(e)&&this.map&&e.forEach(n=>{this.update(n.Name,n.visible)})}addLayers(e){Array.isArray(e)&&e.forEach(n=>{const o=new eo({visible:n.visible,source:new th({url:`${ih.N.geoserverUrl}/geoserver/wms`,params:{version:"1.1.1",tiled:!0,layers:n.Name}}),properties:{title:n.Name,key:"layer",type:"raster"}});this.layers.push(o)})}addLimits(e){Array.isArray(e)&&e.forEach(n=>{const o=new eo({visible:n.visible,source:new th({url:`${ih.N.geoserverUrl}/geoserver/wms`,params:{version:"1.1.1",tiled:!0,layers:n.Name}}),properties:{title:n.Name,key:"limit",type:"vector"}});this.layers.push(o)})}update(e,n=!1){const o=this.map.getLayers().getArray().find(c=>c.get("title")===e);o&&(console.log(n),o.setVisible(n))}ngAfterViewInit(){this.setDimensions(),this.subscriptions()}onMapReady(e){this.map=e,this.addLayers(this.lays),this.addLimits(this.limits)}ngOnDestroy(){this.unsubscribeAll.next(null),this.unsubscribeAll.complete()}}return a.\u0275fac=function(e){return new(e||a)(q.Y36(q.sBO),q.Y36(Vs.KD),q.Y36(Vs.xj),q.Y36(Vs.Tf),q.Y36(Vs.KK),q.Y36(Vs.oX),q.Y36(Vs.Tw),q.Y36(Vd.a))},a.\u0275cmp=q.Xpm({type:a,selectors:[["layers"]],viewQuery:function(e,n){if(1&e&&q.Gf(Py,5),2&e){let o;q.iGM(o=q.CRH())&&(n.containerMap=o.first)}},hostBindings:function(e,n){1&e&&q.NdJ("resize",function(c){return n.setDimensions(c)},!1,q.Jf7)},decls:8,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","h-full"],["containerMap",""],[1,"flex","flex-wrap","items-center","justify-around","w-full","h-full","p-2"],[3,"lat","lon","zoom","width","height","ready"],["control","FullScreen",1,"mobileHide"],["control","scaleline",1,"mobileHide"],["control","zoomtoextend",1,"mobileHide",3,"options"],[3,"layer",4,"ngFor","ngForOf"],[3,"layer"]],template:function(e,n){1&e&&(q.TgZ(0,"div",0,1)(2,"div",2)(3,"ol-map",3),q.NdJ("ready",function(c){return n.onMapReady(c)}),q._UZ(4,"ol-control",4)(5,"ol-control",5)(6,"ol-control",6),q.YNc(7,Oy,1,1,"ol-layer",7),q.qZA()()()),2&e&&(q.xp6(3),q.Q6J("lat",-13.667338)("lon",-48.779297)("zoom",3)("width",n.mapWidth)("height",n.mapHeight),q.xp6(4),q.Q6J("ngForOf",n.layers))},dependencies:[Ae.sg,Ua,Lc,Xc],styles:[".map-content{display:flex;justify-content:center;z-index:101;position:absolute}.limits{z-index:102}\n"],encapsulation:2}),a})();var Yc=Et(2402);const Wc=class Dy{constructor(t){this.rbush_=new Yc(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[Dt(e)]=n}load(t,e){const n=new Array(e.length);for(let o=0,c=e.length;o<c;o++){const f=t[o],g=e[o],y={minX:f[0],minY:f[1],maxX:f[2],maxY:f[3],value:g};n[o]=y,this.items_[Dt(g)]=y}this.rbush_.load(n)}remove(t){const e=Dt(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)}update(t,e){const n=this.items_[Dt(e)];ci([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map(function(o){return o.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let o=0,c=t.length;o<c;o++)if(n=e(t[o]),n)return n;return n}isEmpty(){return jt(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return ie(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}};function Ny(a,t){return[[-1/0,-1/0,1/0,1/0]]}function Gc(a,t){return function(e,n,o,c,f){const g=this;!function zy(a,t,e,n,o,c,f){const g=new XMLHttpRequest;g.open("GET","function"==typeof a?a(e,n,o):a,!0),"arraybuffer"==t.getType()&&(g.responseType="arraybuffer"),g.withCredentials=false,g.onload=function(y){if(!g.status||g.status>=200&&g.status<300){const w=t.getType();let S;"json"==w||"text"==w?S=g.responseText:"xml"==w?(S=g.responseXML,S||(S=(new DOMParser).parseFromString(g.responseText,"application/xml"))):"arraybuffer"==w&&(S=g.response),S?c(t.readFeatures(S,{extent:e,featureProjection:o}),t.readProjection(S)):f()}else f()},g.onerror=f,g.send()}(a,t,e,n,o,function(y,w){g.addFeatures(y),void 0!==c&&c(y)},f||U)}}class es extends fe{constructor(t,e,n){super(t),this.feature=e,this.features=n}}const Yy=class Xy extends jl{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.loader_=U,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&(Tt(this.format_,7),this.loader_=Gc(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:Ny;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let n,o;this.featuresRtree_=e?new Wc:null,this.loadedExtentsRtree_=new Wc,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?o=t.features:t.features&&(n=t.features,o=n.getArray()),!e&&void 0===n&&(n=new Ue(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==n&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=Dt(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const o=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new es("addfeature",t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[At(e,"change",this.handleFeatureChange_,this),At(e,"propertychange",this.handleFeatureChange_,this)]}addToIndex_(t,e){let n=!0;const o=e.getId();return void 0!==o&&(o.toString()in this.idIndex_?n=!1:this.idIndex_[o.toString()]=e),n&&(Tt(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],o=[];for(let c=0,f=t.length;c<f;c++){const g=t[c],y=Dt(g);this.addToIndex_(y,g)&&n.push(g)}for(let c=0,f=n.length;c<f;c++){const g=n[c],y=Dt(g);this.setupChangeEvents_(y,g);const w=g.getGeometry();if(w){const S=w.getExtent();e.push(S),o.push(g)}else this.nullGeometryFeatures_[y]=g}if(this.featuresRtree_&&this.featuresRtree_.load(e,o),this.hasListener("addfeature"))for(let c=0,f=n.length;c<f;c++)this.dispatchEvent(new es("addfeature",n[c]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener("addfeature",function(n){e||(e=!0,t.push(n.feature),e=!1)}),this.addEventListener("removefeature",function(n){e||(e=!0,t.remove(n.feature),e=!1)}),t.addEventListener("add",function(n){e||(e=!0,this.addFeature(n.element),e=!1)}.bind(this)),t.addEventListener("remove",function(n){e||(e=!0,this.removeFeature(n.element),e=!1)}.bind(this)),this.featuresCollection_=t}clear(t){if(t){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Lt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=function(o){this.removeFeatureInternal(o)}.bind(this);this.featuresRtree_.forEach(n);for(const o in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new es("clear");this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){return this.forEachFeatureInExtent([t[0],t[1],t[0],t[1]],function(o){if(o.getGeometry().intersectsCoordinate(t))return e(o)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(n){if(n.getGeometry().intersectsExtent(t)){const c=e(n);if(c)return c}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),jt(this.nullGeometryFeatures_)||cs(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(n){e.push(n)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const o=function Tu(a,t){if(t.canWrapX()){const e=t.getExtent();if(!isFinite(a[0])||!isFinite(a[2]))return[[e[0],a[1],e[2],a[3]]];pl(a,t);const n=Kt(e);if(Kt(a)>n)return[[e[0],a[1],e[2],a[3]]];if(a[0]<e[0])return[[a[0]+n,a[1],e[2],a[3]],[e[0],a[1],a[2],a[3]]];if(a[2]>e[2])return[[a[0],a[1],e[2],a[3]],[e[0],a[1],a[2]-n,a[3]]]}return[a]}(t,e);return[].concat(...o.map(c=>this.featuresRtree_.getInExtent(c)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],o=t[1];let c=null;const f=[NaN,NaN];let g=1/0;const y=[-1/0,-1/0,1/0,1/0];return e=e||ft,this.featuresRtree_.forEachInExtent(y,function(w){if(e(w)){const S=w.getGeometry(),M=g;if(g=S.closestPointXY(n,o,f,g),g<M){c=w;const I=Math.sqrt(g);y[0]=n-I,y[1]=o-I,y[2]=n+I,y[3]=o+I}}}),c}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=Dt(e),o=e.getGeometry();if(o){const f=o.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(f,e)):this.featuresRtree_&&this.featuresRtree_.update(f,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);const c=e.getId();if(void 0!==c){const f=c.toString();this.idIndex_[f]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[f]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new es("changefeature",e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:Dt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&jt(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,n){const o=this.loadedExtentsRtree_,c=this.strategy_(t,e,n);for(let f=0,g=c.length;f<g;++f){const y=c[f];o.forEachInExtent(y,function(S){return pt(S.extent,y)})||(++this.loadingExtentsCount_,this.dispatchEvent(new es("featuresloadstart")),this.loader_.call(this,y,e,n,function(S){--this.loadingExtentsCount_,this.dispatchEvent(new es("featuresloadend",void 0,S))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new es("featuresloaderror"))}.bind(this)),o.insert(y,{extent:y.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,function(o){if(ci(o.extent,t))return n=o,!0}),n&&e.remove(n)}removeFeature(t){if(!t)return;const e=Dt(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=Dt(t),n=this.featureChangeKeys_[e];if(!n)return;n.forEach(Lt),delete this.featureChangeKeys_[e];const o=t.getId();return void 0!==o&&delete this.idIndex_[o.toString()],delete this.uidIndex_[e],this.dispatchEvent(new es("removefeature",t)),t}removeFromIdIndex_(t){let e=!1;for(const n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){Tt(this.format_,7),this.url_=t,this.setLoader(Gc(t,this.format_))}};class Bo{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=ke(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Bo({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return bt()}getImage(t){return bt()}getHitDetectionImage(){return bt()}getPixelRatio(t){return 1}getImageState(){return bt()}getImageSize(){return bt()}getOrigin(){return bt()}getSize(){return bt()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ke(t)}listenImageChange(t){bt()}load(){bt()}unlistenImageChange(t){bt()}}const Hc=Bo;function xi(a){return Array.isArray(a)?A(a):a}class Go extends Hc{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new Go({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const n=this.renderOptions_,o=k(n.size*t,n.size*t);this.draw_(n,o,t),e=o.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return 2}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let o=this.radius_,c=void 0===this.radius2_?o:this.radius2_;if(o<c){const it=o;o=c,c=it}const g=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),y=c*Math.sin(g),S=o-Math.sqrt(c*c-y*y),M=Math.sqrt(y*y+S*S),I=M/y;if("miter"===t&&I<=n)return I*e;const F=e/2/I,D=e/2*(S/M),Y=Math.sqrt((o+F)*(o+F)+D*D)-o;if(void 0===this.radius2_||"bevel"===t)return 2*Y;const G=o*Math.sin(g),j=c-Math.sqrt(o*o-G*G),$=Math.sqrt(G*G+j*j)/G;return $<=n?2*Math.max(Y,$*e/2-c-o):2*Y}createRenderOptions(){let c,t=js,e=0,n=null,o=0,f=0;this.stroke_&&(c=this.stroke_.getColor(),null===c&&(c=Ea),c=xi(c),f=this.stroke_.getWidth(),void 0===f&&(f=1),n=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),void 0===t&&(t=js),e=this.stroke_.getMiterLimit(),void 0===e&&(e=10));const g=this.calculateLineJoinSize_(t,f,e),y=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:c,strokeWidth:f,size:Math.ceil(2*y+g),lineDash:n,lineDashOffset:o,lineJoin:t,miterLimit:e}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let o=this.fill_.getColor();null===o&&(o=Ei),e.fillStyle=xi(o),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),n=0;if("string"==typeof e&&(e=v(e)),null===e?n=1:Array.isArray(e)&&(n=4===e.length?e[3]:1),0===n){const o=k(t.size,t.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(t,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const o=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(e*=2);const c=this.angle_-Math.PI/2,f=2*Math.PI/e;for(let g=0;g<e;g++){const y=c+g*f,w=g%2==0?n:o;t.lineTo(w*Math.cos(y),w*Math.sin(y))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Ei,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const Vc=Go;class Ho extends Vc{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new Ho({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const jc=Ho;class Vo{constructor(t){this.color_=void 0!==(t=t||{}).color?t.color:null}clone(){const t=this.getColor();return new Vo({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const ur=Vo;class jo{constructor(t){this.color_=void 0!==(t=t||{}).color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new jo({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const Uo=jo;class is{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Uc,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new is({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Uc,this.geometry_=t}setZIndex(t){this.zIndex_=t}}let Zo=null;function By(a,t){if(!Zo){const e=new ur({color:"rgba(255,255,255,0.4)"}),n=new Uo({color:"#3399CC",width:1.25});Zo=[new is({image:new jc({fill:e,stroke:n,radius:5}),fill:e,stroke:n})]}return Zo}function Uc(a){return a.getGeometry()}const Ja=is;let Qa=null;class Gy extends Qt{constructor(t,e,n,o,c,f){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=o,this.canvas_={},this.color_=f,this.unlisten_=null,this.imageState_=c,this.size_=n,this.src_=e}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&2===this.imageState_){Qa||(Qa=k(1,1)),Qa.drawImage(this.image_,0,0);try{Qa.getImageData(0,0,1,1),this.tainted_=!1}catch{Qa=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=k(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Nr(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||2!==this.imageState_)return;const e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t);const o=n.getContext("2d");o.scale(t,t),o.drawImage(e,0,0),o.globalCompositeOperation="multiply",o.fillStyle=u(this.color_),o.fillRect(0,0,n.width/t,n.height/t),o.globalCompositeOperation="destination-in",o.drawImage(e,0,0),this.canvas_[t]=n}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}class qo extends Hc{constructor(t){super({opacity:void 0!==(t=t||{}).opacity?t.opacity:1,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const f=void 0!==t.img?t.img:null;this.imgSize_=t.imgSize;let g=t.src;Tt(!(void 0!==g&&f),4),Tt(!f||f&&this.imgSize_,5),(void 0===g||0===g.length)&&f&&(g=f.src||Dt(f)),Tt(void 0!==g&&g.length>0,6);const y=void 0!==t.src?0:2;this.color_=void 0!==t.color?v(t.color):null,this.iconImage_=function Hy(a,t,e,n,o,c){let f=zn.get(t,n,c);return f||(f=new Gy(a,t,e,n,o,c),zn.set(t,n,c,f)),f}(f,g,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,y,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null}clone(){const t=this.getScale();return new qo({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const o=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!o)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=o[0]),"fraction"==this.anchorYUnits_&&(t[1]*=o[1])}if("top-left"!=this.anchorOrigin_){if(!o)return null;t===this.anchor_&&(t=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[0]=-t[0]+o[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[1]=-t[1]+o[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[0]=n[0]-e[0]-t[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(t){this.iconImage_.addEventListener("change",t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener("change",t)}}const Ko=qo;class Jo{constructor(t){this.font_=(t=t||{}).font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=ke(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new ur({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const t=this.getScale();return new Jo({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ke(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const Zc=Jo;function qc(a){return new Ja({fill:$a(a,""),stroke:tn(a,""),text:jy(a),image:Uy(a)})}function $a(a,t){const e=a[t+"fill-color"];if(e)return new ur({color:e})}function tn(a,t){const e=a[t+"stroke-width"],n=a[t+"stroke-color"];if(e||n)return new Uo({width:e,color:n,lineCap:a[t+"stroke-line-cap"],lineJoin:a[t+"stroke-line-join"],lineDash:a[t+"stroke-line-dash"],lineDashOffset:a[t+"stroke-line-dash-offset"],miterLimit:a[t+"stroke-miter-limit"]})}function jy(a){const t=a["text-value"];return t?new Zc({text:t,font:a["text-font"],maxAngle:a["text-max-angle"],offsetX:a["text-offset-x"],offsetY:a["text-offset-y"],overflow:a["text-overflow"],placement:a["text-placement"],scale:a["text-scale"],rotateWithView:a["text-rotate-with-view"],rotation:a["text-rotation"],textAlign:a["text-align"],justify:a["text-justify"],textBaseline:a["text-baseline"],padding:a["text-padding"],fill:$a(a,"text-"),backgroundFill:$a(a,"text-background-"),stroke:tn(a,"text-"),backgroundStroke:tn(a,"text-background-")}):void 0}function Uy(a){const t=a["icon-src"],e=a["icon-img"];if(t||e)return new Ko({src:t,img:e,imgSize:a["icon-img-size"],anchor:a["icon-anchor"],anchorOrigin:a["icon-anchor-origin"],anchorXUnits:a["icon-anchor-x-units"],anchorYUnits:a["icon-anchor-y-units"],color:a["icon-color"],crossOrigin:a["icon-cross-origin"],offset:a["icon-offset"],displacement:a["icon-displacement"],opacity:a["icon-opacity"],scale:a["icon-scale"],rotation:a["icon-rotation"],rotateWithView:a["icon-rotate-with-view"],size:a["icon-size"],declutterMode:a["icon-declutter-mode"]});const n=a["shape-points"];if(n){const c="shape-";return new Vc({points:n,fill:$a(a,c),stroke:tn(a,c),radius:a["shape-radius"],radius1:a["shape-radius1"],radius2:a["shape-radius2"],angle:a["shape-angle"],displacement:a["shape-displacement"],rotation:a["shape-rotation"],rotateWithView:a["shape-rotate-with-view"],scale:a["shape-scale"],declutterMode:a["shape-declutter-mode"]})}const o=a["circle-radius"];if(o){const c="circle-";return new jc({radius:o,fill:$a(a,c),stroke:tn(a,c),displacement:a["circle-displacement"],scale:a["circle-scale"],rotation:a["circle-rotation"],rotateWithView:a["circle-rotate-with-view"],declutterMode:a["circle-declutter-mode"]})}}const qy=class Zy extends Mi{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new Yc(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set("renderOrder",t)}setStyle(t){let e;if(void 0===t)e=By;else if(null===t)e=null;else if("function"==typeof t)e=t;else if(t instanceof Ja)e=t;else if(Array.isArray(t)){const n=t.length,o=new Array(n);for(let c=0;c<n;++c){const f=t[c];o[c]=f instanceof Ja?f:qc(f)}e=o}else e=qc(t);this.style_=e,this.styleFunction_=null===t?void 0:function Wy(a){let t;if("function"==typeof a)t=a;else{let e;Array.isArray(a)?e=a:(Tt("function"==typeof a.getZIndex,41),e=[a]),t=function(){return e}}return t}(this.style_),this.changed()}},en={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},dr=[en.FILL],ss=[en.STROKE],Es=[en.BEGIN_PATH],Jc=[en.CLOSE_PATH],kt=en,Qc=class Ky{drawCustom(t,e,n,o){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}},sn=class Jy extends Qc{constructor(t,e,n,o){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=o,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map(function(n){return n*e})}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,c=this.coordinates;let f=c.length;for(let g=0,y=t.length;g<y;g+=e)o[0]=t[g],o[1]=t[g+1],at(n,o)&&(c[f++]=o[0],c[f++]=o[1]);return f}appendFlatLineCoordinates(t,e,n,o,c,f){const g=this.coordinates;let y=g.length;const w=this.getBufferedMaxExtent();f&&(e+=o);let S=t[e],M=t[e+1];const I=this.tmpCoordinate_;let D,X,Y,F=!0;for(D=e+o;D<n;D+=o)I[0]=t[D],I[1]=t[D+1],Y=Xt(w,I),Y!==X?(F&&(g[y++]=S,g[y++]=M,F=!1),g[y++]=I[0],g[y++]=I[1]):1===Y?(g[y++]=I[0],g[y++]=I[1],F=!1):F=!0,S=I[0],M=I[1],X=Y;return(c&&F||D===e+o)&&(g[y++]=S,g[y++]=M),y}drawCustomCoordinates_(t,e,n,o,c){for(let f=0,g=n.length;f<g;++f){const y=n[f],w=this.appendFlatLineCoordinates(t,e,y,o,!1,!1);c.push(w),e=y}return e}drawCustom(t,e,n,o){this.beginGeometry(t,e);const c=t.getType(),f=t.getStride(),g=this.coordinates.length;let y,w,S,M,I;switch(c){case"MultiPolygon":y=t.getOrientedFlatCoordinates(),M=[];const F=t.getEndss();I=0;for(let D=0,X=F.length;D<X;++D){const Y=[];I=this.drawCustomCoordinates_(y,I,F[D],f,Y),M.push(Y)}this.instructions.push([kt.CUSTOM,g,M,t,n,Ah]),this.hitDetectionInstructions.push([kt.CUSTOM,g,M,t,o||n,Ah]);break;case"Polygon":case"MultiLineString":S=[],y="Polygon"==c?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),I=this.drawCustomCoordinates_(y,0,t.getEnds(),f,S),this.instructions.push([kt.CUSTOM,g,S,t,n,jn]),this.hitDetectionInstructions.push([kt.CUSTOM,g,S,t,o||n,jn]);break;case"LineString":case"Circle":y=t.getFlatCoordinates(),w=this.appendFlatLineCoordinates(y,0,y.length,f,!1,!1),this.instructions.push([kt.CUSTOM,g,w,t,n,qs]),this.hitDetectionInstructions.push([kt.CUSTOM,g,w,t,o||n,qs]);break;case"MultiPoint":y=t.getFlatCoordinates(),w=this.appendFlatPointCoordinates(y,f),w>g&&(this.instructions.push([kt.CUSTOM,g,w,t,n,qs]),this.hitDetectionInstructions.push([kt.CUSTOM,g,w,t,o||n,qs]));break;case"Point":y=t.getFlatCoordinates(),this.coordinates.push(y[0],y[1]),w=this.coordinates.length,this.instructions.push([kt.CUSTOM,g,w,t,n]),this.hitDetectionInstructions.push([kt.CUSTOM,g,w,t,o||n])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[kt.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[kt.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const n=t.length;let o,c,f=-1;for(e=0;e<n;++e)o=t[e],c=o[0],c==kt.END_GEOMETRY?f=e:c==kt.BEGIN_GEOMETRY&&(o[2]=e,Re(this.hitDetectionInstructions,f,e),f=-1)}setFillStrokeStyle(t,e){const n=this.state;if(t){const o=t.getColor();n.fillStyle=xi(o||Ei)}else n.fillStyle=void 0;if(e){const o=e.getColor();n.strokeStyle=xi(o||Ea);const c=e.getLineCap();n.lineCap=void 0!==c?c:Wn;const f=e.getLineDash();n.lineDash=f?f.slice():Aa;const g=e.getLineDashOffset();n.lineDashOffset=g||0;const y=e.getLineJoin();n.lineJoin=void 0!==y?y:js;const w=e.getWidth();n.lineWidth=void 0!==w?w:1;const S=e.getMiterLimit();n.miterLimit=void 0!==S?S:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[kt.SET_FILL_STYLE,e];return"string"!=typeof e&&n.push(!0),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[kt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;("string"!=typeof n||t.currentFillStyle!=n)&&(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,o=t.lineCap,c=t.lineDash,f=t.lineDashOffset,g=t.lineJoin,y=t.lineWidth,w=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=o||c!=t.currentLineDash&&!Q(t.currentLineDash,c)||t.currentLineDashOffset!=f||t.currentLineJoin!=g||t.currentLineWidth!=y||t.currentMiterLimit!=w)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=o,t.currentLineDash=c,t.currentLineDashOffset=f,t.currentLineJoin=g,t.currentLineWidth=y,t.currentMiterLimit=w)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[kt.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=et(this.maxExtent),this.maxLineWidth>0)&&H(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}},$c=class iv extends sn{constructor(t,e,n,o){super(t,e,n,o)}drawFlatCoordinatess_(t,e,n,o){const c=this.state,f=void 0!==c.fillStyle,g=void 0!==c.strokeStyle,y=n.length;this.instructions.push(Es),this.hitDetectionInstructions.push(Es);for(let w=0;w<y;++w){const S=n[w],M=this.coordinates.length,I=this.appendFlatLineCoordinates(t,e,S,o,!0,!g),F=[kt.MOVE_TO_LINE_TO,M,I];this.instructions.push(F),this.hitDetectionInstructions.push(F),g&&(this.instructions.push(Jc),this.hitDetectionInstructions.push(Jc)),e=S}return f&&(this.instructions.push(dr),this.hitDetectionInstructions.push(dr)),g&&(this.instructions.push(ss),this.hitDetectionInstructions.push(ss)),e}drawCircle(t,e){const n=this.state;if(void 0===n.fillStyle&&void 0===n.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([kt.SET_FILL_STYLE,Ei]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const f=t.getFlatCoordinates(),g=t.getStride(),y=this.coordinates.length;this.appendFlatLineCoordinates(f,0,f.length,g,!1,!1);const w=[kt.CIRCLE,y];this.instructions.push(Es,w),this.hitDetectionInstructions.push(Es,w),void 0!==n.fillStyle&&(this.instructions.push(dr),this.hitDetectionInstructions.push(dr)),void 0!==n.strokeStyle&&(this.instructions.push(ss),this.hitDetectionInstructions.push(ss)),this.endGeometry(e)}drawPolygon(t,e){const n=this.state;if(void 0===n.fillStyle&&void 0===n.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([kt.SET_FILL_STYLE,Ei]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const f=t.getEnds(),g=t.getOrientedFlatCoordinates(),y=t.getStride();this.drawFlatCoordinatess_(g,0,f,y),this.endGeometry(e)}drawMultiPolygon(t,e){const n=this.state;if(void 0===n.fillStyle&&void 0===n.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([kt.SET_FILL_STYLE,Ei]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const f=t.getEndss(),g=t.getOrientedFlatCoordinates(),y=t.getStride();let w=0;for(let S=0,M=f.length;S<M;++S)w=this.drawFlatCoordinatess_(g,w,f[S],y);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let n=0,o=e.length;n<o;++n)e[n]=Cs(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};function sv(a,t,e,n,o){let S,M,I,F,D,X,Y,G,V,j,c=e,f=e,g=0,y=0,w=e;for(M=e;M<n;M+=o){const Z=t[M],$=t[M+1];void 0!==D&&(V=Z-D,j=$-X,F=Math.sqrt(V*V+j*j),void 0!==Y&&(y+=I,S=Math.acos((Y*V+G*j)/(I*F)),S>a&&(y>g&&(g=y,c=w,f=M),y=0,w=M-o)),I=F,Y=V,G=j),D=Z,X=$}return y+=F,y>g?[w,M]:[c,f]}const an={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},nv={Circle:$c,Default:sn,Image:class Qy extends sn{constructor(t,e,n,o){super(t,e,n,o),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),o=t.getStride(),c=this.coordinates.length,f=this.appendFlatPointCoordinates(n,o);this.instructions.push([kt.DRAW_IMAGE,c,f,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([kt.DRAW_IMAGE,c,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),o=t.getStride(),c=this.coordinates.length,f=this.appendFlatPointCoordinates(n,o);this.instructions.push([kt.DRAW_IMAGE,c,f,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([kt.DRAW_IMAGE,c,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),o=t.getSize(),c=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=c[0],this.originY_=c[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},LineString:class tv extends sn{constructor(t,e,n,o){super(t,e,n,o)}drawFlatCoordinates_(t,e,n,o){const c=this.coordinates.length,f=this.appendFlatLineCoordinates(t,e,n,o,!1,!1),g=[kt.MOVE_TO_LINE_TO,c,f];return this.instructions.push(g),this.hitDetectionInstructions.push(g),n}drawLineString(t,e){const n=this.state;if(void 0===n.strokeStyle||void 0===n.lineWidth)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Aa,0],Es);const f=t.getFlatCoordinates(),g=t.getStride();this.drawFlatCoordinates_(f,0,f.length,g),this.hitDetectionInstructions.push(ss),this.endGeometry(e)}drawMultiLineString(t,e){const n=this.state;if(void 0===n.strokeStyle||void 0===n.lineWidth)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([kt.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],Es);const f=t.getEnds(),g=t.getFlatCoordinates(),y=t.getStride();let w=0;for(let S=0,M=f.length;S<M;++S)w=this.drawFlatCoordinates_(g,w,f[S],y);this.hitDetectionInstructions.push(ss),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(ss),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(ss),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Es)}},Polygon:$c,Text:class av extends sn{constructor(t,e,n,o){super(t,e,n,o),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const c=this.textState_;if(""===this.text_||!c||!this.textFillState_&&!this.textStrokeState_)return;const f=this.coordinates;let g=f.length;const y=t.getType();let w=null,S=t.getStride();if("line"!==c.placement||"LineString"!=y&&"MultiLineString"!=y&&"Polygon"!=y&&"MultiPolygon"!=y){let M=c.overflow?null:[];switch(y){case"Point":case"MultiPoint":w=t.getFlatCoordinates();break;case"LineString":w=t.getFlatMidpoint();break;case"Circle":w=t.getCenter();break;case"MultiLineString":w=t.getFlatMidpoints(),S=2;break;case"Polygon":w=t.getFlatInteriorPoint(),c.overflow||M.push(w[2]/this.resolution),S=3;break;case"MultiPolygon":const Y=t.getFlatInteriorPoints();w=[];for(let G=0,V=Y.length;G<V;G+=3)c.overflow||M.push(Y[G+2]/this.resolution),w.push(Y[G],Y[G+1]);if(0===w.length)return;S=2}const I=this.appendFlatPointCoordinates(w,S);if(I===g)return;if(M&&(I-g)/2!=w.length/S){let Y=g/2;M=M.filter((G,V)=>{const j=f[2*(Y+V)]===w[V*S]&&f[2*(Y+V)+1]===w[V*S+1];return j||--Y,j})}this.saveTextStates_(),(c.backgroundFill||c.backgroundStroke)&&(this.setFillStrokeStyle(c.backgroundFill,c.backgroundStroke),c.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),c.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let F=c.padding;if(F!=ws&&(c.scale[0]<0||c.scale[1]<0)){let Y=c.padding[0],G=c.padding[1],V=c.padding[2],j=c.padding[3];c.scale[0]<0&&(G=-G,j=-j),c.scale[1]<0&&(Y=-Y,V=-V),F=[Y,G,V,j]}const D=this.pixelRatio;this.instructions.push([kt.DRAW_IMAGE,g,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,F==ws?ws:F.map(function(Y){return Y*D}),!!c.backgroundFill,!!c.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]);const X=1/D;this.hitDetectionInstructions.push([kt.DRAW_IMAGE,g,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[X,X],NaN,void 0,this.declutterImageWithText_,F,!!c.backgroundFill,!!c.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]),this.endGeometry(e)}else{if(!Le(this.getBufferedMaxExtent(),t.getExtent()))return;let M;if(w=t.getFlatCoordinates(),"LineString"==y)M=[w.length];else if("MultiLineString"==y)M=t.getEnds();else if("Polygon"==y)M=t.getEnds().slice(0,1);else if("MultiPolygon"==y){const X=t.getEndss();M=[];for(let Y=0,G=X.length;Y<G;++Y)M.push(X[Y][0])}this.beginGeometry(t,e);const I=c.textAlign;let D,F=0;for(let X=0,Y=M.length;X<Y;++X){if(null==I){const V=sv(c.maxAngle,w,F,M[X],S);F=V[0],D=V[1]}else D=M[X];for(let V=F;V<D;V+=S)f.push(w[V],w[V+1]);const G=f.length;F=M[X],this.drawChars_(g,G),g=G}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,o=this.strokeKey_;t&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const c=this.textKey_;c in this.textStates||(this.textStates[c]={font:e.font,textAlign:e.textAlign||Ta,justify:e.justify,textBaseline:e.textBaseline||Bn,scale:e.scale});const f=this.fillKey_;n&&(f in this.fillStates||(this.fillStates[f]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,o=this.textState_,c=this.strokeKey_,f=this.textKey_,g=this.fillKey_;this.saveTextStates_();const y=this.pixelRatio,w=an[o.textBaseline],S=this.textOffsetY_*y,M=this.text_,I=n?n.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([kt.DRAW_CHARS,t,e,w,o.overflow,g,o.maxAngle,y,S,c,I*y,M,f,1]),this.hitDetectionInstructions.push([kt.DRAW_CHARS,t,e,w,o.overflow,g,o.maxAngle,1,S,c,I,M,f,1/y])}setTextStyle(t,e){let n,o,c;if(t){const f=t.getFill();f?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=xi(f.getColor()||Ei)):(o=null,this.textFillState_=o);const g=t.getStroke();if(g){c=this.textStrokeState_,c||(c={},this.textStrokeState_=c);const D=g.getLineDash(),X=g.getLineDashOffset(),Y=g.getWidth(),G=g.getMiterLimit();c.lineCap=g.getLineCap()||Wn,c.lineDash=D?D.slice():Aa,c.lineDashOffset=void 0===X?0:X,c.lineJoin=g.getLineJoin()||js,c.lineWidth=void 0===Y?1:Y,c.miterLimit=void 0===G?10:G,c.strokeStyle=xi(g.getColor()||Ea)}else c=null,this.textStrokeState_=c;n=this.textState_;const y=t.getFont()||lh;$d(y);const w=t.getScaleArray();n.overflow=t.getOverflow(),n.font=y,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||Bn,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||ws,n.scale=void 0===w?[1,1]:w;const S=t.getOffsetX(),M=t.getOffsetY(),I=t.getRotateWithView(),F=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===S?0:S,this.textOffsetY_=void 0===M?0:M,this.textRotateWithView_=void 0!==I&&I,this.textRotation_=void 0===F?0:F,this.strokeKey_=c?("string"==typeof c.strokeStyle?c.strokeStyle:Dt(c.strokeStyle))+c.lineCap+c.lineDashOffset+"|"+c.lineWidth+c.lineJoin+c.miterLimit+"["+c.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+Dt(o.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}},tu=class rv{constructor(t,e,n,o){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=o,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const o in n){const c=n[o].finish();t[e][o]=c}}return t}getBuilder(t,e){const n=void 0!==t?t.toString():"0";let o=this.buildersByZIndex_[n];void 0===o&&(o={},this.buildersByZIndex_[n]=o);let c=o[e];return void 0===c&&(c=new(0,nv[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),o[e]=c),c}};function ov(a,t,e,n,o,c,f,g,y,w,S,M){let I=a[t],F=a[t+1],D=0,X=0,Y=0,G=0;function V(){D=I,X=F,I=a[t+=n],F=a[t+1],G+=Y,Y=Math.sqrt((I-D)*(I-D)+(F-X)*(F-X))}do{V()}while(t<e-n&&G+Y<c);let j=0===Y?0:(c-G)/Y;const Z=Ai(D,I,j),$=Ai(X,F,j),it=t-n,ut=G,ht=c+g*y(w,o,S);for(;t<e-n&&G+Y<ht;)V();j=0===Y?0:(ht-G)/Y;const vt=Ai(D,I,j),Ct=Ai(X,F,j);let Pt;if(M){const mt=[Z,$,vt,Ct];gh(mt,0,4,2,M,mt,mt),Pt=mt[0]>mt[2]}else Pt=Z>vt;const Nt=Math.PI,Rt=[],de=it+n===t;let Ft;if(Y=0,G=ut,I=a[t=it],F=a[t+1],de)return V(),Ft=Math.atan2(F-X,I-D),Pt&&(Ft+=Ft>0?-Nt:Nt),Rt[0]=[(vt+Z)/2,(Ct+$)/2,(ht-c)/2,Ft,o],Rt;for(let mt=0,xt=(o=o.replace(/\n/g," ")).length;mt<xt;){V();let _t=Math.atan2(F-X,I-D);if(Pt&&(_t+=_t>0?-Nt:Nt),void 0!==Ft){let Ht=_t-Ft;if(Ht+=Ht>Nt?-2*Nt:Ht<-Nt?2*Nt:0,Math.abs(Ht)>f)return null}Ft=_t;const $t=mt;let te=0;for(;mt<xt;++mt){const Jt=g*y(w,o[Pt?xt-mt-1:mt],S);if(t+n<e&&G+Y<c+te+Jt/2)break;te+=Jt}if(mt===$t)continue;const me=Pt?o.substring(xt-$t,xt-mt):o.substring($t,mt);j=0===Y?0:(c+te/2-G)/Y;const nt=Ai(D,I,j),He=Ai(X,F,j);Rt.push([nt,He,te/2,_t,me]),c+=te}return Rt}function eu(a,t,e,n){let o=a[t],c=a[t+1],f=0;for(let g=t+n;g<e;g+=n){const y=a[g],w=a[g+1];f+=Math.sqrt((y-o)*(y-o)+(w-c)*(w-c)),o=y,c=w}return f}const oa=[1/0,1/0,-1/0,-1/0],as=[],Pi=[],Oi=[],ns=[];function iu(a){return a[3].declutterBox}const lv=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function su(a,t){return("start"===t||"end"===t)&&!lv.test(a)&&(t="start"===t?"left":"right"),an[t]}function hv(a,t,e){return e>0&&a.push("\n",""),a.push(t,""),a}const uv=class cv{constructor(t,e,n,o){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.instructions=o.instructions,this.coordinates=o.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=o.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=o.fillStates||{},this.strokeStates=o.strokeStates||{},this.textStates=o.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,n,o){const c=t+e+n+o;if(this.labels_[c])return this.labels_[c];const f=o?this.strokeStates[o]:null,g=n?this.fillStates[n]:null,y=this.textStates[e],w=this.pixelRatio,S=[y.scale[0]*w,y.scale[1]*w],M=Array.isArray(t),I=y.justify?an[y.justify]:su(Array.isArray(t)?t[0]:t,y.textAlign||Ta),F=o&&f.lineWidth?f.lineWidth:0,D=M?t:t.split("\n").reduce(hv,[]),{width:X,height:Y,widths:G,heights:V,lineWidths:j}=function ef(a,t){const e=[],n=[],o=[];let c=0,f=0,g=0,y=0;for(let w=0,S=t.length;w<=S;w+=2){const M=t[w];if("\n"===M||w===S){c=Math.max(c,f),o.push(f),f=0,g+=y;continue}const I=t[w+1]||a.font,F=Gn(I,M);e.push(F),f+=F;const D=tf(I);n.push(D),y=Math.max(y,D)}return{width:c,height:g,widths:e,heights:n,lineWidths:o}}(y,D),Z=X+F,$=[],it=(Z+2)*S[0],ut=(Y+F)*S[1],ht={width:it<0?Math.floor(it):Math.ceil(it),height:ut<0?Math.floor(ut):Math.ceil(ut),contextInstructions:$};(1!=S[0]||1!=S[1])&&$.push("scale",S),o&&($.push("strokeStyle",f.strokeStyle),$.push("lineWidth",F),$.push("lineCap",f.lineCap),$.push("lineJoin",f.lineJoin),$.push("miterLimit",f.miterLimit),$.push("setLineDash",[f.lineDash]),$.push("lineDashOffset",f.lineDashOffset)),n&&$.push("fillStyle",g.fillStyle),$.push("textBaseline","middle"),$.push("textAlign","center");const vt=.5-I;let Ct=I*Z+vt*F;const Pt=[],Nt=[];let xt,Rt=0,de=0,Ft=0,mt=0;for(let _t=0,$t=D.length;_t<$t;_t+=2){const te=D[_t];if("\n"===te){de+=Rt,Rt=0,Ct=I*Z+vt*F,++mt;continue}const me=D[_t+1]||y.font;me!==xt&&(o&&Pt.push("font",me),n&&Nt.push("font",me),xt=me),Rt=Math.max(Rt,V[Ft]);const nt=[te,Ct+vt*G[Ft]+I*(G[Ft]-j[mt]),.5*(F+Rt)+de];Ct+=G[Ft],o&&Pt.push("strokeText",nt),n&&Nt.push("fillText",nt),++Ft}return Array.prototype.push.apply($,Pt),Array.prototype.push.apply($,Nt),this.labels_[c]=ht,ht}replayTextBackground_(t,e,n,o,c,f,g){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,o),t.lineTo.apply(t,c),t.lineTo.apply(t,e),f&&(this.alignFill_=f[2],this.fill_(t)),g&&(this.setStrokeStyle_(t,g),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,o,c,f,g,y,w,S,M,I,F,D,X,Y){let G=n-(g*=I[0]),V=o-(y*=I[1]);const j=c+w>t?t-w:c,Z=f+S>e?e-S:f,$=D[3]+j*I[0]+D[1],it=D[0]+Z*I[1]+D[2],ut=G-D[3],ht=V-D[0];let vt;return(X||0!==M)&&(as[0]=ut,ns[0]=ut,as[1]=ht,Pi[1]=ht,Pi[0]=ut+$,Oi[0]=Pi[0],Oi[1]=ht+it,ns[1]=Oi[1]),0!==M?(vt=We([1,0,0,1,0,0],n,o,1,1,M,-n,-o),ue(vt,as),ue(vt,Pi),ue(vt,Oi),ue(vt,ns),ie(Math.min(as[0],Pi[0],Oi[0],ns[0]),Math.min(as[1],Pi[1],Oi[1],ns[1]),Math.max(as[0],Pi[0],Oi[0],ns[0]),Math.max(as[1],Pi[1],Oi[1],ns[1]),oa)):ie(Math.min(ut,ut+$),Math.min(ht,ht+it),Math.max(ut,ut+$),Math.max(ht,ht+it),oa),F&&(G=Math.round(G),V=Math.round(V)),{drawImageX:G,drawImageY:V,drawImageW:j,drawImageH:Z,originX:w,originY:S,declutterBox:{minX:oa[0],minY:oa[1],maxX:oa[2],maxY:oa[3],value:Y},canvasTransform:vt,scale:I}}replayImageOrLabel_(t,e,n,o,c,f,g){const w=o.declutterBox,S=t.canvas,M=g?g[2]*o.scale[0]/2:0;return w.minX-M<=S.width/e&&w.maxX+M>=0&&w.minY-M<=S.height/e&&w.maxY+M>=0&&(!(!f&&!g)&&this.replayTextBackground_(t,as,Pi,Oi,ns,f,g),function sf(a,t,e,n,o,c,f,g,y,w,S){a.save(),1!==e&&(a.globalAlpha*=e),t&&a.setTransform.apply(a,t),n.contextInstructions?(a.translate(y,w),a.scale(S[0],S[1]),function af(a,t){const e=a.contextInstructions;for(let n=0,o=e.length;n<o;n+=2)Array.isArray(e[n+1])?t[e[n]].apply(t,e[n+1]):t[e[n]]=e[n+1]}(n,a)):S[0]<0||S[1]<0?(a.translate(y,w),a.scale(S[0],S[1]),a.drawImage(n,o,c,f,g,0,0,f,g)):a.drawImage(n,o,c,f,g,y,w,f*S[0],g*S[1]),a.restore()}(t,o.canvasTransform,c,n,o.originX,o.originY,o.drawImageW,o.drawImageH,o.drawImageX,o.drawImageY,o.scale)),!0}fill_(t){if(this.alignFill_){const e=ue(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,o){const c=this.textStates[e],f=this.createLabel(t,e,o,n),g=this.strokeStates[n],y=this.pixelRatio,w=su(Array.isArray(t)?t[0]:t,c.textAlign||Ta),S=an[c.textBaseline||Bn],M=g&&g.lineWidth?g.lineWidth:0;return{label:f,anchorX:w*(f.width/y-2*c.scale[0])+2*(.5-w)*M,anchorY:S*f.height/y+2*(.5-S)*M}}execute_(t,e,n,o,c,f,g,y){let w;this.pixelCoordinates_&&Q(n,this.renderedTransform_)?w=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),w=_s(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),function Ir(a,t){a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5]}(this.renderedTransform_,n));let S=0;const M=o.length;let F,D,X,Y,G,V,j,Z,$,it,ut,ht,I=0,vt=0,Ct=0,Pt=null,Nt=null;const Rt=this.coordinateCache_,de=this.viewRotation_,Ft=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,mt={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:de},xt=this.instructions!=o||this.overlaps?0:200;let _t,$t,te,me;for(;S<M;){const nt=o[S];switch(nt[0]){case kt.BEGIN_GEOMETRY:_t=nt[1],me=nt[3],_t.getGeometry()?void 0===g||Le(g,me.getExtent())?++S:S=nt[2]+1:S=nt[2];break;case kt.BEGIN_PATH:vt>xt&&(this.fill_(t),vt=0),Ct>xt&&(t.stroke(),Ct=0),!vt&&!Ct&&(t.beginPath(),Y=NaN,G=NaN),++S;break;case kt.CIRCLE:I=nt[1];const Ht=w[I],Jt=w[I+1],be=w[I+2]-Ht,Ni=w[I+3]-Jt,la=Math.sqrt(be*be+Ni*Ni);t.moveTo(Ht+la,Jt),t.arc(Ht,Jt,la,0,2*Math.PI,!0),++S;break;case kt.CLOSE_PATH:t.closePath(),++S;break;case kt.CUSTOM:I=nt[1],F=nt[2];const ha=nt[4],mr=6==nt.length?nt[5]:void 0;mt.geometry=nt[3],mt.feature=_t,S in Rt||(Rt[S]=[]);const os=Rt[S];mr?mr(w,I,F,2,os):(os[0]=w[I],os[1]=w[I+1],os.length=2),ha(os,mt),++S;break;case kt.DRAW_IMAGE:I=nt[1],F=nt[2],Z=nt[3],D=nt[4],X=nt[5];let nn=nt[6];const ls=nt[7],xr=nt[8],yr=nt[9],vr=nt[10];let ca=nt[11];const nl=nt[12];let De=nt[13];const Ke=nt[14],ai=nt[15];if(!Z&&nt.length>=20){$=nt[19],it=nt[20],ut=nt[21],ht=nt[22];const Ve=this.drawLabelWithPointPlacement_($,it,ut,ht);Z=Ve.label,nt[3]=Z,D=(Ve.anchorX-nt[23])*this.pixelRatio,nt[4]=D,X=(Ve.anchorY-nt[24])*this.pixelRatio,nt[5]=X,nn=Z.height,nt[6]=nn,De=Z.width,nt[13]=De}let zi,ua,Ts,hs;nt.length>25&&(zi=nt[25]),nt.length>17?(ua=nt[16],Ts=nt[17],hs=nt[18]):(ua=ws,Ts=!1,hs=!1),vr&&Ft?ca+=de:!vr&&!Ft&&(ca-=de);let da=0;for(;I<F;I+=2){if(zi&&zi[da++]<De/this.pixelRatio)continue;const Ve=this.calculateImageOrLabelDimensions_(Z.width,Z.height,w[I],w[I+1],De,nn,D,X,xr,yr,ca,nl,c,ua,Ts||hs,_t),fa=[t,e,Z,Ve,ls,Ts?Pt:null,hs?Nt:null];if(y){if("none"===Ke)continue;if("obstacle"===Ke){y.insert(Ve.declutterBox);continue}{let Je,Xi;if(ai){const je=F-I;if(!ai[je]){ai[je]=fa;continue}if(Je=ai[je],delete ai[je],Xi=iu(Je),y.collides(Xi))continue}if(y.collides(Ve.declutterBox))continue;Je&&(y.insert(Xi),this.replayImageOrLabel_.apply(this,Je)),y.insert(Ve.declutterBox)}}this.replayImageOrLabel_.apply(this,fa)}++S;break;case kt.DRAW_CHARS:const br=nt[1],Te=nt[2],rl=nt[3],Ib=nt[4];ht=nt[5];const Rb=nt[6],xu=nt[7],yu=nt[8];ut=nt[9];const ol=nt[10];$=nt[11],it=nt[12];const vu=[nt[13],nt[13]],ll=this.textStates[it],rn=ll.font,on=[ll.scale[0]*xu,ll.scale[1]*xu];let ln;rn in this.widths_?ln=this.widths_[rn]:(ln={},this.widths_[rn]=ln);const bu=eu(w,br,Te,2),wu=Math.abs(on[0])*ch(rn,$,ln);if(Ib||wu<=bu){const Je=ov(w,br,Te,2,$,(bu-wu)*an[this.textStates[it].textAlign],Rb,Math.abs(on[0]),ch,rn,ln,Ft?0:this.viewRotation_);t:if(Je){const Xi=[];let je,wr,_r,Ne,Qe;if(ut)for(je=0,wr=Je.length;je<wr;++je){Qe=Je[je],_r=Qe[4],Ne=this.createLabel(_r,it,"",ut),D=Qe[2]+(on[0]<0?-ol:ol),X=rl*Ne.height+2*(.5-rl)*ol*on[1]/on[0]-yu;const Yi=this.calculateImageOrLabelDimensions_(Ne.width,Ne.height,Qe[0],Qe[1],Ne.width,Ne.height,D,X,0,0,Qe[3],vu,!1,ws,!1,_t);if(y&&y.collides(Yi.declutterBox))break t;Xi.push([t,e,Ne,Yi,1,null,null])}if(ht)for(je=0,wr=Je.length;je<wr;++je){Qe=Je[je],_r=Qe[4],Ne=this.createLabel(_r,it,ht,""),D=Qe[2],X=rl*Ne.height-yu;const Yi=this.calculateImageOrLabelDimensions_(Ne.width,Ne.height,Qe[0],Qe[1],Ne.width,Ne.height,D,X,0,0,Qe[3],vu,!1,ws,!1,_t);if(y&&y.collides(Yi.declutterBox))break t;Xi.push([t,e,Ne,Yi,1,null,null])}y&&y.load(Xi.map(iu));for(let Yi=0,Lb=Xi.length;Yi<Lb;++Yi)this.replayImageOrLabel_.apply(this,Xi[Yi])}}++S;break;case kt.END_GEOMETRY:if(void 0!==f){_t=nt[1];const Ve=f(_t,me);if(Ve)return Ve}++S;break;case kt.FILL:xt?vt++:this.fill_(t),++S;break;case kt.MOVE_TO_LINE_TO:for(I=nt[1],F=nt[2],$t=w[I],te=w[I+1],V=$t+.5|0,j=te+.5|0,(V!==Y||j!==G)&&(t.moveTo($t,te),Y=V,G=j),I+=2;I<F;I+=2)$t=w[I],te=w[I+1],V=$t+.5|0,j=te+.5|0,(I==F-2||V!==Y||j!==G)&&(t.lineTo($t,te),Y=V,G=j);++S;break;case kt.SET_FILL_STYLE:Pt=nt,this.alignFill_=nt[2],vt&&(this.fill_(t),vt=0,Ct&&(t.stroke(),Ct=0)),t.fillStyle=nt[1],++S;break;case kt.SET_STROKE_STYLE:Nt=nt,Ct&&(t.stroke(),Ct=0),this.setStrokeStyle_(t,nt),++S;break;case kt.STROKE:xt?Ct++:t.stroke(),++S;break;default:++S}}vt&&this.fill_(t),Ct&&t.stroke()}execute(t,e,n,o,c,f){this.viewRotation_=o,this.execute_(t,e,n,this.instructions,c,void 0,void 0,f)}executeHitDetection(t,e,n,o,c){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,o,c)}},Qo=["Polygon","Circle","LineString","Image","Text","Default"],$o={},au=class dv{constructor(t,e,n,o,c,f){this.maxExtent_=t,this.overlaps_=o,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=f,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(c)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t){for(const e in t){let n=this.executorsByZIndex_[e];void 0===n&&(n={},this.executorsByZIndex_[e]=n);const o=t[e];for(const c in o)n[c]=new uv(this.resolution_,this.pixelRatio_,this.overlaps_,o[c])}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let o=0,c=t.length;o<c;++o)if(t[o]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,o,c,f){const g=2*(o=Math.round(o))+1,y=We(this.hitDetectionTransform_,o+.5,o+.5,1/e,-1/e,-n,-t[0],-t[1]),w=!this.hitDetectionContext_;w&&(this.hitDetectionContext_=k(g,g));const S=this.hitDetectionContext_;let M;S.canvas.width!==g||S.canvas.height!==g?(S.canvas.width=g,S.canvas.height=g):w||S.clearRect(0,0,g,g),void 0!==this.renderBuffer_&&(M=[1/0,1/0,-1/0,-1/0],ae(M,t),H(M,e*(this.renderBuffer_+o),M));const I=function fv(a){if(void 0!==$o[a])return $o[a];const t=2*a+1,e=a*a,n=new Array(e+1);for(let c=0;c<=a;++c)for(let f=0;f<=a;++f){const g=c*c+f*f;if(g>e)break;let y=n[g];y||(y=[],n[g]=y),y.push(4*((a+c)*t+(a+f))+3),c>0&&y.push(4*((a-c)*t+(a+f))+3),f>0&&(y.push(4*((a+c)*t+(a-f))+3),c>0&&y.push(4*((a-c)*t+(a-f))+3))}const o=[];for(let c=0,f=n.length;c<f;++c)n[c]&&o.push(...n[c]);return $o[a]=o,o}(o);let F;function D($,it){const ut=S.getImageData(0,0,g,g).data;for(let ht=0,vt=I.length;ht<vt;ht++)if(ut[I[ht]]>0){if(!f||"Image"!==F&&"Text"!==F||f.includes($)){const Ct=(I[ht]-3)/4,Pt=o-Ct%g,Nt=o-(Ct/g|0),Rt=c($,it,Pt*Pt+Nt*Nt);if(Rt)return Rt}S.clearRect(0,0,g,g);break}}const X=Object.keys(this.executorsByZIndex_).map(Number);let Y,G,V,j,Z;for(X.sort(Ie),Y=X.length-1;Y>=0;--Y){const $=X[Y].toString();for(V=this.executorsByZIndex_[$],G=Qo.length-1;G>=0;--G)if(F=Qo[G],j=V[F],void 0!==j&&(Z=j.executeHitDetection(S,y,n,D,M),Z))return Z}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],o=e[1],c=e[2],f=e[3],g=[n,o,n,f,c,f,c,o];return _s(g,0,8,2,t,g),g}isEmpty(){return jt(this.executorsByZIndex_)}execute(t,e,n,o,c,f,g){const y=Object.keys(this.executorsByZIndex_).map(Number);let w,S,M,I,F,D;for(y.sort(Ie),this.maxExtent_&&(t.save(),this.clip(t,n)),f=f||Qo,g&&y.reverse(),w=0,S=y.length;w<S;++w){const X=y[w].toString();for(F=this.executorsByZIndex_[X],M=0,I=f.length;M<I;++M)D=F[f[M]],void 0!==D&&D.execute(t,e,n,o,c,g)}this.maxExtent_&&t.restore()}},pv=class gv extends Qc{constructor(t,e,n,o,c,f,g){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=o,this.viewRotation_=c,this.squaredTolerance_=f,this.userTransform_=g,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(t,e,n,o){if(!this.image_)return;const c=_s(t,e,n,o,this.transform_,this.pixelCoordinates_),f=this.context_,g=this.tmpLocalTransform_,y=f.globalAlpha;1!=this.imageOpacity_&&(f.globalAlpha=y*this.imageOpacity_);let w=this.imageRotation_;this.imageRotateWithView_&&(w+=this.viewRotation_);for(let S=0,M=c.length;S<M;S+=2){const I=c[S]-this.imageAnchorX_,F=c[S+1]-this.imageAnchorY_;if(0!==w||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const D=I+this.imageAnchorX_,X=F+this.imageAnchorY_;We(g,D,X,1,1,w,-D,-X),f.setTransform.apply(f,g),f.translate(D,X),f.scale(this.imageScale_[0],this.imageScale_[1]),f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),f.setTransform(1,0,0,1,0,0)}else f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,I,F,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(f.globalAlpha=y)}drawText_(t,e,n,o){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const c=_s(t,e,n,o,this.transform_,this.pixelCoordinates_),f=this.context_;let g=this.textRotation_;for(this.textRotateWithView_&&(g+=this.viewRotation_);e<n;e+=o){const y=c[e]+this.textOffsetX_,w=c[e+1]+this.textOffsetY_;0!==g||1!=this.textScale_[0]||1!=this.textScale_[1]?(f.translate(y-this.textOffsetX_,w-this.textOffsetY_),f.rotate(g),f.translate(this.textOffsetX_,this.textOffsetY_),f.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&f.strokeText(this.text_,0,0),this.textFillState_&&f.fillText(this.text_,0,0),f.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&f.strokeText(this.text_,y,w),this.textFillState_&&f.fillText(this.text_,y,w))}}moveToLineTo_(t,e,n,o,c){const f=this.context_,g=_s(t,e,n,o,this.transform_,this.pixelCoordinates_);f.moveTo(g[0],g[1]);let y=g.length;c&&(y-=2);for(let w=2;w<y;w+=2)f.lineTo(g[w],g[w+1]);return c&&f.closePath(),n}drawRings_(t,e,n,o){for(let c=0,f=n.length;c<f;++c)e=this.moveToLineTo_(t,e,n[c],o,!0);return e}drawCircle(t){if(Le(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=function kf(a,t,e){const n=a.getFlatCoordinates();if(n){const o=a.getStride();return _s(n,0,n.length,o,t,e)}return null}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],o=e[3]-e[1],c=Math.sqrt(n*n+o*o),f=this.context_;f.beginPath(),f.arc(e[0],e[1],c,0,2*Math.PI),this.fillState_&&f.fill(),this.strokeState_&&f.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const n=e.getGeometryFunction()(t);!n||!Le(this.extent_,n.getExtent())||(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let n=0,o=e.length;n<o;++n)this.drawGeometry(e[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Le(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Le(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,o=t.getFlatCoordinates();let c=0;const f=t.getEnds(),g=t.getStride();n.beginPath();for(let y=0,w=f.length;y<w;++y)c=this.moveToLineTo_(o,c,f[y],g,!1);n.stroke()}if(""!==this.text_){const n=t.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Le(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Le(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let o=0;const c=t.getEndss(),f=t.getStride();e.beginPath();for(let g=0,y=c.length;g<y;++g)o=this.drawRings_(n,o,c[g],f);this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),Q(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,o=t.textAlign?t.textAlign:Ta;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=o&&(n.textAlign=o,e.textAlign=o),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=o,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const n=t.getColor();this.fillState_={fillStyle:xi(n||Ei)}}else this.fillState_=null;if(e){const n=e.getColor(),o=e.getLineCap(),c=e.getLineDash(),f=e.getLineDashOffset(),g=e.getLineJoin(),y=e.getWidth(),w=e.getMiterLimit(),S=c||Aa;this.strokeState_={lineCap:void 0!==o?o:Wn,lineDash:1===this.pixelRatio_?S:S.map(M=>M*this.pixelRatio_),lineDashOffset:(f||0)*this.pixelRatio_,lineJoin:void 0!==g?g:js,lineWidth:(void 0!==y?y:1)*this.pixelRatio_,miterLimit:void 0!==w?w:10,strokeStyle:xi(n||Ea)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const n=t.getPixelRatio(this.pixelRatio_),o=t.getAnchor(),c=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=o[0]*n,this.imageAnchorY_=o[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=c[0],this.imageOriginY_=c[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const f=t.getScaleArray();this.imageScale_=[f[0]*this.pixelRatio_/n,f[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(t){const e=t.getFill();if(e){const F=e.getColor();this.textFillState_={fillStyle:xi(F||Ei)}}else this.textFillState_=null;const n=t.getStroke();if(n){const F=n.getColor(),D=n.getLineCap(),X=n.getLineDash(),Y=n.getLineDashOffset(),G=n.getLineJoin(),V=n.getWidth(),j=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==D?D:Wn,lineDash:X||Aa,lineDashOffset:Y||0,lineJoin:void 0!==G?G:js,lineWidth:void 0!==V?V:1,miterLimit:void 0!==j?j:10,strokeStyle:xi(F||Ea)}}else this.textStrokeState_=null;const o=t.getFont(),c=t.getOffsetX(),f=t.getOffsetY(),g=t.getRotateWithView(),y=t.getRotation(),w=t.getScaleArray(),S=t.getText(),M=t.getTextAlign(),I=t.getTextBaseline();this.textState_={font:void 0!==o?o:lh,textAlign:void 0!==M?M:Ta,textBaseline:void 0!==I?I:Bn},this.text_=void 0!==S?Array.isArray(S)?S.reduce((F,D,X)=>F+(X%2?" ":D),""):S:"",this.textOffsetX_=void 0!==c?this.pixelRatio_*c:0,this.textOffsetY_=void 0!==f?this.pixelRatio_*f:0,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0!==y?y:0,this.textScale_=[this.pixelRatio_*w[0],this.pixelRatio_*w[1]]}else this.text_=""}},yi=.5,nu={Point:function kv(a,t,e,n,o){const c=e.getImage(),f=e.getText();let g;if(c){if(2!=c.getImageState())return;let y=a;if(o){const S=c.getDeclutterMode();if("none"!==S)if(y=o,"obstacle"===S){const M=a.getBuilder(e.getZIndex(),"Image");M.setImageStyle(c,g),M.drawPoint(t,n)}else f&&f.getText()&&(g={})}const w=y.getBuilder(e.getZIndex(),"Image");w.setImageStyle(c,g),w.drawPoint(t,n)}if(f&&f.getText()){let y=a;o&&(y=o);const w=y.getBuilder(e.getZIndex(),"Text");w.setTextStyle(f,g),w.drawText(t,n)}},LineString:function Sv(a,t,e,n,o){const c=e.getStroke();if(c){const g=a.getBuilder(e.getZIndex(),"LineString");g.setFillStrokeStyle(null,c),g.drawLineString(t,n)}const f=e.getText();if(f&&f.getText()){const g=(o||a).getBuilder(e.getZIndex(),"Text");g.setTextStyle(f),g.drawText(t,n)}},Polygon:function Tv(a,t,e,n,o){const c=e.getFill(),f=e.getStroke();if(c||f){const y=a.getBuilder(e.getZIndex(),"Polygon");y.setFillStrokeStyle(c,f),y.drawPolygon(t,n)}const g=e.getText();if(g&&g.getText()){const y=(o||a).getBuilder(e.getZIndex(),"Text");y.setTextStyle(g),y.drawText(t,n)}},MultiPoint:function Ev(a,t,e,n,o){const c=e.getImage(),f=e.getText();let g;if(c){if(2!=c.getImageState())return;let y=a;if(o){const S=c.getDeclutterMode();if("none"!==S)if(y=o,"obstacle"===S){const M=a.getBuilder(e.getZIndex(),"Image");M.setImageStyle(c,g),M.drawMultiPoint(t,n)}else f&&f.getText()&&(g={})}const w=y.getBuilder(e.getZIndex(),"Image");w.setImageStyle(c,g),w.drawMultiPoint(t,n)}if(f&&f.getText()){let y=a;o&&(y=o);const w=y.getBuilder(e.getZIndex(),"Text");w.setTextStyle(f,g),w.drawText(t,n)}},MultiLineString:function Av(a,t,e,n,o){const c=e.getStroke();if(c){const g=a.getBuilder(e.getZIndex(),"LineString");g.setFillStrokeStyle(null,c),g.drawMultiLineString(t,n)}const f=e.getText();if(f&&f.getText()){const g=(o||a).getBuilder(e.getZIndex(),"Text");g.setTextStyle(f),g.drawText(t,n)}},MultiPolygon:function Mv(a,t,e,n,o){const c=e.getFill(),f=e.getStroke();if(f||c){const y=a.getBuilder(e.getZIndex(),"Polygon");y.setFillStrokeStyle(c,f),y.drawMultiPolygon(t,n)}const g=e.getText();if(g&&g.getText()){const y=(o||a).getBuilder(e.getZIndex(),"Text");y.setTextStyle(g),y.drawText(t,n)}},GeometryCollection:function Cv(a,t,e,n,o){const c=t.getGeometriesArray();let f,g;for(f=0,g=c.length;f<g;++f)(0,nu[c[f].getType()])(a,c[f],e,n,o)},Circle:function wv(a,t,e,n,o){const c=e.getFill(),f=e.getStroke();if(c||f){const y=a.getBuilder(e.getZIndex(),"Circle");y.setFillStrokeStyle(c,f),y.drawCircle(t,n)}const g=e.getText();if(g&&g.getText()){const y=(o||a).getBuilder(e.getZIndex(),"Text");y.setTextStyle(g),y.drawText(t,n)}}};function vv(a,t){return parseInt(Dt(a),10)-parseInt(Dt(t),10)}function tl(a,t){return.5*a/t}function ru(a,t,e,n,o,c,f){let g=!1;const y=e.getImage();if(y){const w=y.getImageState();2==w||3==w?y.unlistenImageChange(o):(0==w&&y.load(),y.listenImageChange(o),g=!0)}return function _v(a,t,e,n,o,c){const f=e.getGeometryFunction()(t);if(!f)return;const g=f.simplifyTransformed(n,o);e.getRenderer()?ou(a,g,e,t):(0,nu[g.getType()])(a,g,e,t,c)}(a,t,e,n,c,f),g}function ou(a,t,e,n){if("GeometryCollection"!=t.getType())a.getBuilder(e.getZIndex(),"Default").drawCustom(t,n,e.getRenderer(),e.getHitDetectionRenderer());else{const c=t.getGeometries();for(let f=0,g=c.length;f<g;++f)ou(a,c[f],e,n)}}const Rv=class Iv extends xl{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,n){const o=e.extent,c=e.viewState,f=c.center,g=c.resolution,y=c.projection,w=c.rotation,S=y.getExtent(),M=this.getLayer().getSource(),I=e.pixelRatio,F=e.viewHints,D=!(F[0]||F[1]),X=this.compositionContext_,Y=Math.round(e.size[0]*I),G=Math.round(e.size[1]*I),V=M.getWrapX()&&y.canWrapX(),j=V?Kt(S):null,Z=V?Math.ceil((o[2]-S[2])/j)+1:1;let $=V?Math.floor((o[0]-S[0])/j):0;do{const it=this.getRenderTransform(f,g,w,I,Y,G,$*j);t.execute(X,1,it,w,D,void 0,n)}while(++$<Z)}setupCompositionContext_(){if(1!==this.opacity_){const t=k(this.context.canvas.width,this.context.canvas.height,ml);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,R(this.compositionContext_),ml.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const n=t.pixelRatio,o=t.layerStatesArray[t.layerIndex];(function Cn(a,t,e){(function Vi(a,t,e,n,o,c,f){return a[0]=t,a[1]=e,a[2]=n,a[3]=o,a[4]=c,a[5]=f,a})(a,t,0,0,e,0,0)})(this.pixelTransform,1/n,1/n),i(this.inversePixelTransform,this.pixelTransform);const c=l(this.pixelTransform);this.useContainer(e,c,this.getBackground(t));const f=this.context,g=f.canvas,y=this.replayGroup_,w=this.declutterExecutorGroup;if((!y||y.isEmpty())&&(!w||w.isEmpty()))return null;const S=Math.round(t.size[0]*n),M=Math.round(t.size[1]*n);g.width!=S||g.height!=M?(g.width=S,g.height=M,g.style.transform!==c&&(g.style.transform=c)):this.containerReused||f.clearRect(0,0,S,M),this.preRender(f,t);const I=t.viewState;this.opacity_=o.opacity,this.setupCompositionContext_();let D=!1,X=!0;if(o.extent&&this.clipping){const Y=ys(o.extent);X=Le(Y,t.extent),D=X&&!pt(Y,t.extent),D&&this.clipUnrotated(this.compositionContext_,t,Y)}return X&&this.renderWorlds(y,t),D&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(f,t),this.renderedRotation_!==I.rotation&&(this.renderedRotation_=I.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=[this.context.canvas.width,this.context.canvas.height];ue(this.pixelTransform,n);const o=this.renderedCenter_,c=this.renderedResolution_,f=this.renderedRotation_,g=this.renderedProjection_,y=this.wrappedRenderedExtent_,w=this.getLayer(),S=[],M=n[0]*yi,I=n[1]*yi;S.push(this.getRenderTransform(o,c,f,yi,M,I,0).slice());const F=w.getSource(),D=g.getExtent();if(F.getWrapX()&&g.canWrapX()&&!pt(D,y)){let X=y[0];const Y=Kt(D);let V,G=0;for(;X<D[0];)--G,V=Y*G,S.push(this.getRenderTransform(o,c,f,yi,M,I,V).slice()),X+=Y;for(G=0,X=y[2];X>D[2];)++G,V=Y*G,S.push(this.getRenderTransform(o,c,f,yi,M,I,V).slice()),X-=Y}this.hitDetectionImageData_=function mv(a,t,e,n,o,c,f){const w=k(a[0]*yi,a[1]*yi);w.imageSmoothingEnabled=!1;const S=w.canvas,M=new pv(w,yi,o,null,f),I=e.length,F=Math.floor(16777215/I),D={};for(let Y=1;Y<=I;++Y){const G=e[Y-1],V=G.getStyleFunction()||n;if(!n)continue;let j=V(G,c);if(!j)continue;Array.isArray(j)||(j=[j]);const $="#"+("000000"+(Y*F).toString(16)).slice(-6);for(let it=0,ut=j.length;it<ut;++it){const ht=j[it],vt=ht.getGeometryFunction()(G);if(!vt||!Le(o,vt.getExtent()))continue;const Ct=ht.clone(),Pt=Ct.getFill();Pt&&Pt.setColor($);const Nt=Ct.getStroke();Nt&&(Nt.setColor($),Nt.setLineDash(null)),Ct.setText(void 0);const Rt=ht.getImage();if(Rt&&0!==Rt.getOpacity()){const mt=Rt.getImageSize();if(!mt)continue;const xt=k(mt[0],mt[1],void 0,{alpha:!1}),_t=xt.canvas;xt.fillStyle=$,xt.fillRect(0,0,_t.width,_t.height),Ct.setImage(new Ko({img:_t,imgSize:mt,anchor:Rt.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Rt.getOrigin(),opacity:1,size:Rt.getSize(),scale:Rt.getScale(),rotation:Rt.getRotation(),rotateWithView:Rt.getRotateWithView()}))}const de=Ct.getZIndex()||0;let Ft=D[de];Ft||(Ft={},D[de]=Ft,Ft.Polygon=[],Ft.Circle=[],Ft.LineString=[],Ft.Point=[]),Ft[vt.getType().replace("Multi","")].push(vt,Ct)}}const X=Object.keys(D).map(Number).sort(Ie);for(let Y=0,G=X.length;Y<G;++Y){const V=D[X[Y]];for(const j in V){const Z=V[j];for(let $=0,it=Z.length;$<it;$+=2){M.setStyle(Z[$+1]);for(let ut=0,ht=t.length;ut<ht;++ut)M.setTransform(t[ut]),M.drawGeometry(Z[$])}}}return w.getImageData(0,0,S.width,S.height)}(n,S,this.renderedFeatures_,w.getStyleFunction(),y,c,f)}e(function xv(a,t,e){const n=[];if(e){const o=Math.floor(Math.round(a[0])*yi),c=Math.floor(Math.round(a[1])*yi),f=4*(Ut(o,0,e.width-1)+Ut(c,0,e.height-1)*e.width),S=e.data[f+2]+256*(e.data[f+1]+256*e.data[f]),M=Math.floor(16777215/t.length);S&&S%M==0&&n.push(t[S/M-1])}return n}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,e,n,o,c){if(!this.replayGroup_)return;const f=e.viewState.resolution,g=e.viewState.rotation,y=this.getLayer(),w={},S=function(F,D,X){const Y=Dt(F),G=w[Y];if(G){if(!0!==G&&X<G.distanceSq){if(0===X)return w[Y]=!0,c.splice(c.lastIndexOf(G),1),o(F,y,D);G.geometry=D,G.distanceSq=X}}else{if(0===X)return w[Y]=!0,o(F,y,D);c.push(w[Y]={feature:F,layer:y,geometry:D,distanceSq:X,callback:o})}};let M;const I=[this.replayGroup_];return this.declutterExecutorGroup&&I.push(this.declutterExecutorGroup),I.some(F=>M=F.forEachFeatureAtCoordinate(t,f,g,n,S,F===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(D=>D.value):null)),M}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const o=t.viewHints[0],c=t.viewHints[1],f=e.getUpdateWhileAnimating(),g=e.getUpdateWhileInteracting();if(this.ready&&!f&&o||!g&&c)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const y=t.extent,w=t.viewState,S=w.projection,M=w.resolution,I=t.pixelRatio,F=e.getRevision(),D=e.getRenderBuffer();let X=e.getRenderOrder();void 0===X&&(X=vv);const Y=w.center.slice(),G=H(y,D*M),V=G.slice(),j=[G.slice()],Z=S.getExtent();if(n.getWrapX()&&S.canWrapX()&&!pt(Z,t.extent)){const mt=Kt(Z),xt=Math.max(Kt(G)/2,mt);G[0]=Z[0]-xt,G[2]=Z[2]+xt,kl(Y,S);const _t=pl(j[0],S);_t[0]<Z[0]&&_t[2]<Z[2]?j.push([_t[0]+mt,_t[1],_t[2]+mt,_t[3]]):_t[0]>Z[0]&&_t[2]>Z[2]&&j.push([_t[0]-mt,_t[1],_t[2]-mt,_t[3]])}if(this.ready&&this.renderedResolution_==M&&this.renderedRevision_==F&&this.renderedRenderOrder_==X&&pt(this.wrappedRenderedExtent_,G))return Q(this.renderedExtent_,V)||(this.hitDetectionImageData_=null,this.renderedExtent_=V),this.renderedCenter_=Y,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const $=new tu(tl(M,I),G,M,I);let it;this.getLayer().getDeclutter()&&(it=new tu(tl(M,I),G,M,I));const ut=Zr();let ht;if(ut){for(let mt=0,xt=j.length;mt<xt;++mt){const $t=Kr(j[mt]);n.loadFeatures($t,M,ut)}ht=xs(ut,S)}else for(let mt=0,xt=j.length;mt<xt;++mt)n.loadFeatures(j[mt],M,S);const vt=function bv(a,t){const e=tl(a,t);return e*e}(M,I);let Ct=!0;const Pt=function(mt){let xt;const _t=mt.getStyleFunction()||e.getStyleFunction();if(_t&&(xt=_t(mt,M)),xt){const $t=this.renderFeature(mt,vt,xt,$,ht,it);Ct=Ct&&!$t}}.bind(this),Nt=Kr(G),Rt=n.getFeaturesInExtent(Nt);X&&Rt.sort(X);for(let mt=0,xt=Rt.length;mt<xt;++mt)Pt(Rt[mt]);this.renderedFeatures_=Rt,this.ready=Ct;const de=$.finish(),Ft=new au(G,M,I,n.getOverlaps(),de,e.getRenderBuffer());return it&&(this.declutterExecutorGroup=new au(G,M,I,n.getOverlaps(),it.finish(),e.getRenderBuffer())),this.renderedResolution_=M,this.renderedRevision_=F,this.renderedRenderOrder_=X,this.renderedExtent_=V,this.wrappedRenderedExtent_=G,this.renderedCenter_=Y,this.renderedProjection_=S,this.replayGroup_=Ft,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,o,c,f){if(!n)return!1;let g=!1;if(Array.isArray(n))for(let y=0,w=n.length;y<w;++y)g=ru(o,t,n[y],e,this.boundHandleStyleImageChange_,c,f)||g;else g=ru(o,t,n,e,this.boundHandleStyleImageChange_,c,f);return g}},Pv=class Lv extends qy{constructor(t){super(t)}createRenderer(){return new Rv(this)}};class el extends ye{constructor(t){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t&&("function"==typeof t.getSimplifiedGeometry?this.setGeometry(t):this.setProperties(t))}clone(){const t=new el(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Lt(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=At(t,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function Ov(a){if("function"==typeof a)return a;{let t;return Array.isArray(a)?t=a:(Tt("function"==typeof a.getZIndex,41),t=[a]),function(){return t}}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const lu=el,Fv=["*"],Dv=[.5,1],Xv=[Ua,Lc,(()=>{class a{constructor(e){this.olMap=e,this.anchor=Dv,this.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAyVBMVEUAAADnTDznTDvnTDvnTDvAOCrnTDznSzvnTDvAOCvnTDznTDznTDvnTDzAOCrnTDvnTDvnTDvnTDznTDvAOSrnTDznTDzTQjLSQjPnTDzpTDvnSzvAOCrnTDvAOSvAOCvnSzvnTDzAOCvnSzznTDznTDvnTDy/OCvnTDznTDvnTDznSzvmSzvAOCvnTDzAOCvnTDvmTDvAOCq+OCrpTDzkSzrbRjbWRDTMPi+8NinrTT3EOy3gSDjTQjPPQDLHPS/DOiu5NCjHPC5jSfbDAAAAMHRSTlMAKPgE4hr8CfPy4NzUt7SxlnpaVlRPIhYPLgLt6ebOysXAwLmej4iGgGtpYkpAPCBw95QiAAAB50lEQVQ4y42T13aDMAxAbVb2TrO6927lwQhktf//UZWVQ1sIJLnwwBEXWZYwy1Lh/buG5TXu+rzC9nByDQCCbrg+KdUmLUsgW08IqzUp9rgDf5Ds8CJv1KS3mNL3fbGlOdr1Kh1AtFgs15vke7kQGpDO7pYGtJgfbRSxiXxaf7AjgsFfy1/WPu0r73WpwGiu1Fn78bF9JpWKUBTQzYlNQIK5lDcuQ9wbKeeBiTWz3vgUv44TpS4njJhcKpXEuMzpOCN+VE2FmPA9jbxjSrOf6kdG7FvYmkBJ6aYRV0oVYIusfkZ8xeHpUMna+LeYmlShxkG+Zv8GyohLf6aRzzRj9t+YVgWaX1IO08hQyi9tapxmB3huxJUp8q/EVYzB89wQr0y/FwqrHLqoDWsoLsxQr1iWNxp1iCnlRbt9IdELwfDGcrSMKJbGxLx4LenTFsszFSYehwl6aCZhTNPnO6LdBYOGYBVFqwAfDF27+CQIvLUGrTU9lpyFBw9yeA+sCNsRkJ5WQjg2K+QFcrywEjoCBHVpe3VYGZyk9NQCLxXte/jHvc1K4XXKSNQ520PPtIhcr8f2MXPShNiavTyn4jM7wK0g75YdYgTE6KA465nN9GbsILwhoMHZETx53hM7Brtet9lRDAYFwR80rG+sfAnbpQAAAABJRU5ErkJggg==",this.text=""}ngOnInit(){const e=new lu({geometry:new vo(jr([this.lon,this.lat]))}),n=new lu({geometry:new vo(jr([this.lon,this.lat]))}),o=new Ja({image:new Ko({anchor:this.anchor,src:this.icon})}),c=new Ja({text:new Zc({text:this.text,font:"normal 12px Montserrat",offsetY:20,fill:new ur({color:"rgb(0,0,0)"}),stroke:new Uo({color:"rgb(255,255,255)",width:1})})});e.setStyle(o),n.setStyle(c);const f=new Yy({features:[e,n]}),g=new Pv({properties:{key:"points",type:"vetorial"},source:f});g.setZIndex(10),this.olMap.map?this.olMap.setMarker(g):setTimeout(()=>{this.ngOnInit()},10)}}return a.\u0275fac=function(e){return new(e||a)(q.Y36(Ua))},a.\u0275cmp=q.Xpm({type:a,selectors:[["ol-map-marker"]],inputs:{lat:"lat",lon:"lon",anchor:"anchor",icon:"icon",text:"text"},ngContentSelectors:Fv,decls:1,vars:0,template:function(e,n){1&e&&(q.F$t(),q.Hsn(0))}}),a})(),Xc];let Yv=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=q.oAB({type:a}),a.\u0275inj=q.cJS({providers:Xv,imports:[Ae.ez]}),a})();var Wv=Et(5707);Et(8288);let hu=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=q.oAB({type:a}),a.\u0275inj=q.cJS({imports:[Ae.ez]}),a})();var Gv=Et(2120),il=Et(7392),Hv=Et(8255),Vv=Et(266),sl=Et(4859),jv=Et(529);let cu=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=q.oAB({type:a}),a.\u0275inj=q.cJS({imports:[Ae.ez,sl.ot,il.Ps]}),a})();var Fi=Et(9521),Di=Et(3238);Et(1281),Et(3353),Et(6451),Et(8675),Et(7725),Et(445),Et(5017),Et(4006),Et(9549);const gu=new q.OlP("mat-chips-default-options");let wb=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=q.oAB({type:a}),a.\u0275inj=q.cJS({providers:[Di.rD,{provide:gu,useValue:{separatorKeyCodes:[Fi.K5]}}],imports:[Di.BQ]}),a})(),_b=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=q.oAB({type:a}),a.\u0275inj=q.cJS({imports:[Ae.ez,jv.JF,hu,il.Ps,sl.ot,cu,wb]}),a})();var Cb=Et(5412),mu=(Et(3101),Et(1996));window.ApexCharts=mu;let Mb=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=q.oAB({type:a}),a.\u0275inj=q.cJS({imports:[[]]}),a})();var kb=Et(811);const Eb=[{path:"",component:Fy}];let Tb=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=q.oAB({type:a}),a.\u0275inj=q.cJS({imports:[Ae.ez,Vt.Bz.forChild(Eb),Yv,Wv.y4,hu,Gv.k,il.Ps,Hv.Tx,Vv.AV,sl.ot,_b,Cb.Is,cu,Mb,kb.vV]}),a})()},1996:(Is,Wi,Et)=>{"use strict";var Ae;function Vt(P,i){var s=Object.keys(P);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(P);i&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(P,l).enumerable})),s.push.apply(s,r)}return s}function Mt(P){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?Vt(Object(s),!0).forEach(function(r){Bi(P,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(s)):Vt(Object(s)).forEach(function(r){Object.defineProperty(P,r,Object.getOwnPropertyDescriptor(s,r))})}return P}function ee(P){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(P)}function lt(P,i){if(!(P instanceof i))throw new TypeError("Cannot call a class as a function")}function fe(P,i){for(var s=0;s<i.length;s++){var r=i[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(P,r.key,r)}}function rt(P,i,s){return i&&fe(P.prototype,i),s&&fe(P,s),P}function Bi(P,i,s){return i in P?Object.defineProperty(P,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):P[i]=s,P}function ze(P,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(i&&i.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),i&&Ie(P,i)}function wi(P){return(wi=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)})(P)}function Ie(P,i){return(Ie=Object.setPrototypeOf||function(s,r){return s.__proto__=r,s})(P,i)}function ni(P,i){if(i&&("object"==typeof i||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(s){if(void 0===s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(P)}function Re(P){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var s,r=wi(P);if(i){var l=wi(this).constructor;s=Reflect.construct(r,arguments,l)}else s=r.apply(this,arguments);return ni(this,s)}}function K(P){return function(i){if(Array.isArray(i))return ot(i)}(P)||function(i){if(typeof Symbol<"u"&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(P)||Q(P)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(P,i){if(P){if("string"==typeof P)return ot(P,i);var s=Object.prototype.toString.call(P).slice(8,-1);return"Object"===s&&P.constructor&&(s=P.constructor.name),"Map"===s||"Set"===s?Array.from(P):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?ot(P,i):void 0}}function ot(P,i){(null==i||i>P.length)&&(i=P.length);for(var s=0,r=new Array(i);s<i;s++)r[s]=P[s];return r}var B=function(){function P(){lt(this,P)}return rt(P,[{key:"shadeRGBColor",value:function(i,s){var r=s.split(","),l=i<0?0:255,h=i<0?-1*i:i,d=parseInt(r[0].slice(4),10),u=parseInt(r[1],10),p=parseInt(r[2],10);return"rgb("+(Math.round((l-d)*h)+d)+","+(Math.round((l-u)*h)+u)+","+(Math.round((l-p)*h)+p)+")"}},{key:"shadeHexColor",value:function(i,s){var r=parseInt(s.slice(1),16),l=i<0?0:255,h=i<0?-1*i:i,d=r>>16,u=r>>8&255,p=255&r;return"#"+(16777216+65536*(Math.round((l-d)*h)+d)+256*(Math.round((l-u)*h)+u)+(Math.round((l-p)*h)+p)).toString(16).slice(1)}},{key:"shadeColor",value:function(i,s){return P.isColorHex(s)?this.shadeHexColor(i,s):this.shadeRGBColor(i,s)}}],[{key:"bind",value:function(i,s){return function(){return i.apply(s,arguments)}}},{key:"isObject",value:function(i){return i&&"object"===ee(i)&&!Array.isArray(i)&&null!=i}},{key:"is",value:function(i,s){return Object.prototype.toString.call(s)==="[object "+i+"]"}},{key:"listToArray",value:function(i){var s,r=[];for(s=0;s<i.length;s++)r[s]=i[s];return r}},{key:"extend",value:function(i,s){var r=this;"function"!=typeof Object.assign&&(Object.assign=function(h){if(null==h)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(h),u=1;u<arguments.length;u++){var p=arguments[u];if(null!=p)for(var m in p)p.hasOwnProperty(m)&&(d[m]=p[m])}return d});var l=Object.assign({},i);return this.isObject(i)&&this.isObject(s)&&Object.keys(s).forEach(function(h){r.isObject(s[h])&&h in i?l[h]=r.extend(i[h],s[h]):Object.assign(l,Bi({},h,s[h]))}),l}},{key:"extendArray",value:function(i,s){var r=[];return i.map(function(l){r.push(P.extend(s,l))}),r}},{key:"monthMod",value:function(i){return i%12}},{key:"clone",value:function(i){if(P.is("Array",i)){for(var s=[],r=0;r<i.length;r++)s[r]=this.clone(i[r]);return s}if(P.is("Null",i))return null;if(P.is("Date",i))return i;if("object"===ee(i)){var l={};for(var h in i)i.hasOwnProperty(h)&&(l[h]=this.clone(i[h]));return l}return i}},{key:"log10",value:function(i){return Math.log(i)/Math.LN10}},{key:"roundToBase10",value:function(i){return Math.pow(10,Math.floor(Math.log10(i)))}},{key:"roundToBase",value:function(i,s){return Math.pow(s,Math.floor(Math.log(i)/Math.log(s)))}},{key:"parseNumber",value:function(i){return null===i?i:parseFloat(i)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(i){var s=String(i).split(/[eE]/);if(1===s.length)return s[0];var r="",l=i<0?"-":"",h=s[0].replace(".",""),d=Number(s[1])+1;if(d<0){for(r=l+"0.";d++;)r+="0";return r+h.replace(/^-/,"")}for(d-=h.length;d--;)r+="0";return h+r}},{key:"getDimensions",value:function(i){var s=getComputedStyle(i,null),r=i.clientHeight,l=i.clientWidth;return r-=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom),[l-=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),r]}},{key:"getBoundingClientRect",value:function(i){var s=i.getBoundingClientRect();return{top:s.top,right:s.right,bottom:s.bottom,left:s.left,width:i.clientWidth,height:i.clientHeight,x:s.left,y:s.top}}},{key:"getLargestStringFromArr",value:function(i){return i.reduce(function(s,r){return Array.isArray(r)&&(r=r.reduce(function(l,h){return l.length>h.length?l:h})),s.length>r.length?s:r},0)}},{key:"hexToRgba",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==i.substring(0,1)&&(i="#999999");var r=i.replace("#","");r=r.match(new RegExp("(.{"+r.length/3+"})","g"));for(var l=0;l<r.length;l++)r[l]=parseInt(1===r[l].length?r[l]+r[l]:r[l],16);return void 0!==s&&r.push(s),"rgba("+r.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(i){return parseFloat(i.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(i){return(i=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===i.length?"#"+("0"+parseInt(i[1],10).toString(16)).slice(-2)+("0"+parseInt(i[2],10).toString(16)).slice(-2)+("0"+parseInt(i[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(i){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(i)}},{key:"getPolygonPos",value:function(i,s){for(var r=[],l=2*Math.PI/s,h=0;h<s;h++){var d={};d.x=i*Math.sin(h*l),d.y=-i*Math.cos(h*l),r.push(d)}return r}},{key:"polarToCartesian",value:function(i,s,r,l){var h=(l-90)*Math.PI/180;return{x:i+r*Math.cos(h),y:s+r*Math.sin(h)}}},{key:"escapeString",value:function(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",r=i.toString().slice();return r.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,s)}},{key:"negToZero",value:function(i){return i<0?0:i}},{key:"moveIndexInArray",value:function(i,s,r){if(r>=i.length)for(var l=r-i.length+1;l--;)i.push(void 0);return i.splice(r,0,i.splice(s,1)[0]),i}},{key:"extractNumber",value:function(i){return parseFloat(i.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(i,s){for(;(i=i.parentElement)&&!i.classList.contains(s););return i}},{key:"setELstyles",value:function(i,s){for(var r in s)s.hasOwnProperty(r)&&(i.style.key=s[r])}},{key:"isNumber",value:function(i){return!isNaN(i)&&parseFloat(Number(i))===i&&!isNaN(parseInt(i,10))}},{key:"isFloat",value:function(i){return Number(i)===i&&i%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var i=window.navigator.userAgent,s=i.indexOf("MSIE ");if(s>0)return parseInt(i.substring(s+5,i.indexOf(".",s)),10);if(i.indexOf("Trident/")>0){var r=i.indexOf("rv:");return parseInt(i.substring(r+3,i.indexOf(".",r)),10)}var l=i.indexOf("Edge/");return l>0&&parseInt(i.substring(l+5,i.indexOf(".",l)),10)}}]),P}(),ft=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w,this.setEasingFunctions()}return rt(P,[{key:"setEasingFunctions",value:function(){var i;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":i="-";break;case"easein":i="<";break;case"easeout":i=">";break;case"easeinout":default:i="<>";break;case"swing":i=function(s){var r=1.70158;return(s-=1)*s*((r+1)*s+r)+1};break;case"bounce":i=function(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375};break;case"elastic":i=function(s){return s===!!s?s:Math.pow(2,-10*s)*Math.sin((s-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=i}}},{key:"animateLine",value:function(i,s,r,l){i.attr(s).animate(l).attr(r)}},{key:"animateMarker",value:function(i,s,r,l,h,d){s||(s=0),i.attr({r:s,width:s,height:s}).animate(l,h).attr({r,width:r.width,height:r.height}).afterAll(function(){d()})}},{key:"animateCircle",value:function(i,s,r,l,h){i.attr({r:s.r,cx:s.cx,cy:s.cy}).animate(l,h).attr({r:r.r,cx:r.cx,cy:r.cy})}},{key:"animateRect",value:function(i,s,r,l,h){i.attr(s).animate(l).attr(r).afterAll(function(){return h()})}},{key:"animatePathsGradually",value:function(i){var v=this.w,b=0;v.config.chart.animations.animateGradually.enabled&&(b=v.config.chart.animations.animateGradually.delay),v.config.chart.animations.dynamicAnimation.enabled&&v.globals.dataChanged&&"bar"!==v.config.chart.type&&(b=0),this.morphSVG(i.el,i.realIndex,i.j,"line"!==v.config.chart.type||v.globals.comboCharts?i.fill:"stroke",i.pathFrom,i.pathTo,i.speed,i.delay*b)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(i){i.el.classList.remove("apexcharts-element-hidden")})}},{key:"animationCompleted",value:function(i){var s=this.w;s.globals.animationEnded||(s.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof s.config.chart.events.animationEnd&&s.config.chart.events.animationEnd(this.ctx,{el:i,w:s}))}},{key:"morphSVG",value:function(i,s,r,l,h,d,u,p){var m=this,v=this.w;h||(h=i.attr("pathFrom")),d||(d=i.attr("pathTo"));var b=function(_){return"radar"===v.config.chart.type&&(u=1),"M 0 ".concat(v.globals.gridHeight)};(!h||h.indexOf("undefined")>-1||h.indexOf("NaN")>-1)&&(h=b()),(!d||d.indexOf("undefined")>-1||d.indexOf("NaN")>-1)&&(d=b()),v.globals.shouldAnimate||(u=1),i.plot(h).animate(1,v.globals.easing,p).plot(h).animate(u,v.globals.easing,p).plot(d).afterAll(function(){B.isNumber(r)?r===v.globals.series[v.globals.maxValsInArrayIndex].length-2&&v.globals.shouldAnimate&&m.animationCompleted(i):"none"!==l&&v.globals.shouldAnimate&&(!v.globals.comboCharts&&s===v.globals.series.length-1||v.globals.comboCharts)&&m.animationCompleted(i),m.showDelayedElements()})}}]),P}(),ct=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"getDefaultFilter",value:function(i,s){var r=this.w;i.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==r.config.states.normal.filter?this.applyFilter(i,s,r.config.states.normal.filter.type,r.config.states.normal.filter.value):r.config.chart.dropShadow.enabled&&this.dropShadow(i,r.config.chart.dropShadow,s)}},{key:"addNormalFilter",value:function(i,s){var r=this.w;r.config.chart.dropShadow.enabled&&!i.node.classList.contains("apexcharts-marker")&&this.dropShadow(i,r.config.chart.dropShadow,s)}},{key:"addLightenFilter",value:function(i,s,r){var l=this,h=this.w,d=r.intensity;i.unfilter(!0),new window.SVG.Filter,i.filter(function(u){var p=h.config.chart.dropShadow;(p.enabled?l.addShadow(u,s,p):u).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:d}})}),i.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(i.filterer.node)}},{key:"addDarkenFilter",value:function(i,s,r){var l=this,h=this.w,d=r.intensity;i.unfilter(!0),new window.SVG.Filter,i.filter(function(u){var p=h.config.chart.dropShadow;(p.enabled?l.addShadow(u,s,p):u).componentTransfer({rgb:{type:"linear",slope:d}})}),i.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(i.filterer.node)}},{key:"applyFilter",value:function(i,s,r){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(r){case"none":this.addNormalFilter(i,s);break;case"lighten":this.addLightenFilter(i,s,{intensity:l});break;case"darken":this.addDarkenFilter(i,s,{intensity:l})}}},{key:"addShadow",value:function(i,s,r){var l=r.blur,h=r.top,d=r.left,u=r.color,p=r.opacity,m=i.flood(Array.isArray(u)?u[s]:u,p).composite(i.sourceAlpha,"in").offset(d,h).gaussianBlur(l).merge(i.source);return i.blend(i.source,m)}},{key:"dropShadow",value:function(i,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=s.top,h=s.left,d=s.blur,u=s.color,p=s.opacity,m=s.noUserSpaceOnUse,v=this.w;return i.unfilter(!0),B.isIE()&&"radialBar"===v.config.chart.type||(u=Array.isArray(u)?u[r]:u,i.filter(function(b){var _;_=B.isSafari()||B.isFirefox()||B.isIE()?b.flood(u,p).composite(b.sourceAlpha,"in").offset(h,l).gaussianBlur(d):b.flood(u,p).composite(b.sourceAlpha,"in").offset(h,l).gaussianBlur(d).merge(b.source),b.blend(b.source,_)}),m||i.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(i.filterer.node)),i}},{key:"setSelectionFilter",value:function(i,s,r){var l=this.w;if(void 0!==l.globals.selectedDataPoints[s]&&l.globals.selectedDataPoints[s].indexOf(r)>-1){i.node.setAttribute("selected",!0);var h=l.config.states.active.filter;"none"!==h&&this.applyFilter(i,s,h.type,h.value)}}},{key:"_scaleFilterSize",value:function(i){!function(s){for(var r in s)s.hasOwnProperty(r)&&i.setAttribute(r,s[r])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),P}(),U=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"drawLine",value:function(i,s,r,l){var h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt",m=this.w,v=m.globals.dom.Paper.line().attr({x1:i,y1:s,x2:r,y2:l,stroke:h,"stroke-dasharray":d,"stroke-width":u,"stroke-linecap":p});return v}},{key:"drawRect",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,v=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,b=this.w,_=b.globals.dom.Paper.rect();return _.attr({x:i,y:s,width:r>0?r:0,height:l>0?l:0,rx:h,ry:h,opacity:u,"stroke-width":null!==p?p:0,stroke:null!==m?m:"none","stroke-dasharray":v}),_.node.setAttribute("fill",d),_}},{key:"drawPolygon",value:function(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",h=this.w,d=h.globals.dom.Paper.polygon(i).attr({fill:l,stroke:s,"stroke-width":r});return d}},{key:"drawCircle",value:function(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.w;i<0&&(i=0);var l=r.globals.dom.Paper.circle(2*i);return null!==s&&l.attr(s),l}},{key:"drawPath",value:function(i){var s=i.d,r=void 0===s?"":s,l=i.stroke,h=void 0===l?"#a8a8a8":l,d=i.strokeWidth,u=void 0===d?1:d,p=i.fill,m=i.fillOpacity,v=void 0===m?1:m,b=i.strokeOpacity,_=void 0===b?1:b,A=i.classes,E=i.strokeLinecap,k=void 0===E?null:E,R=i.strokeDashArray,O=void 0===R?0:R,N=this.w;return null===k&&(k=N.config.stroke.lineCap),(r.indexOf("undefined")>-1||r.indexOf("NaN")>-1)&&(r="M 0 ".concat(N.globals.gridHeight)),N.globals.dom.Paper.path(r).attr({fill:p,"fill-opacity":v,stroke:h,"stroke-opacity":_,"stroke-linecap":k,"stroke-width":u,"stroke-dasharray":O,class:A})}},{key:"group",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=this.w,r=s.globals.dom.Paper.group();return null!==i&&r.attr(i),r}},{key:"move",value:function(i,s){return["M",i,s].join(" ")}},{key:"line",value:function(i,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=null;return null===r?l=["L",i,s].join(" "):"H"===r?l=["H",i].join(" "):"V"===r&&(l=["V",s].join(" ")),l}},{key:"curve",value:function(i,s,r,l,h,d){return["C",i,s,r,l,h,d].join(" ")}},{key:"quadraticCurve",value:function(i,s,r,l){return["Q",i,s,r,l].join(" ")}},{key:"arc",value:function(i,s,r,l,h,d,u){var p=arguments.length>7&&void 0!==arguments[7]&&arguments[7],m="A";p&&(m="a");var v=[m,i,s,r,l,h,d,u].join(" ");return v}},{key:"renderPaths",value:function(i){var s,r=i.j,l=i.realIndex,h=i.pathFrom,d=i.pathTo,u=i.stroke,p=i.strokeWidth,m=i.strokeLinecap,v=i.fill,b=i.animationDelay,_=i.initialSpeed,A=i.dataChangeSpeed,E=i.className,k=i.shouldClipToGrid,R=void 0===k||k,O=i.bindEventsOnPaths,N=void 0===O||O,z=i.drawShadow,x=void 0===z||z,C=this.w,T=new ct(this.ctx),L=new ft(this.ctx),W=this.w.config.chart.animations.enabled,J=W&&this.w.config.chart.animations.dynamicAnimation.enabled,H=!!(W&&!C.globals.resized||J&&C.globals.dataChanged&&C.globals.shouldAnimate);H?s=h:(s=d,C.globals.animationEnded=!0);var tt,et=C.config.stroke.dashArray;tt=Array.isArray(et)?et[l]:C.config.stroke.dashArray;var at=this.drawPath({d:s,stroke:u,strokeWidth:p,fill:v,fillOpacity:1,classes:E,strokeLinecap:m,strokeDashArray:tt});at.attr("index",l),R&&at.attr({"clip-path":"url(#gridRectMask".concat(C.globals.cuid,")")}),"none"!==C.config.states.normal.filter.type?T.getDefaultFilter(at,l):C.config.chart.dropShadow.enabled&&x&&(!C.config.chart.dropShadow.enabledOnSeries||C.config.chart.dropShadow.enabledOnSeries&&-1!==C.config.chart.dropShadow.enabledOnSeries.indexOf(l))&&T.dropShadow(at,C.config.chart.dropShadow,l),N&&(at.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,at)),at.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,at)),at.node.addEventListener("mousedown",this.pathMouseDown.bind(this,at))),at.attr({pathTo:d,pathFrom:h});var Zt={el:at,j:r,realIndex:l,pathFrom:h,pathTo:d,fill:v,strokeWidth:p,delay:b};return!W||C.globals.resized||C.globals.dataChanged?!C.globals.resized&&C.globals.dataChanged||L.showDelayedElements():L.animatePathsGradually(Mt(Mt({},Zt),{},{speed:_})),C.globals.dataChanged&&J&&H&&L.animatePathsGradually(Mt(Mt({},Zt),{},{speed:A})),at}},{key:"drawPattern",value:function(i,s,r){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=this.w,u=d.globals.dom.Paper.pattern(s,r,function(p){"horizontalLines"===i?p.line(0,0,r,0).stroke({color:l,width:h+1}):"verticalLines"===i?p.line(0,0,0,s).stroke({color:l,width:h+1}):"slantedLines"===i?p.line(0,0,s,r).stroke({color:l,width:h}):"squares"===i?p.rect(s,r).fill("none").stroke({color:l,width:h}):"circles"===i&&p.circle(s).fill("none").stroke({color:l,width:h})});return u}},{key:"drawGradient",value:function(i,s,r,l,h){var d,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,v=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,b=this.w;s.length<9&&0===s.indexOf("#")&&(s=B.hexToRgba(s,l)),r.length<9&&0===r.indexOf("#")&&(r=B.hexToRgba(r,h));var _=0,A=1,E=1,k=null;null!==p&&(_=void 0!==p[0]?p[0]/100:0,A=void 0!==p[1]?p[1]/100:1,E=void 0!==p[2]?p[2]/100:1,k=void 0!==p[3]?p[3]/100:null);var R=!("donut"!==b.config.chart.type&&"pie"!==b.config.chart.type&&"polarArea"!==b.config.chart.type&&"bubble"!==b.config.chart.type);if(d=b.globals.dom.Paper.gradient(R?"radial":"linear",null===m||0===m.length?function(z){z.at(_,s,l),z.at(A,r,h),z.at(E,r,h),null!==k&&z.at(k,s,l)}:function(z){(Array.isArray(m[v])?m[v]:m).forEach(function(x){z.at(x.offset/100,x.color,x.opacity)})}),R){var O=b.globals.gridWidth/2,N=b.globals.gridHeight/2;d.attr("bubble"!==b.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:O,cy:N,r:u}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===i?d.from(0,0).to(0,1):"diagonal"===i?d.from(0,0).to(1,1):"horizontal"===i?d.from(0,1).to(1,1):"diagonal2"===i&&d.from(1,0).to(0,1);return d}},{key:"getTextBasedOnMaxWidth",value:function(i){var s=i.text,r=i.maxWidth,d=this.getTextRects(s,i.fontSize,i.fontFamily),p=Math.floor(r/(d.width/s.length));return r<d.width?s.slice(0,p-3)+"...":s}},{key:"drawText",value:function(i){var s=this,r=i.x,l=i.y,h=i.text,d=i.textAnchor,u=i.fontSize,p=i.fontFamily,m=i.fontWeight,v=i.foreColor,b=i.opacity,_=i.maxWidth,A=i.cssClass,E=void 0===A?"":A,k=i.isPlainText,R=void 0===k||k,O=this.w;void 0===h&&(h="");var N=h;d||(d="start"),v&&v.length||(v=O.config.chart.foreColor),m=m||"regular";var z,x={maxWidth:_,fontSize:u=u||"11px",fontFamily:p=p||O.config.chart.fontFamily};return Array.isArray(h)?z=O.globals.dom.Paper.text(function(C){for(var T=0;T<h.length;T++)N=h[T],_&&(N=s.getTextBasedOnMaxWidth(Mt({text:h[T]},x))),0===T?C.tspan(N):C.tspan(N).newLine()}):(_&&(N=this.getTextBasedOnMaxWidth(Mt({text:h},x))),z=R?O.globals.dom.Paper.plain(h):O.globals.dom.Paper.text(function(C){return C.tspan(N)})),z.attr({x:r,y:l,"text-anchor":d,"dominant-baseline":"auto","font-size":u,"font-family":p,"font-weight":m,fill:v,class:"apexcharts-text "+E}),z.node.style.fontFamily=p,z.node.style.opacity=b,z}},{key:"drawMarker",value:function(i,s,r){i=i||0;var l=r.pSize||0,h=null;if("square"===r.shape||"rect"===r.shape){var d=void 0===r.pRadius?l/2:r.pRadius;null!==s&&l||(l=0,d=0);var u=1.2*l+d,p=this.drawRect(u,u,u,u,d);p.attr({x:i-u/2,y:s-u/2,cx:i,cy:s,class:r.class?r.class:"",fill:r.pointFillColor,"fill-opacity":r.pointFillOpacity?r.pointFillOpacity:1,stroke:r.pointStrokeColor,"stroke-width":r.pointStrokeWidth?r.pointStrokeWidth:0,"stroke-opacity":r.pointStrokeOpacity?r.pointStrokeOpacity:1}),h=p}else"circle"!==r.shape&&r.shape||(B.isNumber(s)||(l=0,s=0),h=this.drawCircle(l,{cx:i,cy:s,class:r.class?r.class:"",stroke:r.pointStrokeColor,fill:r.pointFillColor,"fill-opacity":r.pointFillOpacity?r.pointFillOpacity:1,"stroke-width":r.pointStrokeWidth?r.pointStrokeWidth:0,"stroke-opacity":r.pointStrokeOpacity?r.pointStrokeOpacity:1}));return h}},{key:"pathMouseEnter",value:function(i,s){var r=this.w,l=new ct(this.ctx),h=parseInt(i.node.getAttribute("index"),10),d=parseInt(i.node.getAttribute("j"),10);if("function"==typeof r.config.chart.events.dataPointMouseEnter&&r.config.chart.events.dataPointMouseEnter(s,this.ctx,{seriesIndex:h,dataPointIndex:d,w:r}),this.ctx.events.fireEvent("dataPointMouseEnter",[s,this.ctx,{seriesIndex:h,dataPointIndex:d,w:r}]),("none"===r.config.states.active.filter.type||"true"!==i.node.getAttribute("selected"))&&"none"!==r.config.states.hover.filter.type&&!r.globals.isTouchDevice){var u=r.config.states.hover.filter;l.applyFilter(i,h,u.type,u.value)}}},{key:"pathMouseLeave",value:function(i,s){var r=this.w,l=new ct(this.ctx),h=parseInt(i.node.getAttribute("index"),10),d=parseInt(i.node.getAttribute("j"),10);"function"==typeof r.config.chart.events.dataPointMouseLeave&&r.config.chart.events.dataPointMouseLeave(s,this.ctx,{seriesIndex:h,dataPointIndex:d,w:r}),this.ctx.events.fireEvent("dataPointMouseLeave",[s,this.ctx,{seriesIndex:h,dataPointIndex:d,w:r}]),"none"!==r.config.states.active.filter.type&&"true"===i.node.getAttribute("selected")||"none"!==r.config.states.hover.filter.type&&l.getDefaultFilter(i,h)}},{key:"pathMouseDown",value:function(i,s){var r=this.w,l=new ct(this.ctx),h=parseInt(i.node.getAttribute("index"),10),d=parseInt(i.node.getAttribute("j"),10),u="false";if("true"===i.node.getAttribute("selected")){if(i.node.setAttribute("selected","false"),r.globals.selectedDataPoints[h].indexOf(d)>-1){var p=r.globals.selectedDataPoints[h].indexOf(d);r.globals.selectedDataPoints[h].splice(p,1)}}else{if(!r.config.states.active.allowMultipleDataPointsSelection&&r.globals.selectedDataPoints.length>0){r.globals.selectedDataPoints=[];var m=r.globals.dom.Paper.select(".apexcharts-series path").members,v=r.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,b=function(E){Array.prototype.forEach.call(E,function(k){k.node.setAttribute("selected","false"),l.getDefaultFilter(k,h)})};b(m),b(v)}i.node.setAttribute("selected","true"),u="true",void 0===r.globals.selectedDataPoints[h]&&(r.globals.selectedDataPoints[h]=[]),r.globals.selectedDataPoints[h].push(d)}if("true"===u){var _=r.config.states.active.filter;if("none"!==_)l.applyFilter(i,h,_.type,_.value);else if("none"!==r.config.states.hover.filter&&!r.globals.isTouchDevice){var A=r.config.states.hover.filter;l.applyFilter(i,h,A.type,A.value)}}else"none"!==r.config.states.active.filter.type&&("none"===r.config.states.hover.filter.type||r.globals.isTouchDevice?l.getDefaultFilter(i,h):l.applyFilter(i,h,(A=r.config.states.hover.filter).type,A.value));"function"==typeof r.config.chart.events.dataPointSelection&&r.config.chart.events.dataPointSelection(s,this.ctx,{selectedDataPoints:r.globals.selectedDataPoints,seriesIndex:h,dataPointIndex:d,w:r}),s&&this.ctx.events.fireEvent("dataPointSelection",[s,this.ctx,{selectedDataPoints:r.globals.selectedDataPoints,seriesIndex:h,dataPointIndex:d,w:r}])}},{key:"rotateAroundCenter",value:function(i){var s={};return i&&"function"==typeof i.getBBox&&(s=i.getBBox()),{x:s.x+s.width/2,y:s.y+s.height/2}}},{key:"getTextRects",value:function(i,s,r,l){var h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],d=this.w,u=this.drawText({x:-200,y:-200,text:i,textAnchor:"start",fontSize:s,fontFamily:r,foreColor:"#fff",opacity:0});l&&u.attr("transform",l),d.globals.dom.Paper.add(u);var p=u.bbox();return h||(p=u.node.getBoundingClientRect()),u.remove(),{width:p.width,height:p.height}}},{key:"placeTextWithEllipsis",value:function(i,s,r){if("function"==typeof i.getComputedTextLength&&(i.textContent=s,s.length>0&&i.getComputedTextLength()>=r/1.1)){for(var l=s.length-3;l>0;l-=3)if(i.getSubStringLength(0,l)<=r/1.1)return void(i.textContent=s.substring(0,l)+"...");i.textContent="."}}}],[{key:"setAttrs",value:function(i,s){for(var r in s)s.hasOwnProperty(r)&&i.setAttribute(r,s[r])}}]),P}(),wt=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"getStackedSeriesTotals",value:function(){var i=this.w,s=[];if(0===i.globals.series.length)return s;for(var r=0;r<i.globals.series[i.globals.maxValsInArrayIndex].length;r++){for(var l=0,h=0;h<i.globals.series.length;h++)void 0!==i.globals.series[h][r]&&(l+=i.globals.series[h][r]);s.push(l)}return i.globals.stackedSeriesTotals=s,s}},{key:"getSeriesTotalByIndex",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===i?this.w.config.series.reduce(function(s,r){return s+r},0):this.w.globals.series[i].reduce(function(s,r){return s+r},0)}},{key:"isSeriesNull",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===i?this.w.config.series.filter(function(s){return null!==s}):this.w.config.series[i].data.filter(function(s){return null!==s})).length}},{key:"seriesHaveSameValues",value:function(i){return this.w.globals.series[i].every(function(s,r,l){return s===l[0]})}},{key:"getCategoryLabels",value:function(i){var s=this.w,r=i.slice();return s.config.xaxis.convertedCatToNumeric&&(r=i.map(function(l,h){return s.config.xaxis.labels.formatter(l-s.globals.minX+1)})),r}},{key:"getLargestSeries",value:function(){var i=this.w;i.globals.maxValsInArrayIndex=i.globals.series.map(function(s){return s.length}).indexOf(Math.max.apply(Math,i.globals.series.map(function(s){return s.length})))}},{key:"getLargestMarkerSize",value:function(){var i=this.w,s=0;return i.globals.markers.size.forEach(function(r){s=Math.max(s,r)}),i.config.markers.discrete&&i.config.markers.discrete.length&&i.config.markers.discrete.forEach(function(r){s=Math.max(s,r.size)}),s>0&&(s+=i.config.markers.hover.sizeOffset+1),i.globals.markers.largestSize=s,s}},{key:"getSeriesTotals",value:function(){var i=this.w;i.globals.seriesTotals=i.globals.series.map(function(s,r){var l=0;if(Array.isArray(s))for(var h=0;h<s.length;h++)l+=s[h];else l+=s;return l})}},{key:"getSeriesTotalsXRange",value:function(i,s){var r=this.w;return r.globals.series.map(function(l,h){for(var d=0,u=0;u<l.length;u++)r.globals.seriesX[h][u]>i&&r.globals.seriesX[h][u]<s&&(d+=l[u]);return d})}},{key:"getPercentSeries",value:function(){var i=this.w;i.globals.seriesPercent=i.globals.series.map(function(s,r){var l=[];if(Array.isArray(s))for(var h=0;h<s.length;h++){var d=i.globals.stackedSeriesTotals[h],u=0;d&&(u=100*s[h]/d),l.push(u)}else{var p=100*s/i.globals.seriesTotals.reduce(function(m,v){return m+v},0);l.push(p)}return l})}},{key:"getCalculatedRatios",value:function(){var i,s,r,l,h=this.w.globals,d=[],u=0,p=[],m=.1,v=0;if(h.yRange=[],h.isMultipleYAxis)for(var b=0;b<h.minYArr.length;b++)h.yRange.push(Math.abs(h.minYArr[b]-h.maxYArr[b])),p.push(0);else h.yRange.push(Math.abs(h.minY-h.maxY));h.xRange=Math.abs(h.maxX-h.minX),h.zRange=Math.abs(h.maxZ-h.minZ);for(var _=0;_<h.yRange.length;_++)d.push(h.yRange[_]/h.gridHeight);if(s=h.xRange/h.gridWidth,r=Math.abs(h.initialMaxX-h.initialMinX)/h.gridWidth,i=h.yRange/h.gridWidth,l=h.xRange/h.gridHeight,(u=h.zRange/h.gridHeight*16)||(u=1),h.minY!==Number.MIN_VALUE&&0!==Math.abs(h.minY)&&(h.hasNegs=!0),h.isMultipleYAxis){p=[];for(var A=0;A<d.length;A++)p.push(-h.minYArr[A]/d[A])}else p.push(-h.minY/d[0]),h.minY!==Number.MIN_VALUE&&0!==Math.abs(h.minY)&&(m=-h.minY/i,v=h.minX/s);return{yRatio:d,invertedYRatio:i,zRatio:u,xRatio:s,initialXRatio:r,invertedXRatio:l,baseLineInvertedY:m,baseLineY:p,baseLineX:v}}},{key:"getLogSeries",value:function(i){var s=this,r=this.w;return r.globals.seriesLog=i.map(function(l,h){return r.config.yaxis[h]&&r.config.yaxis[h].logarithmic?l.map(function(d){return null===d?null:s.getLogVal(r.config.yaxis[h].logBase,d,h)}):l}),r.globals.invalidLogScale?i:r.globals.seriesLog}},{key:"getBaseLog",value:function(i,s){return Math.log(s)/Math.log(i)}},{key:"getLogVal",value:function(i,s,r){if(0===s)return 0;var l=this.w,h=0===l.globals.minYArr[r]?-1:this.getBaseLog(i,l.globals.minYArr[r]),d=(0===l.globals.maxYArr[r]?0:this.getBaseLog(i,l.globals.maxYArr[r]))-h;return s<1?s/d:(this.getBaseLog(i,s)-h)/d}},{key:"getLogYRatios",value:function(i){var s=this,r=this.w,l=this.w.globals;return l.yLogRatio=i.slice(),l.logYRange=l.yRange.map(function(h,d){if(r.config.yaxis[d]&&s.w.config.yaxis[d].logarithmic){var u,p=-Number.MAX_VALUE,m=Number.MIN_VALUE;return l.seriesLog.forEach(function(v,b){v.forEach(function(_){r.config.yaxis[b]&&r.config.yaxis[b].logarithmic&&(p=Math.max(_,p),m=Math.min(_,m))})}),u=Math.pow(l.yRange[d],Math.abs(m-p)/l.yRange[d]),l.yLogRatio[d]=u/l.gridHeight,u}}),l.invalidLogScale?i.slice():l.yLogRatio}}],[{key:"checkComboSeries",value:function(i){var s=!1,r=0,l=0;return i.length&&void 0!==i[0].type&&i.forEach(function(h){"bar"!==h.type&&"column"!==h.type&&"candlestick"!==h.type&&"boxPlot"!==h.type||r++,void 0!==h.type&&l++}),l>0&&(s=!0),{comboBarCount:r,comboCharts:s}}},{key:"extendArrayProps",value:function(i,s,r){return s.yaxis&&(s=i.extendYAxis(s,r)),s.annotations&&(s.annotations.yaxis&&(s=i.extendYAxisAnnotations(s)),s.annotations.xaxis&&(s=i.extendXAxisAnnotations(s)),s.annotations.points&&(s=i.extendPointAnnotations(s))),s}}]),P}(),zt=function(){function P(i){lt(this,P),this.w=i.w,this.annoCtx=i}return rt(P,[{key:"setOrientations",value:function(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.w;if("vertical"===i.label.orientation){var l=null!==s?s:0,h=r.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(l,"']"));if(null!==h){var d=h.getBoundingClientRect();h.setAttribute("x",parseFloat(h.getAttribute("x"))-d.height+4),h.setAttribute("y","top"===i.label.position?parseFloat(h.getAttribute("y"))+d.width:parseFloat(h.getAttribute("y"))-d.width);var u=this.annoCtx.graphics.rotateAroundCenter(h),p=u.x,m=u.y;h.setAttribute("transform","rotate(-90 ".concat(p," ").concat(m,")"))}}}},{key:"addBackgroundToAnno",value:function(i,s){var r=this.w;if(!i||void 0===s.label.text||void 0!==s.label.text&&!String(s.label.text).trim())return null;var l=r.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),h=i.getBoundingClientRect(),d=s.label.style.padding.left,u=s.label.style.padding.right,p=s.label.style.padding.top,m=s.label.style.padding.bottom;"vertical"===s.label.orientation&&(p=s.label.style.padding.left,m=s.label.style.padding.right,d=s.label.style.padding.top,u=s.label.style.padding.bottom);var _=this.annoCtx.graphics.drawRect(h.left-l.left-d-r.globals.barPadForNumericAxis,h.top-l.top-p,h.width+d+u,h.height+p+m,s.label.borderRadius,s.label.style.background,1,s.label.borderWidth,s.label.borderColor,0);return s.id&&_.node.classList.add(s.id),_}},{key:"annotationsBackground",value:function(){var i=this,s=this.w,r=function(l,h,d){var u=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(d,"-annotations .apexcharts-").concat(d,"-annotation-label[rel='").concat(h,"']"));if(u){var p=u.parentNode,m=i.addBackgroundToAnno(u,l);m&&(p.insertBefore(m.node,u),l.label.mouseEnter&&m.node.addEventListener("mouseenter",l.label.mouseEnter.bind(i,l)),l.label.mouseLeave&&m.node.addEventListener("mouseleave",l.label.mouseLeave.bind(i,l)),l.label.click&&m.node.addEventListener("click",l.label.click.bind(i,l)))}};s.config.annotations.xaxis.map(function(l,h){r(l,h,"xaxis")}),s.config.annotations.yaxis.map(function(l,h){r(l,h,"yaxis")}),s.config.annotations.points.map(function(l,h){r(l,h,"point")})}},{key:"getY1Y2",value:function(i,s){var r,l="y1"===i?s.y:s.y2,h=this.w;if(this.annoCtx.invertAxis){var d=h.globals.labels.indexOf(l);h.config.xaxis.convertedCatToNumeric&&(d=h.globals.categoryLabels.indexOf(l));var u=h.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(d+1)+")");u&&(r=parseFloat(u.getAttribute("y")))}else{var p;p=h.config.yaxis[s.yAxisIndex].logarithmic?(l=new wt(this.annoCtx.ctx).getLogVal(l,s.yAxisIndex))/h.globals.yLogRatio[s.yAxisIndex]:(l-h.globals.minYArr[s.yAxisIndex])/(h.globals.yRange[s.yAxisIndex]/h.globals.gridHeight),r=h.globals.gridHeight-p,!s.marker||null!=s.y||(r=0),h.config.yaxis[s.yAxisIndex]&&h.config.yaxis[s.yAxisIndex].reversed&&(r=p)}return r}},{key:"getX1X2",value:function(i,s){var r=this.w,l=this.annoCtx.invertAxis?r.globals.minY:r.globals.minX,h=this.annoCtx.invertAxis?r.globals.maxY:r.globals.maxX,d=this.annoCtx.invertAxis?r.globals.yRange[0]:r.globals.xRange,u=(s.x-l)/(d/r.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(u=(h-s.x)/(d/r.globals.gridWidth)),"category"!==r.config.xaxis.type&&!r.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||r.globals.dataFormatXNumeric||(u=this.getStringX(s.x));var p=(s.x2-l)/(d/r.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(p=(h-s.x2)/(d/r.globals.gridWidth)),"category"!==r.config.xaxis.type&&!r.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||r.globals.dataFormatXNumeric||(p=this.getStringX(s.x2)),null!=s.x||!s.marker||(u=r.globals.gridWidth),"x1"===i?u:p}},{key:"getStringX",value:function(i){var s=this.w,r=i;s.config.xaxis.convertedCatToNumeric&&s.globals.categoryLabels.length&&(i=s.globals.categoryLabels.indexOf(i)+1);var l=s.globals.labels.indexOf(i),h=s.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(l+1)+")");return h&&(r=parseFloat(h.getAttribute("x"))),r}}]),P}(),Ot=function(){function P(i){lt(this,P),this.w=i.w,this.annoCtx=i,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new zt(this.annoCtx)}return rt(P,[{key:"addXaxisAnnotation",value:function(i,s,r){var l,h=this.w,d=this.helpers.getX1X2("x1",i),u=i.label.text,p=i.strokeDashArray;if(B.isNumber(d)){if(null==i.x2){var m=this.annoCtx.graphics.drawLine(d+i.offsetX,0+i.offsetY,d+i.offsetX,h.globals.gridHeight+i.offsetY,i.borderColor,p,i.borderWidth);s.appendChild(m.node),i.id&&m.node.classList.add(i.id)}else{if((l=this.helpers.getX1X2("x2",i))<d){var v=d;d=l,l=v}var b=this.annoCtx.graphics.drawRect(d+i.offsetX,0+i.offsetY,l-d,h.globals.gridHeight+i.offsetY,0,i.fillColor,i.opacity,1,i.borderColor,p);b.node.classList.add("apexcharts-annotation-rect"),b.attr("clip-path","url(#gridRectMask".concat(h.globals.cuid,")")),s.appendChild(b.node),i.id&&b.node.classList.add(i.id)}var _="top"===i.label.position?4:h.globals.gridHeight,A=this.annoCtx.graphics.getTextRects(u,parseFloat(i.label.style.fontSize)),E=this.annoCtx.graphics.drawText({x:d+i.label.offsetX,y:_+i.label.offsetY-("vertical"===i.label.orientation?"top"===i.label.position?A.width/2-12:-A.width/2:0),text:u,textAnchor:i.label.textAnchor,fontSize:i.label.style.fontSize,fontFamily:i.label.style.fontFamily,fontWeight:i.label.style.fontWeight,foreColor:i.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(i.label.style.cssClass," ").concat(i.id?i.id:"")});E.attr({rel:r}),s.appendChild(E.node),this.annoCtx.helpers.setOrientations(i,r)}}},{key:"drawXAxisAnnotations",value:function(){var i=this,s=this.w,r=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return s.config.annotations.xaxis.map(function(l,h){i.addXaxisAnnotation(l,r.node,h)}),r}}]),P}(),jt=function(){function P(i){lt(this,P),this.w=i.w,this.annoCtx=i,this.helpers=new zt(this.annoCtx)}return rt(P,[{key:"addYaxisAnnotation",value:function(i,s,r){var l,h=this.w,d=i.strokeDashArray,u=this.helpers.getY1Y2("y1",i),p=i.label.text;if(null==i.y2){var m=this.annoCtx.graphics.drawLine(0+i.offsetX,u+i.offsetY,this._getYAxisAnnotationWidth(i),u+i.offsetY,i.borderColor,d,i.borderWidth);s.appendChild(m.node),i.id&&m.node.classList.add(i.id)}else{if((l=this.helpers.getY1Y2("y2",i))>u){var v=u;u=l,l=v}var b=this.annoCtx.graphics.drawRect(0+i.offsetX,l+i.offsetY,this._getYAxisAnnotationWidth(i),u-l,0,i.fillColor,i.opacity,1,i.borderColor,d);b.node.classList.add("apexcharts-annotation-rect"),b.attr("clip-path","url(#gridRectMask".concat(h.globals.cuid,")")),s.appendChild(b.node),i.id&&b.node.classList.add(i.id)}var A=this.annoCtx.graphics.drawText({x:("right"===i.label.position?h.globals.gridWidth:0)+i.label.offsetX,y:(l??u)+i.label.offsetY-3,text:p,textAnchor:i.label.textAnchor,fontSize:i.label.style.fontSize,fontFamily:i.label.style.fontFamily,fontWeight:i.label.style.fontWeight,foreColor:i.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(i.label.style.cssClass," ").concat(i.id?i.id:"")});A.attr({rel:r}),s.appendChild(A.node)}},{key:"_getYAxisAnnotationWidth",value:function(i){var s=this.w;return(i.width.indexOf("%")>-1?s.globals.gridWidth*parseInt(i.width,10)/100:parseInt(i.width,10))+i.offsetX}},{key:"drawYAxisAnnotations",value:function(){var i=this,s=this.w,r=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return s.config.annotations.yaxis.map(function(l,h){i.addYaxisAnnotation(l,r.node,h)}),r}}]),P}(),Wt=function(){function P(i){lt(this,P),this.w=i.w,this.annoCtx=i,this.helpers=new zt(this.annoCtx)}return rt(P,[{key:"addPointAnnotation",value:function(i,s,r){var l=this.helpers.getX1X2("x1",i),h=this.helpers.getY1Y2("y1",i);if(B.isNumber(l)){var d={pSize:i.marker.size,pointStrokeWidth:i.marker.strokeWidth,pointFillColor:i.marker.fillColor,pointStrokeColor:i.marker.strokeColor,shape:i.marker.shape,pRadius:i.marker.radius,class:"apexcharts-point-annotation-marker ".concat(i.marker.cssClass," ").concat(i.id?i.id:"")},u=this.annoCtx.graphics.drawMarker(l+i.marker.offsetX,h+i.marker.offsetY,d);s.appendChild(u.node);var p=i.label.text?i.label.text:"",m=this.annoCtx.graphics.drawText({x:l+i.label.offsetX,y:h+i.label.offsetY-i.marker.size-parseFloat(i.label.style.fontSize)/1.6,text:p,textAnchor:i.label.textAnchor,fontSize:i.label.style.fontSize,fontFamily:i.label.style.fontFamily,fontWeight:i.label.style.fontWeight,foreColor:i.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(i.label.style.cssClass," ").concat(i.id?i.id:"")});if(m.attr({rel:r}),s.appendChild(m.node),i.customSVG.SVG){var v=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+i.customSVG.cssClass});v.attr({transform:"translate(".concat(l+i.customSVG.offsetX,", ").concat(h+i.customSVG.offsetY,")")}),v.node.innerHTML=i.customSVG.SVG,s.appendChild(v.node)}if(i.image.path){var b=i.image.width?i.image.width:20,_=i.image.height?i.image.height:20;u=this.annoCtx.addImage({x:l+i.image.offsetX-b/2,y:h+i.image.offsetY-_/2,width:b,height:_,path:i.image.path,appendTo:".apexcharts-point-annotations"})}i.mouseEnter&&u.node.addEventListener("mouseenter",i.mouseEnter.bind(this,i)),i.mouseLeave&&u.node.addEventListener("mouseleave",i.mouseLeave.bind(this,i)),i.click&&u.node.addEventListener("click",i.click.bind(this,i))}}},{key:"drawPointAnnotations",value:function(){var i=this,s=this.w,r=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return s.config.annotations.points.map(function(l,h){i.addPointAnnotation(l,r.node,h)}),r}}]),P}(),Qt={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},yt=function(){function P(){lt(this,P),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return rt(P,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[Qt],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(i){return new Date(i).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(i){return i}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(i){return i+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(i){return i.globals.seriesTotals.reduce(function(s,r){return s+r},0)/i.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(i){return i}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(i){return i}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(i){return i.globals.seriesTotals.reduce(function(s,r){return s+r},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(i){return null!==i?i:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(i){return i?i+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),P}(),At=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w,this.graphics=new U(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new zt(this),this.xAxisAnnotations=new Ot(this),this.yAxisAnnotations=new jt(this),this.pointsAnnotations=new Wt(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return rt(P,[{key:"drawAxesAnnotations",value:function(){var i=this.w;if(i.globals.axisCharts){for(var s=this.yAxisAnnotations.drawYAxisAnnotations(),r=this.xAxisAnnotations.drawXAxisAnnotations(),l=this.pointsAnnotations.drawPointAnnotations(),h=i.config.chart.animations.enabled,d=[s,r,l],u=[r.node,s.node,l.node],p=0;p<3;p++)i.globals.dom.elGraphical.add(d[p]),!h||i.globals.resized||i.globals.dataChanged||"scatter"!==i.config.chart.type&&"bubble"!==i.config.chart.type&&i.globals.dataPoints>1&&u[p].classList.add("apexcharts-element-hidden"),i.globals.delayedElements.push({el:u[p],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var i=this;this.w.config.annotations.images.map(function(s,r){i.addImage(s,r)})}},{key:"drawTextAnnos",value:function(){var i=this;this.w.config.annotations.texts.map(function(s,r){i.addText(s,r)})}},{key:"addXaxisAnnotation",value:function(i,s,r){this.xAxisAnnotations.addXaxisAnnotation(i,s,r)}},{key:"addYaxisAnnotation",value:function(i,s,r){this.yAxisAnnotations.addYaxisAnnotation(i,s,r)}},{key:"addPointAnnotation",value:function(i,s,r){this.pointsAnnotations.addPointAnnotation(i,s,r)}},{key:"addText",value:function(i,s){var h=i.text,_=i.backgroundColor,A=i.borderWidth,E=i.strokeDashArray,k=i.borderRadius,R=i.borderColor,O=i.appendTo,N=void 0===O?".apexcharts-annotations":O,z=i.paddingLeft,x=void 0===z?4:z,C=i.paddingRight,T=void 0===C?4:C,L=i.paddingBottom,W=void 0===L?2:L,J=i.paddingTop,H=void 0===J?2:J,et=this.w,tt=this.graphics.drawText({x:i.x,y:i.y,text:h,textAnchor:i.textAnchor||"start",fontSize:i.fontSize||"12px",fontWeight:i.fontWeight||"regular",fontFamily:i.fontFamily||et.config.chart.fontFamily,foreColor:i.foreColor||et.config.chart.foreColor,cssClass:i.cssClass}),at=et.globals.dom.baseEl.querySelector(N);at&&at.appendChild(tt.node);var pt=tt.bbox();if(h){var Zt=this.graphics.drawRect(pt.x-x,pt.y-H,pt.width+x+T,pt.height+W+H,k,_||"transparent",1,A,R,E);at.insertBefore(Zt.node,tt.node)}}},{key:"addImage",value:function(i,s){var r=this.w,h=i.x,d=void 0===h?0:h,u=i.y,p=void 0===u?0:u,m=i.width,v=void 0===m?20:m,b=i.height,_=void 0===b?20:b,A=i.appendTo,E=void 0===A?".apexcharts-annotations":A,k=r.globals.dom.Paper.image(i.path);k.size(v,_).move(d,p);var R=r.globals.dom.baseEl.querySelector(E);return R&&R.appendChild(k.node),k}},{key:"addXaxisAnnotationExternal",value:function(i,s,r){return this.addAnnotationExternal({params:i,pushToMemory:s,context:r,type:"xaxis",contextMethod:r.addXaxisAnnotation}),r}},{key:"addYaxisAnnotationExternal",value:function(i,s,r){return this.addAnnotationExternal({params:i,pushToMemory:s,context:r,type:"yaxis",contextMethod:r.addYaxisAnnotation}),r}},{key:"addPointAnnotationExternal",value:function(i,s,r){return void 0===this.invertAxis&&(this.invertAxis=r.w.globals.isBarHorizontal),this.addAnnotationExternal({params:i,pushToMemory:s,context:r,type:"point",contextMethod:r.addPointAnnotation}),r}},{key:"addAnnotationExternal",value:function(i){var s=i.params,r=i.pushToMemory,l=i.context,h=i.type,d=i.contextMethod,u=l,p=u.w,m=p.globals.dom.baseEl.querySelector(".apexcharts-".concat(h,"-annotations")),v=m.childNodes.length+1,b=new yt,_=Object.assign({},"xaxis"===h?b.xAxisAnnotation:"yaxis"===h?b.yAxisAnnotation:b.pointAnnotation),A=B.extend(_,s);switch(h){case"xaxis":this.addXaxisAnnotation(A,m,v);break;case"yaxis":this.addYaxisAnnotation(A,m,v);break;case"point":this.addPointAnnotation(A,m,v)}var E=p.globals.dom.baseEl.querySelector(".apexcharts-".concat(h,"-annotations .apexcharts-").concat(h,"-annotation-label[rel='").concat(v,"']")),k=this.helpers.addBackgroundToAnno(E,A);return k&&m.insertBefore(k.node,E),r&&p.globals.memory.methodsToExec.push({context:u,id:A.id?A.id:B.randomId(),method:d,label:"addAnnotation",params:s}),l}},{key:"clearAnnotations",value:function(i){var s=i.w,r=s.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");s.globals.memory.methodsToExec.map(function(l,h){"addText"!==l.label&&"addAnnotation"!==l.label||s.globals.memory.methodsToExec.splice(h,1)}),r=B.listToArray(r),Array.prototype.forEach.call(r,function(l){for(;l.firstChild;)l.removeChild(l.firstChild)})}},{key:"removeAnnotation",value:function(i,s){var r=i.w,l=r.globals.dom.baseEl.querySelectorAll(".".concat(s));l&&(r.globals.memory.methodsToExec.map(function(h,d){h.id===s&&r.globals.memory.methodsToExec.splice(d,1)}),Array.prototype.forEach.call(l,function(h){h.parentElement.removeChild(h)}))}}]),P}(),se=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w,this.opts=null,this.seriesIndex=0}return rt(P,[{key:"clippedImgArea",value:function(i){var s=this.w,r=s.config,l=parseInt(s.globals.gridWidth,10),h=parseInt(s.globals.gridHeight,10),d=l>h?l:h,u=i.image,p=0,m=0;void 0===i.width&&void 0===i.height?void 0!==r.fill.image.width&&void 0!==r.fill.image.height?(p=r.fill.image.width+1,m=r.fill.image.height):(p=d+1,m=d):(p=i.width,m=i.height);var v=document.createElementNS(s.globals.SVGNS,"pattern");U.setAttrs(v,{id:i.patternID,patternUnits:i.patternUnits?i.patternUnits:"userSpaceOnUse",width:p+"px",height:m+"px"});var b=document.createElementNS(s.globals.SVGNS,"image");v.appendChild(b),b.setAttributeNS(window.SVG.xlink,"href",u),U.setAttrs(b,{x:0,y:0,preserveAspectRatio:"none",width:p+"px",height:m+"px"}),b.style.opacity=i.opacity,s.globals.dom.elDefs.node.appendChild(v)}},{key:"getSeriesIndex",value:function(i){var s=this.w;return this.seriesIndex=("bar"===s.config.chart.type||"rangeBar"===s.config.chart.type)&&s.config.plotOptions.bar.distributed||"heatmap"===s.config.chart.type||"treemap"===s.config.chart.type?i.seriesNumber:i.seriesNumber%s.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(i){var s=this.w;this.opts=i;var r,l,h,d=this.w.config;this.seriesIndex=this.getSeriesIndex(i);var u=this.getFillColors()[this.seriesIndex];void 0!==s.globals.seriesColors[this.seriesIndex]&&(u=s.globals.seriesColors[this.seriesIndex]),"function"==typeof u&&(u=u({seriesIndex:this.seriesIndex,dataPointIndex:i.dataPointIndex,value:i.value,w:s}));var p=this.getFillType(this.seriesIndex),m=Array.isArray(d.fill.opacity)?d.fill.opacity[this.seriesIndex]:d.fill.opacity;i.color&&(u=i.color);var v=u;if(-1===u.indexOf("rgb")?u.length<9&&(v=B.hexToRgba(u,m)):u.indexOf("rgba")>-1&&(m=B.getOpacityFromRGBA(u)),i.opacity&&(m=i.opacity),"pattern"===p&&(l=this.handlePatternFill(l,u,m,v)),"gradient"===p&&(h=this.handleGradientFill(u,m,this.seriesIndex)),"image"===p){var b=d.fill.image.src,_=i.patternID?i.patternID:"";this.clippedImgArea({opacity:m,image:Array.isArray(b)?i.seriesNumber<b.length?b[i.seriesNumber]:b[0]:b,width:i.width?i.width:void 0,height:i.height?i.height:void 0,patternUnits:i.patternUnits,patternID:"pattern".concat(s.globals.cuid).concat(i.seriesNumber+1).concat(_)}),r="url(#pattern".concat(s.globals.cuid).concat(i.seriesNumber+1).concat(_,")")}else r="gradient"===p?h:"pattern"===p?l:v;return i.solid&&(r=v),r}},{key:"getFillType",value:function(i){var s=this.w;return Array.isArray(s.config.fill.type)?s.config.fill.type[i]:s.config.fill.type}},{key:"getFillColors",value:function(){var i=this.w,s=i.config,r=this.opts,l=[];return i.globals.comboCharts?"line"===i.config.series[this.seriesIndex].type?Array.isArray(i.globals.stroke.colors)?l=i.globals.stroke.colors:l.push(i.globals.stroke.colors):Array.isArray(i.globals.fill.colors)?l=i.globals.fill.colors:l.push(i.globals.fill.colors):"line"===s.chart.type?Array.isArray(i.globals.stroke.colors)?l=i.globals.stroke.colors:l.push(i.globals.stroke.colors):Array.isArray(i.globals.fill.colors)?l=i.globals.fill.colors:l.push(i.globals.fill.colors),void 0!==r.fillColors&&(l=[],Array.isArray(r.fillColors)?l=r.fillColors.slice():l.push(r.fillColors)),l}},{key:"handlePatternFill",value:function(i,s,r,l){var h=this.w.config,d=this.opts,u=new U(this.ctx),p=void 0===h.fill.pattern.strokeWidth?Array.isArray(h.stroke.width)?h.stroke.width[this.seriesIndex]:h.stroke.width:Array.isArray(h.fill.pattern.strokeWidth)?h.fill.pattern.strokeWidth[this.seriesIndex]:h.fill.pattern.strokeWidth,m=s;return Array.isArray(h.fill.pattern.style)?void 0!==h.fill.pattern.style[d.seriesNumber]?u.drawPattern(h.fill.pattern.style[d.seriesNumber],h.fill.pattern.width,h.fill.pattern.height,m,p,r):l:u.drawPattern(h.fill.pattern.style,h.fill.pattern.width,h.fill.pattern.height,m,p,r)}},{key:"handleGradientFill",value:function(i,s,r){var l,h=this.w.config,d=this.opts,u=new U(this.ctx),p=new B,m=h.fill.gradient.type,v=i,b=void 0===h.fill.gradient.opacityFrom?s:Array.isArray(h.fill.gradient.opacityFrom)?h.fill.gradient.opacityFrom[r]:h.fill.gradient.opacityFrom;v.indexOf("rgba")>-1&&(b=B.getOpacityFromRGBA(v));var _=void 0===h.fill.gradient.opacityTo?s:Array.isArray(h.fill.gradient.opacityTo)?h.fill.gradient.opacityTo[r]:h.fill.gradient.opacityTo;if(void 0===h.fill.gradient.gradientToColors||0===h.fill.gradient.gradientToColors.length)l=p.shadeColor("dark"===h.fill.gradient.shade?-1*parseFloat(h.fill.gradient.shadeIntensity):parseFloat(h.fill.gradient.shadeIntensity),i.indexOf("rgb")>-1?B.rgb2hex(i):i);else if(h.fill.gradient.gradientToColors[d.seriesNumber]){var A=h.fill.gradient.gradientToColors[d.seriesNumber];l=A,A.indexOf("rgba")>-1&&(_=B.getOpacityFromRGBA(A))}else l=i;if(h.fill.gradient.inverseColors){var E=v;v=l,l=E}return v.indexOf("rgb")>-1&&(v=B.rgb2hex(v)),l.indexOf("rgb")>-1&&(l=B.rgb2hex(l)),u.drawGradient(m,v,l,b,_,d.size,h.fill.gradient.stops,h.fill.gradient.colorStops,r)}}]),P}(),Lt=function(){function P(i,s){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"setGlobalMarkerSize",value:function(){var i=this.w;if(i.globals.markers.size=Array.isArray(i.config.markers.size)?i.config.markers.size:[i.config.markers.size],i.globals.markers.size.length>0){if(i.globals.markers.size.length<i.globals.series.length+1)for(var s=0;s<=i.globals.series.length;s++)void 0===i.globals.markers.size[s]&&i.globals.markers.size.push(i.globals.markers.size[0])}else i.globals.markers.size=i.config.series.map(function(r){return i.config.markers.size})}},{key:"plotChartMarkers",value:function(i,s,r,l){var h,d=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=this.w,p=s,m=i,v=null,b=new U(this.ctx),_=u.config.markers.discrete&&u.config.markers.discrete.length;if((u.globals.markers.size[s]>0||d||_)&&(v=b.group({class:d||_?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(u.globals.cuid,")")),Array.isArray(m.x))for(var A=0;A<m.x.length;A++){var E=r;1===r&&0===A&&(E=0),1===r&&1===A&&(E=1);var k="apexcharts-marker";"line"!==u.config.chart.type&&"area"!==u.config.chart.type||u.globals.comboCharts||u.config.tooltip.intersect||(k+=" no-pointer-events");var R=Array.isArray(u.config.markers.size)?u.globals.markers.size[s]>0:u.config.markers.size>0;if(R||d||_){B.isNumber(m.y[A])?k+=" w".concat(B.randomId()):k="apexcharts-nullpoint";var O=this.getMarkerConfig({cssClass:k,seriesIndex:s,dataPointIndex:E});u.config.series[p].data[E]&&(u.config.series[p].data[E].fillColor&&(O.pointFillColor=u.config.series[p].data[E].fillColor),u.config.series[p].data[E].strokeColor&&(O.pointStrokeColor=u.config.series[p].data[E].strokeColor)),l&&(O.pSize=l),(h=b.drawMarker(m.x[A],m.y[A],O)).attr("rel",E),h.attr("j",E),h.attr("index",s),h.node.setAttribute("default-marker-size",O.pSize);var N=new ct(this.ctx);N.setSelectionFilter(h,s,E),this.addEvents(h),v&&v.add(h)}else void 0===u.globals.pointsArray[s]&&(u.globals.pointsArray[s]=[]),u.globals.pointsArray[s].push([m.x[A],m.y[A]])}return v}},{key:"getMarkerConfig",value:function(i){var s=i.cssClass,r=i.seriesIndex,l=i.dataPointIndex,h=void 0===l?null:l,d=i.finishRadius,u=void 0===d?null:d,p=this.w,m=this.getMarkerStyle(r),v=p.globals.markers.size[r],b=p.config.markers;return null!==h&&b.discrete.length&&b.discrete.map(function(_){_.seriesIndex===r&&_.dataPointIndex===h&&(m.pointStrokeColor=_.strokeColor,m.pointFillColor=_.fillColor,v=_.size,m.pointShape=_.shape)}),{pSize:null===u?v:u,pRadius:b.radius,width:Array.isArray(b.width)?b.width[r]:b.width,height:Array.isArray(b.height)?b.height[r]:b.height,pointStrokeWidth:Array.isArray(b.strokeWidth)?b.strokeWidth[r]:b.strokeWidth,pointStrokeColor:m.pointStrokeColor,pointFillColor:m.pointFillColor,shape:m.pointShape||(Array.isArray(b.shape)?b.shape[r]:b.shape),class:s,pointStrokeOpacity:Array.isArray(b.strokeOpacity)?b.strokeOpacity[r]:b.strokeOpacity,pointStrokeDashArray:Array.isArray(b.strokeDashArray)?b.strokeDashArray[r]:b.strokeDashArray,pointFillOpacity:Array.isArray(b.fillOpacity)?b.fillOpacity[r]:b.fillOpacity,seriesIndex:r}}},{key:"addEvents",value:function(i){var s=this.w,r=new U(this.ctx);i.node.addEventListener("mouseenter",r.pathMouseEnter.bind(this.ctx,i)),i.node.addEventListener("mouseleave",r.pathMouseLeave.bind(this.ctx,i)),i.node.addEventListener("mousedown",r.pathMouseDown.bind(this.ctx,i)),i.node.addEventListener("click",s.config.markers.onClick),i.node.addEventListener("dblclick",s.config.markers.onDblClick),i.node.addEventListener("touchstart",r.pathMouseDown.bind(this.ctx,i),{passive:!0})}},{key:"getMarkerStyle",value:function(i){var s=this.w,r=s.globals.markers.colors,l=s.config.markers.strokeColor||s.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(l)?l[i]:l,pointFillColor:Array.isArray(r)?r[i]:r}}}]),P}(),_i=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return rt(P,[{key:"draw",value:function(i,s,r){var l=this.w,h=new U(this.ctx),d=r.realIndex,u=r.pointsPos,p=r.zRatio,m=r.elParent,v=h.group({class:"apexcharts-series-markers apexcharts-series-".concat(l.config.chart.type)});if(v.attr("clip-path","url(#gridRectMarkerMask".concat(l.globals.cuid,")")),Array.isArray(u.x))for(var b=0;b<u.x.length;b++){var _=s+1,A=!0;0===s&&0===b&&(_=0),0===s&&1===b&&(_=1);var E=0,k=l.globals.markers.size[d];if(p!==1/0){k=l.globals.seriesZ[d][_]/p;var R=l.config.plotOptions.bubble;R.minBubbleRadius&&k<R.minBubbleRadius&&(k=R.minBubbleRadius),R.maxBubbleRadius&&k>R.maxBubbleRadius&&(k=R.maxBubbleRadius)}l.config.chart.animations.enabled||(E=k);var N=u.y[b];if(E=E||0,null!==N&&void 0!==l.globals.series[d][_]||(A=!1),A){var z=this.drawPoint(u.x[b],N,E,k,d,_,s);v.add(z)}m.add(v)}}},{key:"drawPoint",value:function(i,s,r,l,h,d,u){var p=this.w,m=h,v=new ft(this.ctx),b=new ct(this.ctx),_=new se(this.ctx),A=new Lt(this.ctx),E=new U(this.ctx),k=A.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:m,dataPointIndex:d,finishRadius:"bubble"===p.config.chart.type||p.globals.comboCharts&&p.config.series[h]&&"bubble"===p.config.series[h].type?l:null});l=k.pSize;var R,O=_.fillPath({seriesNumber:h,dataPointIndex:d,color:k.pointFillColor,patternUnits:"objectBoundingBox",value:p.globals.series[h][u]});if("circle"===k.shape?R=E.drawCircle(r):"square"!==k.shape&&"rect"!==k.shape||(R=E.drawRect(0,0,k.width-k.pointStrokeWidth/2,k.height-k.pointStrokeWidth/2,k.pRadius)),p.config.series[m].data[d]&&p.config.series[m].data[d].fillColor&&(O=p.config.series[m].data[d].fillColor),R.attr({x:i-k.width/2-k.pointStrokeWidth/2,y:s-k.height/2-k.pointStrokeWidth/2,cx:i,cy:s,fill:O,"fill-opacity":k.pointFillOpacity,stroke:k.pointStrokeColor,r:l,"stroke-width":k.pointStrokeWidth,"stroke-dasharray":k.pointStrokeDashArray,"stroke-opacity":k.pointStrokeOpacity}),p.config.chart.dropShadow.enabled&&b.dropShadow(R,p.config.chart.dropShadow,h),!this.initialAnim||p.globals.dataChanged||p.globals.resized?p.globals.animationEnded=!0:v.animateMarker(R,0,"circle"===k.shape?l:{width:k.width,height:k.height},p.config.chart.animations.speed,p.globals.easing,function(){window.setTimeout(function(){v.animationCompleted(R)},100)}),p.globals.dataChanged&&"circle"===k.shape)if(this.dynamicAnim){var x,C,T,L,W=p.config.chart.animations.dynamicAnimation.speed;null!=(L=p.globals.previousPaths[h]&&p.globals.previousPaths[h][u])&&(x=L.x,C=L.y,T=void 0!==L.r?L.r:l);for(var J=0;J<p.globals.collapsedSeries.length;J++)p.globals.collapsedSeries[J].index===h&&(W=1,l=0);0===i&&0===s&&(l=0),v.animateCircle(R,{cx:x,cy:C,r:T},{cx:i,cy:s,r:l},W,p.globals.easing)}else R.attr({r:l});return R.attr({rel:d,j:d,index:h,"default-marker-size":l}),b.setSelectionFilter(R,h,d),A.addEvents(R),R.node.classList.add("apexcharts-marker"),R}},{key:"centerTextInBubble",value:function(i){return{y:i+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),P}(),Xe=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"dataLabelsCorrection",value:function(i,s,r,l,h,d,u){var p=this.w,m=!1,v=new U(this.ctx).getTextRects(r,u),b=v.width,_=v.height;if(s<0&&(s=0),s>p.globals.gridHeight+_&&(s=p.globals.gridHeight+_/2),void 0===p.globals.dataLabelsRects[l]&&(p.globals.dataLabelsRects[l]=[]),p.globals.dataLabelsRects[l].push({x:i,y:s,width:b,height:_}),void 0!==p.globals.dataLabelsRects[l][p.globals.dataLabelsRects[l].length-2]){var k=p.globals.dataLabelsRects[l][void 0!==p.globals.lastDrawnDataLabelsIndexes[l]?p.globals.lastDrawnDataLabelsIndexes[l][p.globals.lastDrawnDataLabelsIndexes[l].length-1]:0];(i>k.x+k.width+2||s>k.y+k.height+2||i+b<k.x)&&(m=!0)}return(0===h||d)&&(m=!0),{x:i,y:s,textRects:v,drawnextLabel:m}}},{key:"drawDataLabel",value:function(i,s,r){var l=this,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,d=this.w,u=new U(this.ctx),p=d.config.dataLabels,m=0,v=0,b=r,_=null;if(!p.enabled||!Array.isArray(i.x))return _;_=u.group({class:"apexcharts-data-labels"});for(var A=0;A<i.x.length;A++)if(m=i.x[A]+p.offsetX,v=i.y[A]+p.offsetY+h,!isNaN(m)){1===r&&0===A&&(b=0),1===r&&1===A&&(b=1);var E=d.globals.series[s][b],k="",R=function(z){return d.config.dataLabels.formatter(z,{ctx:l.ctx,seriesIndex:s,dataPointIndex:b,w:d})};if("bubble"===d.config.chart.type){k=R(E=d.globals.seriesZ[s][b]),v=i.y[A];var O=new _i(this.ctx),N=O.centerTextInBubble(v,s,b);v=N.y}else void 0!==E&&(k=R(E));this.plotDataLabelsText({x:m,y:v,text:k,i:s,j:b,parent:_,offsetCorrection:!0,dataLabelsConfig:d.config.dataLabels})}return _}},{key:"plotDataLabelsText",value:function(i){var s=this.w,r=new U(this.ctx),l=i.x,h=i.y,d=i.i,u=i.j,p=i.text,m=i.textAnchor,v=i.fontSize,b=i.parent,_=i.dataLabelsConfig,A=i.color,E=i.alwaysDrawDataLabel,k=i.offsetCorrection;if(!(Array.isArray(s.config.dataLabels.enabledOnSeries)&&s.config.dataLabels.enabledOnSeries.indexOf(d)<0)){var R={x:l,y:h,drawnextLabel:!0,textRects:null};k&&(R=this.dataLabelsCorrection(l,h,p,d,u,E,parseInt(_.style.fontSize,10))),s.globals.zoomed||(l=R.x,h=R.y),R.textRects&&(l<-10-R.textRects.width||l>s.globals.gridWidth+R.textRects.width+10)&&(p="");var O=s.globals.dataLabels.style.colors[d];(("bar"===s.config.chart.type||"rangeBar"===s.config.chart.type)&&s.config.plotOptions.bar.distributed||s.config.dataLabels.distributed)&&(O=s.globals.dataLabels.style.colors[u]),"function"==typeof O&&(O=O({series:s.globals.series,seriesIndex:d,dataPointIndex:u,w:s})),A&&(O=A);var N=_.offsetX,z=_.offsetY;if("bar"!==s.config.chart.type&&"rangeBar"!==s.config.chart.type||(N=0,z=0),R.drawnextLabel){var x=r.drawText({width:100,height:parseInt(_.style.fontSize,10),x:l+N,y:h+z,foreColor:O,textAnchor:m||_.textAnchor,text:p,fontSize:v||_.style.fontSize,fontFamily:_.style.fontFamily,fontWeight:_.style.fontWeight||"normal"});if(x.attr({class:"apexcharts-datalabel",cx:l,cy:h}),_.dropShadow.enabled){var C=_.dropShadow;new ct(this.ctx).dropShadow(x,C)}b.add(x),void 0===s.globals.lastDrawnDataLabelsIndexes[d]&&(s.globals.lastDrawnDataLabelsIndexes[d]=[]),s.globals.lastDrawnDataLabelsIndexes[d].push(u)}}}},{key:"addBackgroundToDataLabel",value:function(i,s){var r=this.w,l=r.config.dataLabels.background,h=l.padding,d=l.padding/2,u=s.width,p=s.height,m=new U(this.ctx).drawRect(s.x-h,s.y-d/2,u+2*h,p+d,l.borderRadius,"transparent"===r.config.chart.background?"#fff":r.config.chart.background,l.opacity,l.borderWidth,l.borderColor);return l.dropShadow.enabled&&new ct(this.ctx).dropShadow(m,l.dropShadow),m}},{key:"dataLabelsBackground",value:function(){var i=this.w;if("bubble"!==i.config.chart.type)for(var s=i.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),r=0;r<s.length;r++){var l=s[r],h=l.getBBox(),d=null;if(h.width&&h.height&&(d=this.addBackgroundToDataLabel(l,h)),d){l.parentNode.insertBefore(d.node,l);var u=l.getAttribute("fill");!i.config.chart.animations.enabled||i.globals.resized||i.globals.dataChanged?d.attr({fill:u}):d.animate().attr({fill:u}),l.setAttribute("fill",i.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var i=this.w,s=i.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),r=i.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),l=0;l<s.length;l++)r&&r.insertBefore(s[l],r.nextSibling)}}]),P}(),ri=function(){function P(i){lt(this,P),this.w=i.w,this.barCtx=i}return rt(P,[{key:"handleBarDataLabels",value:function(i){var s=i.x,r=i.y,l=i.y1,h=i.y2,d=i.i,u=i.j,p=i.realIndex,m=i.series,v=i.barHeight,b=i.barWidth,_=i.barYPosition,A=i.visibleSeries,E=i.renderedPath,k=this.w,R=new U(this.barCtx.ctx),O=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[p]:this.barCtx.strokeWidth,N=s+parseFloat(b*A),z=r+parseFloat(v*A);k.globals.isXNumeric&&!k.globals.isBarHorizontal&&(N=s+parseFloat(b*(A+1)),z=r+parseFloat(v*(A+1))-O);var T,x=s,C=r,L=k.config.dataLabels,W=this.barCtx.barOptions.dataLabels;void 0!==_&&this.barCtx.isRangeBar&&(z=_,C=_);var J=L.offsetX,H=L.offsetY,et={width:0,height:0};k.config.dataLabels.enabled&&(et=R.getTextRects(k.globals.yLabelFormatters[0](this.barCtx.series[d][u]),parseFloat(L.style.fontSize)));var at={x:s,y:r,i:d,j:u,renderedPath:E,bcx:N,bcy:z,barHeight:v,barWidth:b,textRects:et,strokeWidth:O,dataLabelsX:x,dataLabelsY:C,barDataLabelsConfig:W,offX:J,offY:H};return T=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(at):this.calculateColumnsDataLabelsPosition(at),E.attr({cy:T.bcy,cx:T.bcx,j:u,val:m[d][u],barHeight:v,barWidth:b}),this.drawCalculatedDataLabels({x:T.dataLabelsX,y:T.dataLabelsY,val:this.barCtx.isRangeBar?[l,h]:m[d][u],i:p,j:u,barWidth:b,barHeight:v,textRects:et,dataLabelsConfig:L})}},{key:"calculateColumnsDataLabelsPosition",value:function(i){var s,r=this.w,l=i.i,h=i.j,d=i.y,u=i.bcx,p=i.barWidth,m=i.barHeight,v=i.textRects,b=i.dataLabelsY,_=i.barDataLabelsConfig,A=i.strokeWidth,E=i.offX,k=i.offY;m=Math.abs(m);var R="vertical"===r.config.plotOptions.bar.dataLabels.orientation;u-=A/2,s=r.globals.isXNumeric?u-p/2+E:u-r.globals.gridWidth/r.globals.dataPoints+p/2+E,R&&(s=s+v.height/2-A/2-2);var N=this.barCtx.series[l][h]<0,z=d;switch(this.barCtx.isReversed&&(z=d-m+(N?2*m:0),d-=m),_.position){case"center":b=R?N?z+m/2+k:z+m/2-k:N?z-m/2+v.height/2+k:z+m/2+v.height/2-k;break;case"bottom":b=R?N?z+m+k:z+m-k:N?z-m+v.height+A+k:z+m-v.height/2+A-k;break;case"top":b=R?N?z+k:z-k:N?z-v.height/2-k:z+v.height+k}return r.config.chart.stacked||(b<0?b=0+A:b+v.height/3>r.globals.gridHeight&&(b=r.globals.gridHeight-A)),{bcx:u,bcy:d,dataLabelsX:s,dataLabelsY:b}}},{key:"calculateBarsDataLabelsPosition",value:function(i){var s=this.w,r=i.x,l=i.i,h=i.j,d=i.bcy,u=i.barHeight,p=i.barWidth,m=i.textRects,v=i.dataLabelsX,b=i.strokeWidth,_=i.barDataLabelsConfig,A=i.offX,E=i.offY,k=s.globals.gridHeight/s.globals.dataPoints;p=Math.abs(p);var R=d-(this.barCtx.isRangeBar?0:k)+u/2+m.height/2+E-3,O=this.barCtx.series[l][h]<0,N=r;switch(this.barCtx.isReversed&&(N=r+p-(O?2*p:0),r=s.globals.gridWidth-p),_.position){case"center":v=O?N+p/2-A:Math.max(m.width/2,N-p/2)+A;break;case"bottom":v=O?N+p-b-Math.round(m.width/2)-A:N-p+b+Math.round(m.width/2)+A;break;case"top":v=O?N-b+Math.round(m.width/2)-A:N-b-Math.round(m.width/2)+A}return s.config.chart.stacked||(v<0?v=v+m.width+b:v+m.width/2>s.globals.gridWidth&&(v=s.globals.gridWidth-m.width-b)),{bcx:r,bcy:d,dataLabelsX:v,dataLabelsY:R}}},{key:"drawCalculatedDataLabels",value:function(i){var s=i.x,r=i.y,l=i.val,h=i.i,d=i.j,u=i.textRects,p=i.barHeight,m=i.barWidth,v=i.dataLabelsConfig,b=this.w,_="rotate(0)";"vertical"===b.config.plotOptions.bar.dataLabels.orientation&&(_="rotate(-90, ".concat(s,", ").concat(r,")"));var A=new Xe(this.barCtx.ctx),E=new U(this.barCtx.ctx),k=v.formatter,R=null,O=b.globals.collapsedSeriesIndices.indexOf(h)>-1;if(v.enabled&&!O){R=E.group({class:"apexcharts-data-labels",transform:_});var N="";void 0!==l&&(N=k(l,{seriesIndex:h,dataPointIndex:d,w:b}));var z=b.globals.series[h][d]<0,x=b.config.plotOptions.bar.dataLabels.position;"vertical"===b.config.plotOptions.bar.dataLabels.orientation&&("top"===x&&(v.textAnchor=z?"end":"start"),"center"===x&&(v.textAnchor="middle"),"bottom"===x&&(v.textAnchor=z?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&m<E.getTextRects(N,parseFloat(v.style.fontSize)).width&&(N=""),b.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?u.width/1.6>Math.abs(m)&&(N=""):u.height/1.6>Math.abs(p)&&(N=""));var C=Mt({},v);this.barCtx.isHorizontal&&l<0&&("start"===v.textAnchor?C.textAnchor="end":"end"===v.textAnchor&&(C.textAnchor="start")),A.plotDataLabelsText({x:s,y:r,text:N,i:h,j:d,parent:R,dataLabelsConfig:C,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return R}}]),P}(),bt=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w,this.legendInactiveClass="legend-mouseover-inactive"}return rt(P,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(i){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(B.escapeString(i),"']"))}},{key:"isSeriesHidden",value:function(i){var s=this.getSeriesByName(i),r=parseInt(s.getAttribute("data:realIndex"),10);return{isHidden:s.classList.contains("apexcharts-series-collapsed"),realIndex:r}}},{key:"addCollapsedClassToSeries",value:function(i,s){var r=this.w;function l(h){for(var d=0;d<h.length;d++)h[d].index===s&&i.node.classList.add("apexcharts-series-collapsed")}l(r.globals.collapsedSeries),l(r.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(i){var s=this.isSeriesHidden(i);return this.ctx.legend.legendHelpers.toggleDataSeries(s.realIndex,s.isHidden),s.isHidden}},{key:"showSeries",value:function(i){var s=this.isSeriesHidden(i);s.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(s.realIndex,!0)}},{key:"hideSeries",value:function(i){var s=this.isSeriesHidden(i);s.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(s.realIndex,!1)}},{key:"resetSeries",value:function(){var i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=this.w,h=B.clone(l.globals.initialSeries);l.globals.previousPaths=[],r?(l.globals.collapsedSeries=[],l.globals.ancillaryCollapsedSeries=[],l.globals.collapsedSeriesIndices=[],l.globals.ancillaryCollapsedSeriesIndices=[]):h=this.emptyCollapsedSeries(h),l.config.series=h,i&&(s&&(l.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(h,l.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(i){for(var s=this.w,r=0;r<i.length;r++)s.globals.collapsedSeriesIndices.indexOf(r)>-1&&(i[r].data=[]);return i}},{key:"toggleSeriesOnHover",value:function(i,s){var r=this.w;s||(s=i.target);var l=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===i.type){var h=parseInt(s.getAttribute("rel"),10)-1,d=null,u=null;r.globals.axisCharts||"radialBar"===r.config.chart.type?r.globals.axisCharts?(d=r.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(h,"']")),u=r.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(h,"']"))):d=r.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(h+1,"']")):d=r.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(h+1,"'] path"));for(var p=0;p<l.length;p++)l[p].classList.add(this.legendInactiveClass);null!==d&&(r.globals.axisCharts||d.parentNode.classList.remove(this.legendInactiveClass),d.classList.remove(this.legendInactiveClass),null!==u&&u.classList.remove(this.legendInactiveClass))}else if("mouseout"===i.type)for(var m=0;m<l.length;m++)l[m].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(i,s){var r=this,l=this.w,h=l.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),d=function(p){for(var m=0;m<h.length;m++)h[m].classList[p](r.legendInactiveClass)};if("mousemove"===i.type){var u=parseInt(s.getAttribute("rel"),10)-1;d("add"),function(p){for(var m=0;m<h.length;m++){var v=parseInt(h[m].getAttribute("val"),10);v>=p.from&&v<=p.to&&h[m].classList.remove(r.legendInactiveClass)}}(l.config.plotOptions.heatmap.colorScale.ranges[u])}else"mouseout"===i.type&&d("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",r=this.w,l=0;if(r.config.series.length>1)for(var h=r.config.series.map(function(u,p){var m=!1;return i&&(m="bar"===r.config.series[p].type||"column"===r.config.series[p].type),u.data&&u.data.length>0&&!m?p:-1}),d="asc"===s?0:h.length-1;"asc"===s?d<h.length:d>=0;"asc"===s?d++:d--)if(-1!==h[d]){l=h[d];break}return l}},{key:"getPreviousPaths",value:function(){var i=this.w;function s(d,u,p){for(var m=d[u].childNodes,v={type:p,paths:[],realIndex:d[u].getAttribute("data:realIndex")},b=0;b<m.length;b++)if(m[b].hasAttribute("pathTo")){var _=m[b].getAttribute("pathTo");v.paths.push({d:_})}i.globals.previousPaths.push(v)}i.globals.previousPaths=[],["line","area","bar","rangebar","candlestick","radar"].forEach(function(d){for(var p=i.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(d,"-series .apexcharts-series")),m=0;m<p.length;m++)s(p,m,d)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var r=i.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(i.config.chart.type," .apexcharts-series"));if(r.length>0)for(var l=function(d){for(var u=i.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(i.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(d,"'] rect")),p=[],m=function(b){var _=function(E){return u[b].getAttribute(E)},A={x:parseFloat(_("x")),y:parseFloat(_("y")),width:parseFloat(_("width")),height:parseFloat(_("height"))};p.push({rect:A,color:u[b].getAttribute("color")})},v=0;v<u.length;v++)m(v);i.globals.previousPaths.push(p)},h=0;h<r.length;h++)l(h);i.globals.axisCharts||(i.globals.previousPaths=i.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(i){var s=this.w,r=s.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(i,"-series .apexcharts-series"));if(r.length>0)for(var l=0;l<r.length;l++){for(var h=s.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(i,"-series .apexcharts-series[data\\:realIndex='").concat(l,"'] circle")),d=[],u=0;u<h.length;u++)d.push({x:h[u].getAttribute("cx"),y:h[u].getAttribute("cy"),r:h[u].getAttribute("r")});s.globals.previousPaths.push(d)}}},{key:"clearPreviousPaths",value:function(){var i=this.w;i.globals.previousPaths=[],i.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var i=this.w,s=i.config.noData,r=new U(this.ctx),l=i.globals.svgWidth/2,h=i.globals.svgHeight/2,d="middle";if(i.globals.noData=!0,i.globals.animationEnded=!0,"left"===s.align?(l=10,d="start"):"right"===s.align&&(l=i.globals.svgWidth-10,d="end"),"top"===s.verticalAlign?h=50:"bottom"===s.verticalAlign&&(h=i.globals.svgHeight-50),l+=s.offsetX,h=h+parseInt(s.style.fontSize,10)+2+s.offsetY,void 0!==s.text&&""!==s.text){var u=r.drawText({x:l,y:h,text:s.text,textAnchor:d,fontSize:s.style.fontSize,fontFamily:s.style.fontFamily,foreColor:s.style.color,opacity:1,class:"apexcharts-text-nodata"});i.globals.dom.Paper.add(u)}}},{key:"setNullSeriesToZeroValues",value:function(i){for(var s=this.w,r=0;r<i.length;r++)if(0===i[r].length)for(var l=0;l<i[s.globals.maxValsInArrayIndex].length;l++)i[r].push(0);return i}},{key:"hasAllSeriesEqualX",value:function(){for(var i=!0,s=this.w,r=this.filteredSeriesX(),l=0;l<r.length-1;l++)if(r[l][0]!==r[l+1][0]){i=!1;break}return s.globals.allSeriesHasEqualX=i,i}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(s){return s.length>0?s:[]})}}]),P}(),Cr=function(){function P(i){lt(this,P),this.w=i.w,this.barCtx=i}return rt(P,[{key:"initVariables",value:function(i){var s=this.w;this.barCtx.series=i,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var r=0;r<i.length;r++)if(i[r].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=i[r].length),s.globals.isXNumeric)for(var l=0;l<i[r].length;l++)s.globals.seriesX[r][l]>s.globals.minX&&s.globals.seriesX[r][l]<s.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=s.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=i.length-1,s.globals.comboCharts||this.checkZeroSeries({series:i})}},{key:"initialPositions",value:function(){var i,s,r,l,h,d,u,p,m=this.w,v=m.globals.dataPoints;this.barCtx.isRangeBar&&(v=m.globals.labels.length);var b=this.barCtx.seriesLen;if(m.config.plotOptions.bar.rangeBarGroupRows&&(b=1),this.barCtx.isHorizontal)h=(r=m.globals.gridHeight/v)/b,m.globals.isXNumeric&&(h=(r=m.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),h=h*parseInt(this.barCtx.barOptions.barHeight,10)/100,p=this.barCtx.baseLineInvertedY+m.globals.padHorizontal+(this.barCtx.isReversed?m.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),s=(r-h*this.barCtx.seriesLen)/2;else{if(l=m.globals.gridWidth/this.barCtx.visibleItems,m.config.xaxis.convertedCatToNumeric&&(l=m.globals.gridWidth/m.globals.dataPoints),d=l/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,m.globals.isXNumeric){var _=this.barCtx.xRatio;m.config.xaxis.convertedCatToNumeric&&(_=this.barCtx.initialXRatio),m.globals.minXDiff&&.5!==m.globals.minXDiff&&m.globals.minXDiff/_>0&&(l=m.globals.minXDiff/_),(d=l/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(d=1)}u=m.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?m.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),i=m.globals.padHorizontal+(l-d*this.barCtx.seriesLen)/2}return{x:i,y:s,yDivision:r,xDivision:l,barHeight:h,barWidth:d,zeroH:u,zeroW:p}}},{key:"getPathFillColor",value:function(i,s,r,l){var h=this.w,d=new se(this.barCtx.ctx),u=null,p=this.barCtx.barOptions.distributed?r:s;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(m){i[s][r]>=m.from&&i[s][r]<=m.to&&(u=m.color)}),h.config.series[s].data[r]&&h.config.series[s].data[r].fillColor&&(u=h.config.series[s].data[r].fillColor),d.fillPath({seriesNumber:this.barCtx.barOptions.distributed?p:l,dataPointIndex:r,color:u,value:i[s][r]})}},{key:"getStrokeWidth",value:function(i,s,r){var l=0,h=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[i][s],h.config.stroke.show&&(this.barCtx.isNullValue||(l=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[r]:this.barCtx.strokeWidth)),l}},{key:"barBackground",value:function(i){var s=i.j,r=i.i,l=i.x1,h=i.x2,d=i.y1,u=i.y2,p=i.elSeries,m=this.w,v=new U(this.barCtx.ctx),b=new bt(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&b===r){s>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(s%=this.barCtx.barOptions.colors.backgroundBarColors.length);var A=v.drawRect(void 0!==l?l:0,void 0!==d?d:0,void 0!==h?h:m.globals.gridWidth,void 0!==u?u:m.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[s],this.barCtx.barOptions.colors.backgroundBarOpacity);p.add(A),A.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(i){var s=i.barWidth,r=i.barXPosition,l=i.yRatio,h=i.y1,d=i.y2,u=i.strokeWidth,p=i.series,m=i.realIndex,v=i.i,b=i.j,_=i.w,A=new U(this.barCtx.ctx);(u=Array.isArray(u)?u[m]:u)||(u=0);var k=this.getRoundedBars(_,{barWidth:s,strokeWidth:u,yRatio:l,barXPosition:r,y1:h,y2:d},p,v,b),R=r,O=r+s,N=A.move(R,h),z=A.move(R,h),x=A.line(O-u,h);return _.globals.previousPaths.length>0&&(z=this.barCtx.getPreviousPath(m,b,!1)),N=N+A.line(R,k.y2)+k.pathWithRadius+A.line(O-u,k.y2)+x+x+"z",z=z+A.line(R,h)+x+x+x+x+x+A.line(R,h),_.config.chart.stacked&&(this.barCtx.yArrj.push(k.y2WithRadius),this.barCtx.yArrjF.push(Math.abs(h-k.y2WithRadius)),this.barCtx.yArrjVal.push(this.barCtx.series[v][b])),{pathTo:N,pathFrom:z}}},{key:"getBarpaths",value:function(i){var s=i.barYPosition,r=i.barHeight,l=i.x1,h=i.x2,d=i.strokeWidth,u=i.series,p=i.realIndex,m=i.i,v=i.j,b=i.w,_=new U(this.barCtx.ctx);(d=Array.isArray(d)?d[p]:d)||(d=0);var E=this.getRoundedBars(b,{barHeight:r,strokeWidth:d,barYPosition:s,x2:h,x1:l},u,m,v),k=_.move(l,s),R=_.move(l,s);b.globals.previousPaths.length>0&&(R=this.barCtx.getPreviousPath(p,v,!1));var O=s,N=s+r,z=_.line(l,N-d);return k=k+_.line(E.x2,O)+E.pathWithRadius+_.line(E.x2,N-d)+z+z+"z",R=R+_.line(l,O)+z+z+z+z+z+_.line(l,O),b.config.chart.stacked&&(this.barCtx.xArrj.push(E.x2WithRadius),this.barCtx.xArrjF.push(Math.abs(l-E.x2WithRadius)),this.barCtx.xArrjVal.push(this.barCtx.series[m][v])),{pathTo:k,pathFrom:R}}},{key:"getRoundedBars",value:function(i,s,r,l,h){var d=new U(this.barCtx.ctx),u=0,p=i.config.plotOptions.bar.borderRadius,m=Array.isArray(p);if(u=m?p[l>p.length-1?p.length-1:l]:p,i.config.chart.stacked&&r.length>1&&l!==this.barCtx.radiusOnSeriesNumber&&!m&&(u=0),this.barCtx.isHorizontal){var v="",b=s.x2;if(Math.abs(s.x1-s.x2)<u&&(u=Math.abs(s.x1-s.x2)),void 0!==r[l][h]||null!==r[l][h]){var _=this.barCtx.isReversed?r[l][h]>0:r[l][h]<0;_&&(u*=-1),v=d.quadraticCurve((b-=u)+u,s.barYPosition,b+u,s.barYPosition+(_?-1*u:u))+d.line(b+u,s.barYPosition+s.barHeight-s.strokeWidth-(_?-1*u:u))+d.quadraticCurve(b+u,s.barYPosition+s.barHeight-s.strokeWidth,b,s.barYPosition+s.barHeight-s.strokeWidth)}return{pathWithRadius:v,x2WithRadius:b+u,x2:b}}var A="",E=s.y2;if(Math.abs(s.y1-s.y2)<u&&(u=Math.abs(s.y1-s.y2)),void 0!==r[l][h]||null!==r[l][h]){var k=r[l][h]<0;k&&(u*=-1),A=d.quadraticCurve(s.barXPosition,(E+=u)-u,s.barXPosition+(k?-1*u:u),E-u)+d.line(s.barXPosition+s.barWidth-s.strokeWidth-(k?-1*u:u),E-u)+d.quadraticCurve(s.barXPosition+s.barWidth-s.strokeWidth,E-u,s.barXPosition+s.barWidth-s.strokeWidth,E)}return{pathWithRadius:A,y2WithRadius:E-u,y2:E}}},{key:"checkZeroSeries",value:function(i){for(var s=i.series,r=this.w,l=0;l<s.length;l++){for(var h=0,d=0;d<s[r.globals.maxValsInArrayIndex].length;d++)h+=s[l][d];0===h&&this.barCtx.zeroSerieses.push(l)}for(var u=s.length-1;u>=0;u--)this.barCtx.zeroSerieses.indexOf(u)>-1&&u===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var p=s.length-1;p>=0;p--)r.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}},{key:"getXForValue",value:function(i,s){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=r?s:null;return null!=i&&(l=s+i/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?i/this.barCtx.invertedYRatio:0)),l}},{key:"getYForValue",value:function(i,s){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=r?s:null;return null!=i&&(l=s-i/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?i/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),l}},{key:"getGoalValues",value:function(i,s,r,l,h){var d=this,u=this.w,p=[];return u.globals.seriesGoals[l]&&u.globals.seriesGoals[l][h]&&Array.isArray(u.globals.seriesGoals[l][h])&&u.globals.seriesGoals[l][h].forEach(function(m){var v;p.push((Bi(v={},i,"x"===i?d.getXForValue(m.value,s,!1):d.getYForValue(m.value,r,!1)),Bi(v,"attrs",m),v))}),p}},{key:"drawGoalLine",value:function(i){var s=i.barXPosition,r=i.barYPosition,l=i.goalX,h=i.goalY,d=i.barWidth,u=i.barHeight,p=new U(this.barCtx.ctx),m=p.group({className:"apexcharts-bar-goals-groups"}),v=null;return this.barCtx.isHorizontal?Array.isArray(l)&&l.forEach(function(b){var _=void 0!==b.attrs.strokeHeight?b.attrs.strokeHeight:u/2,A=r+_+u/2;v=p.drawLine(b.x,A-2*_,b.x,A,b.attrs.strokeColor?b.attrs.strokeColor:void 0,b.attrs.strokeDashArray,b.attrs.strokeWidth?b.attrs.strokeWidth:2,b.attrs.strokeLineCap),m.add(v)}):Array.isArray(h)&&h.forEach(function(b){var _=void 0!==b.attrs.strokeWidth?b.attrs.strokeWidth:d/2,A=s+_+d/2;v=p.drawLine(A-2*_,b.y,A,b.y,b.attrs.strokeColor?b.attrs.strokeColor:void 0,b.attrs.strokeDashArray,b.attrs.strokeHeight?b.attrs.strokeHeight:2,b.attrs.strokeLineCap),m.add(v)}),m}}]),P}(),Dt=function(){function P(i,s){lt(this,P),this.ctx=i,this.w=i.w;var r=this.w;this.barOptions=r.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=r.config.stroke.width,this.isNullValue=!1,this.isRangeBar=r.globals.seriesRangeBar.length&&this.isHorizontal,this.xyRatios=s,null!==this.xyRatios&&(this.xRatio=s.xRatio,this.initialXRatio=s.initialXRatio,this.yRatio=s.yRatio,this.invertedXRatio=s.invertedXRatio,this.invertedYRatio=s.invertedYRatio,this.baseLineY=s.baseLineY,this.baseLineInvertedY=s.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new Cr(this)}return rt(P,[{key:"draw",value:function(i,s){var r=this.w,l=new U(this.ctx),h=new wt(this.ctx,r);i=h.getLogSeries(i),this.series=i,this.yRatio=h.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i);var d=l.group({class:"apexcharts-bar-series apexcharts-plot-series"});r.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var u=0,p=0;u<i.length;u++,p++){var m,v,b,_,A=void 0,E=void 0,k=[],R=[],O=r.globals.comboCharts?s[u]:u,N=l.group({class:"apexcharts-series",rel:u+1,seriesName:B.escapeString(r.globals.seriesNames[O]),"data:realIndex":O});this.ctx.series.addCollapsedClassToSeries(N,O),i[u].length>0&&(this.visibleI=this.visibleI+1);var z=0,x=0;this.yRatio.length>1&&(this.yaxisIndex=O),this.isReversed=r.config.yaxis[this.yaxisIndex]&&r.config.yaxis[this.yaxisIndex].reversed;var C=this.barHelpers.initialPositions();E=C.y,z=C.barHeight,v=C.yDivision,_=C.zeroW,A=C.x,x=C.barWidth,m=C.xDivision,b=C.zeroH,this.horizontal||R.push(A+x/2);for(var T=l.group({class:"apexcharts-datalabels","data:realIndex":O}),L=l.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),W=0;W<r.globals.dataPoints;W++){var J=this.barHelpers.getStrokeWidth(u,W,O),H=null,et={indexes:{i:u,j:W,realIndex:O,bc:p},x:A,y:E,strokeWidth:J,elSeries:N};this.isHorizontal?(H=this.drawBarPaths(Mt(Mt({},et),{},{barHeight:z,zeroW:_,yDivision:v})),x=this.series[u][W]/this.invertedYRatio):(H=this.drawColumnPaths(Mt(Mt({},et),{},{xDivision:m,barWidth:x,zeroH:b})),z=this.series[u][W]/this.yRatio[this.yaxisIndex]);var tt=this.barHelpers.drawGoalLine({barXPosition:H.barXPosition,barYPosition:H.barYPosition,goalX:H.goalX,goalY:H.goalY,barHeight:z,barWidth:x});tt&&L.add(tt),E=H.y,A=H.x,W>0&&R.push(A+x/2),k.push(E);var at=this.barHelpers.getPathFillColor(i,u,W,O);this.renderSeries({realIndex:O,pathFill:at,j:W,i:u,pathFrom:H.pathFrom,pathTo:H.pathTo,strokeWidth:J,elSeries:N,x:A,y:E,series:i,barHeight:z,barWidth:x,elDataLabelsWrap:T,elGoalsMarkers:L,visibleSeries:this.visibleI,type:"bar"})}r.globals.seriesXvalues[O]=R,r.globals.seriesYvalues[O]=k,d.add(N)}return d}},{key:"renderSeries",value:function(i){var s=i.realIndex,r=i.pathFill,l=i.lineFill,h=i.j,d=i.i,u=i.pathFrom,p=i.pathTo,m=i.strokeWidth,v=i.elSeries,b=i.x,_=i.y,A=i.y1,E=i.y2,k=i.series,R=i.barHeight,O=i.barWidth,N=i.barYPosition,z=i.elDataLabelsWrap,x=i.elGoalsMarkers,C=i.visibleSeries,T=i.type,L=this.w,W=new U(this.ctx);l||(l=this.barOptions.distributed?L.globals.stroke.colors[h]:L.globals.stroke.colors[s]),L.config.series[d].data[h]&&L.config.series[d].data[h].strokeColor&&(l=L.config.series[d].data[h].strokeColor),this.isNullValue&&(r="none");var H=W.renderPaths({i:d,j:h,realIndex:s,pathFrom:u,pathTo:p,stroke:l,strokeWidth:m,strokeLineCap:L.config.stroke.lineCap,fill:r,animationDelay:h/L.config.chart.animations.animateGradually.delay*(L.config.chart.animations.speed/L.globals.dataPoints)/2.4,initialSpeed:L.config.chart.animations.speed,dataChangeSpeed:L.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(T,"-area")});H.attr("clip-path","url(#gridRectMask".concat(L.globals.cuid,")"));var et=L.config.forecastDataPoints;et.count>0&&h>=L.globals.dataPoints-et.count&&(H.node.setAttribute("stroke-dasharray",et.dashArray),H.node.setAttribute("stroke-width",et.strokeWidth),H.node.setAttribute("fill-opacity",et.fillOpacity)),void 0!==A&&void 0!==E&&(H.attr("data-range-y1",A),H.attr("data-range-y2",E)),new ct(this.ctx).setSelectionFilter(H,s,h),v.add(H);var tt=new ri(this).handleBarDataLabels({x:b,y:_,y1:A,y2:E,i:d,j:h,series:k,realIndex:s,barHeight:R,barWidth:O,barYPosition:N,renderedPath:H,visibleSeries:C});return null!==tt&&z.add(tt),v.add(z),x&&v.add(x),v}},{key:"drawBarPaths",value:function(i){var d,s=i.indexes,r=i.barHeight,l=i.strokeWidth,h=i.zeroW,u=i.y,p=i.yDivision,m=i.elSeries,v=this.w,b=s.i,_=s.j;v.globals.isXNumeric&&(u=(v.globals.seriesX[b][_]-v.globals.minX)/this.invertedXRatio-r);var A=u+r*this.visibleI;d=this.barHelpers.getXForValue(this.series[b][_],h);var E=this.barHelpers.getBarpaths({barYPosition:A,barHeight:r,x1:h,x2:d,strokeWidth:l,series:this.series,realIndex:s.realIndex,i:b,j:_,w:v});return v.globals.isXNumeric||(u+=p),this.barHelpers.barBackground({j:_,i:b,y1:A-r*this.visibleI,y2:r*this.seriesLen,elSeries:m}),{pathTo:E.pathTo,pathFrom:E.pathFrom,x:d,y:u,goalX:this.barHelpers.getGoalValues("x",h,null,b,_),barYPosition:A}}},{key:"drawColumnPaths",value:function(i){var l,s=i.indexes,r=i.x,h=i.xDivision,d=i.barWidth,u=i.zeroH,p=i.strokeWidth,m=i.elSeries,v=this.w,b=s.realIndex,_=s.i,A=s.j,E=s.bc;if(v.globals.isXNumeric){var k=b;v.globals.seriesX[b].length||(k=v.globals.maxValsInArrayIndex),r=(v.globals.seriesX[k][A]-v.globals.minX)/this.xRatio-d*this.seriesLen/2}var R=r+d*this.visibleI;l=this.barHelpers.getYForValue(this.series[_][A],u);var O=this.barHelpers.getColumnPaths({barXPosition:R,barWidth:d,y1:u,y2:l,strokeWidth:p,series:this.series,realIndex:s.realIndex,i:_,j:A,w:v});return v.globals.isXNumeric||(r+=h),this.barHelpers.barBackground({bc:E,j:A,i:_,x1:R-p/2-d*this.visibleI,x2:d*this.seriesLen+p/2,elSeries:m}),{pathTo:O.pathTo,pathFrom:O.pathFrom,x:r,y:l,goalY:this.barHelpers.getGoalValues("y",null,u,_,A),barXPosition:R}}},{key:"getPreviousPath",value:function(i,s){for(var r,l=this.w,h=0;h<l.globals.previousPaths.length;h++){var d=l.globals.previousPaths[h];d.paths&&d.paths.length>0&&parseInt(d.realIndex,10)===parseInt(i,10)&&void 0!==l.globals.previousPaths[h].paths[s]&&(r=l.globals.previousPaths[h].paths[s].d)}return r}}]),P}(),xe=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return rt(P,[{key:"isValidDate",value:function(i){return!isNaN(this.parseDate(i))}},{key:"getTimeStamp",value:function(i){return Date.parse(i)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(i).toISOString().substr(0,25)).getTime():new Date(i).getTime():i}},{key:"getDate",value:function(i){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(i).toUTCString()):new Date(i)}},{key:"parseDate",value:function(i){var s=Date.parse(i);if(!isNaN(s))return this.getTimeStamp(i);var r=Date.parse(i.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(r)}},{key:"parseDateWithTimezone",value:function(i){return Date.parse(i.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(i,s){var r=this.w.globals.locale,l=this.w.config.xaxis.labels.datetimeUTC,h=["\0"].concat(K(r.months)),d=["\x01"].concat(K(r.shortMonths)),u=["\x02"].concat(K(r.days)),p=["\x03"].concat(K(r.shortDays));function m(W,J){var H=W+"";for(J=J||2;H.length<J;)H="0"+H;return H}var v=l?i.getUTCFullYear():i.getFullYear();s=(s=(s=s.replace(/(^|[^\\])yyyy+/g,"$1"+v)).replace(/(^|[^\\])yy/g,"$1"+v.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+v);var b=(l?i.getUTCMonth():i.getMonth())+1;s=(s=(s=(s=s.replace(/(^|[^\\])MMMM+/g,"$1"+h[0])).replace(/(^|[^\\])MMM/g,"$1"+d[0])).replace(/(^|[^\\])MM/g,"$1"+m(b))).replace(/(^|[^\\])M/g,"$1"+b);var _=l?i.getUTCDate():i.getDate();s=(s=(s=(s=s.replace(/(^|[^\\])dddd+/g,"$1"+u[0])).replace(/(^|[^\\])ddd/g,"$1"+p[0])).replace(/(^|[^\\])dd/g,"$1"+m(_))).replace(/(^|[^\\])d/g,"$1"+_);var A=l?i.getUTCHours():i.getHours(),E=A>12?A-12:0===A?12:A;s=(s=(s=(s=s.replace(/(^|[^\\])HH+/g,"$1"+m(A))).replace(/(^|[^\\])H/g,"$1"+A)).replace(/(^|[^\\])hh+/g,"$1"+m(E))).replace(/(^|[^\\])h/g,"$1"+E);var k=l?i.getUTCMinutes():i.getMinutes();s=(s=s.replace(/(^|[^\\])mm+/g,"$1"+m(k))).replace(/(^|[^\\])m/g,"$1"+k);var R=l?i.getUTCSeconds():i.getSeconds();s=(s=s.replace(/(^|[^\\])ss+/g,"$1"+m(R))).replace(/(^|[^\\])s/g,"$1"+R);var O=l?i.getUTCMilliseconds():i.getMilliseconds();s=s.replace(/(^|[^\\])fff+/g,"$1"+m(O,3)),O=Math.round(O/10),s=s.replace(/(^|[^\\])ff/g,"$1"+m(O)),O=Math.round(O/10);var N=A<12?"AM":"PM";s=(s=(s=s.replace(/(^|[^\\])f/g,"$1"+O)).replace(/(^|[^\\])TT+/g,"$1"+N)).replace(/(^|[^\\])T/g,"$1"+N.charAt(0));var z=N.toLowerCase();s=(s=s.replace(/(^|[^\\])tt+/g,"$1"+z)).replace(/(^|[^\\])t/g,"$1"+z.charAt(0));var x=-i.getTimezoneOffset(),C=l||!x?"Z":x>0?"+":"-";if(!l){var T=(x=Math.abs(x))%60;C+=m(Math.floor(x/60))+":"+m(T)}s=s.replace(/(^|[^\\])K/g,"$1"+C);var L=(l?i.getUTCDay():i.getDay())+1;return(s=(s=(s=(s=s.replace(new RegExp(u[0],"g"),u[L])).replace(new RegExp(p[0],"g"),p[L])).replace(new RegExp(h[0],"g"),h[b])).replace(new RegExp(d[0],"g"),d[b])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(i,s,r){var l=this.w;void 0!==l.config.xaxis.min&&(i=l.config.xaxis.min),void 0!==l.config.xaxis.max&&(s=l.config.xaxis.max);var h=this.getDate(i),d=this.getDate(s),u=this.formatDate(h,"yyyy MM dd HH mm ss fff").split(" "),p=this.formatDate(d,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(u[6],10),maxMillisecond:parseInt(p[6],10),minSecond:parseInt(u[5],10),maxSecond:parseInt(p[5],10),minMinute:parseInt(u[4],10),maxMinute:parseInt(p[4],10),minHour:parseInt(u[3],10),maxHour:parseInt(p[3],10),minDate:parseInt(u[2],10),maxDate:parseInt(p[2],10),minMonth:parseInt(u[1],10)-1,maxMonth:parseInt(p[1],10)-1,minYear:parseInt(u[0],10),maxYear:parseInt(p[0],10)}}},{key:"isLeapYear",value:function(i){return i%4==0&&i%100!=0||i%400==0}},{key:"calculcateLastDaysOfMonth",value:function(i,s,r){return this.determineDaysOfMonths(i,s)-r}},{key:"determineDaysOfYear",value:function(i){var s=365;return this.isLeapYear(i)&&(s=366),s}},{key:"determineRemainingDaysOfYear",value:function(i,s,r){var l=this.daysCntOfYear[s]+r;return s>1&&this.isLeapYear()&&l++,l}},{key:"determineDaysOfMonths",value:function(i,s){var r=30;switch(i=B.monthMod(i),!0){case this.months30.indexOf(i)>-1:2===i&&(r=this.isLeapYear(s)?29:28);break;case this.months31.indexOf(i)>-1:default:r=31}return r}}]),P}(),Rs=function(P){ze(s,Dt);var i=Re(s);function s(){return lt(this,s),i.apply(this,arguments)}return rt(s,[{key:"draw",value:function(r,l){var h=this.w,d=new U(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=r,this.seriesRangeStart=h.globals.seriesRangeStart,this.seriesRangeEnd=h.globals.seriesRangeEnd,this.barHelpers.initVariables(r);for(var u=d.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),p=0;p<r.length;p++){var m,v,b,_=void 0,A=void 0,E=void 0,k=h.globals.comboCharts?l[p]:p,R=d.group({class:"apexcharts-series",seriesName:B.escapeString(h.globals.seriesNames[k]),rel:p+1,"data:realIndex":k});this.ctx.series.addCollapsedClassToSeries(R,k),r[p].length>0&&(this.visibleI=this.visibleI+1);var O=0,N=0;this.yRatio.length>1&&(this.yaxisIndex=k);var z=this.barHelpers.initialPositions();A=z.y,b=z.zeroW,_=z.x,N=z.barWidth,m=z.xDivision,v=z.zeroH;for(var x=d.group({class:"apexcharts-datalabels","data:realIndex":k}),C=d.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),T=0;T<h.globals.dataPoints;T++){var L=this.barHelpers.getStrokeWidth(p,T,k),W=this.seriesRangeStart[p][T],J=this.seriesRangeEnd[p][T],H=null,et=null,tt={x:_,y:A,strokeWidth:L,elSeries:R};if(E=z.yDivision,O=z.barHeight,this.isHorizontal){et=A+O*this.visibleI;var at=this.seriesLen;h.config.plotOptions.bar.rangeBarGroupRows&&(at=1);var pt=(E-O*at)/2;if(void 0===h.config.series[p].data[T])break;if(h.config.series[p].data[T].x){var Zt=this.detectOverlappingBars({i:p,j:T,barYPosition:et,srty:pt,barHeight:O,yDivision:E,initPositions:z});O=Zt.barHeight,et=Zt.barYPosition}N=(H=this.drawRangeBarPaths(Mt({indexes:{i:p,j:T,realIndex:k},barHeight:O,barYPosition:et,zeroW:b,yDivision:E,y1:W,y2:J},tt))).barWidth}else O=(H=this.drawRangeColumnPaths(Mt({indexes:{i:p,j:T,realIndex:k},zeroH:v,barWidth:N,xDivision:m},tt))).barHeight;var Xt=this.barHelpers.drawGoalLine({barXPosition:H.barXPosition,barYPosition:et,goalX:H.goalX,goalY:H.goalY,barHeight:O,barWidth:N});Xt&&C.add(Xt),A=H.y,_=H.x;var qt=this.barHelpers.getPathFillColor(r,p,T,k);this.renderSeries({realIndex:k,pathFill:qt,lineFill:h.globals.stroke.colors[k],j:T,i:p,x:_,y:A,y1:W,y2:J,pathFrom:H.pathFrom,pathTo:H.pathTo,strokeWidth:L,elSeries:R,series:r,barHeight:O,barYPosition:et,barWidth:N,elDataLabelsWrap:x,elGoalsMarkers:C,visibleSeries:this.visibleI,type:"rangebar"})}u.add(R)}return u}},{key:"detectOverlappingBars",value:function(r){var l=r.i,h=r.j,d=r.barYPosition,u=r.srty,p=r.barHeight,m=r.yDivision,v=r.initPositions,b=this.w,_=[],A=b.config.series[l].data[h].rangeName,E=b.config.series[l].data[h].x,k=b.globals.labels.indexOf(E),R=b.globals.seriesRangeBar[l].findIndex(function(O){return O.x===E&&O.overlaps.length>0});return d=b.config.plotOptions.bar.rangeBarGroupRows?u+m*k:u+p*this.visibleI+m*k,R>-1&&!b.config.plotOptions.bar.rangeBarOverlap&&(_=b.globals.seriesRangeBar[l][R].overlaps).indexOf(A)>-1&&(d=(p=v.barHeight/_.length)*this.visibleI+m*(100-parseInt(this.barOptions.barHeight,10))/100/2+p*(this.visibleI+_.indexOf(A))+m*k),{barYPosition:d,barHeight:p}}},{key:"drawRangeColumnPaths",value:function(r){var l=r.indexes,h=r.x,d=r.xDivision,u=r.barWidth,p=r.zeroH,m=this.w,v=l.i,b=l.j,_=this.yRatio[this.yaxisIndex],A=l.realIndex,E=this.getRangeValue(A,b),k=Math.min(E.start,E.end),R=Math.max(E.start,E.end);m.globals.isXNumeric&&(h=(m.globals.seriesX[v][b]-m.globals.minX)/this.xRatio-u/2);var O=h+u*this.visibleI;null==this.series[v][b]?k=p:(k=p-k/_,R=p-R/_);var N=Math.abs(R-k),z=this.barHelpers.getColumnPaths({barXPosition:O,barWidth:u,y1:k,y2:R,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:l.realIndex,i:A,j:b,w:m});return m.globals.isXNumeric||(h+=d),{pathTo:z.pathTo,pathFrom:z.pathFrom,barHeight:N,x:h,y:R,goalY:this.barHelpers.getGoalValues("y",null,p,v,b),barXPosition:O}}},{key:"drawRangeBarPaths",value:function(r){var l=r.indexes,h=r.y,p=r.yDivision,m=r.barHeight,v=r.barYPosition,b=r.zeroW,_=this.w,A=b+r.y1/this.invertedYRatio,E=b+r.y2/this.invertedYRatio,k=Math.abs(E-A),R=this.barHelpers.getBarpaths({barYPosition:v,barHeight:m,x1:A,x2:E,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:l.realIndex,realIndex:l.realIndex,j:l.j,w:_});return _.globals.isXNumeric||(h+=p),{pathTo:R.pathTo,pathFrom:R.pathFrom,barWidth:k,x:E,goalX:this.barHelpers.getGoalValues("x",b,null,l.realIndex,l.j),y:h}}},{key:"getRangeValue",value:function(r,l){var h=this.w;return{start:h.globals.seriesRangeStart[r][l],end:h.globals.seriesRangeEnd[r][l]}}},{key:"getTooltipValues",value:function(r){var l=r.ctx,h=r.seriesIndex,d=r.dataPointIndex,u=r.y1,p=r.y2,m=r.w,v=m.globals.seriesRangeStart[h][d],b=m.globals.seriesRangeEnd[h][d],_=m.globals.labels[d],A=m.config.series[h].name?m.config.series[h].name:"",E=m.config.tooltip.y.formatter,k=m.config.tooltip.y.title.formatter,R={w:m,seriesIndex:h,dataPointIndex:d,start:v,end:b};"function"==typeof k&&(A=k(A,R)),Number.isFinite(u)&&Number.isFinite(p)&&(v=u,b=p,m.config.series[h].data[d].x&&(_=m.config.series[h].data[d].x+":"),"function"==typeof E&&(_=E(_,R)));var O="",N="",z=m.globals.colors[h];if(void 0===m.config.tooltip.x.formatter)if("datetime"===m.config.xaxis.type){var x=new xe(l);O=x.formatDate(x.getDate(v),m.config.tooltip.x.format),N=x.formatDate(x.getDate(b),m.config.tooltip.x.format)}else O=v,N=b;else O=m.config.tooltip.x.formatter(v),N=m.config.tooltip.x.formatter(b);return{start:v,end:b,startVal:O,endVal:N,ylabel:_,color:z,seriesName:A}}},{key:"buildCustomTooltipHTML",value:function(r){return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+r.color+'">'+(r.seriesName||"")+'</span></div><div> <span class="category">'+r.ylabel+' </span> <span class="value start-value">'+r.start+'</span> <span class="separator">-</span> <span class="value end-value">'+r.end+"</span></div></div>"}}]),s}(),us=function(){function P(i){lt(this,P),this.opts=i}return rt(P,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(i){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,B.extend(i,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var i=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(s){return i._getBoxTooltip(s.w,s.seriesIndex,s.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var i=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(s){return i._getBoxTooltip(s.w,s.seriesIndex,s.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(i,s){var r=s.seriesIndex,l=s.dataPointIndex,h=s.w;return h.globals.seriesRangeEnd[r][l]-h.globals.seriesRangeStart[r][l]},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(i){return i.w.config.plotOptions&&i.w.config.plotOptions.bar&&i.w.config.plotOptions.bar.horizontal?(l=(r=new Rs((s=i).ctx,null)).getTooltipValues(s),r.buildCustomTooltipHTML({color:l.color,seriesName:l.seriesName,ylabel:l.ylabel,start:l.startVal,end:l.endVal})):function(s){var r=new Rs(s.ctx,null),l=r.getTooltipValues(s);return r.buildCustomTooltipHTML({color:l.color,seriesName:l.seriesName,ylabel:l.ylabel,start:l.start,end:l.end})}(i);var s,r,l}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(i){return B.extend(i,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(i){i.dataLabels=i.dataLabels||{},i.dataLabels.formatter=i.dataLabels.formatter||void 0;var s=i.dataLabels.formatter;return i.yaxis.forEach(function(r,l){i.yaxis[l].min=0,i.yaxis[l].max=100}),"bar"===i.chart.type&&(i.dataLabels.formatter=s||function(r){return"number"==typeof r&&r?r.toFixed(0)+"%":r}),i}},{key:"convertCatToNumeric",value:function(i){return i.xaxis.convertedCatToNumeric=!0,i}},{key:"convertCatToNumericXaxis",value:function(i,s,r){i.xaxis.type="numeric",i.xaxis.labels=i.xaxis.labels||{},i.xaxis.labels.formatter=i.xaxis.labels.formatter||function(d){return B.isNumber(d)?Math.floor(d):d};var l=i.xaxis.labels.formatter,h=i.xaxis.categories&&i.xaxis.categories.length?i.xaxis.categories:i.labels;return r&&r.length&&(h=r.map(function(d){return Array.isArray(d)?d:String(d)})),h&&h.length&&(i.xaxis.labels.formatter=function(d){return B.isNumber(d)?l(h[Math.floor(d)-1]):l(d)}),i.xaxis.categories=[],i.labels=[],i.xaxis.tickAmount=i.xaxis.tickAmount||"dataPoints",i}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(i){return i.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(i){return i.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(i){return i.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(i){return i},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(i,s,r,l,h){var d=i.globals.seriesCandleO[s][r],u=i.globals.seriesCandleH[s][r],p=i.globals.seriesCandleM[s][r],m=i.globals.seriesCandleL[s][r],v=i.globals.seriesCandleC[s][r];return i.config.series[s].type&&i.config.series[s].type!==h?'<div class="apexcharts-custom-tooltip">\n          '.concat(i.config.series[s].name?i.config.series[s].name:"series-"+(s+1),": <strong>").concat(i.globals.series[s][r],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(i.config.chart.type,'">')+"<div>".concat(l[0],': <span class="value">')+d+"</span></div>"+"<div>".concat(l[1],': <span class="value">')+u+"</span></div>"+(p?"<div>".concat(l[2],': <span class="value">')+p+"</span></div>":"")+"<div>".concat(l[3],': <span class="value">')+m+"</span></div>"+"<div>".concat(l[4],': <span class="value">')+v+"</span></div></div>"}}]),P}(),ye=function(){function P(i){lt(this,P),this.opts=i}return rt(P,[{key:"init",value:function(i){var s=i.responsiveOverride,r=this.opts,l=new yt,h=new us(r);this.chartType=r.chart.type,"histogram"===this.chartType&&(r.chart.type="bar",r=B.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},r)),r=this.extendYAxis(r),r=this.extendAnnotations(r);var d=l.init(),u={};if(r&&"object"===ee(r)){var p={};p=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(r.chart.type)?h[r.chart.type]():h.line(),r.chart.brush&&r.chart.brush.enabled&&(p=h.brush(p)),r.chart.stacked&&"100%"===r.chart.stackType&&(r=h.stacked100(r)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(r),r.xaxis=r.xaxis||window.Apex.xaxis||{},s||(r.xaxis.convertedCatToNumeric=!1),((r=this.checkForCatToNumericXAxis(this.chartType,p,r)).chart.sparkline&&r.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(p=h.sparkline(p)),u=B.extend(d,p)}var m=B.extend(u,window.Apex);return d=B.extend(m,r),this.handleUserInputErrors(d)}},{key:"checkForCatToNumericXAxis",value:function(i,s,r){var l=new us(r);return("bar"===i||"boxPlot"===i)&&r.plotOptions&&r.plotOptions.bar&&r.plotOptions.bar.horizontal||"pie"===i||"polarArea"===i||"donut"===i||"radar"===i||"radialBar"===i||"heatmap"===i||!("datetime"!==r.xaxis.type&&"numeric"!==r.xaxis.type)||"between"===(r.xaxis.tickPlacement?r.xaxis.tickPlacement:s.xaxis&&s.xaxis.tickPlacement)||(r=l.convertCatToNumeric(r)),r}},{key:"extendYAxis",value:function(i,s){var r=new yt;(void 0===i.yaxis||!i.yaxis||Array.isArray(i.yaxis)&&0===i.yaxis.length)&&(i.yaxis={}),i.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(i.yaxis=B.extend(i.yaxis,window.Apex.yaxis)),i.yaxis=i.yaxis.constructor!==Array?[B.extend(r.yAxis,i.yaxis)]:B.extendArray(i.yaxis,r.yAxis);var l=!1;i.yaxis.forEach(function(d){d.logarithmic&&(l=!0)});var h=i.series;return s&&!h&&(h=s.config.series),l&&h.length!==i.yaxis.length&&h.length&&(i.yaxis=h.map(function(d,u){if(d.name||(h[u].name="series-".concat(u+1)),i.yaxis[u])return i.yaxis[u].seriesName=h[u].name,i.yaxis[u];var p=B.extend(r.yAxis,i.yaxis[0]);return p.show=!1,p})),l&&h.length>1&&h.length!==i.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),i}},{key:"extendAnnotations",value:function(i){return void 0===i.annotations&&(i.annotations={},i.annotations.yaxis=[],i.annotations.xaxis=[],i.annotations.points=[]),i=this.extendYAxisAnnotations(i),i=this.extendXAxisAnnotations(i),this.extendPointAnnotations(i)}},{key:"extendYAxisAnnotations",value:function(i){var s=new yt;return i.annotations.yaxis=B.extendArray(void 0!==i.annotations.yaxis?i.annotations.yaxis:[],s.yAxisAnnotation),i}},{key:"extendXAxisAnnotations",value:function(i){var s=new yt;return i.annotations.xaxis=B.extendArray(void 0!==i.annotations.xaxis?i.annotations.xaxis:[],s.xAxisAnnotation),i}},{key:"extendPointAnnotations",value:function(i){var s=new yt;return i.annotations.points=B.extendArray(void 0!==i.annotations.points?i.annotations.points:[],s.pointAnnotation),i}},{key:"checkForDarkTheme",value:function(i){i.theme&&"dark"===i.theme.mode&&(i.tooltip||(i.tooltip={}),"light"!==i.tooltip.theme&&(i.tooltip.theme="dark"),i.chart.foreColor||(i.chart.foreColor="#f6f7f8"),i.chart.background||(i.chart.background="#424242"),i.theme.palette||(i.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(i){var s=i;if(s.tooltip.shared&&s.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===s.chart.type&&s.plotOptions.bar.horizontal){if(s.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");s.yaxis[0].reversed&&(s.yaxis[0].opposite=!0),s.xaxis.tooltip.enabled=!1,s.yaxis[0].tooltip.enabled=!1,s.chart.zoom.enabled=!1}return"bar"!==s.chart.type&&"rangeBar"!==s.chart.type||s.tooltip.shared&&"barWidth"===s.xaxis.crosshairs.width&&s.series.length>1&&(s.xaxis.crosshairs.width="tickWidth"),"candlestick"!==s.chart.type&&"boxPlot"!==s.chart.type||s.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(s.chart.type," chart is not supported.")),s.yaxis[0].reversed=!1),s}}]),P}(),Yt=function(){function P(){lt(this,P)}return rt(P,[{key:"initGlobalVars",value:function(i){i.series=[],i.seriesCandleO=[],i.seriesCandleH=[],i.seriesCandleM=[],i.seriesCandleL=[],i.seriesCandleC=[],i.seriesRangeStart=[],i.seriesRangeEnd=[],i.seriesRangeBar=[],i.seriesPercent=[],i.seriesGoals=[],i.seriesX=[],i.seriesZ=[],i.seriesNames=[],i.seriesTotals=[],i.seriesLog=[],i.seriesColors=[],i.stackedSeriesTotals=[],i.seriesXvalues=[],i.seriesYvalues=[],i.labels=[],i.hasGroups=!1,i.groups=[],i.categoryLabels=[],i.timescaleLabels=[],i.noLabelsProvided=!1,i.resizeTimer=null,i.selectionResizeTimer=null,i.delayedElements=[],i.pointsArray=[],i.dataLabelsRects=[],i.isXNumeric=!1,i.xaxisLabelsCount=0,i.skipLastTimelinelabel=!1,i.skipFirstTimelinelabel=!1,i.isDataXYZ=!1,i.isMultiLineX=!1,i.isMultipleYAxis=!1,i.maxY=-Number.MAX_VALUE,i.minY=Number.MIN_VALUE,i.minYArr=[],i.maxYArr=[],i.maxX=-Number.MAX_VALUE,i.minX=Number.MAX_VALUE,i.initialMaxX=-Number.MAX_VALUE,i.initialMinX=Number.MAX_VALUE,i.maxDate=0,i.minDate=Number.MAX_VALUE,i.minZ=Number.MAX_VALUE,i.maxZ=-Number.MAX_VALUE,i.minXDiff=Number.MAX_VALUE,i.yAxisScale=[],i.xAxisScale=null,i.xAxisTicksPositions=[],i.yLabelsCoords=[],i.yTitleCoords=[],i.barPadForNumericAxis=0,i.padHorizontal=0,i.xRange=0,i.yRange=[],i.zRange=0,i.dataPoints=0,i.xTickAmount=0}},{key:"globalVars",value:function(i){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:i.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===i.chart.toolbar.autoSelected&&i.chart.toolbar.tools.zoom&&i.chart.zoom.enabled,panEnabled:"pan"===i.chart.toolbar.autoSelected&&i.chart.toolbar.tools.pan,selectionEnabled:"selection"===i.chart.toolbar.autoSelected&&i.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(i){var s=this.globalVars(i);return this.initGlobalVars(s),s.initialConfig=B.extend({},i),s.initialSeries=B.clone(i.series),s.lastXAxis=B.clone(s.initialConfig.xaxis),s.lastYAxis=B.clone(s.initialConfig.yaxis),s}}]),P}(),Sr=function(){function P(i){lt(this,P),this.opts=i}return rt(P,[{key:"init",value:function(){var i=new ye(this.opts).init({responsiveOverride:!1});return{config:i,globals:(new Yt).init(i)}}}]),P}(),hn=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new wt(this.ctx)}return rt(P,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var i=this.w.config.series.slice(),s=new bt(this.ctx);if(this.activeSeriesIndex=s.getActiveConfigSeriesIndex(),void 0!==i[this.activeSeriesIndex].data&&i[this.activeSeriesIndex].data.length>0&&null!==i[this.activeSeriesIndex].data[0]&&void 0!==i[this.activeSeriesIndex].data[0].x&&null!==i[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var i=this.w.config.series.slice(),s=new bt(this.ctx);if(this.activeSeriesIndex=s.getActiveConfigSeriesIndex(),void 0!==i[this.activeSeriesIndex].data&&i[this.activeSeriesIndex].data.length>0&&null!=i[this.activeSeriesIndex].data[0]&&i[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(i,s){for(var r=this.w.config,l=this.w.globals,h="boxPlot"===r.chart.type||"boxPlot"===r.series[s].type,d=0;d<i[s].data.length;d++)if(void 0!==i[s].data[d][1]&&(Array.isArray(i[s].data[d][1])&&4===i[s].data[d][1].length&&!h?this.twoDSeries.push(B.parseNumber(i[s].data[d][1][3])):this.twoDSeries.push(B.parseNumber(i[s].data[d].length>=5?i[s].data[d][4]:i[s].data[d][1])),l.dataFormatXNumeric=!0),"datetime"===r.xaxis.type){var u=new Date(i[s].data[d][0]);u=new Date(u).getTime(),this.twoDSeriesX.push(u)}else this.twoDSeriesX.push(i[s].data[d][0]);for(var p=0;p<i[s].data.length;p++)void 0!==i[s].data[p][2]&&(this.threeDSeries.push(i[s].data[p][2]),l.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(i,s){var r=this.w.config,l=this.w.globals,h=new xe(this.ctx),d=s;l.collapsedSeriesIndices.indexOf(s)>-1&&(d=this.activeSeriesIndex);for(var u=0;u<i[s].data.length;u++)void 0!==i[s].data[u].y&&(Array.isArray(i[s].data[u].y)?this.twoDSeries.push(B.parseNumber(i[s].data[u].y[i[s].data[u].y.length-1])):this.twoDSeries.push(B.parseNumber(i[s].data[u].y))),void 0!==i[s].data[u].goals&&Array.isArray(i[s].data[u].goals)?(void 0===this.seriesGoals[s]&&(this.seriesGoals[s]=[]),this.seriesGoals[s].push(i[s].data[u].goals)):(void 0===this.seriesGoals[s]&&(this.seriesGoals[s]=[]),this.seriesGoals[s].push(null));for(var p=0;p<i[d].data.length;p++){var m="string"==typeof i[d].data[p].x,v=Array.isArray(i[d].data[p].x),b=!v&&!!h.isValidDate(i[d].data[p].x.toString());m||b?m||r.xaxis.convertedCatToNumeric?"datetime"!==r.xaxis.type||l.isBarHorizontal&&l.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(i[d].data[p].x)):this.twoDSeriesX.push(h.parseDate(i[d].data[p].x)):"datetime"===r.xaxis.type?this.twoDSeriesX.push(h.parseDate(i[d].data[p].x.toString())):(l.dataFormatXNumeric=!0,l.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(i[d].data[p].x))):v?(this.fallbackToCategory=!0,this.twoDSeriesX.push(i[d].data[p].x)):(l.isXNumeric=!0,l.dataFormatXNumeric=!0,this.twoDSeriesX.push(i[d].data[p].x))}if(i[s].data[0]&&void 0!==i[s].data[0].z){for(var A=0;A<i[s].data.length;A++)this.threeDSeries.push(i[s].data[A].z);l.isDataXYZ=!0}}},{key:"handleRangeData",value:function(i,s){var r=this.w.globals,l={};return this.isFormat2DArray()?l=this.handleRangeDataFormat("array",i,s):this.isFormatXY()&&(l=this.handleRangeDataFormat("xy",i,s)),r.seriesRangeStart.push(l.start),r.seriesRangeEnd.push(l.end),r.seriesRangeBar.push(l.rangeUniques),r.seriesRangeBar.forEach(function(h,d){h&&h.forEach(function(u,p){u.y.forEach(function(m,v){for(var b=0;b<u.y.length;b++)v!==b&&m.y1<=u.y[b].y2&&u.y[b].y1<=m.y2&&(u.overlaps.indexOf(m.rangeName)<0&&u.overlaps.push(m.rangeName),u.overlaps.indexOf(u.y[b].rangeName)<0&&u.overlaps.push(u.y[b].rangeName))})})}),l}},{key:"handleCandleStickBoxData",value:function(i,s){var r=this.w.globals,l={};return this.isFormat2DArray()?l=this.handleCandleStickBoxDataFormat("array",i,s):this.isFormatXY()&&(l=this.handleCandleStickBoxDataFormat("xy",i,s)),r.seriesCandleO[s]=l.o,r.seriesCandleH[s]=l.h,r.seriesCandleM[s]=l.m,r.seriesCandleL[s]=l.l,r.seriesCandleC[s]=l.c,l}},{key:"handleRangeDataFormat",value:function(i,s,r){var l=[],h=[],d=s[r].data.filter(function(_,A,E){return A===E.findIndex(function(k){return k.x===_.x})}).map(function(_,A){return{x:_.x,overlaps:[],y:[]}}),u="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",p=new bt(this.ctx).getActiveConfigSeriesIndex();if("array"===i){if(2!==s[p].data[0][1].length)throw new Error(u);for(var m=0;m<s[r].data.length;m++)l.push(s[r].data[m][1][0]),h.push(s[r].data[m][1][1])}else if("xy"===i){if(2!==s[p].data[0].y.length)throw new Error(u);for(var v=function(_){var A=B.randomId(),E=s[r].data[_].x,k={y1:s[r].data[_].y[0],y2:s[r].data[_].y[1],rangeName:A};s[r].data[_].rangeName=A;var R=d.findIndex(function(O){return O.x===E});d[R].y.push(k),l.push(k.y1),h.push(k.y2)},b=0;b<s[r].data.length;b++)v(b)}return{start:l,end:h,rangeUniques:d}}},{key:"handleCandleStickBoxDataFormat",value:function(i,s,r){var l=this.w,h="boxPlot"===l.config.chart.type||"boxPlot"===l.config.series[r].type,d=[],u=[],p=[],m=[],v=[];if("array"===i)if(h&&6===s[r].data[0].length||!h&&5===s[r].data[0].length)for(var b=0;b<s[r].data.length;b++)d.push(s[r].data[b][1]),u.push(s[r].data[b][2]),h?(p.push(s[r].data[b][3]),m.push(s[r].data[b][4]),v.push(s[r].data[b][5])):(m.push(s[r].data[b][3]),v.push(s[r].data[b][4]));else for(var _=0;_<s[r].data.length;_++)Array.isArray(s[r].data[_][1])&&(d.push(s[r].data[_][1][0]),u.push(s[r].data[_][1][1]),h?(p.push(s[r].data[_][1][2]),m.push(s[r].data[_][1][3]),v.push(s[r].data[_][1][4])):(m.push(s[r].data[_][1][2]),v.push(s[r].data[_][1][3])));else if("xy"===i)for(var A=0;A<s[r].data.length;A++)Array.isArray(s[r].data[A].y)&&(d.push(s[r].data[A].y[0]),u.push(s[r].data[A].y[1]),h?(p.push(s[r].data[A].y[2]),m.push(s[r].data[A].y[3]),v.push(s[r].data[A].y[4])):(m.push(s[r].data[A].y[2]),v.push(s[r].data[A].y[3])));return{o:d,h:u,m:p,l:m,c:v}}},{key:"parseDataAxisCharts",value:function(i){var s=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,l=this.w.config,h=this.w.globals,d=new xe(r),u=l.labels.length>0?l.labels.slice():l.xaxis.categories.slice();h.isRangeBar="rangeBar"===l.chart.type&&h.isBarHorizontal,h.hasGroups="category"===l.xaxis.type&&l.xaxis.group.groups.length>0,h.hasGroups&&(h.groups=l.xaxis.group.groups);for(var p=function(){for(var b=0;b<u.length;b++)if("string"==typeof u[b]){if(!d.isValidDate(u[b]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");s.twoDSeriesX.push(d.parseDate(u[b]))}else s.twoDSeriesX.push(u[b])},m=0;m<i.length;m++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===i[m].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==l.chart.type&&"rangeArea"!==l.chart.type&&"rangeBar"!==i[m].type&&"rangeArea"!==i[m].type||(h.isRangeData=!0,this.handleRangeData(i,m)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(i,m):this.isFormatXY()&&this.handleFormatXY(i,m),"candlestick"!==l.chart.type&&"candlestick"!==i[m].type&&"boxPlot"!==l.chart.type&&"boxPlot"!==i[m].type||this.handleCandleStickBoxData(i,m),h.series.push(this.twoDSeries),h.labels.push(this.twoDSeriesX),h.seriesX.push(this.twoDSeriesX),h.seriesGoals=this.seriesGoals,m!==this.activeSeriesIndex||this.fallbackToCategory||(h.isXNumeric=!0);else{"datetime"===l.xaxis.type?(h.isXNumeric=!0,p(),h.seriesX.push(this.twoDSeriesX)):"numeric"===l.xaxis.type&&(h.isXNumeric=!0,u.length>0&&(this.twoDSeriesX=u,h.seriesX.push(this.twoDSeriesX))),h.labels.push(this.twoDSeriesX);var v=i[m].data.map(function(b){return B.parseNumber(b)});h.series.push(v)}h.seriesZ.push(this.threeDSeries),h.seriesNames.push(void 0!==i[m].name?i[m].name:"series-"+parseInt(m+1,10)),h.seriesColors.push(void 0!==i[m].color?i[m].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(i){var s=this.w.globals,r=this.w.config;s.series=i.slice(),s.seriesNames=r.labels.slice();for(var l=0;l<s.series.length;l++)void 0===s.seriesNames[l]&&s.seriesNames.push("series-"+(l+1));return this.w}},{key:"handleExternalLabelsData",value:function(i){var s=this.w.config,r=this.w.globals;s.xaxis.categories.length>0?r.labels=s.xaxis.categories:s.labels.length>0?r.labels=s.labels.slice():this.fallbackToCategory?(r.labels=r.labels[0],r.seriesRangeBar.length&&(r.seriesRangeBar.map(function(l){l.forEach(function(h){r.labels.indexOf(h.x)<0&&h.x&&r.labels.push(h.x)})}),r.labels=r.labels.filter(function(l,h,d){return d.indexOf(l)===h})),s.xaxis.convertedCatToNumeric&&(new us(s).convertCatToNumericXaxis(s,this.ctx,r.seriesX[0]),this._generateExternalLabels(i))):this._generateExternalLabels(i)}},{key:"_generateExternalLabels",value:function(i){var s=this.w.globals,r=this.w.config,l=[];if(s.axisCharts){if(s.series.length>0)if(this.isFormatXY())for(var h=r.series.map(function(b,_){return b.data.filter(function(A,E,k){return k.findIndex(function(R){return R.x===A.x})===E})}),d=h.reduce(function(b,_,A,E){return E[b].length>_.length?b:A},0),u=0;u<h[d].length;u++)l.push(u+1);else for(var p=0;p<s.series[s.maxValsInArrayIndex].length;p++)l.push(p+1);s.seriesX=[];for(var m=0;m<i.length;m++)s.seriesX.push(l);s.isXNumeric=!0}if(0===l.length){l=s.axisCharts?[]:s.series.map(function(b,_){return _+1});for(var v=0;v<i.length;v++)s.seriesX.push(l)}s.labels=l,r.xaxis.convertedCatToNumeric&&(s.categoryLabels=l.map(function(b){return r.xaxis.labels.formatter(b)})),s.noLabelsProvided=!0}},{key:"parseData",value:function(i){var s=this.w,r=s.config,l=s.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),l.axisCharts?this.parseDataAxisCharts(i):this.parseDataNonAxisCharts(i),this.coreUtils.getLargestSeries(),"bar"===r.chart.type&&r.chart.stacked){var h=new bt(this.ctx);l.series=h.setNullSeriesToZeroValues(l.series)}this.coreUtils.getSeriesTotals(),l.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),l.dataFormatXNumeric||l.isXNumeric&&("numeric"!==r.xaxis.type||0!==r.labels.length||0!==r.xaxis.categories.length)||this.handleExternalLabelsData(i);for(var d=this.coreUtils.getCategoryLabels(l.labels),u=0;u<d.length;u++)if(Array.isArray(d[u])){l.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var i=this,s=this.w;s.globals.ignoreYAxisIndexes=s.globals.collapsedSeries.map(function(r,l){if(i.w.globals.isMultipleYAxis&&!s.config.chart.stacked)return r.index})}}]),P}(),ds=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w,this.tooltipKeyFormat="dd MMM"}return rt(P,[{key:"xLabelFormat",value:function(i,s,r,l){var h=this.w;if("datetime"===h.config.xaxis.type&&void 0===h.config.xaxis.labels.formatter&&void 0===h.config.tooltip.x.formatter){var d=new xe(this.ctx);return d.formatDate(d.getDate(s),h.config.tooltip.x.format)}return i(s,r,l)}},{key:"defaultGeneralFormatter",value:function(i){return Array.isArray(i)?i.map(function(s){return s}):i}},{key:"defaultYFormatter",value:function(i,s,r){var l=this.w;return B.isNumber(i)&&(i=i.toFixed(0!==l.globals.yValueDecimal?void 0!==s.decimalsInFloat?s.decimalsInFloat:l.globals.yValueDecimal:l.globals.maxYArr[r]-l.globals.minYArr[r]<5?1:0)),i}},{key:"setLabelFormatters",value:function(){var i=this,s=this.w;return s.globals.xaxisTooltipFormatter=function(r){return i.defaultGeneralFormatter(r)},s.globals.ttKeyFormatter=function(r){return i.defaultGeneralFormatter(r)},s.globals.ttZFormatter=function(r){return r},s.globals.legendFormatter=function(r){return i.defaultGeneralFormatter(r)},s.globals.xLabelFormatter=void 0!==s.config.xaxis.labels.formatter?s.config.xaxis.labels.formatter:function(r){if(B.isNumber(r)){if(!s.config.xaxis.convertedCatToNumeric&&"numeric"===s.config.xaxis.type){if(B.isNumber(s.config.xaxis.decimalsInFloat))return r.toFixed(s.config.xaxis.decimalsInFloat);var l=s.globals.maxX-s.globals.minX;return r.toFixed(l>0&&l<100?1:0)}return r.toFixed(s.globals.isBarHorizontal&&s.globals.maxY-s.globals.minYArr<4?1:0)}return r},s.globals.ttKeyFormatter="function"==typeof s.config.tooltip.x.formatter?s.config.tooltip.x.formatter:s.globals.xLabelFormatter,"function"==typeof s.config.xaxis.tooltip.formatter&&(s.globals.xaxisTooltipFormatter=s.config.xaxis.tooltip.formatter),(Array.isArray(s.config.tooltip.y)||void 0!==s.config.tooltip.y.formatter)&&(s.globals.ttVal=s.config.tooltip.y),void 0!==s.config.tooltip.z.formatter&&(s.globals.ttZFormatter=s.config.tooltip.z.formatter),void 0!==s.config.legend.formatter&&(s.globals.legendFormatter=s.config.legend.formatter),s.config.yaxis.forEach(function(r,l){s.globals.yLabelFormatters[l]=void 0!==r.labels.formatter?r.labels.formatter:function(h){return s.globals.xyCharts?Array.isArray(h)?h.map(function(d){return i.defaultYFormatter(d,r,l)}):i.defaultYFormatter(h,r,l):h}}),s.globals}},{key:"heatmapLabelFormatters",value:function(){var i=this.w;if("heatmap"===i.config.chart.type){i.globals.yAxisScale[0].result=i.globals.seriesNames.slice();var s=i.globals.seriesNames.reduce(function(r,l){return r.length>l.length?r:l},0);i.globals.yAxisScale[0].niceMax=s,i.globals.yAxisScale[0].niceMin=s}}}]),P}(),Tt=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"getLabel",value:function(i,s,r,l){var h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],p=this.w,m=void 0===i[l]?"":i[l],v=m,b=p.globals.xLabelFormatter,_=p.config.xaxis.labels.formatter,A=!1,E=new ds(this.ctx),k=m;u&&(v=E.xLabelFormat(b,m,k,{i:l,dateFormatter:new xe(this.ctx).formatDate,w:p}),void 0!==_&&(v=_(m,i[l],{i:l,dateFormatter:new xe(this.ctx).formatDate,w:p})));var R=function(x){var C=null;return s.forEach(function(T){"month"===T.unit?C="year":"day"===T.unit?C="month":"hour"===T.unit?C="day":"minute"===T.unit&&(C="hour")}),C===x};s.length>0?(A=R(s[l].unit),r=s[l].position,v=s[l].value):"datetime"===p.config.xaxis.type&&void 0===_&&(v=""),void 0===v&&(v=""),v=Array.isArray(v)?v:v.toString();var O=new U(this.ctx),N={};N=p.globals.rotateXLabels&&u?O.getTextRects(v,parseInt(d,10),null,"rotate(".concat(p.config.xaxis.labels.rotate," 0 0)"),!1):O.getTextRects(v,parseInt(d,10));var z=!p.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(v)&&(0===v.indexOf("NaN")||0===v.toLowerCase().indexOf("invalid")||v.toLowerCase().indexOf("infinity")>=0||h.indexOf(v)>=0&&z)&&(v=""),{x:r,text:v,textRect:N,isBold:A}}},{key:"checkLabelBasedOnTickamount",value:function(i,s,r){var l=this.w,h=l.config.xaxis.tickAmount;return"dataPoints"===h&&(h=Math.round(l.globals.gridWidth/120)),h>r||i%Math.round(r/(h+1))==0||(s.text=""),s}},{key:"checkForOverflowingLabels",value:function(i,s,r,l,h){var d=this.w;if(0===i&&d.globals.skipFirstTimelinelabel&&(s.text=""),i===r-1&&d.globals.skipLastTimelinelabel&&(s.text=""),d.config.xaxis.labels.hideOverlappingLabels&&l.length>0){var u=h[h.length-1];s.x<u.textRect.width/(d.globals.rotateXLabels?Math.abs(d.config.xaxis.labels.rotate)/12:1.01)+u.x&&(s.text="")}return s}},{key:"checkForReversedLabels",value:function(i,s){var r=this.w;return r.config.yaxis[i]&&r.config.yaxis[i].reversed&&s.reverse(),s}},{key:"isYAxisHidden",value:function(i){var s=this.w,r=new wt(this.ctx);return!s.config.yaxis[i].show||!s.config.yaxis[i].showForNullSeries&&r.isSeriesNull(i)&&-1===s.globals.collapsedSeriesIndices.indexOf(i)}},{key:"getYAxisForeColor",value:function(i,s){var r=this.w;return Array.isArray(i)&&r.globals.yAxisScale[s]&&this.ctx.theme.pushExtraColors(i,r.globals.yAxisScale[s].result.length,!1),i}},{key:"drawYAxisTicks",value:function(i,s,r,l,h,d,u){var p=this.w,m=new U(this.ctx),v=p.globals.translateY;if(l.show&&s>0){!0===p.config.yaxis[h].opposite&&(i+=l.width);for(var b=s;b>=0;b--){var _=v+s/10+p.config.yaxis[h].labels.offsetY-1;p.globals.isBarHorizontal&&(_=d*b),"heatmap"===p.config.chart.type&&(_+=d/2);var A=m.drawLine(i+r.offsetX-l.width+l.offsetX,_+l.offsetY,i+r.offsetX+l.offsetX,_+l.offsetY,l.color);u.add(A),v+=d}}}}]),P}(),Ut=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"scaleSvgNode",value:function(i,s){var r=parseFloat(i.getAttributeNS(null,"width")),l=parseFloat(i.getAttributeNS(null,"height"));i.setAttributeNS(null,"width",r*s),i.setAttributeNS(null,"height",l*s),i.setAttributeNS(null,"viewBox","0 0 "+r+" "+l)}},{key:"fixSvgStringForIe11",value:function(i){if(!B.isIE11())return i.replace(/&nbsp;/g,"&#160;");var s=0,r=i.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(l){return 2==++s?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':l});return(r=r.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(i){null==i&&(i=1);var s=this.w.globals.dom.Paper.svg();if(1!==i){var r=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(r,i),s=(new XMLSerializer).serializeToString(r)}return this.fixSvgStringForIe11(s)}},{key:"cleanup",value:function(){var i=this.w,s=i.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),r=i.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),l=i.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(l,function(h){h.setAttribute("width",0)}),s&&s[0]&&(s[0].setAttribute("x",-500),s[0].setAttribute("x1",-500),s[0].setAttribute("x2",-500)),r&&r[0]&&(r[0].setAttribute("y",-100),r[0].setAttribute("y1",-100),r[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var i=this.getSvgString(),s=new Blob([i],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(s)}},{key:"dataURI",value:function(i){var s=this;return new Promise(function(r){var l=s.w,h=i?i.scale||i.width/l.globals.svgWidth:1;s.cleanup();var d=document.createElement("canvas");d.width=l.globals.svgWidth*h,d.height=parseInt(l.globals.dom.elWrap.style.height,10)*h;var u="transparent"===l.config.chart.background?"#fff":l.config.chart.background,p=d.getContext("2d");p.fillStyle=u,p.fillRect(0,0,d.width*h,d.height*h);var m=s.getSvgString(h);if(window.canvg&&B.isIE11()){var v=window.canvg.Canvg.fromString(p,m,{ignoreClear:!0,ignoreDimensions:!0});v.start();var b=d.msToBlob();v.stop(),r({blob:b})}else{var _="data:image/svg+xml,"+encodeURIComponent(m),A=new Image;A.crossOrigin="anonymous",A.onload=function(){if(p.drawImage(A,0,0),d.msToBlob){var E=d.msToBlob();r({blob:E})}else{var k=d.toDataURL("image/png");r({imgURI:k})}},A.src=_}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var i=this;this.dataURI().then(function(s){var r=s.imgURI,l=s.blob;l?navigator.msSaveOrOpenBlob(l,i.w.globals.chartID+".png"):i.triggerDownload(r,i.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(i){var s=this,r=i.series,l=i.fileName,h=i.columnDelimiter,d=void 0===h?",":h,u=i.lineDelimiter,p=void 0===u?"\n":u,m=this.w;r||(r=m.config.series);var v=[],b=[],_="",A=new hn(this.ctx),E=new Tt(this.ctx),k=function(R){var O="";if(m.globals.axisCharts){if("category"===m.config.xaxis.type||m.config.xaxis.convertedCatToNumeric)if(m.globals.isBarHorizontal){var N=m.globals.yLabelFormatters[0],z=new bt(s.ctx).getActiveConfigSeriesIndex();O=N(m.globals.labels[R],{seriesIndex:z,dataPointIndex:R,w:m})}else O=E.getLabel(m.globals.labels,m.globals.timescaleLabels,0,R).text;"datetime"===m.config.xaxis.type&&(m.config.xaxis.categories.length?O=m.config.xaxis.categories[R]:m.config.labels.length&&(O=m.config.labels[R]))}else O=m.config.labels[R];return Array.isArray(O)&&(O=O.join(" ")),B.isNumber(O)?O:O.split(d).join("")};v.push(m.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===m.config.chart.type?(v.push("minimum"),v.push("q1"),v.push("median"),v.push("q3"),v.push("maximum")):"candlestick"===m.config.chart.type?(v.push("open"),v.push("high"),v.push("low"),v.push("close")):"rangeBar"===m.config.chart.type?(v.push("minimum"),v.push("maximum")):r.map(function(R,O){var N=R.name?R.name:"series-".concat(O);m.globals.axisCharts&&v.push(N.split(d).join("")?N.split(d).join(""):"series-".concat(O))}),m.globals.axisCharts||(v.push(m.config.chart.toolbar.export.csv.headerValue),b.push(v.join(d))),r.map(function(R,O){m.globals.axisCharts?function(N,z){if(v.length&&0===z&&b.push(v.join(d)),N.data&&N.data.length)for(var x=0;x<N.data.length;x++){v=[];var C=k(x);if(C||(A.isFormatXY()?C=r[z].data[x].x:A.isFormat2DArray()&&(C=r[z].data[x]?r[z].data[x][0]:"")),0===z){v.push("datetime"===m.config.xaxis.type&&String(C).length>=10?m.config.chart.toolbar.export.csv.dateFormatter(C):B.isNumber(C)?C:C.split(d).join(""));for(var T=0;T<m.globals.series.length;T++)A.isFormatXY()?v.push(r[T].data[x].y):v.push(m.globals.series[T][x])}("candlestick"===m.config.chart.type||N.type&&"candlestick"===N.type)&&(v.pop(),v.push(m.globals.seriesCandleO[z][x]),v.push(m.globals.seriesCandleH[z][x]),v.push(m.globals.seriesCandleL[z][x]),v.push(m.globals.seriesCandleC[z][x])),("boxPlot"===m.config.chart.type||N.type&&"boxPlot"===N.type)&&(v.pop(),v.push(m.globals.seriesCandleO[z][x]),v.push(m.globals.seriesCandleH[z][x]),v.push(m.globals.seriesCandleM[z][x]),v.push(m.globals.seriesCandleL[z][x]),v.push(m.globals.seriesCandleC[z][x])),"rangeBar"===m.config.chart.type&&(v.pop(),v.push(m.globals.seriesRangeStart[z][x]),v.push(m.globals.seriesRangeEnd[z][x])),v.length&&b.push(v.join(d))}}(R,O):((v=[]).push(m.globals.labels[O].split(d).join("")),v.push(m.globals.series[O]),b.push(v.join(d)))}),_+=b.join(p),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+_),l||m.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(i,s,r){var l=document.createElement("a");l.href=i,l.download=(s||this.w.globals.chartID)+r,document.body.appendChild(l),l.click(),document.body.removeChild(l)}}]),P}(),fs=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w;var s=this.w;this.axesUtils=new Tt(i),this.xaxisLabels=s.globals.labels.slice(),s.globals.timescaleLabels.length>0&&!s.globals.isBarHorizontal&&(this.xaxisLabels=s.globals.timescaleLabels.slice()),s.config.xaxis.overwriteCategories&&(this.xaxisLabels=s.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===s.config.xaxis.position?0:s.globals.gridHeight+1,this.offY=this.offY+s.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===s.config.chart.type&&s.config.plotOptions.bar.horizontal,this.xaxisFontSize=s.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=s.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=s.config.xaxis.labels.style.colors,this.xaxisBorderWidth=s.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=s.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?s.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=s.config.xaxis.axisBorder.height,this.yaxis=s.config.yaxis[0]}return rt(P,[{key:"drawXaxis",value:function(){var i=this.w,s=new U(this.ctx),r=s.group({class:"apexcharts-xaxis",transform:"translate(".concat(i.config.xaxis.offsetX,", ").concat(i.config.xaxis.offsetY,")")}),l=s.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(i.globals.translateXAxisX,", ").concat(i.globals.translateXAxisY,")")});r.add(l);for(var h=[],d=0;d<this.xaxisLabels.length;d++)h.push(this.xaxisLabels[d]);if(this.drawXAxisLabelAndGroup(!0,s,l,h,i.globals.isXNumeric,function(E,k){return k}),i.globals.hasGroups){var u=i.globals.groups;h=[];for(var p=0;p<u.length;p++)h.push(u[p].title);var m={};i.config.xaxis.group.style&&(m.xaxisFontSize=i.config.xaxis.group.style.fontSize,m.xaxisFontFamily=i.config.xaxis.group.style.fontFamily,m.xaxisForeColors=i.config.xaxis.group.style.colors,m.fontWeight=i.config.xaxis.group.style.fontWeight,m.cssClass=i.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,s,l,h,!1,function(E,k){return u[E].cols*k},m)}if(void 0!==i.config.xaxis.title.text){var v=s.group({class:"apexcharts-xaxis-title"}),b=s.drawText({x:i.globals.gridWidth/2+i.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+i.globals.xAxisLabelsHeight+i.config.xaxis.title.offsetY,text:i.config.xaxis.title.text,textAnchor:"middle",fontSize:i.config.xaxis.title.style.fontSize,fontFamily:i.config.xaxis.title.style.fontFamily,fontWeight:i.config.xaxis.title.style.fontWeight,foreColor:i.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+i.config.xaxis.title.style.cssClass});v.add(b),r.add(v)}if(i.config.xaxis.axisBorder.show){var _=i.globals.barPadForNumericAxis,A=s.drawLine(i.globals.padHorizontal+i.config.xaxis.axisBorder.offsetX-_,this.offY,this.xaxisBorderWidth+_,this.offY,i.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);r.add(A)}return r}},{key:"drawXAxisLabelAndGroup",value:function(i,s,r,l,h,d){var u,p=this,m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},v=[],b=[],_=this.w,A=m.xaxisFontSize||this.xaxisFontSize,E=m.xaxisFontFamily||this.xaxisFontFamily,k=m.xaxisForeColors||this.xaxisForeColors,R=m.fontWeight||_.config.xaxis.labels.style.fontWeight,O=m.cssClass||_.config.xaxis.labels.style.cssClass,N=_.globals.padHorizontal,z=l.length,x="category"===_.config.xaxis.type?_.globals.dataPoints:z;if(h){var C=x>1?x-1:x;N=N+d(0,u=_.globals.gridWidth/C)/2+_.config.xaxis.labels.offsetX}else N=N+d(0,u=_.globals.gridWidth/x)+_.config.xaxis.labels.offsetX;for(var T=function(W){var J=N-d(W,u)/2+_.config.xaxis.labels.offsetX;0===W&&1===z&&u/2===N&&1===x&&(J=_.globals.gridWidth/2);var H=p.axesUtils.getLabel(l,_.globals.timescaleLabels,J,W,v,A,i),et=28;if(_.globals.rotateXLabels&&i&&(et=22),i||(et=et+parseFloat(A)+(_.globals.xAxisLabelsHeight-_.globals.xAxisGroupLabelsHeight)+(_.globals.rotateXLabels?10:0)),H=void 0!==_.config.xaxis.tickAmount&&"dataPoints"!==_.config.xaxis.tickAmount&&"datetime"!==_.config.xaxis.type?p.axesUtils.checkLabelBasedOnTickamount(W,H,z):p.axesUtils.checkForOverflowingLabels(W,H,z,v,b),i&&H.text&&_.globals.xaxisLabelsCount++,_.config.xaxis.labels.show){var tt=s.drawText({x:H.x,y:p.offY+_.config.xaxis.labels.offsetY+et-("top"===_.config.xaxis.position?_.globals.xAxisHeight+_.config.xaxis.axisTicks.height-2:0),text:H.text,textAnchor:"middle",fontWeight:H.isBold?600:R,fontSize:A,fontFamily:E,foreColor:Array.isArray(k)?i&&_.config.xaxis.convertedCatToNumeric?k[_.globals.minX+W-1]:k[W]:k,isPlainText:!1,cssClass:(i?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+O});if(r.add(tt),i){var at=document.createElementNS(_.globals.SVGNS,"title");at.textContent=Array.isArray(H.text)?H.text.join(" "):H.text,tt.node.appendChild(at),""!==H.text&&(v.push(H.text),b.push(H))}}W<z-1&&(N+=d(W+1,u))},L=0;L<=z-1;L++)T(L)}},{key:"drawXaxisInversed",value:function(i){var s,r,l=this,h=this.w,d=new U(this.ctx),u=h.config.yaxis[0].opposite?h.globals.translateYAxisX[i]:0,p=d.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:i}),m=d.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+u+", 0)"});p.add(m);var v=[];if(h.config.yaxis[i].show)for(var b=0;b<this.xaxisLabels.length;b++)v.push(this.xaxisLabels[b]);r=-(s=h.globals.gridHeight/v.length)/2.2;var _=h.globals.yLabelFormatters[0],A=h.config.yaxis[0].labels;if(A.show)for(var E=function(C){var T=void 0===v[C]?"":v[C];T=_(T,{seriesIndex:i,dataPointIndex:C,w:h});var L=l.axesUtils.getYAxisForeColor(A.style.colors,i),W=0;Array.isArray(T)&&(W=T.length/2*parseInt(A.style.fontSize,10));var J=d.drawText({x:A.offsetX-15,y:r+s+A.offsetY-W,text:T,textAnchor:l.yaxis.opposite?"start":"end",foreColor:Array.isArray(L)?L[C]:L,fontSize:A.style.fontSize,fontFamily:A.style.fontFamily,fontWeight:A.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+A.style.cssClass,maxWidth:A.maxWidth});m.add(J);var H=document.createElementNS(h.globals.SVGNS,"title");if(H.textContent=Array.isArray(T)?T.join(" "):T,J.node.appendChild(H),0!==h.config.yaxis[i].labels.rotate){var et=d.rotateAroundCenter(J.node);J.node.setAttribute("transform","rotate(".concat(h.config.yaxis[i].labels.rotate," 0 ").concat(et.y,")"))}r+=s},k=0;k<=v.length-1;k++)E(k);if(void 0!==h.config.yaxis[0].title.text){var R=d.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+u+", 0)"}),O=d.drawText({x:0,y:h.globals.gridHeight/2,text:h.config.yaxis[0].title.text,textAnchor:"middle",foreColor:h.config.yaxis[0].title.style.color,fontSize:h.config.yaxis[0].title.style.fontSize,fontWeight:h.config.yaxis[0].title.style.fontWeight,fontFamily:h.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+h.config.yaxis[0].title.style.cssClass});R.add(O),p.add(R)}var N=0;this.isCategoryBarHorizontal&&h.config.yaxis[0].opposite&&(N=h.globals.gridWidth);var z=h.config.xaxis.axisBorder;if(z.show){var x=d.drawLine(h.globals.padHorizontal+z.offsetX+N,1+z.offsetY,h.globals.padHorizontal+z.offsetX+N,h.globals.gridHeight+z.offsetY,z.color,0);p.add(x)}return h.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(N,v.length,h.config.yaxis[0].axisBorder,h.config.yaxis[0].axisTicks,0,s,p),p}},{key:"drawXaxisTicks",value:function(i,s,r){var l=this.w,h=i;if(!(i<0||i-2>l.globals.gridWidth)){var d=this.offY+l.config.xaxis.axisTicks.offsetY;if(s=s+d+l.config.xaxis.axisTicks.height,"top"===l.config.xaxis.position&&(s=d-l.config.xaxis.axisTicks.height),l.config.xaxis.axisTicks.show){var u=new U(this.ctx).drawLine(i+l.config.xaxis.axisTicks.offsetX,d+l.config.xaxis.offsetY,h+l.config.xaxis.axisTicks.offsetX,s+l.config.xaxis.offsetY,l.config.xaxis.axisTicks.color);r.add(u),u.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var i=this.w,s=[],r=this.xaxisLabels.length,l=i.globals.padHorizontal;if(i.globals.timescaleLabels.length>0)for(var h=0;h<r;h++)s.push(l=this.xaxisLabels[h].position);else for(var d=r,u=0;u<d;u++){var p=d;i.globals.isXNumeric&&"bar"!==i.config.chart.type&&(p-=1),s.push(l+=i.globals.gridWidth/p)}return s}},{key:"xAxisLabelCorrections",value:function(){var i=this.w,s=new U(this.ctx),r=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),l=i.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),h=i.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),d=i.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(i.globals.rotateXLabels||i.config.xaxis.labels.rotateAlways)for(var u=0;u<l.length;u++){var p=s.rotateAroundCenter(l[u]);p.y=p.y-1,p.x=p.x+1,l[u].setAttribute("transform","rotate(".concat(i.config.xaxis.labels.rotate," ").concat(p.x," ").concat(p.y,")")),l[u].setAttribute("text-anchor","end"),r.setAttribute("transform","translate(0, ".concat(-10,")")),i.config.xaxis.labels.trim&&Array.prototype.forEach.call(l[u].childNodes,function(A){s.placeTextWithEllipsis(A,A.textContent,i.globals.xAxisLabelsHeight-("bottom"===i.config.legend.position?20:10))})}else!function(){for(var A=i.globals.gridWidth/(i.globals.labels.length+1),E=0;E<l.length;E++)i.config.xaxis.labels.trim&&"datetime"!==i.config.xaxis.type&&Array.prototype.forEach.call(l[E].childNodes,function(R){s.placeTextWithEllipsis(R,R.textContent,A)})}();if(h.length>0){var v=h[h.length-1].getBBox(),b=h[0].getBBox();v.x<-20&&h[h.length-1].parentNode.removeChild(h[h.length-1]),b.x+b.width>i.globals.gridWidth&&!i.globals.isBarHorizontal&&h[0].parentNode.removeChild(h[0]);for(var _=0;_<d.length;_++)s.placeTextWithEllipsis(d[_],d[_].textContent,i.config.yaxis[0].labels.maxWidth-(i.config.yaxis[0].title.text?2*parseFloat(i.config.yaxis[0].title.style.fontSize):0)-15)}}}]),P}(),Ci=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w;var s=this.w;this.xaxisLabels=s.globals.labels.slice(),this.axesUtils=new Tt(i),this.isRangeBar=s.globals.seriesRangeBar.length,s.globals.timescaleLabels.length>0&&(this.xaxisLabels=s.globals.timescaleLabels.slice())}return rt(P,[{key:"drawGridArea",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=this.w,r=new U(this.ctx);null===i&&(i=r.group({class:"apexcharts-grid"}));var l=r.drawLine(s.globals.padHorizontal,1,s.globals.padHorizontal,s.globals.gridHeight,"transparent"),h=r.drawLine(s.globals.padHorizontal,s.globals.gridHeight,s.globals.gridWidth,s.globals.gridHeight,"transparent");return i.add(h),i.add(l),i}},{key:"drawGrid",value:function(){var i=null;return this.w.globals.axisCharts&&(i=this.renderGrid(),this.drawGridArea(i.el)),i}},{key:"createGridMask",value:function(){var i=this.w,s=i.globals,r=new U(this.ctx),l=Array.isArray(i.config.stroke.width)?0:i.config.stroke.width;if(Array.isArray(i.config.stroke.width)){var h=0;i.config.stroke.width.forEach(function(b){h=Math.max(h,b)}),l=h}s.dom.elGridRectMask=document.createElementNS(s.SVGNS,"clipPath"),s.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(s.cuid)),s.dom.elGridRectMarkerMask=document.createElementNS(s.SVGNS,"clipPath"),s.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(s.cuid)),s.dom.elForecastMask=document.createElementNS(s.SVGNS,"clipPath"),s.dom.elForecastMask.setAttribute("id","forecastMask".concat(s.cuid)),s.dom.elNonForecastMask=document.createElementNS(s.SVGNS,"clipPath"),s.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(s.cuid));var d=i.config.chart.type,u=0,p=0;("bar"===d||"rangeBar"===d||"candlestick"===d||"boxPlot"===d||i.globals.comboBarCount>0)&&i.globals.isXNumeric&&!i.globals.isBarHorizontal&&(p=i.config.grid.padding.right,s.barPadForNumericAxis>(u=i.config.grid.padding.left)&&(u=s.barPadForNumericAxis,p=s.barPadForNumericAxis)),s.dom.elGridRect=r.drawRect(-l/2-u-2,-l/2,s.gridWidth+l+p+u+4,s.gridHeight+l,0,"#fff");var m=i.globals.markers.largestSize+1;s.dom.elGridRectMarker=r.drawRect(2*-m,2*-m,s.gridWidth+4*m,s.gridHeight+4*m,0,"#fff"),s.dom.elGridRectMask.appendChild(s.dom.elGridRect.node),s.dom.elGridRectMarkerMask.appendChild(s.dom.elGridRectMarker.node);var v=s.dom.baseEl.querySelector("defs");v.appendChild(s.dom.elGridRectMask),v.appendChild(s.dom.elForecastMask),v.appendChild(s.dom.elNonForecastMask),v.appendChild(s.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(i){var s=i.i,r=i.x1,m=this.w;if(!(0===s&&m.globals.skipFirstTimelinelabel||s===i.xCount-1&&m.globals.skipLastTimelinelabel&&!m.config.xaxis.labels.formatter||"radar"===m.config.chart.type)){m.config.grid.xaxis.lines.show&&this._drawGridLine({x1:r,y1:i.y1,x2:i.x2,y2:i.y2,parent:i.parent});var v=0;if(m.globals.hasGroups&&"between"===m.config.xaxis.tickPlacement){var b=m.globals.groups;if(b){for(var _=0,A=0;_<s&&A<b.length;A++)_+=b[A].cols;_===s&&(v=.6*m.globals.xAxisLabelsHeight)}}new fs(this.ctx).drawXaxisTicks(r,v,this.elg)}}},{key:"_drawGridLine",value:function(i){var s=i.x1,r=i.y1,l=i.x2,h=i.y2,d=i.parent,u=this.w,p=d.node.classList.contains("apexcharts-gridlines-horizontal"),m=u.config.grid.strokeDashArray,v=u.globals.barPadForNumericAxis,b=new U(this).drawLine(s-(p?v:0),r,l+(p?v:0),h,u.config.grid.borderColor,m);b.node.classList.add("apexcharts-gridline"),d.add(b)}},{key:"_drawGridBandRect",value:function(i){var s=i.c,r=i.x1,l=i.y1,h=i.x2,d=i.y2,u=i.type,p=this.w,m=new U(this.ctx),v=p.globals.barPadForNumericAxis;if("column"!==u||"datetime"!==p.config.xaxis.type){var _=m.drawRect(r-("row"===u?v:0),l,h+("row"===u?2*v:0),d,0,p.config.grid[u].colors[s],p.config.grid[u].opacity);this.elg.add(_),_.attr("clip-path","url(#gridRectMask".concat(p.globals.cuid,")")),_.node.classList.add("apexcharts-grid-".concat(u))}}},{key:"_drawXYLines",value:function(i){var s=this,r=i.xCount,l=i.tickAmount,h=this.w;if(h.config.grid.xaxis.lines.show||h.config.xaxis.axisTicks.show){var d,u=h.globals.padHorizontal,p=h.globals.gridHeight;h.globals.timescaleLabels.length?function(E){for(var k=E.xC,O=E.y1,z=E.y2,x=0;x<k;x++)s._drawGridLines({i:x,x1:s.xaxisLabels[x].position,y1:O,x2:s.xaxisLabels[x].position,y2:z,xCount:r,parent:s.elgridLinesV})}({xC:r,x1:u,y1:0,x2:d,y2:p}):(h.globals.isXNumeric&&(r=h.globals.xAxisScale.result.length),h.config.xaxis.convertedCatToNumeric&&(r=h.globals.xaxisLabelsCount),function(E){var k=E.xC,R=E.x1,O=E.y1,N=E.x2,z=E.y2;if(void 0!==h.config.xaxis.tickAmount&&"dataPoints"!==h.config.xaxis.tickAmount&&"on"===h.config.xaxis.tickPlacement)h.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach(function(C,T){var L=C.getBBox();s._drawGridLines({i:T,x1:L.x+L.width/2,y1:O,x2:L.x+L.width/2,y2:z,xCount:r,parent:s.elgridLinesV})});else for(var x=0;x<k+(h.globals.isXNumeric?0:1);x++)0===x&&1===k&&1===h.globals.dataPoints&&(N=R=h.globals.gridWidth/2),s._drawGridLines({i:x,x1:R,y1:O,x2:N,y2:z,xCount:r,parent:s.elgridLinesV}),N=R+=h.globals.gridWidth/(h.globals.isXNumeric?k-1:k)}({xC:r,x1:u,y1:0,x2:d,y2:p}))}if(h.config.grid.yaxis.lines.show){var m=0,v=0,b=h.globals.gridWidth,_=l+1;this.isRangeBar&&(_=h.globals.labels.length);for(var A=0;A<_+(this.isRangeBar?1:0);A++)this._drawGridLine({x1:0,y1:m,x2:b,y2:v,parent:this.elgridLinesH}),v=m+=h.globals.gridHeight/(this.isRangeBar?_:l)}}},{key:"_drawInvertedXYLines",value:function(i){var s=i.xCount,r=this.w;if(r.config.grid.xaxis.lines.show||r.config.xaxis.axisTicks.show)for(var l,h=r.globals.padHorizontal,d=r.globals.gridHeight,u=0;u<s+1;u++)r.config.grid.xaxis.lines.show&&this._drawGridLine({x1:h,y1:0,x2:l,y2:d,parent:this.elgridLinesV}),new fs(this.ctx).drawXaxisTicks(h,0,this.elg),l=h=h+r.globals.gridWidth/s+.3;if(r.config.grid.yaxis.lines.show)for(var p=0,m=0,v=r.globals.gridWidth,b=0;b<r.globals.dataPoints+1;b++)this._drawGridLine({x1:0,y1:p,x2:v,y2:m,parent:this.elgridLinesH}),m=p+=r.globals.gridHeight/r.globals.dataPoints}},{key:"renderGrid",value:function(){var i=this.w,s=new U(this.ctx);this.elg=s.group({class:"apexcharts-grid"}),this.elgridLinesH=s.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=s.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),i.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var r,l=i.globals.yAxisScale.length?i.globals.yAxisScale[0].result.length-1:5,h=0;h<i.globals.series.length&&(void 0!==i.globals.yAxisScale[h]&&(l=i.globals.yAxisScale[h].result.length-1),!(l>2));h++);return!i.globals.isBarHorizontal||this.isRangeBar?(r=this.xaxisLabels.length,this.isRangeBar&&(l=i.globals.labels.length,i.config.xaxis.tickAmount&&i.config.xaxis.labels.formatter&&(r=i.config.xaxis.tickAmount)),this._drawXYLines({xCount:r,tickAmount:l})):this._drawInvertedXYLines({xCount:r=l,tickAmount:l=i.globals.xTickAmount}),this.drawGridBands(r,l),{el:this.elg,xAxisTickWidth:i.globals.gridWidth/r}}},{key:"drawGridBands",value:function(i,s){var r=this.w;if(void 0!==r.config.grid.row.colors&&r.config.grid.row.colors.length>0)for(var l=0,h=r.globals.gridHeight/s,d=r.globals.gridWidth,u=0,p=0;u<s;u++,p++)p>=r.config.grid.row.colors.length&&(p=0),this._drawGridBandRect({c:p,x1:0,y1:l,x2:d,y2:h,type:"row"}),l+=r.globals.gridHeight/s;if(void 0!==r.config.grid.column.colors&&r.config.grid.column.colors.length>0)for(var m=r.globals.isBarHorizontal||"category"!==r.config.xaxis.type&&!r.config.xaxis.convertedCatToNumeric?i:i-1,v=r.globals.padHorizontal,b=r.globals.padHorizontal+r.globals.gridWidth/m,_=r.globals.gridHeight,A=0,E=0;A<i;A++,E++)E>=r.config.grid.column.colors.length&&(E=0),this._drawGridBandRect({c:E,x1:v,y1:0,x2:b,y2:_,type:"column"}),v+=r.globals.gridWidth/m}}]),P}(),Gi=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"niceScale",value:function(i,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4?arguments[4]:void 0,d=this.w,u=Math.abs(s-i);if("dataPoints"===(r=this._adjustTicksForSmallRange(r,l,u))&&(r=d.globals.dataPoints-1),i===Number.MIN_VALUE&&0===s||!B.isNumber(i)&&!B.isNumber(s)||i===Number.MIN_VALUE&&s===-Number.MAX_VALUE){var p=this.linearScale(i=0,s=r,r);return p}i>s?(console.warn("axis.min cannot be greater than axis.max"),s=i+.1):i===s&&(i=0===i?0:i-.5,s=0===s?2:s+.5);var m=[];u<1&&h&&("candlestick"===d.config.chart.type||"candlestick"===d.config.series[l].type||"boxPlot"===d.config.chart.type||"boxPlot"===d.config.series[l].type||d.globals.isRangeData)&&(s*=1.01);var v=r+1;v<2?v=2:v>2&&(v-=2);var b=u/v,_=Math.floor(B.log10(b)),A=Math.pow(10,_),E=Math.round(b/A);E<1&&(E=1);var k=E*A,R=k*Math.floor(i/k),O=k*Math.ceil(s/k),N=R;if(h&&u>2){for(;m.push(N),!((N+=k)>O););return{result:m,niceMin:m[0],niceMax:m[m.length-1]}}var z=i;(m=[]).push(z);for(var x=Math.abs(s-i)/r,C=0;C<=r;C++)m.push(z+=x);return m[m.length-2]>=s&&m.pop(),{result:m,niceMin:m[0],niceMax:m[m.length-1]}}},{key:"linearScale",value:function(i,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,l=arguments.length>3?arguments[3]:void 0,h=Math.abs(s-i);"dataPoints"===(r=this._adjustTicksForSmallRange(r,l,h))&&(r=this.w.globals.dataPoints-1);var d=h/r;r===Number.MAX_VALUE&&(r=10,d=1);for(var u=[],p=i;r>=0;)u.push(p),p+=d,r-=1;return{result:u,niceMin:u[0],niceMax:u[u.length-1]}}},{key:"logarithmicScaleNice",value:function(i,s,r){s<=0&&(s=Math.max(i,r)),i<=0&&(i=Math.min(s,r));for(var l=[],h=Math.ceil(Math.log(s)/Math.log(r)+1),d=Math.floor(Math.log(i)/Math.log(r));d<h;d++)l.push(Math.pow(r,d));return{result:l,niceMin:l[0],niceMax:l[l.length-1]}}},{key:"logarithmicScale",value:function(i,s,r){s<=0&&(s=Math.max(i,r)),i<=0&&(i=Math.min(s,r));for(var l=[],h=Math.log(s)/Math.log(r),d=Math.log(i)/Math.log(r),u=h-d,p=Math.round(u),m=u/p,v=0,b=d;v<p;v++,b+=m)l.push(Math.pow(r,b));return l.push(Math.pow(r,h)),{result:l,niceMin:i,niceMax:s}}},{key:"_adjustTicksForSmallRange",value:function(i,s,r){var l=i;if(void 0!==s&&this.w.config.yaxis[s].labels.formatter&&void 0===this.w.config.yaxis[s].tickAmount){var h=this.w.config.yaxis[s].labels.formatter(1);B.isNumber(Number(h))&&!B.isFloat(h)&&(l=Math.ceil(r))}return l<i?l:i}},{key:"setYScaleForIndex",value:function(i,s,r){var l=this.w.globals,h=this.w.config,d=l.isBarHorizontal?h.xaxis:h.yaxis[i];void 0===l.yAxisScale[i]&&(l.yAxisScale[i]=[]);var u=Math.abs(r-s);d.logarithmic&&u<=5&&(l.invalidLogScale=!0),d.logarithmic&&u>5?(l.allSeriesCollapsed=!1,l.yAxisScale[i]=this.logarithmicScale(s,r,d.logBase),l.yAxisScale[i]=d.forceNiceScale?this.logarithmicScaleNice(s,r,d.logBase):this.logarithmicScale(s,r,d.logBase)):r!==-Number.MAX_VALUE&&B.isNumber(r)?(l.allSeriesCollapsed=!1,l.yAxisScale[i]=void 0===d.min&&void 0===d.max||d.forceNiceScale?this.niceScale(s,r,d.tickAmount?d.tickAmount:u<5&&u>1?u+1:5,i,void 0===h.yaxis[i].max&&void 0===h.yaxis[i].min||h.yaxis[i].forceNiceScale):this.linearScale(s,r,d.tickAmount,i)):l.yAxisScale[i]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(i,s){var r=this.w,l=r.globals,h=r.config.xaxis,d=Math.abs(s-i);return l.xAxisScale=s!==-Number.MAX_VALUE&&B.isNumber(s)?this.linearScale(i,s,h.tickAmount?h.tickAmount:d<5&&d>1?d+1:5,0):this.linearScale(0,5,5),l.xAxisScale}},{key:"setMultipleYScales",value:function(){var i=this,s=this.w.globals,r=this.w.config,l=s.minYArr.concat([]),h=s.maxYArr.concat([]),d=[];r.yaxis.forEach(function(u,p){var m=p;r.series.forEach(function(_,A){_.name===u.seriesName&&(m=A,d.push(p!==A?{index:A,similarIndex:p,alreadyExists:!0}:{index:A}))}),i.setYScaleForIndex(p,l[m],h[m])}),this.sameScaleInMultipleAxes(l,h,d)}},{key:"sameScaleInMultipleAxes",value:function(i,s,r){var l=this,h=this.w.config,d=this.w.globals,u=[];r.forEach(function(k){k.alreadyExists&&(void 0===u[k.index]&&(u[k.index]=[]),u[k.index].push(k.index),u[k.index].push(k.similarIndex))}),d.yAxisSameScaleIndices=u,u.forEach(function(k,R){u.forEach(function(O,N){var z,x;R!==N&&(z=k,x=O,z.filter(function(C){return-1!==x.indexOf(C)})).length>0&&(u[R]=u[R].concat(u[N]))})});var p=u.map(function(k){return k.filter(function(R,O){return k.indexOf(R)===O})}).map(function(k){return k.sort()});u=u.filter(function(k){return!!k});var m=p.slice(),v=m.map(function(k){return JSON.stringify(k)});m=m.filter(function(k,R){return v.indexOf(JSON.stringify(k))===R});var b=[],_=[];i.forEach(function(k,R){m.forEach(function(O,N){O.indexOf(R)>-1&&(void 0===b[N]&&(b[N]=[],_[N]=[]),b[N].push({key:R,value:k}),_[N].push({key:R,value:s[R]}))})});var A=Array.apply(null,Array(m.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),E=Array.apply(null,Array(m.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);b.forEach(function(k,R){k.forEach(function(O,N){A[R]=Math.min(O.value,A[R])})}),_.forEach(function(k,R){k.forEach(function(O,N){E[R]=Math.max(O.value,E[R])})}),i.forEach(function(k,R){_.forEach(function(O,N){var z=A[N],x=E[N];h.chart.stacked&&(x=0,O.forEach(function(C,T){C.value!==-Number.MAX_VALUE&&(x+=C.value),z!==Number.MIN_VALUE&&(z+=b[N][T].value)})),O.forEach(function(C,T){O[T].key===R&&(void 0!==h.yaxis[R].min&&(z="function"==typeof h.yaxis[R].min?h.yaxis[R].min(d.minY):h.yaxis[R].min),void 0!==h.yaxis[R].max&&(x="function"==typeof h.yaxis[R].max?h.yaxis[R].max(d.maxY):h.yaxis[R].max),l.setYScaleForIndex(R,z,x))})})})}},{key:"autoScaleY",value:function(i,s,r){i||(i=this);var l=i.w;if(l.globals.isMultipleYAxis||l.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),s;var h=l.globals.seriesX[0],d=l.config.chart.stacked;return s.forEach(function(u,p){for(var m=0,v=0;v<h.length;v++)if(h[v]>=r.xaxis.min){m=v;break}var b,_,A=l.globals.minYArr[p],E=l.globals.maxYArr[p],k=l.globals.stackedSeriesTotals;l.globals.series.forEach(function(R,O){var N=R[m];d?(b=_=N=k[m],k.forEach(function(z,x){h[x]<=r.xaxis.max&&h[x]>=r.xaxis.min&&(z>_&&null!==z&&(_=z),R[x]<b&&null!==R[x]&&(b=R[x]))})):(b=_=N,R.forEach(function(z,x){if(h[x]<=r.xaxis.max&&h[x]>=r.xaxis.min){var C=z,T=z;l.globals.series.forEach(function(L,W){null!==z&&(C=Math.min(L[x],C),T=Math.max(L[x],T))}),T>_&&null!==T&&(_=T),C<b&&null!==C&&(b=C)}})),void 0===b&&void 0===_&&(b=A,_=E),_*=_<0?.9:1.1,0==(b*=b<0?1.1:.9)&&0===_&&(b=-1,_=1),_<0&&_<E&&(_=E),b<0&&b>A&&(b=A),s.length>1?(s[O].min=void 0===u.min?b:u.min,s[O].max=void 0===u.max?_:u.max):(s[0].min=void 0===u.min?b:u.min,s[0].max=void 0===u.max?_:u.max)})}),s}}]),P}(),cn=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w,this.scales=new Gi(i)}return rt(P,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,h=this.w.config,d=this.w.globals,u=-Number.MAX_VALUE,p=Number.MIN_VALUE;null===l&&(l=i+1);var m=d.series,v=m,b=m;"candlestick"===h.chart.type?(v=d.seriesCandleL,b=d.seriesCandleH):"boxPlot"===h.chart.type?(v=d.seriesCandleO,b=d.seriesCandleC):d.isRangeData&&(v=d.seriesRangeStart,b=d.seriesRangeEnd);for(var _=i;_<l;_++){d.dataPoints=Math.max(d.dataPoints,m[_].length),d.categoryLabels.length&&(d.dataPoints=d.categoryLabels.filter(function(k){return void 0!==k}).length);for(var A=0;A<d.series[_].length;A++){var E=m[_][A];null!==E&&B.isNumber(E)?(void 0!==b[_][A]&&(u=Math.max(u,b[_][A]),s=Math.min(s,b[_][A])),void 0!==v[_][A]&&(s=Math.min(s,v[_][A]),r=Math.max(r,v[_][A])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||(void 0!==d.seriesCandleC[_][A]&&(u=Math.max(u,d.seriesCandleO[_][A]),u=Math.max(u,d.seriesCandleH[_][A]),u=Math.max(u,d.seriesCandleL[_][A]),u=Math.max(u,d.seriesCandleC[_][A]),"boxPlot"===this.w.config.chart.type&&(u=Math.max(u,d.seriesCandleM[_][A]))),!h.series[_].type||"candlestick"===h.series[_].type&&"boxPlot"===h.series[_].type||(u=Math.max(u,d.series[_][A]),s=Math.min(s,d.series[_][A])),r=u),d.seriesGoals[_]&&d.seriesGoals[_][A]&&Array.isArray(d.seriesGoals[_][A])&&d.seriesGoals[_][A].forEach(function(k){p!==Number.MIN_VALUE&&(p=Math.min(p,k.value),s=p),u=Math.max(u,k.value),r=u}),B.isFloat(E)&&(E=B.noExponents(E),d.yValueDecimal=Math.max(d.yValueDecimal,E.toString().split(".")[1].length)),p>v[_][A]&&v[_][A]<0&&(p=v[_][A])):d.hasNullValues=!0}}return"rangeBar"===h.chart.type&&d.seriesRangeStart.length&&d.isBarHorizontal&&(p=s),"bar"===h.chart.type&&(p<0&&u<0&&(u=0),p===Number.MIN_VALUE&&(p=0)),{minY:p,maxY:u,lowestY:s,highestY:r}}},{key:"setYRange",value:function(){var i=this.w.globals,s=this.w.config;i.maxY=-Number.MAX_VALUE,i.minY=Number.MIN_VALUE;var r=Number.MAX_VALUE;if(i.isMultipleYAxis)for(var l=0;l<i.series.length;l++){var h=this.getMinYMaxY(l,r,null,l+1);i.minYArr.push(h.minY),i.maxYArr.push(h.maxY),r=h.lowestY}var d=this.getMinYMaxY(0,r,null,i.series.length);if(i.minY=d.minY,i.maxY=d.maxY,r=d.lowestY,s.chart.stacked&&this._setStackedMinMax(),("line"===s.chart.type||"area"===s.chart.type||"candlestick"===s.chart.type||"boxPlot"===s.chart.type||"rangeBar"===s.chart.type&&!i.isBarHorizontal)&&i.minY===Number.MIN_VALUE&&r!==-Number.MAX_VALUE&&r!==i.maxY){var u=i.maxY-r;(r>=0&&r<=10||void 0!==s.yaxis[0].min||void 0!==s.yaxis[0].max)&&(u=0),i.minY=r-5*u/100,r>0&&i.minY<0&&(i.minY=0),i.maxY=i.maxY+5*u/100}return s.yaxis.forEach(function(p,m){void 0!==p.max&&("number"==typeof p.max?i.maxYArr[m]=p.max:"function"==typeof p.max&&(i.maxYArr[m]=p.max(i.isMultipleYAxis?i.maxYArr[m]:i.maxY)),i.maxY=i.maxYArr[m]),void 0!==p.min&&("number"==typeof p.min?i.minYArr[m]=p.min:"function"==typeof p.min&&(i.minYArr[m]=p.min(i.isMultipleYAxis?i.minYArr[m]===Number.MIN_VALUE?0:i.minYArr[m]:i.minY)),i.minY=i.minYArr[m])}),i.isBarHorizontal&&["min","max"].forEach(function(p){void 0!==s.xaxis[p]&&"number"==typeof s.xaxis[p]&&("min"===p?i.minY=s.xaxis[p]:i.maxY=s.xaxis[p])}),i.isMultipleYAxis?(this.scales.setMultipleYScales(),i.minY=r,i.yAxisScale.forEach(function(p,m){i.minYArr[m]=p.niceMin,i.maxYArr[m]=p.niceMax})):(this.scales.setYScaleForIndex(0,i.minY,i.maxY),i.minY=i.yAxisScale[0].niceMin,i.maxY=i.yAxisScale[0].niceMax,i.minYArr[0]=i.yAxisScale[0].niceMin,i.maxYArr[0]=i.yAxisScale[0].niceMax),{minY:i.minY,maxY:i.maxY,minYArr:i.minYArr,maxYArr:i.maxYArr,yAxisScale:i.yAxisScale}}},{key:"setXRange",value:function(){var i=this.w.globals,s=this.w.config,r="numeric"===s.xaxis.type||"datetime"===s.xaxis.type||"category"===s.xaxis.type&&!i.noLabelsProvided||i.noLabelsProvided||i.isXNumeric;if(i.isXNumeric&&function(){for(var u=0;u<i.series.length;u++)if(i.labels[u])for(var p=0;p<i.labels[u].length;p++)null!==i.labels[u][p]&&B.isNumber(i.labels[u][p])&&(i.maxX=Math.max(i.maxX,i.labels[u][p]),i.initialMaxX=Math.max(i.maxX,i.labels[u][p]),i.minX=Math.min(i.minX,i.labels[u][p]),i.initialMinX=Math.min(i.minX,i.labels[u][p]))}(),i.noLabelsProvided&&0===s.xaxis.categories.length&&(i.maxX=i.labels[i.labels.length-1],i.initialMaxX=i.labels[i.labels.length-1],i.minX=1,i.initialMinX=1),i.isXNumeric||i.noLabelsProvided||i.dataFormatXNumeric){var l;if(void 0===s.xaxis.tickAmount?(l=Math.round(i.svgWidth/150),"numeric"===s.xaxis.type&&i.dataPoints<30&&(l=i.dataPoints-1),l>i.dataPoints&&0!==i.dataPoints&&(l=i.dataPoints-1)):"dataPoints"===s.xaxis.tickAmount?(i.series.length>1&&(l=i.series[i.maxValsInArrayIndex].length-1),i.isXNumeric&&(l=i.maxX-i.minX-1)):l=s.xaxis.tickAmount,i.xTickAmount=l,void 0!==s.xaxis.max&&"number"==typeof s.xaxis.max&&(i.maxX=s.xaxis.max),void 0!==s.xaxis.min&&"number"==typeof s.xaxis.min&&(i.minX=s.xaxis.min),void 0!==s.xaxis.range&&(i.minX=i.maxX-s.xaxis.range),i.minX!==Number.MAX_VALUE&&i.maxX!==-Number.MAX_VALUE)if(s.xaxis.convertedCatToNumeric&&!i.dataFormatXNumeric){for(var h=[],d=i.minX-1;d<i.maxX;d++)h.push(d+1);i.xAxisScale={result:h,niceMin:h[0],niceMax:h[h.length-1]}}else i.xAxisScale=this.scales.setXScale(i.minX,i.maxX);else i.xAxisScale=this.scales.linearScale(1,l,l),i.noLabelsProvided&&i.labels.length>0&&(i.xAxisScale=this.scales.linearScale(1,i.labels.length,l-1),i.seriesX=i.labels.slice());r&&(i.labels=i.xAxisScale.result.slice())}return i.isBarHorizontal&&i.labels.length&&(i.xTickAmount=i.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:i.minX,maxX:i.maxX}}},{key:"setZRange",value:function(){var i=this.w.globals;if(i.isDataXYZ)for(var s=0;s<i.series.length;s++)if(void 0!==i.seriesZ[s])for(var r=0;r<i.seriesZ[s].length;r++)null!==i.seriesZ[s][r]&&B.isNumber(i.seriesZ[s][r])&&(i.maxZ=Math.max(i.maxZ,i.seriesZ[s][r]),i.minZ=Math.min(i.minZ,i.seriesZ[s][r]))}},{key:"_handleSingleDataPoint",value:function(){var i=this.w.globals,s=this.w.config;if(i.minX===i.maxX){var r=new xe(this.ctx);if("datetime"===s.xaxis.type){var l=r.getDate(i.minX);s.xaxis.labels.datetimeUTC?l.setUTCDate(l.getUTCDate()-2):l.setDate(l.getDate()-2),i.minX=new Date(l).getTime();var h=r.getDate(i.maxX);s.xaxis.labels.datetimeUTC?h.setUTCDate(h.getUTCDate()+2):h.setDate(h.getDate()+2),i.maxX=new Date(h).getTime()}else("numeric"===s.xaxis.type||"category"===s.xaxis.type&&!i.noLabelsProvided)&&(i.minX=i.minX-2,i.initialMinX=i.minX,i.maxX=i.maxX+2,i.initialMaxX=i.maxX)}}},{key:"_getMinXDiff",value:function(){var i=this.w.globals;i.isXNumeric&&i.seriesX.forEach(function(s,r){1===s.length&&s.push(i.seriesX[i.maxValsInArrayIndex][i.seriesX[i.maxValsInArrayIndex].length-1]);var l=s.slice();l.sort(function(h,d){return h-d}),l.forEach(function(h,d){if(d>0){var u=h-l[d-1];u>0&&(i.minXDiff=Math.min(u,i.minXDiff))}}),1!==i.dataPoints&&i.minXDiff!==Number.MAX_VALUE||(i.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var i=this.w.globals,s=[],r=[];if(i.series.length)for(var l=0;l<i.series[i.maxValsInArrayIndex].length;l++)for(var h=0,d=0,u=0;u<i.series.length;u++)null!==i.series[u][l]&&B.isNumber(i.series[u][l])&&(i.series[u][l]>0?h=h+parseFloat(i.series[u][l])+1e-4:d+=parseFloat(i.series[u][l])),u===i.series.length-1&&(s.push(h),r.push(d));for(var p=0;p<s.length;p++)i.maxY=Math.max(i.maxY,s[p]),i.minY=Math.min(i.minY,r[p])}}]),P}(),Hi=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w;var s=this.w;this.xaxisFontSize=s.config.xaxis.labels.style.fontSize,this.axisFontFamily=s.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=s.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===s.config.chart.type&&s.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===s.config.xaxis.position&&(this.xAxisoffX=s.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Tt(i)}return rt(P,[{key:"drawYaxis",value:function(i){var s=this,r=this.w,l=new U(this.ctx),h=r.config.yaxis[i].labels.style,d=h.fontSize,u=h.fontFamily,p=h.fontWeight,m=l.group({class:"apexcharts-yaxis",rel:i,transform:"translate("+r.globals.translateYAxisX[i]+", 0)"});if(this.axesUtils.isYAxisHidden(i))return m;var v=l.group({class:"apexcharts-yaxis-texts-g"});m.add(v);var b=r.globals.yAxisScale[i].result.length-1,_=r.globals.gridHeight/b,A=r.globals.translateY,E=r.globals.yLabelFormatters[i],k=r.globals.yAxisScale[i].result.slice();k=this.axesUtils.checkForReversedLabels(i,k);var R="";if(r.config.yaxis[i].labels.show)for(var O=function(J){var H=k[J];H=E(H,J,r);var et=r.config.yaxis[i].labels.padding;r.config.yaxis[i].opposite&&0!==r.config.yaxis.length&&(et*=-1);var tt=s.axesUtils.getYAxisForeColor(h.colors,i),at=l.drawText({x:et,y:A+b/10+r.config.yaxis[i].labels.offsetY+1,text:H,textAnchor:r.config.yaxis[i].opposite?"start":"end",fontSize:d,fontFamily:u,fontWeight:p,maxWidth:r.config.yaxis[i].labels.maxWidth,foreColor:Array.isArray(tt)?tt[J]:tt,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+h.cssClass});J===b&&(R=at),v.add(at);var pt=document.createElementNS(r.globals.SVGNS,"title");if(pt.textContent=Array.isArray(H)?H.join(" "):H,at.node.appendChild(pt),0!==r.config.yaxis[i].labels.rotate){var Zt=l.rotateAroundCenter(R.node),Xt=l.rotateAroundCenter(at.node);at.node.setAttribute("transform","rotate(".concat(r.config.yaxis[i].labels.rotate," ").concat(Zt.x," ").concat(Xt.y,")"))}A+=_},N=b;N>=0;N--)O(N);if(void 0!==r.config.yaxis[i].title.text){var z=l.group({class:"apexcharts-yaxis-title"}),x=0;r.config.yaxis[i].opposite&&(x=r.globals.translateYAxisX[i]);var C=l.drawText({x,y:r.globals.gridHeight/2+r.globals.translateY+r.config.yaxis[i].title.offsetY,text:r.config.yaxis[i].title.text,textAnchor:"end",foreColor:r.config.yaxis[i].title.style.color,fontSize:r.config.yaxis[i].title.style.fontSize,fontWeight:r.config.yaxis[i].title.style.fontWeight,fontFamily:r.config.yaxis[i].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+r.config.yaxis[i].title.style.cssClass});z.add(C),m.add(z)}var T=r.config.yaxis[i].axisBorder,L=31+T.offsetX;if(r.config.yaxis[i].opposite&&(L=-31-T.offsetX),T.show){var W=l.drawLine(L,r.globals.translateY+T.offsetY-2,L,r.globals.gridHeight+r.globals.translateY+T.offsetY+2,T.color,0,T.width);m.add(W)}return r.config.yaxis[i].axisTicks.show&&this.axesUtils.drawYAxisTicks(L,b,T,r.config.yaxis[i].axisTicks,i,_,m),m}},{key:"drawYaxisInversed",value:function(i){var s=this.w,r=new U(this.ctx),l=r.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),h=r.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(s.globals.translateXAxisX,", ").concat(s.globals.translateXAxisY,")")});l.add(h);var d=s.globals.yAxisScale[i].result.length-1,u=s.globals.gridWidth/d+.1,p=u+s.config.xaxis.labels.offsetX,m=s.globals.xLabelFormatter,v=s.globals.yAxisScale[i].result.slice(),b=s.globals.timescaleLabels;b.length>0&&(this.xaxisLabels=b.slice(),d=(v=b.slice()).length),v=this.axesUtils.checkForReversedLabels(i,v);var _=b.length;if(s.config.xaxis.labels.show)for(var A=_?0:d;_?A<_:A>=0;_?A++:A--){var E=v[A];E=m(E,A,s);var k=s.globals.gridWidth+s.globals.padHorizontal-(p-u+s.config.xaxis.labels.offsetX);if(b.length){var R=this.axesUtils.getLabel(v,b,k,A,this.drawnLabels,this.xaxisFontSize);k=R.x,E=R.text,this.drawnLabels.push(R.text),0===A&&s.globals.skipFirstTimelinelabel&&(E=""),A===v.length-1&&s.globals.skipLastTimelinelabel&&(E="")}var O=r.drawText({x:k,y:this.xAxisoffX+s.config.xaxis.labels.offsetY+30-("top"===s.config.xaxis.position?s.globals.xAxisHeight+s.config.xaxis.axisTicks.height-2:0),text:E,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[i]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:s.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+s.config.xaxis.labels.style.cssClass});h.add(O),O.tspan(E);var N=document.createElementNS(s.globals.SVGNS,"title");N.textContent=E,O.node.appendChild(N),p+=u}return this.inversedYAxisTitleText(l),this.inversedYAxisBorder(l),l}},{key:"inversedYAxisBorder",value:function(i){var s=this.w,r=new U(this.ctx),l=s.config.xaxis.axisBorder;if(l.show){var h=0;"bar"===s.config.chart.type&&s.globals.isXNumeric&&(h-=15);var d=r.drawLine(s.globals.padHorizontal+h+l.offsetX,this.xAxisoffX,s.globals.gridWidth,this.xAxisoffX,l.color,0,l.height);i.add(d)}}},{key:"inversedYAxisTitleText",value:function(i){var s=this.w,r=new U(this.ctx);if(void 0!==s.config.xaxis.title.text){var l=r.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),h=r.drawText({x:s.globals.gridWidth/2+s.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(s.config.xaxis.title.style.fontSize)+s.config.xaxis.title.offsetY+20,text:s.config.xaxis.title.text,textAnchor:"middle",fontSize:s.config.xaxis.title.style.fontSize,fontFamily:s.config.xaxis.title.style.fontFamily,fontWeight:s.config.xaxis.title.style.fontWeight,foreColor:s.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+s.config.xaxis.title.style.cssClass});l.add(h),i.add(l)}}},{key:"yAxisTitleRotate",value:function(i,s){var r=this.w,l=new U(this.ctx),h={width:0,height:0},d={width:0,height:0},u=r.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g"));null!==u&&(h=u.getBoundingClientRect());var p=r.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-title text"));if(null!==p&&(d=p.getBoundingClientRect()),null!==p){var m=this.xPaddingForYAxisTitle(i,h,d,s);p.setAttribute("x",m.xPos-(s?10:0))}if(null!==p){var v=l.rotateAroundCenter(p);p.setAttribute("transform","rotate(".concat(s?-1*r.config.yaxis[i].title.rotate:r.config.yaxis[i].title.rotate," ").concat(v.x," ").concat(v.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(i,s,r,l){var h=this.w,d=0,u=0,p=10;return void 0===h.config.yaxis[i].title.text||i<0?{xPos:u,padd:0}:(l?(u=s.width+h.config.yaxis[i].title.offsetX+r.width/2+p/2,0===(d+=1)&&(u-=p/2)):(u=-1*s.width+h.config.yaxis[i].title.offsetX+p/2+r.width/2,h.globals.isBarHorizontal&&(u=-1*s.width-h.config.yaxis[i].title.offsetX-(p=25))),{xPos:u,padd:p})}},{key:"setYAxisXPosition",value:function(i,s){var r=this.w,l=0,h=0,d=18,u=1;r.config.yaxis.length>1&&(this.multipleYs=!0),r.config.yaxis.map(function(p,m){var v=r.globals.ignoreYAxisIndexes.indexOf(m)>-1||!p.show||p.floating||0===i[m].width,b=i[m].width+s[m].width;p.opposite?r.globals.isBarHorizontal?r.globals.translateYAxisX[m]=(h=r.globals.gridWidth+r.globals.translateX-1)-p.labels.offsetX:(h=r.globals.gridWidth+r.globals.translateX+u,v||(u=u+b+20),r.globals.translateYAxisX[m]=h-p.labels.offsetX+20):(l=r.globals.translateX-d,v||(d=d+b+20),r.globals.translateYAxisX[m]=l+p.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var i=this.w,s=i.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(s=B.listToArray(s)).forEach(function(r,l){var h=i.config.yaxis[l];if(h&&void 0!==h.labels.align){var d=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(l,"'] .apexcharts-yaxis-texts-g")),u=i.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(l,"'] .apexcharts-yaxis-label"));u=B.listToArray(u);var p=d.getBoundingClientRect();"left"===h.labels.align?(u.forEach(function(m,v){m.setAttribute("text-anchor","start")}),h.opposite||d.setAttribute("transform","translate(-".concat(p.width,", 0)"))):"center"===h.labels.align?(u.forEach(function(m,v){m.setAttribute("text-anchor","middle")}),d.setAttribute("transform","translate(".concat(p.width/2*(h.opposite?1:-1),", 0)"))):"right"===h.labels.align&&(u.forEach(function(m,v){m.setAttribute("text-anchor","end")}),h.opposite&&d.setAttribute("transform","translate(".concat(p.width,", 0)")))}})}}]),P}(),Si=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w,this.documentEvent=B.bind(this.documentEvent,this)}return rt(P,[{key:"addEventListener",value:function(i,s){var r=this.w;r.globals.events.hasOwnProperty(i)?r.globals.events[i].push(s):r.globals.events[i]=[s]}},{key:"removeEventListener",value:function(i,s){var r=this.w;if(r.globals.events.hasOwnProperty(i)){var l=r.globals.events[i].indexOf(s);-1!==l&&r.globals.events[i].splice(l,1)}}},{key:"fireEvent",value:function(i,s){var r=this.w;if(r.globals.events.hasOwnProperty(i)){s&&s.length||(s=[]);for(var l=r.globals.events[i],h=l.length,d=0;d<h;d++)l[d].apply(null,s)}}},{key:"setupEventHandlers",value:function(){var i=this,s=this.w,r=this.ctx,l=s.globals.dom.baseEl.querySelector(s.globals.chartClass);this.ctx.eventList.forEach(function(h){l.addEventListener(h,function(d){var u=Object.assign({},s,{seriesIndex:s.globals.capturedSeriesIndex,dataPointIndex:s.globals.capturedDataPointIndex});"mousemove"===d.type||"touchmove"===d.type?"function"==typeof s.config.chart.events.mouseMove&&s.config.chart.events.mouseMove(d,r,u):"mouseleave"===d.type||"touchleave"===d.type?"function"==typeof s.config.chart.events.mouseLeave&&s.config.chart.events.mouseLeave(d,r,u):("mouseup"===d.type&&1===d.which||"touchend"===d.type)&&("function"==typeof s.config.chart.events.click&&s.config.chart.events.click(d,r,u),r.ctx.events.fireEvent("click",[d,r,u]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(h){s.globals.dom.baseEl.addEventListener(h,i.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(i){var s=this.w,r=i.target.className;if("click"===i.type){var l=s.globals.dom.baseEl.querySelector(".apexcharts-menu");l&&l.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==r&&l.classList.remove("apexcharts-menu-open")}s.globals.clientX="touchmove"===i.type?i.touches[0].clientX:i.clientX,s.globals.clientY="touchmove"===i.type?i.touches[0].clientY:i.clientY}}]),P}(),Ai=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"setCurrentLocaleValues",value:function(i){var s=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(s=this.w.config.chart.locales.concat(window.Apex.chart.locales));var r=s.filter(function(h){return h.name===i})[0];if(!r)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var l=B.extend(Qt,r);this.w.globals.locale=l.options}}]),P}(),ga=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"drawAxis",value:function(i,s){var r,l,h=this.w.globals,d=this.w.config,u=new fs(this.ctx),p=new Hi(this.ctx);h.axisCharts&&"radar"!==i&&(h.isBarHorizontal?(l=p.drawYaxisInversed(0),r=u.drawXaxisInversed(0),h.dom.elGraphical.add(r),h.dom.elGraphical.add(l)):(r=u.drawXaxis(),h.dom.elGraphical.add(r),d.yaxis.map(function(m,v){-1===h.ignoreYAxisIndexes.indexOf(v)&&(l=p.drawYaxis(v),h.dom.Paper.add(l))})))}}]),P}(),un=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"drawXCrosshairs",value:function(){var i=this.w,s=new U(this.ctx),r=new ct(this.ctx),l=i.config.xaxis.crosshairs.fill.gradient,h=i.config.xaxis.crosshairs.dropShadow,_=h.enabled,A=h.left,E=h.top,k=h.blur,R=h.color,O=h.opacity,N=i.config.xaxis.crosshairs.fill.color;if(i.config.xaxis.crosshairs.show){"gradient"===i.config.xaxis.crosshairs.fill.type&&(N=s.drawGradient("vertical",l.colorFrom,l.colorTo,l.opacityFrom,l.opacityTo,null,l.stops,null));var z=s.drawRect();1===i.config.xaxis.crosshairs.width&&(z=s.drawLine());var x=i.globals.gridHeight;(!B.isNumber(x)||x<0)&&(x=0);var C=i.config.xaxis.crosshairs.width;(!B.isNumber(C)||C<0)&&(C=0),z.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:x,width:C,height:x,fill:N,filter:"none","fill-opacity":i.config.xaxis.crosshairs.opacity,stroke:i.config.xaxis.crosshairs.stroke.color,"stroke-width":i.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":i.config.xaxis.crosshairs.stroke.dashArray}),_&&(z=r.dropShadow(z,{left:A,top:E,blur:k,color:R,opacity:O})),i.globals.dom.elGraphical.add(z)}}},{key:"drawYCrosshairs",value:function(){var i=this.w,s=new U(this.ctx),r=i.config.yaxis[0].crosshairs,l=i.globals.barPadForNumericAxis;if(i.config.yaxis[0].crosshairs.show){var h=s.drawLine(-l,0,i.globals.gridWidth+l,0,r.stroke.color,r.stroke.dashArray,r.stroke.width);h.attr({class:"apexcharts-ycrosshairs"}),i.globals.dom.elGraphical.add(h)}var d=s.drawLine(-l,0,i.globals.gridWidth+l,0,r.stroke.color,0,0);d.attr({class:"apexcharts-ycrosshairs-hidden"}),i.globals.dom.elGraphical.add(d)}}]),P}(),Ls=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"checkResponsiveConfig",value:function(i){var s=this,r=this.w,l=r.config;if(0!==l.responsive.length){var h=l.responsive.slice();h.sort(function(m,v){return m.breakpoint>v.breakpoint?1:v.breakpoint>m.breakpoint?-1:0}).reverse();var d=new ye({}),u=function(){var m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=h[0].breakpoint,b=window.innerWidth>0?window.innerWidth:screen.width;if(b>v){var _=wt.extendArrayProps(d,r.globals.initialConfig,r);m=B.extend(_,m),m=B.extend(r.config,m),s.overrideResponsiveOptions(m)}else for(var A=0;A<h.length;A++)b<h[A].breakpoint&&(m=wt.extendArrayProps(d,h[A].options,r),m=B.extend(r.config,m),s.overrideResponsiveOptions(m))};if(i){var p=wt.extendArrayProps(d,i,r);p=B.extend(r.config,p),u(p=B.extend(p,i))}else u({})}}},{key:"overrideResponsiveOptions",value:function(i){var s=new ye(i).init({responsiveOverride:!0});this.w.config=s}}]),P}(),Ps=function(){function P(i){lt(this,P),this.ctx=i,this.colors=[],this.w=i.w;var s=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===s.config.chart.type&&s.config.plotOptions.treemap.distributed||"heatmap"===s.config.chart.type&&s.config.plotOptions.heatmap.distributed,this.isBarDistributed=s.config.plotOptions.bar.distributed&&("bar"===s.config.chart.type||"rangeBar"===s.config.chart.type)}return rt(P,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var i=this,s=this.w,r=new B;if(s.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(s.config.theme.mode)),void 0===s.config.colors?s.globals.colors=this.predefined():(s.globals.colors=s.config.colors,Array.isArray(s.config.colors)&&s.config.colors.length>0&&"function"==typeof s.config.colors[0]&&(s.globals.colors=s.config.series.map(function(A,E){var k=s.config.colors[E];return k||(k=s.config.colors[0]),"function"==typeof k?(i.isColorFn=!0,k({value:s.globals.axisCharts?s.globals.series[E][0]?s.globals.series[E][0]:0:s.globals.series[E],seriesIndex:E,dataPointIndex:E,w:s})):k}))),s.globals.seriesColors.map(function(A,E){A&&(s.globals.colors[E]=A)}),s.config.theme.monochrome.enabled){var l=[],h=s.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(h=s.globals.series[0].length*s.globals.series.length);for(var d=s.config.theme.monochrome.color,u=1/(h/s.config.theme.monochrome.shadeIntensity),p=s.config.theme.monochrome.shadeTo,m=0,v=0;v<h;v++){var b=void 0;"dark"===p?(b=r.shadeColor(-1*m,d),m+=u):(b=r.shadeColor(m,d),m+=u),l.push(b)}s.globals.colors=l.slice()}var _=s.globals.colors.slice();this.pushExtraColors(s.globals.colors),["fill","stroke"].forEach(function(A){s.globals[A].colors=void 0===s.config[A].colors?i.isColorFn?s.config.colors:_:s.config[A].colors.slice(),i.pushExtraColors(s.globals[A].colors)}),s.globals.dataLabels.style.colors=void 0===s.config.dataLabels.style.colors?_:s.config.dataLabels.style.colors.slice(),this.pushExtraColors(s.globals.dataLabels.style.colors,50),s.globals.radarPolygons.fill.colors=void 0===s.config.plotOptions.radar.polygons.fill.colors?["dark"===s.config.theme.mode?"#424242":"none"]:s.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(s.globals.radarPolygons.fill.colors,20),s.globals.markers.colors=void 0===s.config.markers.colors?_:s.config.markers.colors.slice(),this.pushExtraColors(s.globals.markers.colors)}},{key:"pushExtraColors",value:function(i,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=this.w,h=s||l.globals.series.length;if(null===r&&(r=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===l.config.chart.type&&l.config.plotOptions.heatmap.colorScale.inverse),r&&l.globals.series.length&&(h=l.globals.series[l.globals.maxValsInArrayIndex].length*l.globals.series.length),i.length<h)for(var d=h-i.length,u=0;u<d;u++)i.push(i[u])}},{key:"updateThemeOptions",value:function(i){i.chart=i.chart||{},i.tooltip=i.tooltip||{};var s=i.theme.mode||"light",r=i.theme.palette?i.theme.palette:"dark"===s?"palette4":"palette1",l=i.chart.foreColor?i.chart.foreColor:"dark"===s?"#f6f7f8":"#373d3f";return i.tooltip.theme=s,i.chart.foreColor=l,i.theme.palette=r,i}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),P}(),Ar=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(i){var s=this.w,r="title"===i?s.config.title:s.config.subtitle,l=s.globals.svgWidth/2,h=r.offsetY,d="middle";if("left"===r.align?(l=10,d="start"):"right"===r.align&&(l=s.globals.svgWidth-10,d="end"),l+=r.offsetX,h=h+parseInt(r.style.fontSize,10)+r.margin/2,void 0!==r.text){var u=new U(this.ctx).drawText({x:l,y:h,text:r.text,textAnchor:d,fontSize:r.style.fontSize,fontFamily:r.style.fontFamily,fontWeight:r.style.fontWeight,foreColor:r.style.color,opacity:1});u.node.setAttribute("class","apexcharts-".concat(i,"-text")),s.globals.dom.Paper.add(u)}}}]),P}(),dn=function(){function P(i){lt(this,P),this.w=i.w,this.dCtx=i}return rt(P,[{key:"getTitleSubtitleCoords",value:function(i){var s=this.w,r=0,l=0,h="title"===i?s.config.title.floating:s.config.subtitle.floating,d=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(i,"-text"));if(null!==d&&!h){var u=d.getBoundingClientRect();r=u.width,l=s.globals.axisCharts?u.height+5:u.height}return{width:r,height:l}}},{key:"getLegendsRect",value:function(){var i=this.w,s=i.globals.dom.baseEl.querySelector(".apexcharts-legend");i.config.legend.height||"top"!==i.config.legend.position&&"bottom"!==i.config.legend.position||(s.style.maxHeight=i.globals.svgHeight/2+"px");var r=Object.assign({},B.getBoundingClientRect(s));return this.dCtx.lgRect=null!==s&&!i.config.legend.floating&&i.config.legend.show?{x:r.x,y:r.y,height:r.height,width:0===r.height?0:r.width}:{x:0,y:0,height:0,width:0},"left"!==i.config.legend.position&&"right"!==i.config.legend.position||1.5*this.dCtx.lgRect.width>i.globals.svgWidth&&(this.dCtx.lgRect.width=i.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(i,s){var r=i;if(this.w.globals.isMultiLineX){var l=s.map(function(d,u){return Array.isArray(d)?d.length:1}),h=Math.max.apply(Math,K(l));r=s[l.indexOf(h)]}return r}}]),P}(),oi=function(){function P(i){lt(this,P),this.w=i.w,this.dCtx=i}return rt(P,[{key:"getxAxisLabelsCoords",value:function(){var i,s=this.w,r=s.globals.labels.slice();if(s.config.xaxis.convertedCatToNumeric&&0===r.length&&(r=s.globals.categoryLabels),s.globals.timescaleLabels.length>0){var l=this.getxAxisTimeScaleLabelsCoords();i={width:l.width,height:l.height},s.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==s.config.legend.position&&"right"!==s.config.legend.position||s.config.legend.floating?0:this.dCtx.lgRect.width;var h=s.globals.xLabelFormatter,d=B.getLargestStringFromArr(r),u=this.dCtx.dimHelpers.getLargestStringFromMultiArr(d,r);s.globals.isBarHorizontal&&(u=d=s.globals.yAxisScale[0].result.reduce(function(E,k){return E.length>k.length?E:k},0));var p=new ds(this.dCtx.ctx),m=d;d=p.xLabelFormat(h,d,m,{i:void 0,dateFormatter:new xe(this.dCtx.ctx).formatDate,w:s}),u=p.xLabelFormat(h,u,m,{i:void 0,dateFormatter:new xe(this.dCtx.ctx).formatDate,w:s}),(s.config.xaxis.convertedCatToNumeric&&void 0===d||""===String(d).trim())&&(u=d="1");var v=new U(this.dCtx.ctx),b=v.getTextRects(d,s.config.xaxis.labels.style.fontSize),_=b;if(d!==u&&(_=v.getTextRects(u,s.config.xaxis.labels.style.fontSize)),(i={width:b.width>=_.width?b.width:_.width,height:b.height>=_.height?b.height:_.height}).width*r.length>s.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==s.config.xaxis.labels.rotate||s.config.xaxis.labels.rotateAlways){if(!s.globals.isBarHorizontal){s.globals.rotateXLabels=!0;var A=function(E){return v.getTextRects(E,s.config.xaxis.labels.style.fontSize,s.config.xaxis.labels.style.fontFamily,"rotate(".concat(s.config.xaxis.labels.rotate," 0 0)"),!1)};b=A(d),d!==u&&(_=A(u)),i.height=(b.height>_.height?b.height:_.height)/1.5,i.width=b.width>_.width?b.width:_.width}}else s.globals.rotateXLabels=!1}return s.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var i,s=this.w;if(!s.globals.hasGroups)return{width:0,height:0};var r,l=(null===(i=s.config.xaxis.group.style)||void 0===i?void 0:i.fontSize)||s.config.xaxis.labels.style.fontSize,h=s.globals.groups.map(function(b){return b.title}),d=B.getLargestStringFromArr(h),u=this.dCtx.dimHelpers.getLargestStringFromMultiArr(d,h),p=new U(this.dCtx.ctx),m=p.getTextRects(d,l),v=m;return d!==u&&(v=p.getTextRects(u,l)),r={width:m.width>=v.width?m.width:v.width,height:m.height>=v.height?m.height:v.height},s.config.xaxis.labels.show||(r={width:0,height:0}),{width:r.width,height:r.height}}},{key:"getxAxisTitleCoords",value:function(){var i=this.w,s=0,r=0;if(void 0!==i.config.xaxis.title.text){var l=new U(this.dCtx.ctx).getTextRects(i.config.xaxis.title.text,i.config.xaxis.title.style.fontSize);s=l.width,r=l.height}return{width:s,height:r}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var i,s=this.w;this.dCtx.timescaleLabels=s.globals.timescaleLabels.slice();var r=this.dCtx.timescaleLabels.map(function(h){return h.value}),l=r.reduce(function(h,d){return void 0===h?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):h.length>d.length?h:d},0);return 1.05*(i=new U(this.dCtx.ctx).getTextRects(l,s.config.xaxis.labels.style.fontSize)).width*r.length>s.globals.gridWidth&&0!==s.config.xaxis.labels.rotate&&(s.globals.overlappingXLabels=!0),i}},{key:"additionalPaddingXLabels",value:function(i){var s=this,r=this.w,l=r.globals,h=r.config,d=h.xaxis.type,u=i.width;l.skipLastTimelinelabel=!1,l.skipFirstTimelinelabel=!1;var p=r.config.yaxis[0].opposite&&r.globals.isBarHorizontal;h.yaxis.forEach(function(v,b){p?(s.dCtx.gridPad.left<u&&(s.dCtx.xPadLeft=u/2+1),s.dCtx.xPadRight=u/2+1):function(v,b){-1!==l.collapsedSeriesIndices.indexOf(b)||function(_){if(s.dCtx.timescaleLabels&&s.dCtx.timescaleLabels.length){var k=s.dCtx.timescaleLabels[0].position-u/1.75+s.dCtx.yAxisWidthLeft;s.dCtx.timescaleLabels[s.dCtx.timescaleLabels.length-1].position+u/1.75-s.dCtx.yAxisWidthRight>l.svgWidth-l.translateX-("right"===r.config.legend.position&&s.dCtx.lgRect.width>0?s.dCtx.lgRect.width:0)&&(l.skipLastTimelinelabel=!0),k<-(_.show&&!_.floating||"bar"!==h.chart.type&&"candlestick"!==h.chart.type&&"rangeBar"!==h.chart.type&&"boxPlot"!==h.chart.type?10:u/1.75)&&(l.skipFirstTimelinelabel=!0)}else"datetime"===d?s.dCtx.gridPad.right<u&&!l.rotateXLabels&&(l.skipLastTimelinelabel=!0):"datetime"!==d&&s.dCtx.gridPad.right<u/2-s.dCtx.yAxisWidthRight&&!l.rotateXLabels&&!r.config.xaxis.labels.trim&&("between"!==r.config.xaxis.tickPlacement||r.globals.isBarHorizontal)&&(s.dCtx.xPadRight=u/2+1)}(v)}(v,b)})}}]),P}(),Mr=function(){function P(i){lt(this,P),this.w=i.w,this.dCtx=i}return rt(P,[{key:"getyAxisLabelsCoords",value:function(){var i=this,s=this.w,r=[],l=10,h=new Tt(this.dCtx.ctx);return s.config.yaxis.map(function(d,u){var p=s.globals.yAxisScale[u],m=0;if(!h.isYAxisHidden(u)&&d.labels.show&&void 0!==d.labels.minWidth&&(m=d.labels.minWidth),!h.isYAxisHidden(u)&&d.labels.show&&p.result.length){var v=s.globals.yLabelFormatters[u],b=p.niceMin===Number.MIN_VALUE?0:p.niceMin,_=String(b).length>String(p.niceMax).length?b:p.niceMax,A=v(_,{seriesIndex:u,dataPointIndex:-1,w:s}),E=A;if(void 0!==A&&0!==A.length||(A=_),s.globals.isBarHorizontal){l=0;var k=s.globals.labels.slice();A=v(A=B.getLargestStringFromArr(k),{seriesIndex:u,dataPointIndex:-1,w:s}),E=i.dCtx.dimHelpers.getLargestStringFromMultiArr(A,k)}var R=new U(i.dCtx.ctx),O="rotate(".concat(d.labels.rotate," 0 0)"),N=R.getTextRects(A,d.labels.style.fontSize,d.labels.style.fontFamily,O,!1),z=N;A!==E&&(z=R.getTextRects(E,d.labels.style.fontSize,d.labels.style.fontFamily,O,!1)),r.push({width:(m>z.width||m>N.width?m:z.width>N.width?z.width:N.width)+l,height:z.height>N.height?z.height:N.height})}else r.push({width:0,height:0})}),r}},{key:"getyAxisTitleCoords",value:function(){var i=this,r=[];return this.w.config.yaxis.map(function(l,h){if(l.show&&void 0!==l.title.text){var d=new U(i.dCtx.ctx),u="rotate(".concat(l.title.rotate," 0 0)"),p=d.getTextRects(l.title.text,l.title.style.fontSize,l.title.style.fontFamily,u,!1);r.push({width:p.width,height:p.height})}else r.push({width:0,height:0})}),r}},{key:"getTotalYAxisWidth",value:function(){var i=this.w,s=0,r=0,l=0,h=i.globals.yAxisScale.length>1?10:0,d=new Tt(this.dCtx.ctx),u=function(p,m){var v=i.config.yaxis[m].floating,b=0;p.width>0&&!v?(b=p.width+h,i.globals.ignoreYAxisIndexes.indexOf(m)>-1&&(b=b-p.width-h)):b=v||d.isYAxisHidden(m)?0:5,i.config.yaxis[m].opposite?l+=b:r+=b,s+=b};return i.globals.yLabelsCoords.map(function(p,m){u(p,m)}),i.globals.yTitleCoords.map(function(p,m){u(p,m)}),i.globals.isBarHorizontal&&!i.config.yaxis[0].floating&&(s=i.globals.yLabelsCoords[0].width+i.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=r,this.dCtx.yAxisWidthRight=l,s}}]),P}(),pa=function(){function P(i){lt(this,P),this.w=i.w,this.dCtx=i}return rt(P,[{key:"gridPadForColumnsInNumericAxis",value:function(i){var s=this.w;if(s.globals.noData||s.globals.allSeriesCollapsed)return 0;var r=function(v){return"bar"===v||"rangeBar"===v||"candlestick"===v||"boxPlot"===v},l=s.config.chart.type,h=0,d=r(l)?s.config.series.length:1;if(s.globals.comboBarCount>0&&(d=s.globals.comboBarCount),s.globals.collapsedSeries.forEach(function(v){r(v.type)&&(d-=1)}),s.config.chart.stacked&&(d=1),(r(l)||s.globals.comboBarCount>0)&&s.globals.isXNumeric&&!s.globals.isBarHorizontal&&d>0){var u,p,m=Math.abs(s.globals.initialMaxX-s.globals.initialMinX);m<=3&&(m=s.globals.dataPoints),u=m/i,s.globals.minXDiff&&s.globals.minXDiff/u>0&&(p=s.globals.minXDiff/u),p>i/2&&(p/=2),(h=p/d*parseInt(s.config.plotOptions.bar.columnWidth,10)/100)<1&&(h=1),s.globals.barPadForNumericAxis=h=h/(d>1?1:1.5)+5}return h}},{key:"gridPadFortitleSubtitle",value:function(){var i=this,s=this.w,r=s.globals,l=this.dCtx.isSparkline||!s.globals.axisCharts?0:10;["title","subtitle"].forEach(function(u){l+=void 0!==s.config[u].text?s.config[u].margin:i.dCtx.isSparkline||!s.globals.axisCharts?0:5}),!s.config.legend.show||"bottom"!==s.config.legend.position||s.config.legend.floating||s.globals.axisCharts||(l+=10);var h=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),d=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");r.gridHeight=r.gridHeight-h.height-d.height-l,r.translateY=r.translateY+h.height+d.height+l}},{key:"setGridXPosForDualYAxis",value:function(i,s){var r=this.w,l=new Tt(this.dCtx.ctx);r.config.yaxis.map(function(h,d){-1!==r.globals.ignoreYAxisIndexes.indexOf(d)||h.floating||l.isYAxisHidden(d)||(h.opposite&&(r.globals.translateX=r.globals.translateX-(s[d].width+i[d].width)-parseInt(r.config.yaxis[d].labels.style.fontSize,10)/1.2-12),r.globals.translateX<2&&(r.globals.translateX=2))})}}]),P}(),Mi=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new dn(this),this.dimYAxis=new Mr(this),this.dimXAxis=new oi(this),this.dimGrid=new pa(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return rt(P,[{key:"plotCoords",value:function(){var i=this,s=this.w,r=s.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&(s.config.markers.discrete.length>0||s.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(h){var d=function cs(P,i){return function(s){if(Array.isArray(s))return s}(P)||function(s,r){var l=null==s?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(null!=l){var h,d,u=[],p=!0,m=!1;try{for(l=l.call(s);!(p=(h=l.next()).done)&&(u.push(h.value),!r||u.length!==r);p=!0);}catch(v){m=!0,d=v}finally{try{p||null==l.return||l.return()}finally{if(m)throw d}}return u}}(P,i)||Q(P,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(h,2);i.gridPad[d[0]]=Math.max(d[1],i.w.globals.markers.largestSize/1.5)}),r.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),r.gridHeight=r.gridHeight-this.gridPad.top-this.gridPad.bottom,r.gridWidth=r.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var l=this.dimGrid.gridPadForColumnsInNumericAxis(r.gridWidth);r.gridWidth=r.gridWidth-2*l,r.translateX=r.translateX+this.gridPad.left+this.xPadLeft+(l>0?l+4:0),r.translateY=r.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var i=this,s=this.w,r=s.globals,l=this.dimYAxis.getyAxisLabelsCoords(),h=this.dimYAxis.getyAxisTitleCoords();s.globals.yLabelsCoords=[],s.globals.yTitleCoords=[],s.config.yaxis.map(function(A,E){s.globals.yLabelsCoords.push({width:l[E].width,index:E}),s.globals.yTitleCoords.push({width:h[E].width,index:E})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var d=this.dimXAxis.getxAxisLabelsCoords(),u=this.dimXAxis.getxAxisGroupLabelsCoords(),p=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(d,p,u),r.translateXAxisY=s.globals.rotateXLabels?this.xAxisHeight/8:-4,r.translateXAxisX=s.globals.rotateXLabels&&s.globals.isXNumeric&&s.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,s.globals.isBarHorizontal&&(r.rotateXLabels=!1,r.translateXAxisY=parseInt(s.config.xaxis.labels.style.fontSize,10)/1.5*-1),r.translateXAxisY=r.translateXAxisY+s.config.xaxis.labels.offsetY,r.translateXAxisX=r.translateXAxisX+s.config.xaxis.labels.offsetX;var m=this.yAxisWidth,v=this.xAxisHeight;r.xAxisLabelsHeight=this.xAxisHeight-p.height,r.xAxisGroupLabelsHeight=r.xAxisLabelsHeight-d.height,r.xAxisLabelsWidth=this.xAxisWidth,r.xAxisHeight=this.xAxisHeight;var b=10;("radar"===s.config.chart.type||this.isSparkline)&&(m=0,v=r.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===s.config.chart.type)&&(m=0,v=0,b=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(d);var _=function(){r.translateX=m,r.gridHeight=r.svgHeight-i.lgRect.height-v-(i.isSparkline||"treemap"===s.config.chart.type?0:s.globals.rotateXLabels?10:15),r.gridWidth=r.svgWidth-m};switch("top"===s.config.xaxis.position&&(b=r.xAxisHeight-s.config.xaxis.axisTicks.height-5),s.config.legend.position){case"bottom":r.translateY=b,_();break;case"top":r.translateY=this.lgRect.height+b,_();break;case"left":r.translateY=b,r.translateX=this.lgRect.width+m,r.gridHeight=r.svgHeight-v-12,r.gridWidth=r.svgWidth-this.lgRect.width-m;break;case"right":r.translateY=b,r.translateX=m,r.gridHeight=r.svgHeight-v-12,r.gridWidth=r.svgWidth-this.lgRect.width-m-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(h,l),new Hi(this.ctx).setYAxisXPosition(l,h)}},{key:"setDimensionsForNonAxisCharts",value:function(){var i=this.w,s=i.globals,r=i.config,l=0;i.config.legend.show&&!i.config.legend.floating&&(l=20);var h="pie"===r.chart.type||"polarArea"===r.chart.type||"donut"===r.chart.type?"pie":"radialBar",d=r.plotOptions[h].offsetY,u=r.plotOptions[h].offsetX;if(!r.legend.show||r.legend.floating)return s.gridHeight=s.svgHeight-r.grid.padding.left+r.grid.padding.right,s.gridWidth=s.gridHeight,s.translateY=d,void(s.translateX=u+(s.svgWidth-s.gridWidth)/2);switch(r.legend.position){case"bottom":s.gridHeight=s.svgHeight-this.lgRect.height-s.goldenPadding,s.gridWidth=s.svgWidth,s.translateY=d-10,s.translateX=u+(s.svgWidth-s.gridWidth)/2;break;case"top":s.gridHeight=s.svgHeight-this.lgRect.height-s.goldenPadding,s.gridWidth=s.svgWidth,s.translateY=this.lgRect.height+d+10,s.translateX=u+(s.svgWidth-s.gridWidth)/2;break;case"left":s.gridWidth=s.svgWidth-this.lgRect.width-l,s.gridHeight="auto"!==r.chart.height?s.svgHeight:s.gridWidth,s.translateY=d,s.translateX=u+this.lgRect.width+l;break;case"right":s.gridWidth=s.svgWidth-this.lgRect.width-l-5,s.gridHeight="auto"!==r.chart.height?s.svgHeight:s.gridWidth,s.translateY=d,s.translateX=u+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(i,s,r){var l=this.w;this.xAxisHeight=(r.height+i.height+s.height)*(l.globals.isMultiLineX?1.2:l.globals.LINE_HEIGHT_RATIO)+(l.globals.hasGroups?2:1)*(l.globals.rotateXLabels?22:10)+(l.globals.rotateXLabels&&"bottom"===l.config.legend.position?10:0),this.xAxisWidth=i.width,this.xAxisHeight-s.height>l.config.xaxis.labels.maxHeight&&(this.xAxisHeight=l.config.xaxis.labels.maxHeight),l.config.xaxis.labels.minHeight&&this.xAxisHeight<l.config.xaxis.labels.minHeight&&(this.xAxisHeight=l.config.xaxis.labels.minHeight),l.config.xaxis.floating&&(this.xAxisHeight=0);var v=0,b=0;l.config.yaxis.forEach(function(_){v+=_.labels.minWidth,b+=_.labels.maxWidth}),this.yAxisWidth<v&&(this.yAxisWidth=v),this.yAxisWidth>b&&(this.yAxisWidth=b)}}]),P}(),Os=function(){function P(i){lt(this,P),this.w=i.w,this.lgCtx=i}return rt(P,[{key:"getLegendStyles",value:function(){var i=document.createElement("style");i.setAttribute("type","text/css");var s=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return i.appendChild(s),i}},{key:"getLegendBBox",value:function(){var i=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:i.height,clww:i.width}}},{key:"appendToForeignObject",value:function(){var i=this.w.globals;i.dom.elLegendForeign=document.createElementNS(i.SVGNS,"foreignObject");var s=i.dom.elLegendForeign;s.setAttribute("x",0),s.setAttribute("y",0),s.setAttribute("width",i.svgWidth),s.setAttribute("height",i.svgHeight),i.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),s.appendChild(i.dom.elLegendWrap),s.appendChild(this.getLegendStyles()),i.dom.Paper.node.insertBefore(s,i.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(i,s){var r=this,l=this.w;if(l.globals.axisCharts||"radialBar"===l.config.chart.type){l.globals.resized=!0;var h=null,d=null;l.globals.risingSeries=[],l.globals.axisCharts?(h=l.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(i,"']")),d=parseInt(h.getAttribute("data:realIndex"),10)):(h=l.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(i+1,"']")),d=parseInt(h.getAttribute("rel"),10)-1),s?[{cs:l.globals.collapsedSeries,csi:l.globals.collapsedSeriesIndices},{cs:l.globals.ancillaryCollapsedSeries,csi:l.globals.ancillaryCollapsedSeriesIndices}].forEach(function(v){r.riseCollapsedSeries(v.cs,v.csi,d)}):this.hideSeries({seriesEl:h,realIndex:d})}else{var u=l.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(i+1,"'] path")),p=l.config.chart.type;if("pie"===p||"polarArea"===p||"donut"===p){var m=l.config.plotOptions.pie.donut.labels;new U(this.lgCtx.ctx).pathMouseDown(u.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(u.members[0].node,m)}u.fire("click")}}},{key:"hideSeries",value:function(i){var s=i.seriesEl,r=i.realIndex,l=this.w,h=B.clone(l.config.series);if(l.globals.axisCharts){var d=!1;if(l.config.yaxis[r]&&l.config.yaxis[r].show&&l.config.yaxis[r].showAlways&&(d=!0,l.globals.ancillaryCollapsedSeriesIndices.indexOf(r)<0&&(l.globals.ancillaryCollapsedSeries.push({index:r,data:h[r].data.slice(),type:s.parentNode.className.baseVal.split("-")[1]}),l.globals.ancillaryCollapsedSeriesIndices.push(r))),!d){l.globals.collapsedSeries.push({index:r,data:h[r].data.slice(),type:s.parentNode.className.baseVal.split("-")[1]}),l.globals.collapsedSeriesIndices.push(r);var u=l.globals.risingSeries.indexOf(r);l.globals.risingSeries.splice(u,1)}}else l.globals.collapsedSeries.push({index:r,data:h[r]}),l.globals.collapsedSeriesIndices.push(r);for(var p=s.childNodes,m=0;m<p.length;m++)p[m].classList.contains("apexcharts-series-markers-wrap")&&(p[m].classList.contains("apexcharts-hide")?p[m].classList.remove("apexcharts-hide"):p[m].classList.add("apexcharts-hide"));l.globals.allSeriesCollapsed=l.globals.collapsedSeries.length===l.config.series.length,h=this._getSeriesBasedOnCollapsedState(h),this.lgCtx.ctx.updateHelpers._updateSeries(h,l.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(i,s,r){var l=this.w,h=B.clone(l.config.series);if(i.length>0){for(var d=0;d<i.length;d++)i[d].index===r&&(l.globals.axisCharts?(h[r].data=i[d].data.slice(),i.splice(d,1),s.splice(d,1),l.globals.risingSeries.push(r)):(h[r]=i[d].data,i.splice(d,1),s.splice(d,1),l.globals.risingSeries.push(r)));h=this._getSeriesBasedOnCollapsedState(h),this.lgCtx.ctx.updateHelpers._updateSeries(h,l.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(i){var s=this.w;return i.forEach(s.globals.axisCharts?function(r,l){s.globals.collapsedSeriesIndices.indexOf(l)>-1&&(i[l].data=[])}:function(r,l){s.globals.collapsedSeriesIndices.indexOf(l)>-1&&(i[l]=0)}),i}}]),P}(),fn=function(){function P(i,s){lt(this,P),this.ctx=i,this.w=i.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new Os(this)}return rt(P,[{key:"init",value:function(){var i=this.w,s=i.globals,r=i.config;if((r.legend.showForSingleSeries&&1===s.series.length||this.isBarsDistributed||s.series.length>1||!s.axisCharts)&&r.legend.show){for(;s.dom.elLegendWrap.firstChild;)s.dom.elLegendWrap.removeChild(s.dom.elLegendWrap.firstChild);this.drawLegends(),B.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===r.legend.position||"top"===r.legend.position?this.legendAlignHorizontal():"right"!==r.legend.position&&"left"!==r.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var i=this,s=this.w,r=s.config.legend.fontFamily,l=s.globals.seriesNames,h=s.globals.colors.slice();if("heatmap"===s.config.chart.type){var d=s.config.plotOptions.heatmap.colorScale.ranges;l=d.map(function(tt){return tt.name?tt.name:tt.from+" - "+tt.to}),h=d.map(function(tt){return tt.color})}else this.isBarsDistributed&&(l=s.globals.labels.slice());s.config.legend.customLegendItems.length&&(l=s.config.legend.customLegendItems);for(var u=s.globals.legendFormatter,p=s.config.legend.inverseOrder,m=p?l.length-1:0;p?m>=0:m<=l.length-1;p?m--:m++){var v=u(l[m],{seriesIndex:m,w:s}),b=!1,_=!1;if(s.globals.collapsedSeries.length>0)for(var A=0;A<s.globals.collapsedSeries.length;A++)s.globals.collapsedSeries[A].index===m&&(b=!0);if(s.globals.ancillaryCollapsedSeriesIndices.length>0)for(var E=0;E<s.globals.ancillaryCollapsedSeriesIndices.length;E++)s.globals.ancillaryCollapsedSeriesIndices[E]===m&&(_=!0);var k=document.createElement("span");k.classList.add("apexcharts-legend-marker");var R=s.config.legend.markers.offsetX,O=s.config.legend.markers.offsetY,N=s.config.legend.markers.height,z=s.config.legend.markers.width,x=s.config.legend.markers.strokeWidth,C=s.config.legend.markers.strokeColor,T=s.config.legend.markers.radius,L=k.style;L.background=h[m],L.color=h[m],L.setProperty("background",h[m],"important"),s.config.legend.markers.fillColors&&s.config.legend.markers.fillColors[m]&&(L.background=s.config.legend.markers.fillColors[m]),void 0!==s.globals.seriesColors[m]&&(L.background=s.globals.seriesColors[m],L.color=s.globals.seriesColors[m]),L.height=Array.isArray(N)?parseFloat(N[m])+"px":parseFloat(N)+"px",L.width=Array.isArray(z)?parseFloat(z[m])+"px":parseFloat(z)+"px",L.left=(Array.isArray(R)?parseFloat(R[m]):parseFloat(R))+"px",L.top=(Array.isArray(O)?parseFloat(O[m]):parseFloat(O))+"px",L.borderWidth=Array.isArray(x)?x[m]:x,L.borderColor=Array.isArray(C)?C[m]:C,L.borderRadius=Array.isArray(T)?parseFloat(T[m])+"px":parseFloat(T)+"px",s.config.legend.markers.customHTML&&(Array.isArray(s.config.legend.markers.customHTML)?s.config.legend.markers.customHTML[m]&&(k.innerHTML=s.config.legend.markers.customHTML[m]()):k.innerHTML=s.config.legend.markers.customHTML()),U.setAttrs(k,{rel:m+1,"data:collapsed":b||_}),(b||_)&&k.classList.add("apexcharts-inactive-legend");var W=document.createElement("div"),J=document.createElement("span");J.classList.add("apexcharts-legend-text"),J.innerHTML=Array.isArray(v)?v.join(" "):v;var H=s.config.legend.labels.useSeriesColors?s.globals.colors[m]:s.config.legend.labels.colors;H||(H=s.config.chart.foreColor),J.style.color=H,J.style.fontSize=parseFloat(s.config.legend.fontSize)+"px",J.style.fontWeight=s.config.legend.fontWeight,J.style.fontFamily=r||s.config.chart.fontFamily,U.setAttrs(J,{rel:m+1,i:m,"data:default-text":encodeURIComponent(v),"data:collapsed":b||_}),W.appendChild(k),W.appendChild(J);var et=new wt(this.ctx);s.config.legend.showForZeroSeries||0===et.getSeriesTotalByIndex(m)&&et.seriesHaveSameValues(m)&&!et.isSeriesNull(m)&&-1===s.globals.collapsedSeriesIndices.indexOf(m)&&-1===s.globals.ancillaryCollapsedSeriesIndices.indexOf(m)&&W.classList.add("apexcharts-hidden-zero-series"),s.config.legend.showForNullSeries||et.isSeriesNull(m)&&-1===s.globals.collapsedSeriesIndices.indexOf(m)&&-1===s.globals.ancillaryCollapsedSeriesIndices.indexOf(m)&&W.classList.add("apexcharts-hidden-null-series"),s.globals.dom.elLegendWrap.appendChild(W),s.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(s.config.legend.horizontalAlign)),s.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+s.config.legend.position),W.classList.add("apexcharts-legend-series"),W.style.margin="".concat(s.config.legend.itemMargin.vertical,"px ").concat(s.config.legend.itemMargin.horizontal,"px"),s.globals.dom.elLegendWrap.style.width=s.config.legend.width?s.config.legend.width+"px":"",s.globals.dom.elLegendWrap.style.height=s.config.legend.height?s.config.legend.height+"px":"",U.setAttrs(W,{rel:m+1,seriesName:B.escapeString(l[m]),"data:collapsed":b||_}),(b||_)&&W.classList.add("apexcharts-inactive-legend"),s.config.legend.onItemClick.toggleDataSeries||W.classList.add("apexcharts-no-click")}s.globals.dom.elWrap.addEventListener("click",i.onLegendClick,!0),s.config.legend.onItemHover.highlightDataSeries&&0===s.config.legend.customLegendItems.length&&(s.globals.dom.elWrap.addEventListener("mousemove",i.onLegendHovered,!0),s.globals.dom.elWrap.addEventListener("mouseout",i.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(i,s){var r=this.w,l=r.globals.dom.baseEl.querySelector(".apexcharts-legend"),h=l.getBoundingClientRect(),d=0,u=0;if("bottom"===r.config.legend.position)u+=r.globals.svgHeight-h.height/2;else if("top"===r.config.legend.position){var p=new Mi(this.ctx),m=p.dimHelpers.getTitleSubtitleCoords("title").height,v=p.dimHelpers.getTitleSubtitleCoords("subtitle").height;u=u+(m>0?m-10:0)+(v>0?v-10:0)}l.style.position="absolute",u=u+s+r.config.legend.offsetY,l.style.left=(d=d+i+r.config.legend.offsetX)+"px",l.style.top=u+"px","bottom"===r.config.legend.position?(l.style.top="auto",l.style.bottom=5-r.config.legend.offsetY+"px"):"right"===r.config.legend.position&&(l.style.left="auto",l.style.right=25+r.config.legend.offsetX+"px"),["width","height"].forEach(function(b){l.style[b]&&(l.style[b]=parseInt(r.config.legend[b],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var i=this.w;i.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var s=this.legendHelpers.getLegendBBox(),r=new Mi(this.ctx),l=r.dimHelpers.getTitleSubtitleCoords("title"),h=r.dimHelpers.getTitleSubtitleCoords("subtitle"),d=0;"bottom"===i.config.legend.position?d=-s.clwh/1.8:"top"===i.config.legend.position&&(d=l.height+h.height+i.config.title.margin+i.config.subtitle.margin-10),this.setLegendWrapXY(20,d)}},{key:"legendAlignVertical",value:function(){var i=this.w,s=this.legendHelpers.getLegendBBox(),r=0;"left"===i.config.legend.position&&(r=20),"right"===i.config.legend.position&&(r=i.globals.svgWidth-s.clww-10),this.setLegendWrapXY(r,20)}},{key:"onLegendHovered",value:function(i){var s=this.w,r=i.target.classList.contains("apexcharts-legend-text")||i.target.classList.contains("apexcharts-legend-marker");if("heatmap"===s.config.chart.type||this.isBarsDistributed){if(r){var l=parseInt(i.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,l,this.w]),new bt(this.ctx).highlightRangeInSeries(i,i.target)}}else!i.target.classList.contains("apexcharts-inactive-legend")&&r&&new bt(this.ctx).toggleSeriesOnHover(i,i.target)}},{key:"onLegendClick",value:function(i){var s=this.w;if(!s.config.legend.customLegendItems.length&&(i.target.classList.contains("apexcharts-legend-text")||i.target.classList.contains("apexcharts-legend-marker"))){var r=parseInt(i.target.getAttribute("rel"),10)-1,l="true"===i.target.getAttribute("data:collapsed"),h=this.w.config.chart.events.legendClick;"function"==typeof h&&h(this.ctx,r,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,r,this.w]);var d=this.w.config.legend.markers.onClick;"function"==typeof d&&i.target.classList.contains("apexcharts-legend-marker")&&(d(this.ctx,r,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,r,this.w])),"treemap"!==s.config.chart.type&&"heatmap"!==s.config.chart.type&&!this.isBarsDistributed&&s.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(r,l)}}}]),P}(),gn=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w;var s=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=s.globals.minX,this.maxX=s.globals.maxX}return rt(P,[{key:"createToolbar",value:function(){var i=this,s=this.w,r=function(){return document.createElement("div")},l=r();if(l.setAttribute("class","apexcharts-toolbar"),l.style.top=s.config.chart.toolbar.offsetY+"px",l.style.right=3-s.config.chart.toolbar.offsetX+"px",s.globals.dom.elWrap.appendChild(l),this.elZoom=r(),this.elZoomIn=r(),this.elZoomOut=r(),this.elPan=r(),this.elSelection=r(),this.elZoomReset=r(),this.elMenuIcon=r(),this.elMenu=r(),this.elCustomIcons=[],this.t=s.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var h=0;h<this.t.customIcons.length;h++)this.elCustomIcons.push(r());var d=[],u=function(b,_,A){var E=b.toLowerCase();i.t[E]&&s.config.chart.zoom.enabled&&d.push({el:_,icon:"string"==typeof i.t[E]?i.t[E]:A,title:i.localeValues[b],class:"apexcharts-".concat(E,"-icon")})};u("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),u("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var p=function(b){i.t[b]&&s.config.chart[b].enabled&&d.push({el:"zoom"===b?i.elZoom:i.elSelection,icon:"string"==typeof i.t[b]?i.t[b]:"zoom"===b?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:i.localeValues["zoom"===b?"selectionZoom":"selection"],class:s.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(b,"-icon")})};p("zoom"),p("selection"),this.t.pan&&s.config.chart.zoom.enabled&&d.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:s.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),u("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&d.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var m=0;m<this.elCustomIcons.length;m++)d.push({el:this.elCustomIcons[m],icon:this.t.customIcons[m].icon,title:this.t.customIcons[m].title,index:this.t.customIcons[m].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[m].class});d.forEach(function(b,_){b.index&&B.moveIndexInArray(d,_,b.index)});for(var v=0;v<d.length;v++)U.setAttrs(d[v].el,{class:d[v].class,title:d[v].title}),d[v].el.innerHTML=d[v].icon,l.appendChild(d[v].el);this._createHamburgerMenu(l),s.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):s.globals.panEnabled?this.elPan.classList.add(this.selectedClass):s.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(i){this.elMenuItems=[],i.appendChild(this.elMenu),U.setAttrs(this.elMenu,{class:"apexcharts-menu"});var s=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||s.splice(2,1);for(var r=0;r<s.length;r++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[r].innerHTML=s[r].title,U.setAttrs(this.elMenuItems[r],{class:"apexcharts-menu-item ".concat(s[r].name),title:s[r].title}),this.elMenu.appendChild(this.elMenuItems[r])}},{key:"addToolbarEventListeners",value:function(){var i=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(r){r.classList.contains("exportSVG")?r.addEventListener("click",i.handleDownload.bind(i,"svg")):r.classList.contains("exportPNG")?r.addEventListener("click",i.handleDownload.bind(i,"png")):r.classList.contains("exportCSV")&&r.addEventListener("click",i.handleDownload.bind(i,"csv"))});for(var s=0;s<this.t.customIcons.length;s++)this.elCustomIcons[s].addEventListener("click",this.t.customIcons[s].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(i){this.ctx.getSyncedCharts().forEach(function(s){s.ctx.toolbar.toggleOtherControls();var r="selection"===i?s.ctx.toolbar.elSelection:s.ctx.toolbar.elZoom,l="selection"===i?"selectionEnabled":"zoomEnabled";s.w.globals[l]=!s.w.globals[l],r.classList.contains(s.ctx.toolbar.selectedClass)?r.classList.remove(s.ctx.toolbar.selectedClass):r.classList.add(s.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var i=this.w;this.elZoom||(this.elZoom=i.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=i.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=i.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(i){this.toggleOtherControls(),"pan"===i?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var s="pan"===i?this.elPan:this.elZoom,r="pan"===i?this.elZoom:this.elPan;s&&s.classList.add(this.selectedClass),r&&r.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(i){i.ctx.toolbar.toggleOtherControls(),i.w.globals.panEnabled=!i.w.globals.panEnabled,i.ctx.toolbar.elPan.classList.contains(i.ctx.toolbar.selectedClass)?i.ctx.toolbar.elPan.classList.remove(i.ctx.toolbar.selectedClass):i.ctx.toolbar.elPan.classList.add(i.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var i=this,s=this.w;s.globals.panEnabled=!1,s.globals.zoomEnabled=!1,s.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(r){r&&r.classList.remove(i.selectedClass)})}},{key:"handleZoomIn",value:function(){var i=this.w;i.globals.isRangeBar&&(this.minX=i.globals.minY,this.maxX=i.globals.maxY);var s=(this.minX+this.maxX)/2,h=this._getNewMinXMaxX((this.minX+s)/2,(this.maxX+s)/2);i.globals.disableZoomIn||this.zoomUpdateOptions(h.minX,h.maxX)}},{key:"handleZoomOut",value:function(){var i=this.w;if(i.globals.isRangeBar&&(this.minX=i.globals.minY,this.maxX=i.globals.maxY),!("datetime"===i.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var s=(this.minX+this.maxX)/2,h=this._getNewMinXMaxX(this.minX-(s-this.minX),this.maxX-(s-this.maxX));i.globals.disableZoomOut||this.zoomUpdateOptions(h.minX,h.maxX)}}},{key:"_getNewMinXMaxX",value:function(i,s){var r=this.w.config.xaxis.convertedCatToNumeric;return{minX:r?Math.floor(i):i,maxX:r?Math.floor(s):s}}},{key:"zoomUpdateOptions",value:function(i,s){var r=this.w;if(void 0!==i||void 0!==s){if(!(r.config.xaxis.convertedCatToNumeric&&(i<1&&(i=1,s=r.globals.dataPoints),s-i<2))){var l={min:i,max:s},h=this.getBeforeZoomRange(l);h&&(l=h.xaxis);var d={xaxis:l},u=B.clone(r.globals.initialConfig.yaxis);r.config.chart.zoom.autoScaleYaxis&&(u=new Gi(this.ctx).autoScaleY(this.ctx,u,{xaxis:l})),r.config.chart.group||(d.yaxis=u),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(d,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(l,u)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(i,s){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:i,yaxis:s})}},{key:"getBeforeZoomRange",value:function(i,s){var r=null;return"function"==typeof this.ev.beforeZoom&&(r=this.ev.beforeZoom(this,{xaxis:i,yaxis:s})),r}},{key:"toggleMenu",value:function(){var i=this;window.setTimeout(function(){i.elMenu.classList.contains("apexcharts-menu-open")?i.elMenu.classList.remove("apexcharts-menu-open"):i.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(i){var s=this.w,r=new Ut(this.ctx);switch(i){case"svg":r.exportToSVG(this.ctx);break;case"png":r.exportToPng(this.ctx);break;case"csv":r.exportToCSV({series:s.config.series,columnDelimiter:s.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(i){this.ctx.getSyncedCharts().forEach(function(s){var r=s.w;if(r.globals.lastXAxis.min=void 0,r.globals.lastXAxis.max=void 0,s.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof r.config.chart.events.beforeResetZoom){var l=r.config.chart.events.beforeResetZoom(s,r);l&&s.updateHelpers.revertDefaultAxisMinMax(l)}"function"==typeof r.config.chart.events.zoomed&&s.ctx.toolbar.zoomCallback({min:r.config.xaxis.min,max:r.config.xaxis.max}),r.globals.zoomed=!1;var h=s.ctx.series.emptyCollapsedSeries(B.clone(r.globals.initialSeries));s.updateHelpers._updateSeries(h,r.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),P}(),le=function(P){ze(s,gn);var i=Re(s);function s(r){var l;return lt(this,s),(l=i.call(this,r)).ctx=r,l.w=r.w,l.dragged=!1,l.graphics=new U(l.ctx),l.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],l.clientX=0,l.clientY=0,l.startX=0,l.endX=0,l.dragX=0,l.startY=0,l.endY=0,l.dragY=0,l.moveDirection="none",l}return rt(s,[{key:"init",value:function(r){var l=this,h=r.xyRatios,d=this.w,u=this;this.xyRatios=h,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=d.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),d.globals.dom.elGraphical.add(this.zoomRect),d.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===d.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:d.globals.gridWidth,maxY:d.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===d.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:d.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=d.globals.dom.baseEl.querySelector("".concat(d.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(p){l.hoverArea.addEventListener(p,u.svgMouseEvents.bind(u,h),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(r,l){var h=this.w,d=this,u=this.ctx.toolbar,p=h.globals.zoomEnabled?h.config.chart.zoom.type:h.config.chart.selection.type,m=h.config.chart.toolbar.autoSelected;if(l.shiftKey?(this.shiftWasPressed=!0,u.enableZoomPanFromToolbar("pan"===m?"zoom":"pan")):this.shiftWasPressed&&(u.enableZoomPanFromToolbar(m),this.shiftWasPressed=!1),l.target){var v,b=l.target.classList;if(l.target.parentNode&&null!==l.target.parentNode&&(v=l.target.parentNode.classList),!(b.contains("apexcharts-selection-rect")||b.contains("apexcharts-legend-marker")||b.contains("apexcharts-legend-text")||v&&v.contains("apexcharts-toolbar"))){if(d.clientX="touchmove"===l.type||"touchstart"===l.type?l.touches[0].clientX:"touchend"===l.type?l.changedTouches[0].clientX:l.clientX,d.clientY="touchmove"===l.type||"touchstart"===l.type?l.touches[0].clientY:"touchend"===l.type?l.changedTouches[0].clientY:l.clientY,"mousedown"===l.type&&1===l.which){var _=d.gridRect.getBoundingClientRect();d.startX=d.clientX-_.left,d.startY=d.clientY-_.top,d.dragged=!1,d.w.globals.mousedown=!0}if(("mousemove"===l.type&&1===l.which||"touchmove"===l.type)&&(d.dragged=!0,h.globals.panEnabled?(h.globals.selection=null,d.w.globals.mousedown&&d.panDragging({context:d,zoomtype:p,xyRatios:r})):(d.w.globals.mousedown&&h.globals.zoomEnabled||d.w.globals.mousedown&&h.globals.selectionEnabled)&&(d.selection=d.selectionDrawing({context:d,zoomtype:p}))),"mouseup"===l.type||"touchend"===l.type||"mouseleave"===l.type){var A=d.gridRect.getBoundingClientRect();d.w.globals.mousedown&&(d.endX=d.clientX-A.left,d.endY=d.clientY-A.top,d.dragX=Math.abs(d.endX-d.startX),d.dragY=Math.abs(d.endY-d.startY),(h.globals.zoomEnabled||h.globals.selectionEnabled)&&d.selectionDrawn({context:d,zoomtype:p}),h.globals.panEnabled&&h.config.xaxis.convertedCatToNumeric&&d.delayedPanScrolled()),h.globals.zoomEnabled&&d.hideSelectionRect(this.selectionRect),d.dragged=!1,d.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var r=this.w;if(this.selectionRect){var l=this.selectionRect.node.getBoundingClientRect();l.width>0&&l.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:r.globals.gridWidth,maxY:r.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var r=this.w,l=this.xyRatios;if(!r.globals.zoomEnabled)if(null!=r.globals.selection)this.drawSelectionRect(r.globals.selection);else if(void 0!==r.config.chart.selection.xaxis.min&&void 0!==r.config.chart.selection.xaxis.max){var h=(r.config.chart.selection.xaxis.min-r.globals.minX)/l.xRatio;this.drawSelectionRect({x:h,y:0,width:r.globals.gridWidth-(r.globals.maxX-r.config.chart.selection.xaxis.max)/l.xRatio-h,height:r.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof r.config.chart.events.selection&&r.config.chart.events.selection(this.ctx,{xaxis:{min:r.config.chart.selection.xaxis.min,max:r.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(r){var l=r.x,h=r.y,d=r.width,u=r.height,p=r.translateX,v=r.translateY,_=this.w,A=this.zoomRect,E=this.selectionRect;if(this.dragged||null!==_.globals.selection){var k={transform:"translate("+(void 0===p?0:p)+", "+(void 0===v?0:v)+")"};_.globals.zoomEnabled&&this.dragged&&(d<0&&(d=1),A.attr({x:l,y:h,width:d,height:u,fill:_.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":_.config.chart.zoom.zoomedArea.fill.opacity,stroke:_.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":_.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":_.config.chart.zoom.zoomedArea.stroke.opacity}),U.setAttrs(A.node,k)),_.globals.selectionEnabled&&(E.attr({x:l,y:h,width:d>0?d:0,height:u>0?u:0,fill:_.config.chart.selection.fill.color,"fill-opacity":_.config.chart.selection.fill.opacity,stroke:_.config.chart.selection.stroke.color,"stroke-width":_.config.chart.selection.stroke.width,"stroke-dasharray":_.config.chart.selection.stroke.dashArray,"stroke-opacity":_.config.chart.selection.stroke.opacity}),U.setAttrs(E.node,k))}}},{key:"hideSelectionRect",value:function(r){r&&r.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(r){var k,h=r.zoomtype,d=this.w,u=r.context,p=this.gridRect.getBoundingClientRect(),m=u.startX-1,v=u.startY,b=!1,_=!1,A=u.clientX-p.left-m,E=u.clientY-p.top-v;return Math.abs(A+m)>d.globals.gridWidth?A=d.globals.gridWidth-m:u.clientX-p.left<0&&(A=m),m>u.clientX-p.left&&(b=!0,A=Math.abs(A)),v>u.clientY-p.top&&(_=!0,E=Math.abs(E)),u.drawSelectionRect(k="x"===h?{x:b?m-A:m,y:0,width:A,height:d.globals.gridHeight}:"y"===h?{x:0,y:_?v-E:v,width:d.globals.gridWidth,height:E}:{x:b?m-A:m,y:_?v-E:v,width:A,height:E}),u.selectionDragging("resizing"),k}},{key:"selectionDragging",value:function(r,l){var h=this,d=this.w,u=this.xyRatios,p=this.selectionRect,m=0;"resizing"===r&&(m=30);var v=function(_){return parseFloat(p.node.getAttribute(_))},b={x:v("x"),y:v("y"),width:v("width"),height:v("height")};d.globals.selection=b,"function"==typeof d.config.chart.events.selection&&d.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var _=h.gridRect.getBoundingClientRect(),A=p.node.getBoundingClientRect(),E={xaxis:{min:d.globals.xAxisScale.niceMin+(A.left-_.left)*u.xRatio,max:d.globals.xAxisScale.niceMin+(A.right-_.left)*u.xRatio},yaxis:{min:d.globals.yAxisScale[0].niceMin+(_.bottom-A.bottom)*u.yRatio[0],max:d.globals.yAxisScale[0].niceMax-(A.top-_.top)*u.yRatio[0]}};d.config.chart.events.selection(h.ctx,E),d.config.chart.brush.enabled&&void 0!==d.config.chart.events.brushScrolled&&d.config.chart.events.brushScrolled(h.ctx,E)},m))}},{key:"selectionDrawn",value:function(r){var h=r.zoomtype,d=this.w,u=r.context,p=this.xyRatios,m=this.ctx.toolbar;if(u.startX>u.endX){var v=u.startX;u.startX=u.endX,u.endX=v}if(u.startY>u.endY){var b=u.startY;u.startY=u.endY,u.endY=b}var _=void 0,A=void 0;d.globals.isRangeBar?(_=d.globals.yAxisScale[0].niceMin+u.startX*p.invertedYRatio,A=d.globals.yAxisScale[0].niceMin+u.endX*p.invertedYRatio):(_=d.globals.xAxisScale.niceMin+u.startX*p.xRatio,A=d.globals.xAxisScale.niceMin+u.endX*p.xRatio);var E=[],k=[];if(d.config.yaxis.forEach(function(L,W){E.push(d.globals.yAxisScale[W].niceMax-p.yRatio[W]*u.startY),k.push(d.globals.yAxisScale[W].niceMax-p.yRatio[W]*u.endY)}),u.dragged&&(u.dragX>10||u.dragY>10)&&_!==A)if(d.globals.zoomEnabled){var R=B.clone(d.globals.initialConfig.yaxis),O=B.clone(d.globals.initialConfig.xaxis);if(d.globals.zoomed=!0,d.config.xaxis.convertedCatToNumeric&&(_=Math.floor(_),A=Math.floor(A),_<1&&(_=1,A=d.globals.dataPoints),A-_<2&&(A=_+1)),"xy"!==h&&"x"!==h||(O={min:_,max:A}),"xy"!==h&&"y"!==h||R.forEach(function(L,W){R[W].min=k[W],R[W].max=E[W]}),d.config.chart.zoom.autoScaleYaxis){var N=new Gi(u.ctx);R=N.autoScaleY(u.ctx,R,{xaxis:O})}if(m){var z=m.getBeforeZoomRange(O,R);z&&(O=z.xaxis?z.xaxis:O,R=z.yaxis?z.yaxis:R)}var x={xaxis:O};d.config.chart.group||(x.yaxis=R),u.ctx.updateHelpers._updateOptions(x,!1,u.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof d.config.chart.events.zoomed&&m.zoomCallback(O,R)}else if(d.globals.selectionEnabled){var C,T=null;C={min:_,max:A},"xy"!==h&&"y"!==h||(T=B.clone(d.config.yaxis)).forEach(function(L,W){T[W].min=k[W],T[W].max=E[W]}),d.globals.selection=u.selection,"function"==typeof d.config.chart.events.selection&&d.config.chart.events.selection(u.ctx,{xaxis:C,yaxis:T})}}},{key:"panDragging",value:function(r){var h=this.w,d=r.context;if(void 0!==h.globals.lastClientPosition.x){var u=h.globals.lastClientPosition.x-d.clientX,p=h.globals.lastClientPosition.y-d.clientY;Math.abs(u)>Math.abs(p)&&u>0?this.moveDirection="left":Math.abs(u)>Math.abs(p)&&u<0?this.moveDirection="right":Math.abs(p)>Math.abs(u)&&p>0?this.moveDirection="up":Math.abs(p)>Math.abs(u)&&p<0&&(this.moveDirection="down")}h.globals.lastClientPosition={x:d.clientX,y:d.clientY},h.config.xaxis.convertedCatToNumeric||d.panScrolled(h.globals.isRangeBar?h.globals.minY:h.globals.minX,h.globals.isRangeBar?h.globals.maxY:h.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var r=this.w,l=r.globals.minX,h=r.globals.maxX,d=(r.globals.maxX-r.globals.minX)/2;"left"===this.moveDirection?(l=r.globals.minX+d,h=r.globals.maxX+d):"right"===this.moveDirection&&(l=r.globals.minX-d,h=r.globals.maxX-d),l=Math.floor(l),h=Math.floor(h),this.updateScrolledChart({xaxis:{min:l,max:h}},l,h)}},{key:"panScrolled",value:function(r,l){var h=this.w,d=this.xyRatios,u=B.clone(h.globals.initialConfig.yaxis),p=d.xRatio,m=h.globals.minX,v=h.globals.maxX;h.globals.isRangeBar&&(p=d.invertedYRatio,m=h.globals.minY,v=h.globals.maxY),"left"===this.moveDirection?(r=m+h.globals.gridWidth/15*p,l=v+h.globals.gridWidth/15*p):"right"===this.moveDirection&&(r=m-h.globals.gridWidth/15*p,l=v-h.globals.gridWidth/15*p),h.globals.isRangeBar||(r<h.globals.initialMinX||l>h.globals.initialMaxX)&&(r=m,l=v);var b={min:r,max:l};h.config.chart.zoom.autoScaleYaxis&&(u=new Gi(this.ctx).autoScaleY(this.ctx,u,{xaxis:b}));var _={xaxis:{min:r,max:l}};h.config.chart.group||(_.yaxis=u),this.updateScrolledChart(_,r,l)}},{key:"updateScrolledChart",value:function(r,l,h){var d=this.w;this.ctx.updateHelpers._updateOptions(r,!1,!1),"function"==typeof d.config.chart.events.scrolled&&d.config.chart.events.scrolled(this.ctx,{xaxis:{min:l,max:h}})}}]),s}(),pn=function(){function P(i){lt(this,P),this.w=i.w,this.ttCtx=i,this.ctx=i.ctx}return rt(P,[{key:"getNearestValues",value:function(i){var s=i.hoverArea,l=i.clientX,h=i.clientY,d=this.w,u=i.elGrid.getBoundingClientRect(),p=u.width,m=u.height,v=p/(d.globals.dataPoints-1),b=m/d.globals.dataPoints,_=this.hasBars();!d.globals.comboCharts&&!_||d.config.xaxis.convertedCatToNumeric||(v=p/d.globals.dataPoints);var A=l-u.left-d.globals.barPadForNumericAxis,E=h-u.top;A<0||E<0||A>p||E>m?(s.classList.remove("hovering-zoom"),s.classList.remove("hovering-pan")):d.globals.zoomEnabled?(s.classList.remove("hovering-pan"),s.classList.add("hovering-zoom")):d.globals.panEnabled&&(s.classList.remove("hovering-zoom"),s.classList.add("hovering-pan"));var k=Math.round(A/v),R=Math.floor(E/b);_&&!d.config.xaxis.convertedCatToNumeric&&(k=Math.ceil(A/v),k-=1);var O=null,N=null,z=[],x=[];if(d.globals.seriesXvalues.forEach(function(W){z.push([W[0]+1e-6].concat(W))}),d.globals.seriesYvalues.forEach(function(W){x.push([W[0]+1e-6].concat(W))}),z=z.map(function(W){return W.filter(function(J){return B.isNumber(J)})}),x=x.map(function(W){return W.filter(function(J){return B.isNumber(J)})}),d.globals.isXNumeric){var C=this.ttCtx.getElGrid().getBoundingClientRect(),T=A*(C.width/p);O=(N=this.closestInMultiArray(T,E*(C.height/m),z,x)).index,k=N.j,null!==O&&(k=(N=this.closestInArray(T,z=d.globals.seriesXvalues[O])).index)}return d.globals.capturedSeriesIndex=null===O?-1:O,(!k||k<1)&&(k=0),d.globals.capturedDataPointIndex=d.globals.isBarHorizontal?R:k,{capturedSeries:O,j:d.globals.isBarHorizontal?R:k,hoverX:A,hoverY:E}}},{key:"closestInMultiArray",value:function(i,s,r,l){var d=0,u=null,p=-1;this.w.globals.series.length>1?d=this.getFirstActiveXArray(r):u=0;var v=Math.abs(i-r[d][0]);if(r.forEach(function(A){A.forEach(function(E,k){var R=Math.abs(i-E);R<v&&(v=R,p=k)})}),-1!==p){var _=Math.abs(s-l[d][p]);u=d,l.forEach(function(A,E){var k=Math.abs(s-A[p]);k<_&&(_=k,u=E)})}return{index:u,j:p}}},{key:"getFirstActiveXArray",value:function(i){for(var s=this.w,r=0,l=i.map(function(d,u){return d.length>0?u:-1}),h=0;h<l.length;h++)if(-1!==l[h]&&-1===s.globals.collapsedSeriesIndices.indexOf(h)&&-1===s.globals.ancillaryCollapsedSeriesIndices.indexOf(h)){r=l[h];break}return r}},{key:"closestInArray",value:function(i,s){for(var l=null,h=Math.abs(i-s[0]),d=0;d<s.length;d++){var u=Math.abs(i-s[d]);u<h&&(h=u,l=d)}return{index:l}}},{key:"isXoverlap",value:function(i){var s=[],r=this.w.globals.seriesX.filter(function(h){return void 0!==h[0]});if(r.length>0)for(var l=0;l<r.length-1;l++)void 0!==r[l][i]&&void 0!==r[l+1][i]&&r[l][i]!==r[l+1][i]&&s.push("unEqual");return 0===s.length}},{key:"isInitialSeriesSameLen",value:function(){for(var i=!0,s=this.w.globals.initialSeries,r=0;r<s.length-1;r++)if(s[r].data.length!==s[r+1].data.length){i=!1;break}return i}},{key:"getBarsHeight",value:function(i){return K(i).reduce(function(s,r){return s+r.getBBox().height},0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var i=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(i=K(i)).sort(function(r,l){var h=Number(r.getAttribute("data:realIndex")),d=Number(l.getAttribute("data:realIndex"));return d<h?1:d>h?-1:0});var s=[];return i.forEach(function(r){s.push(r.querySelector(".apexcharts-marker"))}),s}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(i){var s=this.w,r=s.config.markers.hover.size;return void 0===r&&(r=s.globals.markers.size[i]+s.config.markers.hover.sizeOffset),r}},{key:"toggleAllTooltipSeriesGroups",value:function(i){var s=this.w,r=this.ttCtx;0===r.allTooltipSeriesGroups.length&&(r.allTooltipSeriesGroups=s.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var l=r.allTooltipSeriesGroups,h=0;h<l.length;h++)"enable"===i?(l[h].classList.add("apexcharts-active"),l[h].style.display=s.config.tooltip.items.display):(l[h].classList.remove("apexcharts-active"),l[h].style.display="none")}}]),P}(),kr=function(){function P(i){lt(this,P),this.w=i.w,this.ctx=i.ctx,this.ttCtx=i,this.tooltipUtil=new pn(i)}return rt(P,[{key:"drawSeriesTexts",value:function(i){var s=i.shared,r=void 0===s||s,l=i.ttItems,h=i.i,d=void 0===h?0:h,u=i.j,p=void 0===u?null:u,b=i.e,_=this.w;void 0!==_.config.tooltip.custom?this.handleCustomTooltip({i:d,j:p,y1:i.y1,y2:i.y2,w:_}):this.toggleActiveInactiveSeries(r);var A=this.getValuesToPrint({i:d,j:p});this.printLabels({i:d,j:p,values:A,ttItems:l,shared:r,e:b});var E=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=E.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=E.getBoundingClientRect().height}},{key:"printLabels",value:function(i){var s,r=this,l=i.i,h=i.j,d=i.values,u=i.ttItems,p=i.shared,m=i.e,v=this.w,b=[],_=function(C){return v.globals.seriesGoals[C]&&v.globals.seriesGoals[C][h]&&Array.isArray(v.globals.seriesGoals[C][h])},A=d.xVal,E=d.zVal,k=d.xAxisTTVal,R="",O=v.globals.colors[l];null!==h&&v.config.plotOptions.bar.distributed&&(O=v.globals.colors[h]);for(var N=function(C,T){var L=r.getFormatters(l);R=r.getSeriesName({fn:L.yLbTitleFormatter,index:l,seriesIndex:l,j:h}),"treemap"===v.config.chart.type&&(R=L.yLbTitleFormatter(String(v.config.series[l].data[h].x),{series:v.globals.series,seriesIndex:l,dataPointIndex:h,w:v}));var W=v.config.tooltip.inverseOrder?T:C;if(v.globals.axisCharts){var J=function(tt){return L.yLbFormatter(v.globals.series[tt][h],{series:v.globals.series,seriesIndex:tt,dataPointIndex:h,w:v})};if(p)L=r.getFormatters(W),R=r.getSeriesName({fn:L.yLbTitleFormatter,index:W,seriesIndex:l,j:h}),O=v.globals.colors[W],s=J(W),_(W)&&(b=v.globals.seriesGoals[W][h].map(function(tt){return{attrs:tt,val:L.yLbFormatter(tt.value,{seriesIndex:W,dataPointIndex:h,w:v})}}));else{var H,et=null==m||null===(H=m.target)||void 0===H?void 0:H.getAttribute("fill");et&&(O=-1!==et.indexOf("url")?document.querySelector(et.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):et),s=J(l),_(l)&&Array.isArray(v.globals.seriesGoals[l][h])&&(b=v.globals.seriesGoals[l][h].map(function(tt){return{attrs:tt,val:L.yLbFormatter(tt.value,{seriesIndex:l,dataPointIndex:h,w:v})}}))}}null===h&&(s=L.yLbFormatter(v.globals.series[l],Mt(Mt({},v),{},{seriesIndex:l,dataPointIndex:l}))),r.DOMHandling({i:l,t:W,j:h,ttItems:u,values:{val:s,goalVals:b,xVal:A,xAxisTTVal:k,zVal:E},seriesName:R,shared:p,pColor:O})},z=0,x=v.globals.series.length-1;z<v.globals.series.length;z++,x--)N(z,x)}},{key:"getFormatters",value:function(i){var s,r=this.w,l=r.globals.yLabelFormatters[i];return void 0!==r.globals.ttVal?Array.isArray(r.globals.ttVal)?(l=r.globals.ttVal[i]&&r.globals.ttVal[i].formatter,s=r.globals.ttVal[i]&&r.globals.ttVal[i].title&&r.globals.ttVal[i].title.formatter):(l=r.globals.ttVal.formatter,"function"==typeof r.globals.ttVal.title.formatter&&(s=r.globals.ttVal.title.formatter)):s=r.config.tooltip.y.title.formatter,"function"!=typeof l&&(l=r.globals.yLabelFormatters[0]?r.globals.yLabelFormatters[0]:function(h){return h}),"function"!=typeof s&&(s=function(h){return h}),{yLbFormatter:l,yLbTitleFormatter:s}}},{key:"getSeriesName",value:function(i){var l=i.seriesIndex,h=i.j,d=this.w;return(0,i.fn)(String(d.globals.seriesNames[i.index]),{series:d.globals.series,seriesIndex:l,dataPointIndex:h,w:d})}},{key:"DOMHandling",value:function(i){var s=i.t,r=i.j,l=i.ttItems,h=i.values,d=i.seriesName,u=i.shared,p=i.pColor,m=this.w,v=this.ttCtx,b=h.val,_=h.goalVals,A=h.xVal,E=h.xAxisTTVal,k=h.zVal,R=null;R=l[s].children,m.config.tooltip.fillSeriesColor&&(l[s].style.backgroundColor=p,R[0].style.display="none"),v.showTooltipTitle&&(null===v.tooltipTitle&&(v.tooltipTitle=m.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),v.tooltipTitle.innerHTML=A),v.isXAxisTooltipEnabled&&(v.xaxisTooltipText.innerHTML=""!==E?E:A);var O=l[s].querySelector(".apexcharts-tooltip-text-y-label");O&&(O.innerHTML=d||"");var N=l[s].querySelector(".apexcharts-tooltip-text-y-value");N&&(N.innerHTML=void 0!==b?b:""),R[0]&&R[0].classList.contains("apexcharts-tooltip-marker")&&(m.config.tooltip.marker.fillColors&&Array.isArray(m.config.tooltip.marker.fillColors)&&(p=m.config.tooltip.marker.fillColors[s]),R[0].style.backgroundColor=p),m.config.tooltip.marker.show||(R[0].style.display="none");var z=l[s].querySelector(".apexcharts-tooltip-text-goals-label"),x=l[s].querySelector(".apexcharts-tooltip-text-goals-value");if(_.length&&m.globals.seriesGoals[s]){var C=function(){var T="<div >",L="<div>";_.forEach(function(W,J){T+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(W.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(W.attrs.name,"</div>"),L+="<div>".concat(W.val,"</div>")}),z.innerHTML=T+"</div>",x.innerHTML=L+"</div>"};u?m.globals.seriesGoals[s][r]&&Array.isArray(m.globals.seriesGoals[s][r])?C():(z.innerHTML="",x.innerHTML=""):C()}else z.innerHTML="",x.innerHTML="";null!==k&&(l[s].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=m.config.tooltip.z.title,l[s].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==k?k:""),u&&R[0]&&(R[0].parentNode.style.display=null==b||m.globals.ancillaryCollapsedSeriesIndices.indexOf(s)>-1||m.globals.collapsedSeriesIndices.indexOf(s)>-1?"none":m.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(i){var s=this.w;if(i)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var r=s.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");r&&(r.classList.add("apexcharts-active"),r.style.display=s.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(i){var s=i.i,r=i.j,l=this.w,h=this.ctx.series.filteredSeriesX(),d="",u="",p=null,m=null,v={series:l.globals.series,seriesIndex:s,dataPointIndex:r,w:l},b=l.globals.ttZFormatter;null===r?m=l.globals.series[s]:l.globals.isXNumeric&&"treemap"!==l.config.chart.type?(d=h[s][r],0===h[s].length&&(d=h[this.tooltipUtil.getFirstActiveXArray(h)][r])):d=void 0!==l.globals.labels[r]?l.globals.labels[r]:"";var _=d;return d=l.globals.isXNumeric&&"datetime"===l.config.xaxis.type?new ds(this.ctx).xLabelFormat(l.globals.ttKeyFormatter,_,_,{i:void 0,dateFormatter:new xe(this.ctx).formatDate,w:this.w}):l.globals.isBarHorizontal?l.globals.yLabelFormatters[0](_,v):l.globals.xLabelFormatter(_,v),void 0!==l.config.tooltip.x.formatter&&(d=l.globals.ttKeyFormatter(_,v)),l.globals.seriesZ.length>0&&l.globals.seriesZ[s].length>0&&(p=b(l.globals.seriesZ[s][r],l)),u="function"==typeof l.config.xaxis.tooltip.formatter?l.globals.xaxisTooltipFormatter(_,v):d,{val:Array.isArray(m)?m.join(" "):m,xVal:Array.isArray(d)?d.join(" "):d,xAxisTTVal:Array.isArray(u)?u.join(" "):u,zVal:p}}},{key:"handleCustomTooltip",value:function(i){var s=i.i,r=i.j,l=i.y1,h=i.y2,d=i.w,u=this.ttCtx.getElTooltip(),p=d.config.tooltip.custom;Array.isArray(p)&&p[s]&&(p=p[s]),u.innerHTML=p({ctx:this.ctx,series:d.globals.series,seriesIndex:s,dataPointIndex:r,y1:l,y2:h,w:d})}}]),P}(),mn=function(){function P(i){lt(this,P),this.ttCtx=i,this.ctx=i.ctx,this.w=i.w}return rt(P,[{key:"moveXCrosshairs",value:function(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.ttCtx,l=this.w,h=r.getElXCrosshairs(),d=i-r.xcrosshairsWidth/2,u=l.globals.labels.slice().length;if(null!==s&&(d=l.globals.gridWidth/u*s),null===h||l.globals.isBarHorizontal||(h.setAttribute("x",d),h.setAttribute("x1",d),h.setAttribute("x2",d),h.setAttribute("y2",l.globals.gridHeight),h.classList.add("apexcharts-active")),d<0&&(d=0),d>l.globals.gridWidth&&(d=l.globals.gridWidth),r.isXAxisTooltipEnabled){var p=d;"tickWidth"!==l.config.xaxis.crosshairs.width&&"barWidth"!==l.config.xaxis.crosshairs.width||(p=d+r.xcrosshairsWidth/2),this.moveXAxisTooltip(p)}}},{key:"moveYCrosshairs",value:function(i){var s=this.ttCtx;null!==s.ycrosshairs&&U.setAttrs(s.ycrosshairs,{y1:i,y2:i}),null!==s.ycrosshairsHidden&&U.setAttrs(s.ycrosshairsHidden,{y1:i,y2:i})}},{key:"moveXAxisTooltip",value:function(i){var s=this.w,r=this.ttCtx;if(null!==r.xaxisTooltip&&0!==r.xcrosshairsWidth){r.xaxisTooltip.classList.add("apexcharts-active");var h,l=r.xaxisOffY+s.config.xaxis.tooltip.offsetY+s.globals.translateY+1+s.config.xaxis.offsetY;i-=r.xaxisTooltip.getBoundingClientRect().width/2,isNaN(i)||(i+=s.globals.translateX,h=new U(this.ctx).getTextRects(r.xaxisTooltipText.innerHTML),r.xaxisTooltipText.style.minWidth=h.width+"px",r.xaxisTooltip.style.left=i+"px",r.xaxisTooltip.style.top=l+"px")}}},{key:"moveYAxisTooltip",value:function(i){var s=this.w,r=this.ttCtx;null===r.yaxisTTEls&&(r.yaxisTTEls=s.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var l=parseInt(r.ycrosshairsHidden.getAttribute("y1"),10),h=s.globals.translateY+l,d=r.yaxisTTEls[i].getBoundingClientRect().height,u=s.globals.translateYAxisX[i]-2;s.config.yaxis[i].opposite&&(u-=26),h-=d/2,-1===s.globals.ignoreYAxisIndexes.indexOf(i)?(r.yaxisTTEls[i].classList.add("apexcharts-active"),r.yaxisTTEls[i].style.top=h+"px",r.yaxisTTEls[i].style.left=u+s.config.yaxis[i].tooltip.offsetX+"px"):r.yaxisTTEls[i].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(i,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=this.w,h=this.ttCtx,d=h.getElTooltip(),u=h.tooltipRect,p=null!==r?parseFloat(r):1,m=parseFloat(i)+p+5,v=parseFloat(s)+p/2;if(m>l.globals.gridWidth/2&&(m=m-u.ttWidth-p-10),m>l.globals.gridWidth-u.ttWidth-10&&(m=l.globals.gridWidth-u.ttWidth),m<-20&&(m=-20),l.config.tooltip.followCursor){var b=h.getElGrid(),_=b.getBoundingClientRect();v=h.e.clientY+l.globals.translateY-_.top-u.ttHeight/2}else l.globals.isBarHorizontal||(u.ttHeight/2+v>l.globals.gridHeight&&(v=l.globals.gridHeight-u.ttHeight+l.globals.translateY),v<0&&(v=0));isNaN(m)||(d.style.left=(m+=l.globals.translateX)+"px",d.style.top=v+"px")}},{key:"moveMarkers",value:function(i,s){var r=this.w,l=this.ttCtx;if(r.globals.markers.size[i]>0)for(var h=r.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(i,"'] .apexcharts-marker")),d=0;d<h.length;d++)parseInt(h[d].getAttribute("rel"),10)===s&&(l.marker.resetPointsSize(),l.marker.enlargeCurrentPoint(s,h[d]));else l.marker.resetPointsSize(),this.moveDynamicPointOnHover(s,i)}},{key:"moveDynamicPointOnHover",value:function(i,s){var r,l,h=this.w,d=this.ttCtx,u=h.globals.pointsArray,p=d.tooltipUtil.getHoverMarkerSize(s),m=h.config.series[s].type;if(!m||"column"!==m&&"candlestick"!==m&&"boxPlot"!==m){r=u[s][i][0],l=u[s][i][1]?u[s][i][1]:0;var v=h.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(s,"'] .apexcharts-series-markers circle"));v&&l<h.globals.gridHeight&&l>0&&(v.setAttribute("r",p),v.setAttribute("cx",r),v.setAttribute("cy",l)),this.moveXCrosshairs(r),d.fixedTooltip||this.moveTooltip(r,l,p)}}},{key:"moveDynamicPointsOnHover",value:function(i){var s,r=this.ttCtx,l=r.w,h=0,d=0,u=l.globals.pointsArray;s=new bt(this.ctx).getActiveConfigSeriesIndex(!0);var p=r.tooltipUtil.getHoverMarkerSize(s);u[s]&&(h=u[s][i][0],d=u[s][i][1]);var m=r.tooltipUtil.getAllMarkers();if(null!==m)for(var v=0;v<l.globals.series.length;v++){var b=u[v];if(l.globals.comboCharts&&void 0===b&&m.splice(v,0,null),b&&b.length){var _=u[v][i][1];m[v].setAttribute("cx",h),null!==_&&!isNaN(_)&&_<l.globals.gridHeight+p&&_+p>0?(m[v]&&m[v].setAttribute("r",p),m[v]&&m[v].setAttribute("cy",_)):m[v]&&m[v].setAttribute("r",0)}}this.moveXCrosshairs(h),r.fixedTooltip||this.moveTooltip(h,d||l.globals.gridHeight,p)}},{key:"moveStickyTooltipOverBars",value:function(i){var s=this.w,r=this.ttCtx,l=s.globals.columnSeries?s.globals.columnSeries.length:s.globals.series.length,h=l>=2&&l%2==0?Math.floor(l/2):Math.floor(l/2)+1;s.globals.isBarHorizontal&&(h=new bt(this.ctx).getActiveConfigSeriesIndex(!1,"desc")+1);var d=s.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(h,"'] path[j='").concat(i,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(h,"'] path[j='").concat(i,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(h,"'] path[j='").concat(i,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(h,"'] path[j='").concat(i,"']")),u=d?parseFloat(d.getAttribute("cx")):0,p=d?parseFloat(d.getAttribute("cy")):0,m=d?parseFloat(d.getAttribute("barWidth")):0,v=d?parseFloat(d.getAttribute("barHeight")):0,b=r.getElGrid().getBoundingClientRect(),_=d.classList.contains("apexcharts-candlestick-area")||d.classList.contains("apexcharts-boxPlot-area");s.globals.isXNumeric?(d&&!_&&(u-=l%2!=0?m/2:0),d&&_&&s.globals.comboCharts&&(u-=m/2)):s.globals.isBarHorizontal||(u=r.xAxisTicksPositions[i-1]+r.dataPointsDividedWidth/2,isNaN(u)&&(u=r.xAxisTicksPositions[i]-r.dataPointsDividedWidth/2)),s.globals.isBarHorizontal?(p>s.globals.gridHeight/2&&(p-=r.tooltipRect.ttHeight),(p=p+s.config.grid.padding.top+v/3)+v>s.globals.gridHeight&&(p=s.globals.gridHeight-v)):s.config.tooltip.followCursor?p=r.e.clientY-b.top-r.tooltipRect.ttHeight/2:p+r.tooltipRect.ttHeight+15>s.globals.gridHeight&&(p=s.globals.gridHeight),p<-10&&(p=-10),s.globals.isBarHorizontal||this.moveXCrosshairs(u),r.fixedTooltip||this.moveTooltip(u,p||s.globals.gridHeight)}}]),P}(),xn=function(){function P(i){lt(this,P),this.w=i.w,this.ttCtx=i,this.ctx=i.ctx,this.tooltipPosition=new mn(i)}return rt(P,[{key:"drawDynamicPoints",value:function(){var i=this.w,s=new U(this.ctx),r=new Lt(this.ctx),l=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series");l=K(l),i.config.chart.stacked&&l.sort(function(b,_){return parseFloat(b.getAttribute("data:realIndex"))-parseFloat(_.getAttribute("data:realIndex"))});for(var h=0;h<l.length;h++){var d=l[h].querySelector(".apexcharts-series-markers-wrap");if(null!==d){var u=void 0,p="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==i.config.chart.type&&"area"!==i.config.chart.type||i.globals.comboCharts||i.config.tooltip.intersect||(p+=" no-pointer-events");var m=r.getMarkerConfig({cssClass:p,seriesIndex:Number(d.getAttribute("data:realIndex"))});(u=s.drawMarker(0,0,m)).node.setAttribute("default-marker-size",0);var v=document.createElementNS(i.globals.SVGNS,"g");v.classList.add("apexcharts-series-markers"),v.appendChild(u.node),d.appendChild(v)}}}},{key:"enlargeCurrentPoint",value:function(i,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,h=this.w;"bubble"!==h.config.chart.type&&this.newPointSize(i,s);var d=s.getAttribute("cx"),u=s.getAttribute("cy");if(null!==r&&null!==l&&(d=r,u=l),this.tooltipPosition.moveXCrosshairs(d),!this.fixedTooltip){if("radar"===h.config.chart.type){var p=this.ttCtx.getElGrid(),m=p.getBoundingClientRect();d=this.ttCtx.e.clientX-m.left}this.tooltipPosition.moveTooltip(d,u,h.config.markers.hover.size)}}},{key:"enlargePoints",value:function(i){for(var s=this.w,r=this,l=this.ttCtx,h=i,d=s.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),u=s.config.markers.hover.size,p=0;p<d.length;p++){var m=d[p].getAttribute("rel"),v=d[p].getAttribute("index");if(void 0===u&&(u=s.globals.markers.size[v]+s.config.markers.hover.sizeOffset),h===parseInt(m,10)){r.newPointSize(h,d[p]);var b=d[p].getAttribute("cx"),_=d[p].getAttribute("cy");r.tooltipPosition.moveXCrosshairs(b),l.fixedTooltip||r.tooltipPosition.moveTooltip(b,_,u)}else r.oldPointSize(d[p])}}},{key:"newPointSize",value:function(i,s){var r=this.w,l=r.config.markers.hover.size,h=0===i?s.parentNode.firstChild:s.parentNode.lastChild;if("0"!==h.getAttribute("default-marker-size")){var d=parseInt(h.getAttribute("index"),10);void 0===l&&(l=r.globals.markers.size[d]+r.config.markers.hover.sizeOffset),l<0&&(l=0),h.setAttribute("r",l)}}},{key:"oldPointSize",value:function(i){var s=parseFloat(i.getAttribute("default-marker-size"));i.setAttribute("r",s)}},{key:"resetPointsSize",value:function(){for(var i=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),s=0;s<i.length;s++){var r=parseFloat(i[s].getAttribute("default-marker-size"));B.isNumber(r)&&r>=0?i[s].setAttribute("r",r):i[s].setAttribute("r",0)}}}]),P}(),li=function(){function P(i){lt(this,P),this.w=i.w,this.ttCtx=i}return rt(P,[{key:"getAttr",value:function(i,s){return parseFloat(i.target.getAttribute(s))}},{key:"handleHeatTreeTooltip",value:function(i){var s=i.e,r=i.opt,l=i.x,h=i.y,u=this.ttCtx,p=this.w;if(s.target.classList.contains("apexcharts-".concat(i.type,"-rect"))){var m=this.getAttr(s,"i"),v=this.getAttr(s,"j"),b=this.getAttr(s,"cx"),_=this.getAttr(s,"cy"),A=this.getAttr(s,"width"),E=this.getAttr(s,"height");if(u.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:m,j:v,shared:!1,e:s}),p.globals.capturedSeriesIndex=m,p.globals.capturedDataPointIndex=v,l=b+u.tooltipRect.ttWidth/2+A,h=_+u.tooltipRect.ttHeight/2-E/2,u.tooltipPosition.moveXCrosshairs(b+A/2),l>p.globals.gridWidth/2&&(l=b-u.tooltipRect.ttWidth/2+A),u.w.config.tooltip.followCursor){var k=p.globals.dom.elWrap.getBoundingClientRect();l=p.globals.clientX-k.left-(l>p.globals.gridWidth/2?u.tooltipRect.ttWidth:0),h=p.globals.clientY-k.top-(h>p.globals.gridHeight/2?u.tooltipRect.ttHeight:0)}}return{x:l,y:h}}},{key:"handleMarkerTooltip",value:function(i){var s,r,l=i.e,h=i.opt,d=i.x,u=i.y,p=this.w,m=this.ttCtx;if(l.target.classList.contains("apexcharts-marker")){var v=parseInt(h.paths.getAttribute("cx"),10),b=parseInt(h.paths.getAttribute("cy"),10),_=parseFloat(h.paths.getAttribute("val"));if(r=parseInt(h.paths.getAttribute("rel"),10),s=parseInt(h.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,m.intersect){var A=B.findAncestor(h.paths,"apexcharts-series");A&&(s=parseInt(A.getAttribute("data:realIndex"),10))}if(m.tooltipLabels.drawSeriesTexts({ttItems:h.ttItems,i:s,j:r,shared:!m.showOnIntersect&&p.config.tooltip.shared,e:l}),"mouseup"===l.type&&m.markerClick(l,s,r),p.globals.capturedSeriesIndex=s,p.globals.capturedDataPointIndex=r,d=v,u=b+p.globals.translateY-1.4*m.tooltipRect.ttHeight,m.w.config.tooltip.followCursor){var E=m.getElGrid().getBoundingClientRect();u=m.e.clientY+p.globals.translateY-E.top}_<0&&(u=b),m.marker.enlargeCurrentPoint(r,h.paths,d,u)}return{x:d,y:u}}},{key:"handleBarTooltip",value:function(i){var s,r,l=i.e,h=i.opt,d=this.w,u=this.ttCtx,p=u.getElTooltip(),m=0,v=0,b=0,_=this.getBarTooltipXY({e:l,opt:h}),A=_.barHeight,E=_.j;d.globals.capturedSeriesIndex=s=_.i,d.globals.capturedDataPointIndex=E,d.globals.isBarHorizontal&&u.tooltipUtil.hasBars()||!d.config.tooltip.shared?(v=_.x,b=_.y,r=Array.isArray(d.config.stroke.width)?d.config.stroke.width[s]:d.config.stroke.width,m=v):d.globals.comboCharts||d.config.tooltip.shared||(m/=2),isNaN(b)?b=d.globals.svgHeight-u.tooltipRect.ttHeight:b<0&&(b=0);var k=parseInt(h.paths.parentNode.getAttribute("data:realIndex"),10),R=d.globals.isMultipleYAxis?d.config.yaxis[k]&&d.config.yaxis[k].reversed:d.config.yaxis[0].reversed;if(v+u.tooltipRect.ttWidth>d.globals.gridWidth&&!R?v-=u.tooltipRect.ttWidth:v<0&&(v=0),u.w.config.tooltip.followCursor){var O=u.getElGrid().getBoundingClientRect();b=u.e.clientY-O.top}null===u.tooltip&&(u.tooltip=d.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),d.config.tooltip.shared||u.tooltipPosition.moveXCrosshairs(d.globals.comboBarCount>0?m+r/2:m),!u.fixedTooltip&&(!d.config.tooltip.shared||d.globals.isBarHorizontal&&u.tooltipUtil.hasBars())&&(R&&(v-=u.tooltipRect.ttWidth)<0&&(v=0),!R||d.globals.isBarHorizontal&&u.tooltipUtil.hasBars()||(b=b+A-2*(d.globals.series[s][E]<0?A:0)),u.tooltipRect.ttHeight+b>d.globals.gridHeight?b=d.globals.gridHeight-u.tooltipRect.ttHeight+d.globals.translateY:(b=b+d.globals.translateY-u.tooltipRect.ttHeight/2)<0&&(b=0),p.style.left=v+d.globals.translateX+"px",p.style.top=b+"px")}},{key:"getBarTooltipXY",value:function(i){var s=i.e,r=i.opt,l=this.w,h=null,d=this.ttCtx,u=0,p=0,m=0,v=0,b=0,_=s.target.classList;if(_.contains("apexcharts-bar-area")||_.contains("apexcharts-candlestick-area")||_.contains("apexcharts-boxPlot-area")||_.contains("apexcharts-rangebar-area")){var A=s.target,E=A.getBoundingClientRect(),k=r.elGrid.getBoundingClientRect(),R=E.height;b=E.height;var O=E.width,N=parseInt(A.getAttribute("cx"),10),z=parseInt(A.getAttribute("cy"),10);v=parseFloat(A.getAttribute("barWidth"));var x="touchmove"===s.type?s.touches[0].clientX:s.clientX;h=parseInt(A.getAttribute("j"),10),u=parseInt(A.parentNode.getAttribute("rel"),10)-1;var C=A.getAttribute("data-range-y1"),T=A.getAttribute("data-range-y2");l.globals.comboCharts&&(u=parseInt(A.parentNode.getAttribute("data:realIndex"),10)),d.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:u,j:h,y1:C?parseInt(C,10):null,y2:T?parseInt(T,10):null,shared:!d.showOnIntersect&&l.config.tooltip.shared,e:s}),l.config.tooltip.followCursor?l.globals.isBarHorizontal?(p=x-k.left+15,m=z-d.dataPointsDividedHeight+R/2-d.tooltipRect.ttHeight/2):(p=l.globals.isXNumeric?N-O/2:N-d.dataPointsDividedWidth+O/2,m=s.clientY-k.top-d.tooltipRect.ttHeight/2-15):l.globals.isBarHorizontal?((p=N)<d.xyRatios.baseLineInvertedY&&(p=N-d.tooltipRect.ttWidth),m=z-d.dataPointsDividedHeight+R/2-d.tooltipRect.ttHeight/2):(p=l.globals.isXNumeric?N-O/2:N-d.dataPointsDividedWidth+O/2,m=z)}return{x:p,y:m,barHeight:b,barWidth:v,i:u,j:h}}}]),P}(),Er=function(){function P(i){lt(this,P),this.w=i.w,this.ttCtx=i}return rt(P,[{key:"drawXaxisTooltip",value:function(){var i=this.w,s=this.ttCtx,r="bottom"===i.config.xaxis.position;s.xaxisOffY=r?i.globals.gridHeight+1:-i.globals.xAxisHeight-i.config.xaxis.axisTicks.height+3;var l=r?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",h=i.globals.dom.elWrap;s.isXAxisTooltipEnabled&&null===i.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(s.xaxisTooltip=document.createElement("div"),s.xaxisTooltip.setAttribute("class",l+" apexcharts-theme-"+i.config.tooltip.theme),h.appendChild(s.xaxisTooltip),s.xaxisTooltipText=document.createElement("div"),s.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),s.xaxisTooltipText.style.fontFamily=i.config.xaxis.tooltip.style.fontFamily||i.config.chart.fontFamily,s.xaxisTooltipText.style.fontSize=i.config.xaxis.tooltip.style.fontSize,s.xaxisTooltip.appendChild(s.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var i=this.w,s=this.ttCtx,r=function(h){var d=i.config.yaxis[h].opposite||i.config.yaxis[h].crosshairs.opposite;s.yaxisOffX=d?i.globals.gridWidth+1:1;var u="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(h,d?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");i.globals.yAxisSameScaleIndices.map(function(m,v){m.map(function(b,_){_===h&&(u+=i.config.yaxis[_].show?" ":" apexcharts-yaxistooltip-hidden")})});var p=i.globals.dom.elWrap;null===i.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(h))&&(s.yaxisTooltip=document.createElement("div"),s.yaxisTooltip.setAttribute("class",u+" apexcharts-theme-"+i.config.tooltip.theme),p.appendChild(s.yaxisTooltip),0===h&&(s.yaxisTooltipText=[]),s.yaxisTooltipText[h]=document.createElement("div"),s.yaxisTooltipText[h].classList.add("apexcharts-yaxistooltip-text"),s.yaxisTooltip.appendChild(s.yaxisTooltipText[h]))},l=0;l<i.config.yaxis.length;l++)r(l)}},{key:"setXCrosshairWidth",value:function(){var i=this.w,s=this.ttCtx,r=s.getElXCrosshairs();if(s.xcrosshairsWidth=parseInt(i.config.xaxis.crosshairs.width,10),i.globals.comboCharts){var l=i.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==l&&"barWidth"===i.config.xaxis.crosshairs.width){var h=parseFloat(l.getAttribute("barWidth"));s.xcrosshairsWidth=h}else"tickWidth"===i.config.xaxis.crosshairs.width&&(s.xcrosshairsWidth=i.globals.gridWidth/i.globals.labels.length)}else if("tickWidth"===i.config.xaxis.crosshairs.width)s.xcrosshairsWidth=i.globals.gridWidth/i.globals.labels.length;else if("barWidth"===i.config.xaxis.crosshairs.width){var p=i.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==p){var m=parseFloat(p.getAttribute("barWidth"));s.xcrosshairsWidth=m}else s.xcrosshairsWidth=1}i.globals.isBarHorizontal&&(s.xcrosshairsWidth=0),null!==r&&s.xcrosshairsWidth>0&&r.setAttribute("width",s.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var i=this.w,s=this.ttCtx;s.ycrosshairs=i.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),s.ycrosshairsHidden=i.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(i,s,r){var l=this.ttCtx,h=this.w,d=h.globals.yLabelFormatters[i];if(l.yaxisTooltips[i]){var u=l.getElGrid().getBoundingClientRect(),v=h.globals.minYArr[i]+(h.globals.maxYArr[i]-h.globals.minYArr[i]-(s-u.top)*r.yRatio[i]);l.tooltipPosition.moveYCrosshairs(s-u.top),l.yaxisTooltipText[i].innerHTML=d(v),l.tooltipPosition.moveYAxisTooltip(i)}}}]),P}(),hl=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w;var s=this.w;this.tConfig=s.config.tooltip,this.tooltipUtil=new pn(this),this.tooltipLabels=new kr(this),this.tooltipPosition=new mn(this),this.marker=new xn(this),this.intersect=new li(this),this.axesTooltip=new Er(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!s.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return rt(P,[{key:"getElTooltip",value:function(i){return i||(i=this),i.w.globals.dom.baseEl?i.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(i){var s=this.w;this.xyRatios=i,this.isXAxisTooltipEnabled=s.config.xaxis.tooltip.enabled&&s.globals.axisCharts,this.yaxisTooltips=s.config.yaxis.map(function(d,u){return!!(d.show&&d.tooltip.enabled&&s.globals.axisCharts)}),this.allTooltipSeriesGroups=[],s.globals.axisCharts||(this.showTooltipTitle=!1);var r=document.createElement("div");if(r.classList.add("apexcharts-tooltip"),s.config.tooltip.cssClass&&r.classList.add(s.config.tooltip.cssClass),r.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),s.globals.dom.elWrap.appendChild(r),s.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var l=new fs(this.ctx);this.xAxisTicksPositions=l.getXAxisTicksPositions()}if(!s.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==s.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==s.config.markers.size&&0!==s.globals.markers.largestSize||this.marker.drawDynamicPoints(this),s.globals.collapsedSeries.length!==s.globals.series.length){this.dataPointsDividedHeight=s.globals.gridHeight/s.globals.dataPoints,this.dataPointsDividedWidth=s.globals.gridWidth/s.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||s.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,r.appendChild(this.tooltipTitle));var h=s.globals.series.length;(s.globals.xyCharts||s.globals.comboCharts)&&this.tConfig.shared&&(h=this.showOnIntersect?1:s.globals.series.length),this.legendLabels=s.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(h),this.addSVGEvents()}}},{key:"createTTElements",value:function(i){for(var s=this,r=this.w,l=[],h=this.getElTooltip(),d=function(p){var m=document.createElement("div");m.classList.add("apexcharts-tooltip-series-group"),m.style.order=r.config.tooltip.inverseOrder?i-p:p+1,s.tConfig.shared&&s.tConfig.enabledOnSeries&&Array.isArray(s.tConfig.enabledOnSeries)&&s.tConfig.enabledOnSeries.indexOf(p)<0&&m.classList.add("apexcharts-tooltip-series-group-hidden");var v=document.createElement("span");v.classList.add("apexcharts-tooltip-marker"),v.style.backgroundColor=r.globals.colors[p],m.appendChild(v);var b=document.createElement("div");b.classList.add("apexcharts-tooltip-text"),b.style.fontFamily=s.tConfig.style.fontFamily||r.config.chart.fontFamily,b.style.fontSize=s.tConfig.style.fontSize,["y","goals","z"].forEach(function(_){var A=document.createElement("div");A.classList.add("apexcharts-tooltip-".concat(_,"-group"));var E=document.createElement("span");E.classList.add("apexcharts-tooltip-text-".concat(_,"-label")),A.appendChild(E);var k=document.createElement("span");k.classList.add("apexcharts-tooltip-text-".concat(_,"-value")),A.appendChild(k),b.appendChild(A)}),m.appendChild(b),h.appendChild(m),l.push(m)},u=0;u<i;u++)d(u);return l}},{key:"addSVGEvents",value:function(){var i=this.w,s=i.config.chart.type,r=this.getElTooltip(),l=!("bar"!==s&&"candlestick"!==s&&"boxPlot"!==s&&"rangeBar"!==s),h="area"===s||"line"===s||"scatter"===s||"bubble"===s||"radar"===s,d=i.globals.dom.Paper.node,u=this.getElGrid();u&&(this.seriesBound=u.getBoundingClientRect());var p,m=[],v=[],b={hoverArea:d,elGrid:u,tooltipEl:r,tooltipY:m,tooltipX:v,ttItems:this.ttItems};if(i.globals.axisCharts&&(h?p=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):l?p=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==s&&"treemap"!==s||(p=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),p&&p.length))for(var _=0;_<p.length;_++)m.push(p[_].getAttribute("cy")),v.push(p[_].getAttribute("cx"));if(i.globals.xyCharts&&!this.showOnIntersect||i.globals.comboCharts&&!this.showOnIntersect||l&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([d],b);else if(l&&!i.globals.comboCharts||h&&this.showOnIntersect)this.addDatapointEventsListeners(b);else if(!i.globals.axisCharts||"heatmap"===s||"treemap"===s){var A=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(A,b)}if(this.showOnIntersect){var E=i.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");E.length>0&&this.addPathsEventListeners(E,b),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(b)}}},{key:"drawFixedTooltipRect",value:function(){var i=this.w,s=this.getElTooltip(),r=s.getBoundingClientRect(),l=r.width+10,h=r.height+10,d=this.tConfig.fixed.offsetX,u=this.tConfig.fixed.offsetY,p=this.tConfig.fixed.position.toLowerCase();return p.indexOf("right")>-1&&(d=d+i.globals.svgWidth-l+10),p.indexOf("bottom")>-1&&(u=u+i.globals.svgHeight-h-10),s.style.left=d+"px",s.style.top=u+"px",{x:d,y:u,ttWidth:l,ttHeight:h}}},{key:"addDatapointEventsListeners",value:function(i){var s=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(s,i)}},{key:"addPathsEventListeners",value:function(i,s){for(var r=this,l=function(d){var u={paths:i[d],tooltipEl:s.tooltipEl,tooltipY:s.tooltipY,tooltipX:s.tooltipX,elGrid:s.elGrid,hoverArea:s.hoverArea,ttItems:s.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(p){return i[d].addEventListener(p,r.onSeriesHover.bind(r,u),{capture:!1,passive:!0})})},h=0;h<i.length;h++)l(h)}},{key:"onSeriesHover",value:function(i,s){var r=this,l=Date.now()-this.lastHoverTime;l>=100?this.seriesHover(i,s):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){r.seriesHover(i,s)},100-l))}},{key:"seriesHover",value:function(i,s){var r=this;this.lastHoverTime=Date.now();var l=[],h=this.w;h.config.chart.group&&(l=this.ctx.getGroupedCharts()),h.globals.axisCharts&&(h.globals.minX===-1/0&&h.globals.maxX===1/0||0===h.globals.dataPoints)||(l.length?l.forEach(function(d){var u=r.getElTooltip(d);d.w.globals.minX===r.w.globals.minX&&d.w.globals.maxX===r.w.globals.maxX&&d.w.globals.tooltip.seriesHoverByContext({chartCtx:d,ttCtx:d.w.globals.tooltip,opt:{paths:i.paths,tooltipEl:u,tooltipY:i.tooltipY,tooltipX:i.tooltipX,elGrid:i.elGrid,hoverArea:i.hoverArea,ttItems:d.w.globals.tooltip.ttItems},e:s})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:i,e:s}))}},{key:"seriesHoverByContext",value:function(i){var s=i.chartCtx,r=i.ttCtx,l=i.opt,h=i.e,d=s.w,u=this.getElTooltip();u&&(r.tooltipRect={x:0,y:0,ttWidth:u.getBoundingClientRect().width,ttHeight:u.getBoundingClientRect().height},r.e=h,r.tooltipUtil.hasBars()&&!d.globals.comboCharts&&!r.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new bt(s).toggleSeriesOnHover(h,h.target.parentNode),r.fixedTooltip&&r.drawFixedTooltipRect(),d.globals.axisCharts?r.axisChartsTooltips({e:h,opt:l,tooltipRect:r.tooltipRect}):r.nonAxisChartsTooltips({e:h,opt:l,tooltipRect:r.tooltipRect}))}},{key:"axisChartsTooltips",value:function(i){var s,r,l=i.e,h=i.opt,d=this.w,u=h.elGrid.getBoundingClientRect(),p="touchmove"===l.type?l.touches[0].clientX:l.clientX,m="touchmove"===l.type?l.touches[0].clientY:l.clientY;if(this.clientY=m,this.clientX=p,d.globals.capturedSeriesIndex=-1,d.globals.capturedDataPointIndex=-1,m<u.top||m>u.top+u.height)this.handleMouseOut(h);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!d.config.tooltip.shared){var v=parseInt(h.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(v)<0)return void this.handleMouseOut(h)}var b=this.getElTooltip(),_=this.getElXCrosshairs(),A=d.globals.xyCharts||"bar"===d.config.chart.type&&!d.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||d.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===l.type||"touchmove"===l.type||"mouseup"===l.type){if(d.globals.collapsedSeries.length+d.globals.ancillaryCollapsedSeries.length===d.globals.series.length)return;null!==_&&_.classList.add("apexcharts-active");var E=this.yaxisTooltips.filter(function(O){return!0===O});if(null!==this.ycrosshairs&&E.length&&this.ycrosshairs.classList.add("apexcharts-active"),A&&!this.showOnIntersect)this.handleStickyTooltip(l,p,m,h);else if("heatmap"===d.config.chart.type||"treemap"===d.config.chart.type){var k=this.intersect.handleHeatTreeTooltip({e:l,opt:h,x:s,y:r,type:d.config.chart.type});r=k.y,b.style.left=(s=k.x)+"px",b.style.top=r+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:l,opt:h}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:l,opt:h,x:s,y:r});if(this.yaxisTooltips.length)for(var R=0;R<d.config.yaxis.length;R++)this.axesTooltip.drawYaxisTooltipText(R,m,this.xyRatios);h.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==l.type&&"touchend"!==l.type||this.handleMouseOut(h)}}},{key:"nonAxisChartsTooltips",value:function(i){var s=i.e,r=i.opt,l=i.tooltipRect,h=this.w,d=r.paths.getAttribute("rel"),u=this.getElTooltip(),p=h.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===s.type||"touchmove"===s.type){u.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:parseInt(d,10)-1,shared:!1});var v=h.globals.clientY-p.top-l.ttHeight-10;if(u.style.left=h.globals.clientX-p.left-l.ttWidth/2+"px",u.style.top=v+"px",h.config.legend.tooltipHoverFormatter){var b=d-1,_=(0,h.config.legend.tooltipHoverFormatter)(this.legendLabels[b].getAttribute("data:default-text"),{seriesIndex:b,dataPointIndex:b,w:h});this.legendLabels[b].innerHTML=_}}else"mouseout"!==s.type&&"touchend"!==s.type||(u.classList.remove("apexcharts-active"),h.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(A){var E=A.getAttribute("data:default-text");A.innerHTML=decodeURIComponent(E)}))}},{key:"handleStickyTooltip",value:function(i,s,r,l){var h=this.w,d=this.tooltipUtil.getNearestValues({context:this,hoverArea:l.hoverArea,elGrid:l.elGrid,clientX:s,clientY:r}),u=d.j,p=d.capturedSeries,m=l.elGrid.getBoundingClientRect();d.hoverX<0||d.hoverX>m.width?this.handleMouseOut(l):null!==p?this.handleStickyCapturedSeries(i,p,l,u):(this.tooltipUtil.isXoverlap(u)||h.globals.isBarHorizontal)&&this.create(i,this,0,u,l.ttItems)}},{key:"handleStickyCapturedSeries",value:function(i,s,r,l){var h=this.w;this.tConfig.shared||null!==h.globals.series[s][l]?void 0!==h.globals.series[s][l]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(l)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(i,this,s,l,r.ttItems):this.create(i,this,s,l,r.ttItems,!1):this.tooltipUtil.isXoverlap(l)&&this.create(i,this,0,l,r.ttItems):this.handleMouseOut(r)}},{key:"deactivateHoverFilter",value:function(){for(var i=this.w,s=new U(this.ctx),r=i.globals.dom.Paper.select(".apexcharts-bar-area"),l=0;l<r.length;l++)s.pathMouseLeave(r[l])}},{key:"handleMouseOut",value:function(i){var s=this.w,r=this.getElXCrosshairs();if(i.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==s.config.chart.type&&this.marker.resetPointsSize(),null!==r&&r.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=s.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var l=0;l<this.yaxisTTEls.length;l++)this.yaxisTTEls[l].classList.remove("apexcharts-active")}s.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(h){var d=h.getAttribute("data:default-text");h.innerHTML=decodeURIComponent(d)})}},{key:"markerClick",value:function(i,s,r){var l=this.w;"function"==typeof l.config.chart.events.markerClick&&l.config.chart.events.markerClick(i,this.ctx,{seriesIndex:s,dataPointIndex:r,w:l}),this.ctx.events.fireEvent("markerClick",[i,this.ctx,{seriesIndex:s,dataPointIndex:r,w:l}])}},{key:"create",value:function(i,s,r,l,h){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=this.w,p=s;"mouseup"===i.type&&this.markerClick(i,r,l),null===d&&(d=this.tConfig.shared);var m=this.tooltipUtil.hasMarkers(),v=this.tooltipUtil.getElBars();if(u.config.legend.tooltipHoverFormatter){var b=u.config.legend.tooltipHoverFormatter,_=Array.from(this.legendLabels);_.forEach(function(C){var T=C.getAttribute("data:default-text");C.innerHTML=decodeURIComponent(T)});for(var A=0;A<_.length;A++){var E=_[A],k=parseInt(E.getAttribute("i"),10),R=decodeURIComponent(E.getAttribute("data:default-text")),O=b(R,{seriesIndex:d?k:r,dataPointIndex:l,w:u});if(d)E.innerHTML=u.globals.collapsedSeriesIndices.indexOf(k)<0?O:R;else if(E.innerHTML=k===r?O:R,r===k)break}}if(d){if(p.tooltipLabels.drawSeriesTexts({ttItems:h,i:r,j:l,shared:!this.showOnIntersect&&this.tConfig.shared}),m&&(u.globals.markers.largestSize>0?p.marker.enlargePoints(l):p.tooltipPosition.moveDynamicPointsOnHover(l)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(v),this.barSeriesHeight>0)){var N=new U(this.ctx),z=u.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(l,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(l);for(var x=0;x<z.length;x++)N.pathMouseEnter(z[x])}}else p.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:h,i:r,j:l}),this.tooltipUtil.hasBars()&&p.tooltipPosition.moveStickyTooltipOverBars(l),m&&p.tooltipPosition.moveMarkers(r,l)}}]),P}(),Tr=function(P){ze(s,Dt);var i=Re(s);function s(){return lt(this,s),i.apply(this,arguments)}return rt(s,[{key:"draw",value:function(r,l){var h=this,d=this.w;this.graphics=new U(this.ctx),this.bar=new Dt(this.ctx,this.xyRatios);var u=new wt(this.ctx,d);r=u.getLogSeries(r),this.yRatio=u.getLogYRatios(this.yRatio),this.barHelpers.initVariables(r),"100%"===d.config.chart.stackType&&(r=d.globals.seriesPercent.slice()),this.series=r,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var p=0;p<r.length;p++)r[p].length>0&&(this.totalItems+=r[p].length);for(var m=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),v=0,b=0,_=function(k,R){var O=void 0,N=void 0,z=void 0,x=void 0,C=[],T=[],L=d.globals.comboCharts?l[k]:k;h.yRatio.length>1&&(h.yaxisIndex=L),h.isReversed=d.config.yaxis[h.yaxisIndex]&&d.config.yaxis[h.yaxisIndex].reversed;var W=h.graphics.group({class:"apexcharts-series",seriesName:B.escapeString(d.globals.seriesNames[L]),rel:k+1,"data:realIndex":L});h.ctx.series.addCollapsedClassToSeries(W,L);var J=h.graphics.group({class:"apexcharts-datalabels","data:realIndex":L}),H=0,et=0,tt=h.initialPositions(v,b,O,N,z,x);b=tt.y,H=tt.barHeight,N=tt.yDivision,x=tt.zeroW,v=tt.x,et=tt.barWidth,O=tt.xDivision,z=tt.zeroH,h.yArrj=[],h.yArrjF=[],h.yArrjVal=[],h.xArrj=[],h.xArrjF=[],h.xArrjVal=[],1===h.prevY.length&&h.prevY[0].every(function(ie){return isNaN(ie)})&&(h.prevY[0]=h.prevY[0].map(function(ie){return z}),h.prevYF[0]=h.prevYF[0].map(function(ie){return 0}));for(var at=0;at<d.globals.dataPoints;at++){var pt=h.barHelpers.getStrokeWidth(k,at,L),Zt={indexes:{i:k,j:at,realIndex:L,bc:R},strokeWidth:pt,x:v,y:b,elSeries:W},Xt=null;h.isHorizontal?(Xt=h.drawStackedBarPaths(Mt(Mt({},Zt),{},{zeroW:x,barHeight:H,yDivision:N})),et=h.series[k][at]/h.invertedYRatio):(Xt=h.drawStackedColumnPaths(Mt(Mt({},Zt),{},{xDivision:O,barWidth:et,zeroH:z})),H=h.series[k][at]/h.yRatio[h.yaxisIndex]),b=Xt.y,C.push(v=Xt.x),T.push(b);var qt=h.barHelpers.getPathFillColor(r,k,at,L);W=h.renderSeries({realIndex:L,pathFill:qt,j:at,i:k,pathFrom:Xt.pathFrom,pathTo:Xt.pathTo,strokeWidth:pt,elSeries:W,x:v,y:b,series:r,barHeight:H,barWidth:et,elDataLabelsWrap:J,type:"bar",visibleSeries:0})}d.globals.seriesXvalues[L]=C,d.globals.seriesYvalues[L]=T,h.prevY.push(h.yArrj),h.prevYF.push(h.yArrjF),h.prevYVal.push(h.yArrjVal),h.prevX.push(h.xArrj),h.prevXF.push(h.xArrjF),h.prevXVal.push(h.xArrjVal),m.add(W)},A=0,E=0;A<r.length;A++,E++)_(A,E);return m}},{key:"initialPositions",value:function(r,l,h,d,u,p){var m,v,b=this.w;return this.isHorizontal?(m=(m=d=b.globals.gridHeight/b.globals.dataPoints)*parseInt(b.config.plotOptions.bar.barHeight,10)/100,p=this.baseLineInvertedY+b.globals.padHorizontal+(this.isReversed?b.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),l=(d-m)/2):(v=h=b.globals.gridWidth/b.globals.dataPoints,v=b.globals.isXNumeric&&b.globals.dataPoints>1?(h=b.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:v*parseInt(b.config.plotOptions.bar.columnWidth,10)/100,u=this.baseLineY[this.yaxisIndex]+(this.isReversed?b.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),r=b.globals.padHorizontal+(h-v)/2),{x:r,y:l,yDivision:d,xDivision:h,barHeight:m,barWidth:v,zeroH:u,zeroW:p}}},{key:"drawStackedBarPaths",value:function(r){for(var l,m,h=r.indexes,d=r.barHeight,u=r.strokeWidth,p=r.zeroW,v=r.y,b=r.yDivision,_=r.elSeries,A=this.w,E=v,k=h.i,R=h.j,O=0,N=0;N<this.prevXF.length;N++)O+=this.prevXF[N][R];if(k>0){var z=p;this.prevXVal[k-1][R]<0?z=this.series[k][R]>=0?this.prevX[k-1][R]+O-2*(this.isReversed?O:0):this.prevX[k-1][R]:this.prevXVal[k-1][R]>=0&&(z=this.series[k][R]>=0?this.prevX[k-1][R]:this.prevX[k-1][R]-O+2*(this.isReversed?O:0)),l=z}else l=p;var x=this.barHelpers.getBarpaths({barYPosition:E,barHeight:d,x1:l,x2:m=null===this.series[k][R]?l:l+this.series[k][R]/this.invertedYRatio-2*(this.isReversed?this.series[k][R]/this.invertedYRatio:0),strokeWidth:u,series:this.series,realIndex:h.realIndex,i:k,j:R,w:A});return this.barHelpers.barBackground({j:R,i:k,y1:E,y2:d,elSeries:_}),{pathTo:x.pathTo,pathFrom:x.pathFrom,x:m,y:v+=b}}},{key:"drawStackedColumnPaths",value:function(r){var d,l=r.indexes,h=r.x,u=r.xDivision,p=r.barWidth,m=r.zeroH,v=r.elSeries,b=this.w,_=l.i,A=l.j,E=l.bc;if(b.globals.isXNumeric){var k=b.globals.seriesX[_][A];k||(k=0),h=(k-b.globals.minX)/this.xRatio-p/2}for(var R,O=h,N=0,z=0;z<this.prevYF.length;z++)N+=isNaN(this.prevYF[z][A])?0:this.prevYF[z][A];if(_>0&&!b.globals.isXNumeric||_>0&&b.globals.isXNumeric&&b.globals.seriesX[_-1][A]===b.globals.seriesX[_][A]){var x,C,T=Math.min(this.yRatio.length+1,_+1);if(void 0!==this.prevY[_-1])for(var L=1;L<T;L++)if(!isNaN(this.prevY[_-L][A])){C=this.prevY[_-L][A];break}for(var W=1;W<T;W++){if(this.prevYVal[_-W][A]<0){x=this.series[_][A]>=0?C-N+2*(this.isReversed?N:0):C;break}if(this.prevYVal[_-W][A]>=0){x=this.series[_][A]>=0?C:C+N-2*(this.isReversed?N:0);break}}void 0===x&&(x=b.globals.gridHeight),R=this.prevYF[0].every(function(H){return 0===H})&&this.prevYF.slice(1,_).every(function(H){return H.every(function(et){return isNaN(et)})})?b.globals.gridHeight-m:x}else R=b.globals.gridHeight-m;var J=this.barHelpers.getColumnPaths({barXPosition:O,barWidth:p,y1:R,y2:d=R-this.series[_][A]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[_][A]/this.yRatio[this.yaxisIndex]:0),yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:l.realIndex,i:_,j:A,w:b});return this.barHelpers.barBackground({bc:E,j:A,i:_,x1:O,x2:p,elSeries:v}),h+=u,{pathTo:J.pathTo,pathFrom:J.pathFrom,x:b.globals.isXNumeric?h-u:h,y:d}}}]),s}(),ma=function(P){ze(s,Dt);var i=Re(s);function s(){return lt(this,s),i.apply(this,arguments)}return rt(s,[{key:"draw",value:function(r,l){var h=this,d=this.w,u=new U(this.ctx),p=new se(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=d.config.plotOptions.bar.horizontal;var m=new wt(this.ctx,d);r=m.getLogSeries(r),this.series=r,this.yRatio=m.getLogYRatios(this.yRatio),this.barHelpers.initVariables(r);for(var v=u.group({class:"apexcharts-".concat(d.config.chart.type,"-series apexcharts-plot-series")}),b=function(A){h.isBoxPlot="boxPlot"===d.config.chart.type||"boxPlot"===d.config.series[A].type;var E,k,R,O,W,J,N=void 0,z=void 0,x=[],C=[],T=d.globals.comboCharts?l[A]:A,L=u.group({class:"apexcharts-series",seriesName:B.escapeString(d.globals.seriesNames[T]),rel:A+1,"data:realIndex":T});h.ctx.series.addCollapsedClassToSeries(L,T),r[A].length>0&&(h.visibleI=h.visibleI+1),h.yRatio.length>1&&(h.yaxisIndex=T);var H=h.barHelpers.initialPositions();z=H.y,W=H.barHeight,k=H.yDivision,O=H.zeroW,E=H.xDivision,R=H.zeroH,C.push((N=H.x)+(J=H.barWidth)/2);for(var et=u.group({class:"apexcharts-datalabels","data:realIndex":T}),tt=function(pt){var Zt=h.barHelpers.getStrokeWidth(A,pt,T),Xt=null,qt={indexes:{i:A,j:pt,realIndex:T},x:N,y:z,strokeWidth:Zt,elSeries:L};Xt=h.isHorizontal?h.drawHorizontalBoxPaths(Mt(Mt({},qt),{},{yDivision:k,barHeight:W,zeroW:O})):h.drawVerticalBoxPaths(Mt(Mt({},qt),{},{xDivision:E,barWidth:J,zeroH:R})),z=Xt.y,N=Xt.x,pt>0&&C.push(N+J/2),x.push(z),Xt.pathTo.forEach(function(ie,ge){var hi=!h.isBoxPlot&&h.candlestickOptions.wick.useFillColor?Xt.color[ge]:d.globals.stroke.colors[A],ji=p.fillPath({seriesNumber:T,dataPointIndex:pt,color:Xt.color[ge],value:r[A][pt]});h.renderSeries({realIndex:T,pathFill:ji,lineFill:hi,j:pt,i:A,pathFrom:Xt.pathFrom,pathTo:ie,strokeWidth:Zt,elSeries:L,x:N,y:z,series:r,barHeight:W,barWidth:J,elDataLabelsWrap:et,visibleSeries:h.visibleI,type:d.config.chart.type})})},at=0;at<d.globals.dataPoints;at++)tt(at);d.globals.seriesXvalues[T]=C,d.globals.seriesYvalues[T]=x,v.add(L)},_=0;_<r.length;_++)b(_);return v}},{key:"drawVerticalBoxPaths",value:function(r){var l=r.indexes,h=r.x,d=r.xDivision,u=r.barWidth,p=r.zeroH,m=r.strokeWidth,v=this.w,b=new U(this.ctx),_=l.i,A=l.j,E=!0,k=v.config.plotOptions.candlestick.colors.upward,R=v.config.plotOptions.candlestick.colors.downward,O="";this.isBoxPlot&&(O=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var N=this.yRatio[this.yaxisIndex],z=l.realIndex,x=this.getOHLCValue(z,A),C=p,T=p;x.o>x.c&&(E=!1);var L=Math.min(x.o,x.c),W=Math.max(x.o,x.c),J=x.m;v.globals.isXNumeric&&(h=(v.globals.seriesX[z][A]-v.globals.minX)/this.xRatio-u/2);var H=h+u*this.visibleI;null==this.series[_][A]?(L=p,W=p):(L=p-L/N,W=p-W/N,C=p-x.h/N,T=p-x.l/N,J=p-x.m/N);var et=b.move(H,p),tt=b.move(H+u/2,L);return v.globals.previousPaths.length>0&&(tt=this.getPreviousPath(z,A,!0)),et=this.isBoxPlot?[b.move(H,L)+b.line(H+u/2,L)+b.line(H+u/2,C)+b.line(H+u/4,C)+b.line(H+u-u/4,C)+b.line(H+u/2,C)+b.line(H+u/2,L)+b.line(H+u,L)+b.line(H+u,J)+b.line(H,J)+b.line(H,L+m/2),b.move(H,J)+b.line(H+u,J)+b.line(H+u,W)+b.line(H+u/2,W)+b.line(H+u/2,T)+b.line(H+u-u/4,T)+b.line(H+u/4,T)+b.line(H+u/2,T)+b.line(H+u/2,W)+b.line(H,W)+b.line(H,J)+"z"]:[b.move(H,W)+b.line(H+u/2,W)+b.line(H+u/2,C)+b.line(H+u/2,W)+b.line(H+u,W)+b.line(H+u,L)+b.line(H+u/2,L)+b.line(H+u/2,T)+b.line(H+u/2,L)+b.line(H,L)+b.line(H,W-m/2)],tt+=b.move(H,L),v.globals.isXNumeric||(h+=d),{pathTo:et,pathFrom:tt,x:h,y:W,barXPosition:H,color:this.isBoxPlot?O:E?[k]:[R]}}},{key:"drawHorizontalBoxPaths",value:function(r){var l=r.indexes,h=r.y,d=r.yDivision,u=r.barHeight,p=r.zeroW,m=r.strokeWidth,v=this.w,b=new U(this.ctx),_=l.i,A=l.j,E=this.boxOptions.colors.lower;this.isBoxPlot&&(E=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var k=this.invertedYRatio,R=l.realIndex,O=this.getOHLCValue(R,A),N=p,z=p,x=Math.min(O.o,O.c),C=Math.max(O.o,O.c),T=O.m;v.globals.isXNumeric&&(h=(v.globals.seriesX[R][A]-v.globals.minX)/this.invertedXRatio-u/2);var L=h+u*this.visibleI;null==this.series[_][A]?(x=p,C=p):(x=p+x/k,C=p+C/k,N=p+O.h/k,z=p+O.l/k,T=p+O.m/k);var W=b.move(p,L),J=b.move(x,L+u/2);return v.globals.previousPaths.length>0&&(J=this.getPreviousPath(R,A,!0)),W=[b.move(x,L)+b.line(x,L+u/2)+b.line(N,L+u/2)+b.line(N,L+u/2-u/4)+b.line(N,L+u/2+u/4)+b.line(N,L+u/2)+b.line(x,L+u/2)+b.line(x,L+u)+b.line(T,L+u)+b.line(T,L)+b.line(x+m/2,L),b.move(T,L)+b.line(T,L+u)+b.line(C,L+u)+b.line(C,L+u/2)+b.line(z,L+u/2)+b.line(z,L+u-u/4)+b.line(z,L+u/4)+b.line(z,L+u/2)+b.line(C,L+u/2)+b.line(C,L)+b.line(T,L)+"z"],J+=b.move(x,L),v.globals.isXNumeric||(h+=d),{pathTo:W,pathFrom:J,x:C,y:h,barYPosition:L,color:E}}},{key:"getOHLCValue",value:function(r,l){var h=this.w;return{o:this.isBoxPlot?h.globals.seriesCandleH[r][l]:h.globals.seriesCandleO[r][l],h:this.isBoxPlot?h.globals.seriesCandleO[r][l]:h.globals.seriesCandleH[r][l],m:h.globals.seriesCandleM[r][l],l:this.isBoxPlot?h.globals.seriesCandleC[r][l]:h.globals.seriesCandleL[r][l],c:this.isBoxPlot?h.globals.seriesCandleL[r][l]:h.globals.seriesCandleC[r][l]}}}]),s}(),yn=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"checkColorRange",value:function(){var i=this.w,s=!1,r=i.config.plotOptions[i.config.chart.type];return r.colorScale.ranges.length>0&&r.colorScale.ranges.map(function(l,h){l.from<=0&&(s=!0)}),s}},{key:"getShadeColor",value:function(i,s,r,l){var h=this.w,d=1,u=h.config.plotOptions[i].shadeIntensity,p=this.determineColor(i,s,r);h.globals.hasNegs||l?d=h.config.plotOptions[i].reverseNegativeShade?p.percent<0?p.percent/100*(1.25*u):1.25*u*(1-p.percent/100):p.percent<=0?1-(1+p.percent/100)*u:(1-p.percent/100)*u:(d=1-p.percent/100,"treemap"===i&&(d=1.25*u*(1-p.percent/100)));var m=p.color,v=new B;return h.config.plotOptions[i].enableShades&&(m=B.hexToRgba(v.shadeColor("dark"===this.w.config.theme.mode?-1*d:d,p.color),h.config.fill.opacity)),{color:m,colorProps:p}}},{key:"determineColor",value:function(i,s,r){var l=this.w,h=l.globals.series[s][r],d=l.config.plotOptions[i],u=d.colorScale.inverse?r:s;d.distributed&&"treemap"===l.config.chart.type&&(u=r);var p=l.globals.colors[u],m=null,v=Math.min.apply(Math,K(l.globals.series[s])),b=Math.max.apply(Math,K(l.globals.series[s]));d.distributed||"heatmap"!==i||(v=l.globals.minY,b=l.globals.maxY),void 0!==d.colorScale.min&&(v=d.colorScale.min<l.globals.minY?d.colorScale.min:l.globals.minY,b=d.colorScale.max>l.globals.maxY?d.colorScale.max:l.globals.maxY);var _=Math.abs(b)+Math.abs(v),A=100*h/(0===_?_-1e-6:_);return d.colorScale.ranges.length>0&&d.colorScale.ranges.map(function(E,k){if(h>=E.from&&h<=E.to){p=E.color,m=E.foreColor?E.foreColor:null,v=E.from,b=E.to;var R=Math.abs(b)+Math.abs(v);A=100*h/(0===R?R-1e-6:R)}}),{color:p,foreColor:m,percent:A}}},{key:"calculateDataLabels",value:function(i){var s=i.text,r=i.x,l=i.y,h=i.i,d=i.j,u=i.colorProps,p=i.fontSize,m=this.w.config.dataLabels,v=new U(this.ctx),b=new Xe(this.ctx),_=null;if(m.enabled){_=v.group({class:"apexcharts-data-labels"});var E=m.offsetY,k=r+m.offsetX,R=l+parseFloat(m.style.fontSize)/3+E;b.plotDataLabelsText({x:k,y:R,text:s,i:h,j:d,color:u.foreColor,parent:_,fontSize:p,dataLabelsConfig:m})}return _}},{key:"addListeners",value:function(i){var s=new U(this.ctx);i.node.addEventListener("mouseenter",s.pathMouseEnter.bind(this,i)),i.node.addEventListener("mouseleave",s.pathMouseLeave.bind(this,i)),i.node.addEventListener("mousedown",s.pathMouseDown.bind(this,i))}}]),P}(),vn=function(){function P(i,s){lt(this,P),this.ctx=i,this.w=i.w,this.xRatio=s.xRatio,this.yRatio=s.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new yn(i),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return rt(P,[{key:"draw",value:function(i){var s=this.w,r=new U(this.ctx),l=r.group({class:"apexcharts-heatmap"});l.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")"));var h=s.globals.gridWidth/s.globals.dataPoints,d=s.globals.gridHeight/s.globals.series.length,u=0,p=!1;this.negRange=this.helpers.checkColorRange();var m=i.slice();s.config.yaxis[0].reversed&&(p=!0,m.reverse());for(var v=p?0:m.length-1;p?v<m.length:v>=0;p?v++:v--){var b=r.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:B.escapeString(s.globals.seriesNames[v]),rel:v+1,"data:realIndex":v});if(this.ctx.series.addCollapsedClassToSeries(b,v),s.config.chart.dropShadow.enabled){var _=s.config.chart.dropShadow;new ct(this.ctx).dropShadow(b,_,v)}for(var A=0,E=s.config.plotOptions.heatmap.shadeIntensity,k=0;k<m[v].length;k++){var R=this.helpers.getShadeColor(s.config.chart.type,v,k,this.negRange),O=R.color,N=R.colorProps;"image"===s.config.fill.type&&(O=new se(this.ctx).fillPath({seriesNumber:v,dataPointIndex:k,opacity:s.globals.hasNegs?N.percent<0?1-(1+N.percent/100):E+N.percent/100:N.percent/100,patternID:B.randomId(),width:s.config.fill.image.width?s.config.fill.image.width:h,height:s.config.fill.image.height?s.config.fill.image.height:d}));var x=r.drawRect(A,u,h,d,this.rectRadius);if(x.attr({cx:A,cy:u}),x.node.classList.add("apexcharts-heatmap-rect"),b.add(x),x.attr({fill:O,i:v,index:v,j:k,val:m[v][k],"stroke-width":this.strokeWidth,stroke:s.config.plotOptions.heatmap.useFillColorAsStroke?O:s.globals.stroke.colors[0],color:O}),this.helpers.addListeners(x),s.config.chart.animations.enabled&&!s.globals.dataChanged){var C=1;s.globals.resized||(C=s.config.chart.animations.speed),this.animateHeatMap(x,A,u,h,d,C)}if(s.globals.dataChanged){var T=1;if(this.dynamicAnim.enabled&&s.globals.shouldAnimate){T=this.dynamicAnim.speed;var L=s.globals.previousPaths[v]&&s.globals.previousPaths[v][k]&&s.globals.previousPaths[v][k].color;L||(L="rgba(255, 255, 255, 0)"),this.animateHeatColor(x,B.isColorHex(L)?L:B.rgb2hex(L),B.isColorHex(O)?O:B.rgb2hex(O),T)}}var W=(0,s.config.dataLabels.formatter)(s.globals.series[v][k],{value:s.globals.series[v][k],seriesIndex:v,dataPointIndex:k,w:s}),J=this.helpers.calculateDataLabels({text:W,x:A+h/2,y:u+d/2,i:v,j:k,colorProps:N,series:m});null!==J&&b.add(J),A+=h}u+=d,l.add(b)}var H=s.globals.yAxisScale[0].result.slice();return s.config.yaxis[0].reversed?H.unshift(""):H.push(""),s.globals.yAxisScale[0].result=H,s.config.yaxis[0].labels.offsetY=-s.globals.gridHeight/s.globals.series.length/2,l}},{key:"animateHeatMap",value:function(i,s,r,l,h,d){var u=new ft(this.ctx);u.animateRect(i,{x:s+l/2,y:r+h/2,width:0,height:0},{x:s,y:r,width:l,height:h},d,function(){u.animationCompleted(i)})}},{key:"animateHeatColor",value:function(i,s,r,l){i.attr({fill:s}).animate(l).attr({fill:r})}}]),P}(),Fs=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"drawYAxisTexts",value:function(i,s,r,l){var h=this.w,d=h.config.yaxis[0],u=h.globals.yLabelFormatters[0];return new U(this.ctx).drawText({x:i+d.labels.offsetX,y:s+d.labels.offsetY,text:u(l,r),textAnchor:"middle",fontSize:d.labels.style.fontSize,fontFamily:d.labels.style.fontFamily,foreColor:Array.isArray(d.labels.style.colors)?d.labels.style.colors[r]:d.labels.style.colors})}}]),P}(),bn=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w;var s=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==s.globals.stroke.colors?s.globals.stroke.colors:s.globals.colors,this.defaultSize=Math.min(s.globals.gridWidth,s.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=s.globals.gridWidth/2,this.fullAngle="radialBar"===s.config.chart.type?360:Math.abs(s.config.plotOptions.pie.endAngle-s.config.plotOptions.pie.startAngle),this.initialAngle=s.config.plotOptions.pie.startAngle%this.fullAngle,s.globals.radialSize=this.defaultSize/2.05-s.config.stroke.width-(s.config.chart.sparkline.enabled?0:s.config.chart.dropShadow.blur),this.donutSize=s.globals.radialSize*parseInt(s.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return rt(P,[{key:"draw",value:function(i){var s=this,r=this.w,l=new U(this.ctx);if(this.ret=l.group({class:"apexcharts-pie"}),r.globals.noData)return this.ret;for(var h=0,d=0;d<i.length;d++)h+=B.negToZero(i[d]);var u=[],p=l.group();0===h&&(h=1e-5),i.forEach(function(L){s.maxY=Math.max(s.maxY,L)}),r.config.yaxis[0].max&&(this.maxY=r.config.yaxis[0].max),"back"===r.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var m=0;m<i.length;m++){var v=this.fullAngle*B.negToZero(i[m])/h;u.push(v),"polarArea"===this.chartType?(u[m]=this.fullAngle/i.length,this.sliceSizes.push(r.globals.radialSize*i[m]/this.maxY)):this.sliceSizes.push(r.globals.radialSize)}if(r.globals.dataChanged){for(var b,_=0,A=0;A<r.globals.previousPaths.length;A++)_+=B.negToZero(r.globals.previousPaths[A]);for(var E=0;E<r.globals.previousPaths.length;E++)b=this.fullAngle*B.negToZero(r.globals.previousPaths[E])/_,this.prevSectorAngleArr.push(b)}this.donutSize<0&&(this.donutSize=0);var k=r.config.plotOptions.pie.customScale,N=r.globals.gridWidth/2-r.globals.gridWidth/2*k,z=r.globals.gridHeight/2-r.globals.gridHeight/2*k;if("donut"===this.chartType){var x=l.drawCircle(this.donutSize);x.attr({cx:this.centerX,cy:this.centerY,fill:r.config.plotOptions.pie.donut.background?r.config.plotOptions.pie.donut.background:"transparent"}),p.add(x)}var C=this.drawArcs(u,i);if(this.sliceLabels.forEach(function(L){C.add(L)}),p.attr({transform:"translate(".concat(N,", ").concat(z,") scale(").concat(k,")")}),p.add(C),this.ret.add(p),this.donutDataLabels.show){var T=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:N,translateY:z});this.ret.add(T)}return"front"===r.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(i,s){var r=this.w,l=new ct(this.ctx),h=new U(this.ctx),d=new se(this.ctx),u=h.group({class:"apexcharts-slices"}),p=this.initialAngle,m=this.initialAngle,v=this.initialAngle,b=this.initialAngle;this.strokeWidth=r.config.stroke.show?r.config.stroke.width:0;for(var _=0;_<i.length;_++){var A=h.group({class:"apexcharts-series apexcharts-pie-series",seriesName:B.escapeString(r.globals.seriesNames[_]),rel:_+1,"data:realIndex":_});u.add(A),v=(p=v)+i[_],b=(m=b)+this.prevSectorAngleArr[_];var E=v<p?this.fullAngle+v-p:v-p,k=d.fillPath({seriesNumber:_,size:this.sliceSizes[_],value:s[_]}),R=this.getChangedPath(m,b),O=h.drawPath({d:R,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[_]:this.lineColorArr,strokeWidth:0,fill:k,fillOpacity:r.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(_)});O.attr({index:0,j:_}),l.setSelectionFilter(O,0,_),r.config.chart.dropShadow.enabled&&l.dropShadow(O,r.config.chart.dropShadow,_),this.addListeners(O,this.donutDataLabels),U.setAttrs(O.node,{"data:angle":E,"data:startAngle":p,"data:strokeWidth":this.strokeWidth,"data:value":s[_]});var z={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?z=B.polarToCartesian(this.centerX,this.centerY,r.globals.radialSize/1.25+r.config.plotOptions.pie.dataLabels.offset,(p+E/2)%this.fullAngle):"donut"===this.chartType&&(z=B.polarToCartesian(this.centerX,this.centerY,(r.globals.radialSize+this.donutSize)/2+r.config.plotOptions.pie.dataLabels.offset,(p+E/2)%this.fullAngle)),A.add(O);var x=0;if(!this.initialAnim||r.globals.resized||r.globals.dataChanged?this.animBeginArr.push(0):(0==(x=E/this.fullAngle*r.config.chart.animations.speed)&&(x=1),this.animDur=x+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(O,this.dynamicAnim&&r.globals.dataChanged?{size:this.sliceSizes[_],endAngle:v,startAngle:p,prevStartAngle:m,prevEndAngle:b,animateStartingPos:!0,i:_,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:r.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[_],endAngle:v,startAngle:p,i:_,totalItems:i.length-1,animBeginArr:this.animBeginArr,dur:x}),r.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&O.click(this.pieClicked.bind(this,_)),void 0!==r.globals.selectedDataPoints[0]&&r.globals.selectedDataPoints[0].indexOf(_)>-1&&this.pieClicked(_),r.config.dataLabels.enabled){var C=z.x,T=z.y,L=100*E/this.fullAngle+"%";if(0!==E&&r.config.plotOptions.pie.dataLabels.minAngleToShowLabel<i[_]){var W=r.config.dataLabels.formatter;void 0!==W&&(L=W(r.globals.seriesPercent[_][0],{seriesIndex:_,w:r}));var J=r.globals.dataLabels.style.colors[_],H=h.group({class:"apexcharts-datalabels"}),et=h.drawText({x:C,y:T,text:L,textAnchor:"middle",fontSize:r.config.dataLabels.style.fontSize,fontFamily:r.config.dataLabels.style.fontFamily,fontWeight:r.config.dataLabels.style.fontWeight,foreColor:J});H.add(et),r.config.dataLabels.dropShadow.enabled&&l.dropShadow(et,r.config.dataLabels.dropShadow),et.node.classList.add("apexcharts-pie-label"),r.config.chart.animations.animate&&!1===r.globals.resized&&(et.node.classList.add("apexcharts-pie-label-delay"),et.node.style.animationDelay=r.config.chart.animations.speed/940+"s"),this.sliceLabels.push(H)}}}return u}},{key:"addListeners",value:function(i,s){var r=new U(this.ctx);i.node.addEventListener("mouseenter",r.pathMouseEnter.bind(this,i)),i.node.addEventListener("mouseleave",r.pathMouseLeave.bind(this,i)),i.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,i.node,s)),i.node.addEventListener("mousedown",r.pathMouseDown.bind(this,i)),this.donutDataLabels.total.showAlways||(i.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,i.node,s)),i.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,i.node,s)))}},{key:"animatePaths",value:function(i,s){var l=s.endAngle<s.startAngle?this.fullAngle+s.endAngle-s.startAngle:s.endAngle-s.startAngle,h=l,d=s.startAngle,u=s.startAngle;void 0!==s.prevStartAngle&&void 0!==s.prevEndAngle&&(d=s.prevEndAngle,h=s.prevEndAngle<s.prevStartAngle?this.fullAngle+s.prevEndAngle-s.prevStartAngle:s.prevEndAngle-s.prevStartAngle),s.i===this.w.config.series.length-1&&(l+u>this.fullAngle?s.endAngle=s.endAngle-(l+u):l+u<this.fullAngle&&(s.endAngle=s.endAngle+(this.fullAngle-(l+u)))),l===this.fullAngle&&(l=this.fullAngle-.01),this.animateArc(i,d,u,l,h,s)}},{key:"animateArc",value:function(i,s,r,l,h,d){var u,p=this,m=this.w,v=new ft(this.ctx),b=d.size;(isNaN(s)||isNaN(h))&&(s=r,h=l,d.dur=0);var _=l,A=r,E=s<r?this.fullAngle+s-r:s-r;m.globals.dataChanged&&d.shouldSetPrevPaths&&d.prevEndAngle&&(u=p.getPiePath({me:p,startAngle:d.prevStartAngle,angle:d.prevEndAngle<d.prevStartAngle?this.fullAngle+d.prevEndAngle-d.prevStartAngle:d.prevEndAngle-d.prevStartAngle,size:b}),i.attr({d:u})),0!==d.dur?i.animate(d.dur,m.globals.easing,d.animBeginArr[d.i]).afterAll(function(){"pie"!==p.chartType&&"donut"!==p.chartType&&"polarArea"!==p.chartType||this.animate(m.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":p.strokeWidth}),d.i===m.config.series.length-1&&v.animationCompleted(i)}).during(function(k){_=E+(l-E)*k,d.animateStartingPos&&(_=h+(l-h)*k,A=s-h+(r-(s-h))*k),u=p.getPiePath({me:p,startAngle:A,angle:_,size:b}),i.node.setAttribute("data:pathOrig",u),i.attr({d:u})}):(u=p.getPiePath({me:p,startAngle:A,angle:l,size:b}),d.isTrack||(m.globals.animationEnded=!0),i.node.setAttribute("data:pathOrig",u),i.attr({d:u,"stroke-width":p.strokeWidth}))}},{key:"pieClicked",value:function(i){var s,r=this.w,l=this,h=l.sliceSizes[i]+(r.config.plotOptions.pie.expandOnClick?4:0),d=r.globals.dom.Paper.select(".apexcharts-".concat(l.chartType.toLowerCase(),"-slice-").concat(i)).members[0];if("true"!==d.attr("data:pieClicked")){var u=r.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(u,function(b){b.setAttribute("data:pieClicked","false");var _=b.getAttribute("data:pathOrig");b.setAttribute("d",_)}),d.attr("data:pieClicked","true");var p=parseInt(d.attr("data:startAngle"),10),m=parseInt(d.attr("data:angle"),10);s=l.getPiePath({me:l,startAngle:p,angle:m,size:h}),360!==m&&d.plot(s)}else{d.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(d.node,this.donutDataLabels);var v=d.attr("data:pathOrig");d.attr({d:v})}}},{key:"getChangedPath",value:function(i,s){var r="";return this.dynamicAnim&&this.w.globals.dataChanged&&(r=this.getPiePath({me:this,startAngle:i,angle:s-i,size:this.size})),r}},{key:"getPiePath",value:function(i){var s=i.me,r=i.startAngle,l=i.angle,h=i.size,d=r,u=Math.PI*(d-90)/180,p=l+r;Math.ceil(p)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(p=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(p)>this.fullAngle&&(p-=this.fullAngle);var m=Math.PI*(p-90)/180,v=s.centerX+h*Math.cos(u),b=s.centerY+h*Math.sin(u),_=s.centerX+h*Math.cos(m),A=s.centerY+h*Math.sin(m),E=B.polarToCartesian(s.centerX,s.centerY,s.donutSize,p),k=B.polarToCartesian(s.centerX,s.centerY,s.donutSize,d),R=l>180?1:0,O=["M",v,b,"A",h,h,0,R,1,_,A];return"donut"===s.chartType?[].concat(O,["L",E.x,E.y,"A",s.donutSize,s.donutSize,0,R,0,k.x,k.y,"L",v,b,"z"]).join(" "):"pie"===s.chartType||"polarArea"===s.chartType?[].concat(O,["L",s.centerX,s.centerY,"L",v,b]).join(" "):[].concat(O).join(" ")}},{key:"drawPolarElements",value:function(i){var s=this.w,r=new Gi(this.ctx),l=new U(this.ctx),h=new Fs(this.ctx),d=l.group(),u=l.group(),p=r.niceScale(0,Math.ceil(this.maxY),s.config.yaxis[0].tickAmount,0,!0),m=p.result.reverse(),v=p.result.length;this.maxY=p.niceMax;for(var b=s.globals.radialSize,_=b/(v-1),A=0;A<v-1;A++){var E=l.drawCircle(b);if(E.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":s.config.plotOptions.polarArea.rings.strokeWidth,stroke:s.config.plotOptions.polarArea.rings.strokeColor}),s.config.yaxis[0].show){var k=h.drawYAxisTexts(this.centerX,this.centerY-b+parseInt(s.config.yaxis[0].labels.style.fontSize,10)/2,A,m[A]);u.add(k)}d.add(E),b-=_}this.drawSpokes(i),i.add(d),i.add(u)}},{key:"renderInnerDataLabels",value:function(i,s){var r=this.w,l=new U(this.ctx),h=l.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(s.translateX?s.translateX:0,", ").concat(s.translateY?s.translateY:0,") scale(").concat(r.config.plotOptions.pie.customScale,")")}),d=i.total.show;h.node.style.opacity=s.opacity;var u,p,m=s.centerX,v=s.centerY;u=void 0===i.name.color?r.globals.colors[0]:i.name.color;var b=i.name.fontSize,_=i.name.fontFamily,A=i.name.fontWeight;p=void 0===i.value.color?r.config.chart.foreColor:i.value.color;var E=i.value.formatter,k="",R="";if(d?(u=i.total.color,b=i.total.fontSize,_=i.total.fontFamily,A=i.total.fontWeight,R=i.total.label,k=i.total.formatter(r)):1===r.globals.series.length&&(k=E(r.globals.series[0],r),R=r.globals.seriesNames[0]),R&&(R=i.name.formatter(R,i.total.show,r)),i.name.show){var O=l.drawText({x:m,y:v+parseFloat(i.name.offsetY),text:R,textAnchor:"middle",foreColor:u,fontSize:b,fontWeight:A,fontFamily:_});O.node.classList.add("apexcharts-datalabel-label"),h.add(O)}if(i.value.show){var N=i.name.show?parseFloat(i.value.offsetY)+16:i.value.offsetY,z=l.drawText({x:m,y:v+N,text:k,textAnchor:"middle",foreColor:p,fontWeight:i.value.fontWeight,fontSize:i.value.fontSize,fontFamily:i.value.fontFamily});z.node.classList.add("apexcharts-datalabel-value"),h.add(z)}return h}},{key:"printInnerLabels",value:function(i,s,r,l){var h,d=this.w;l?h=void 0===i.name.color?d.globals.colors[parseInt(l.parentNode.getAttribute("rel"),10)-1]:i.name.color:d.globals.series.length>1&&i.total.show&&(h=i.total.color);var u=d.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),p=d.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");r=(0,i.value.formatter)(r,d),l||"function"!=typeof i.total.formatter||(r=i.total.formatter(d)),s=i.name.formatter(s,s===i.total.label,d),null!==u&&(u.textContent=s),null!==p&&(p.textContent=r),null!==u&&(u.style.fill=h)}},{key:"printDataLabelsInner",value:function(i,s){var r=this.w,l=i.getAttribute("data:value"),h=r.globals.seriesNames[parseInt(i.parentNode.getAttribute("rel"),10)-1];r.globals.series.length>1&&this.printInnerLabels(s,h,l,i);var d=r.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==d&&(d.style.opacity=1)}},{key:"drawSpokes",value:function(i){var s=this,r=this.w,l=new U(this.ctx),h=r.config.plotOptions.polarArea.spokes;if(0!==h.strokeWidth){for(var d=[],u=360/r.globals.series.length,p=0;p<r.globals.series.length;p++)d.push(B.polarToCartesian(this.centerX,this.centerY,r.globals.radialSize,r.config.plotOptions.pie.startAngle+u*p));d.forEach(function(m,v){var b=l.drawLine(m.x,m.y,s.centerX,s.centerY,Array.isArray(h.connectorColors)?h.connectorColors[v]:h.connectorColors);i.add(b)})}}},{key:"revertDataLabelsInner",value:function(i,s,r){var l=this,h=this.w,d=h.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),u=!1,p=h.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),m=function(_){var A=_.makeSliceOut,E=_.printLabel;Array.prototype.forEach.call(p,function(k){"true"===k.getAttribute("data:pieClicked")&&(A&&(u=!0),E&&l.printDataLabelsInner(k,s))})};if(m({makeSliceOut:!0,printLabel:!1}),s.total.show&&h.globals.series.length>1)u&&!s.total.showAlways?m({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(s,s.total.label,s.total.formatter(h));else if(m({makeSliceOut:!1,printLabel:!0}),!u)if(h.globals.selectedDataPoints.length&&h.globals.series.length>1)if(h.globals.selectedDataPoints[0].length>0){var v=h.globals.selectedDataPoints[0],b=h.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(v));this.printDataLabelsInner(b,s)}else d&&h.globals.selectedDataPoints.length&&0===h.globals.selectedDataPoints[0].length&&(d.style.opacity=0);else d&&h.globals.series.length>1&&(d.style.opacity=0)}}]),P}(),wn=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var s=this.w;this.graphics=new U(this.ctx),this.lineColorArr=void 0!==s.globals.stroke.colors?s.globals.stroke.colors:s.globals.colors,this.defaultSize=s.globals.svgHeight<s.globals.svgWidth?s.globals.gridHeight+1.5*s.globals.goldenPadding:s.globals.gridWidth,this.isLog=s.config.yaxis[0].logarithmic,this.coreUtils=new wt(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(s.globals.maxY,0):s.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):s.globals.minY,this.polygons=s.config.plotOptions.radar.polygons,this.strokeWidth=s.config.stroke.show?s.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-s.config.chart.dropShadow.blur,s.config.xaxis.labels.show&&(this.size=this.size-s.globals.xAxisLabelsWidth/1.75),void 0!==s.config.plotOptions.radar.size&&(this.size=s.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return rt(P,[{key:"draw",value:function(i){var s=this,r=this.w,l=new se(this.ctx),h=[],d=new Xe(this.ctx);i.length&&(this.dataPointsLen=i[r.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var v=r.globals.gridHeight/2+r.config.plotOptions.radar.offsetY,b=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(r.globals.gridWidth/2+r.config.plotOptions.radar.offsetX||0,", ").concat(v||0,")")}),_=[],A=null,E=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),i.forEach(function(R,O){var N=R.length===r.globals.dataPoints,z=s.graphics.group().attr({class:"apexcharts-series","data:longestSeries":N,seriesName:B.escapeString(r.globals.seriesNames[O]),rel:O+1,"data:realIndex":O});s.dataRadiusOfPercent[O]=[],s.dataRadius[O]=[],s.angleArr[O]=[],R.forEach(function(at,pt){var Zt=Math.abs(s.maxValue-s.minValue);at+=Math.abs(s.minValue),s.isLog&&(at=s.coreUtils.getLogVal(at,0)),s.dataRadiusOfPercent[O][pt]=at/Zt,s.dataRadius[O][pt]=s.dataRadiusOfPercent[O][pt]*s.size,s.angleArr[O][pt]=pt*s.disAngle}),_=s.getDataPointsPos(s.dataRadius[O],s.angleArr[O]);var x=s.createPaths(_,{x:0,y:0});A=s.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),E=s.graphics.group({class:"apexcharts-datalabels","data:realIndex":O}),r.globals.delayedElements.push({el:A.node,index:O});var C={i:O,realIndex:O,animationDelay:O,initialSpeed:r.config.chart.animations.speed,dataChangeSpeed:r.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:r.globals.stroke.colors[O],strokeLineCap:r.config.stroke.lineCap},T=null;r.globals.previousPaths.length>0&&(T=s.getPreviousPath(O));for(var L=0;L<x.linePathsTo.length;L++){var W=s.graphics.renderPaths(Mt(Mt({},C),{},{pathFrom:null===T?x.linePathsFrom[L]:T,pathTo:x.linePathsTo[L],strokeWidth:Array.isArray(s.strokeWidth)?s.strokeWidth[O]:s.strokeWidth,fill:"none",drawShadow:!1}));z.add(W);var J=l.fillPath({seriesNumber:O}),H=s.graphics.renderPaths(Mt(Mt({},C),{},{pathFrom:null===T?x.areaPathsFrom[L]:T,pathTo:x.areaPathsTo[L],strokeWidth:0,fill:J,drawShadow:!1}));r.config.chart.dropShadow.enabled&&new ct(s.ctx).dropShadow(H,Object.assign({},r.config.chart.dropShadow,{noUserSpaceOnUse:!0}),O),z.add(H)}R.forEach(function(at,pt){var Zt=new Lt(s.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:O,dataPointIndex:pt}),Xt=s.graphics.drawMarker(_[pt].x,_[pt].y,Zt);Xt.attr("rel",pt),Xt.attr("j",pt),Xt.attr("index",O),Xt.node.setAttribute("default-marker-size",Zt.pSize);var qt=s.graphics.group({class:"apexcharts-series-markers"});qt&&qt.add(Xt),A.add(qt),z.add(A);var ie=r.config.dataLabels;if(ie.enabled){var ge=ie.formatter(r.globals.series[O][pt],{seriesIndex:O,dataPointIndex:pt,w:r});d.plotDataLabelsText({x:_[pt].x,y:_[pt].y,text:ge,textAnchor:"middle",i:O,j:O,parent:E,offsetCorrection:!1,dataLabelsConfig:Mt({},ie)})}z.add(E)}),h.push(z)}),this.drawPolygons({parent:b}),r.config.xaxis.labels.show){var k=this.drawXAxisTexts();b.add(k)}return h.forEach(function(R){b.add(R)}),b.add(this.yaxisLabels),b}},{key:"drawPolygons",value:function(i){for(var s=this,r=this.w,l=i.parent,h=new Fs(this.ctx),d=r.globals.yAxisScale[0].result.reverse(),u=d.length,p=[],m=this.size/(u-1),v=0;v<u;v++)p[v]=m*v;p.reverse();var b=[],_=[];p.forEach(function(A,E){var k=B.getPolygonPos(A,s.dataPointsLen),R="";k.forEach(function(O,N){if(0===E){var z=s.graphics.drawLine(O.x,O.y,0,0,Array.isArray(s.polygons.connectorColors)?s.polygons.connectorColors[N]:s.polygons.connectorColors);_.push(z)}0===N&&s.yaxisLabelsTextsPos.push({x:O.x,y:O.y}),R+=O.x+","+O.y+" "}),b.push(R)}),b.forEach(function(A,E){var k=s.polygons.strokeColors,R=s.polygons.strokeWidth,O=s.graphics.drawPolygon(A,Array.isArray(k)?k[E]:k,Array.isArray(R)?R[E]:R,r.globals.radarPolygons.fill.colors[E]);l.add(O)}),_.forEach(function(A){l.add(A)}),r.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(A,E){var k=h.drawYAxisTexts(A.x,A.y,E,d[E]);s.yaxisLabels.add(k)})}},{key:"drawXAxisTexts",value:function(){var i=this,s=this.w,r=s.config.xaxis.labels,l=this.graphics.group({class:"apexcharts-xaxis"}),h=B.getPolygonPos(this.size,this.dataPointsLen);return s.globals.labels.forEach(function(d,u){var p=s.config.xaxis.labels.formatter,m=new Xe(i.ctx);if(h[u]){var v=i.getTextPos(h[u],i.size),b=p(d,{seriesIndex:-1,dataPointIndex:u,w:s});m.plotDataLabelsText({x:v.newX,y:v.newY,text:b,textAnchor:v.textAnchor,i:u,j:u,parent:l,color:Array.isArray(r.style.colors)&&r.style.colors[u]?r.style.colors[u]:"#a8a8a8",dataLabelsConfig:Mt({textAnchor:v.textAnchor,dropShadow:{enabled:!1}},r),offsetCorrection:!1})}}),l}},{key:"createPaths",value:function(i,s){var r=this,l=[],h=[],d=[],u=[];if(i.length){h=[this.graphics.move(s.x,s.y)],u=[this.graphics.move(s.x,s.y)];var p=this.graphics.move(i[0].x,i[0].y),m=this.graphics.move(i[0].x,i[0].y);i.forEach(function(v,b){p+=r.graphics.line(v.x,v.y),m+=r.graphics.line(v.x,v.y),b===i.length-1&&(p+="Z",m+="Z")}),l.push(p),d.push(m)}return{linePathsFrom:h,linePathsTo:l,areaPathsFrom:u,areaPathsTo:d}}},{key:"getTextPos",value:function(i,s){var r="middle",l=i.x,h=i.y;return Math.abs(i.x)>=10?i.x>0?(r="start",l+=10):i.x<0&&(r="end",l-=10):r="middle",Math.abs(i.y)>=s-10&&(i.y<0?h-=10:i.y>0&&(h+=10)),{textAnchor:r,newX:l,newY:h}}},{key:"getPreviousPath",value:function(i){for(var s=this.w,r=null,l=0;l<s.globals.previousPaths.length;l++){var h=s.globals.previousPaths[l];h.paths.length>0&&parseInt(h.realIndex,10)===parseInt(i,10)&&void 0!==s.globals.previousPaths[l].paths[0]&&(r=s.globals.previousPaths[l].paths[0].d)}return r}},{key:"getDataPointsPos",value:function(i,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;i=i||[],s=s||[];for(var l=[],h=0;h<r;h++){var d={};d.x=i[h]*Math.sin(s[h]),d.y=-i[h]*Math.cos(s[h]),l.push(d)}return l}}]),P}(),xa=function(P){ze(s,bn);var i=Re(s);function s(r){var l;lt(this,s),(l=i.call(this,r)).ctx=r,l.w=r.w,l.animBeginArr=[0],l.animDur=0;var h=l.w;return l.startAngle=h.config.plotOptions.radialBar.startAngle,l.endAngle=h.config.plotOptions.radialBar.endAngle,l.totalAngle=Math.abs(h.config.plotOptions.radialBar.endAngle-h.config.plotOptions.radialBar.startAngle),l.trackStartAngle=h.config.plotOptions.radialBar.track.startAngle,l.trackEndAngle=h.config.plotOptions.radialBar.track.endAngle,l.donutDataLabels=l.w.config.plotOptions.radialBar.dataLabels,l.radialDataLabels=l.donutDataLabels,l.trackStartAngle||(l.trackStartAngle=l.startAngle),l.trackEndAngle||(l.trackEndAngle=l.endAngle),360===l.endAngle&&(l.endAngle=359.99),l.margin=parseInt(h.config.plotOptions.radialBar.track.margin,10),l}return rt(s,[{key:"draw",value:function(r){var l=this.w,h=new U(this.ctx),d=h.group({class:"apexcharts-radialbar"});if(l.globals.noData)return d;var u=h.group(),p=this.defaultSize/2,m=l.globals.gridWidth/2,v=this.defaultSize/2.05;l.config.chart.sparkline.enabled||(v=v-l.config.stroke.width-l.config.chart.dropShadow.blur);var b=l.globals.fill.colors;if(l.config.plotOptions.radialBar.track.show){var _=this.drawTracks({size:v,centerX:m,centerY:p,colorArr:b,series:r});u.add(_)}var A=this.drawArcs({size:v,centerX:m,centerY:p,colorArr:b,series:r}),E=360;l.config.plotOptions.radialBar.startAngle<0&&(E=this.totalAngle);var k=(360-E)/360;if(l.globals.radialSize=v-v*k,this.radialDataLabels.value.show){var R=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);l.globals.radialSize+=R*k}return u.add(A.g),"front"===l.config.plotOptions.radialBar.hollow.position&&(A.g.add(A.elHollow),A.dataLabels&&A.g.add(A.dataLabels)),d.add(u),d}},{key:"drawTracks",value:function(r){var l=this.w,h=new U(this.ctx),d=h.group({class:"apexcharts-tracks"}),u=new ct(this.ctx),p=new se(this.ctx),m=this.getStrokeWidth(r);r.size=r.size-m/2;for(var v=0;v<r.series.length;v++){var b=h.group({class:"apexcharts-radialbar-track apexcharts-track"});d.add(b),b.attr({rel:v+1}),r.size=r.size-m-this.margin;var _=l.config.plotOptions.radialBar.track,A=p.fillPath({seriesNumber:0,size:r.size,fillColors:Array.isArray(_.background)?_.background[v]:_.background,solid:!0}),E=this.trackStartAngle,k=this.trackEndAngle;Math.abs(k)+Math.abs(E)>=360&&(k=360-Math.abs(this.startAngle)-.1);var R=h.drawPath({d:"",stroke:A,strokeWidth:m*parseInt(_.strokeWidth,10)/100,fill:"none",strokeOpacity:_.opacity,classes:"apexcharts-radialbar-area"});_.dropShadow.enabled&&u.dropShadow(R,_.dropShadow),b.add(R),R.attr("id","apexcharts-radialbarTrack-"+v),this.animatePaths(R,{centerX:r.centerX,centerY:r.centerY,endAngle:k,startAngle:E,size:r.size,i:v,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:l.globals.easing})}return d}},{key:"drawArcs",value:function(r){var l=this.w,h=new U(this.ctx),d=new se(this.ctx),u=new ct(this.ctx),p=h.group(),m=this.getStrokeWidth(r);r.size=r.size-m/2;var v=l.config.plotOptions.radialBar.hollow.background,b=r.size-m*r.series.length-this.margin*r.series.length-m*parseInt(l.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,_=b-l.config.plotOptions.radialBar.hollow.margin;void 0!==l.config.plotOptions.radialBar.hollow.image&&(v=this.drawHollowImage(r,p,b,v));var A=this.drawHollow({size:_,centerX:r.centerX,centerY:r.centerY,fill:v||"transparent"});l.config.plotOptions.radialBar.hollow.dropShadow.enabled&&u.dropShadow(A,l.config.plotOptions.radialBar.hollow.dropShadow);var k=1;!this.radialDataLabels.total.show&&l.globals.series.length>1&&(k=0);var R=null;this.radialDataLabels.show&&(R=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:b,centerX:r.centerX,centerY:r.centerY,opacity:k})),"back"===l.config.plotOptions.radialBar.hollow.position&&(p.add(A),R&&p.add(R));var O=!1;l.config.plotOptions.radialBar.inverseOrder&&(O=!0);for(var N=O?r.series.length-1:0;O?N>=0:N<r.series.length;O?N--:N++){var z=h.group({class:"apexcharts-series apexcharts-radial-series",seriesName:B.escapeString(l.globals.seriesNames[N])});p.add(z),z.attr({rel:N+1,"data:realIndex":N}),this.ctx.series.addCollapsedClassToSeries(z,N),r.size=r.size-m-this.margin;var x=d.fillPath({seriesNumber:N,size:r.size,value:r.series[N]}),C=this.startAngle,T=void 0,L=B.negToZero(r.series[N]>100?100:r.series[N])/100,W=Math.round(this.totalAngle*L)+this.startAngle,J=void 0;l.globals.dataChanged&&(T=this.startAngle,J=Math.round(this.totalAngle*B.negToZero(l.globals.previousPaths[N])/100)+T),Math.abs(W)+Math.abs(C)>=360&&(W-=.01),Math.abs(J)+Math.abs(T)>=360&&(J-=.01);var H=W-C,et=Array.isArray(l.config.stroke.dashArray)?l.config.stroke.dashArray[N]:l.config.stroke.dashArray,tt=h.drawPath({d:"",stroke:x,strokeWidth:m,fill:"none",fillOpacity:l.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+N,strokeDashArray:et});U.setAttrs(tt.node,{"data:angle":H,"data:value":r.series[N]}),l.config.chart.dropShadow.enabled&&u.dropShadow(tt,l.config.chart.dropShadow,N),u.setSelectionFilter(tt,0,N),this.addListeners(tt,this.radialDataLabels),z.add(tt),tt.attr({index:0,j:N});var pt=0;!this.initialAnim||l.globals.resized||l.globals.dataChanged||(pt=l.config.chart.animations.speed),l.globals.dataChanged&&(pt=l.config.chart.animations.dynamicAnimation.speed),this.animDur=pt/(1.2*r.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(tt,{centerX:r.centerX,centerY:r.centerY,endAngle:W,startAngle:C,prevEndAngle:J,prevStartAngle:T,size:r.size,i:N,totalItems:2,animBeginArr:this.animBeginArr,dur:pt,shouldSetPrevPaths:!0,easing:l.globals.easing})}return{g:p,elHollow:A,dataLabels:R}}},{key:"drawHollow",value:function(r){var l=new U(this.ctx).drawCircle(2*r.size);return l.attr({class:"apexcharts-radialbar-hollow",cx:r.centerX,cy:r.centerY,r:r.size,fill:r.fill}),l}},{key:"drawHollowImage",value:function(r,l,h,d){var u=this.w,p=new se(this.ctx),m=B.randomId(),v=u.config.plotOptions.radialBar.hollow.image;if(u.config.plotOptions.radialBar.hollow.imageClipped)p.clippedImgArea({width:h,height:h,image:v,patternID:"pattern".concat(u.globals.cuid).concat(m)}),d="url(#pattern".concat(u.globals.cuid).concat(m,")");else{var b=u.config.plotOptions.radialBar.hollow.imageWidth,_=u.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===b&&void 0===_){var A=u.globals.dom.Paper.image(v).loaded(function(k){this.move(r.centerX-k.width/2+u.config.plotOptions.radialBar.hollow.imageOffsetX,r.centerY-k.height/2+u.config.plotOptions.radialBar.hollow.imageOffsetY)});l.add(A)}else{var E=u.globals.dom.Paper.image(v).loaded(function(k){this.move(r.centerX-b/2+u.config.plotOptions.radialBar.hollow.imageOffsetX,r.centerY-_/2+u.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(b,_)});l.add(E)}}return d}},{key:"getStrokeWidth",value:function(r){return r.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(r.series.length+1)-this.margin}}]),s}(),Ye=function(){function P(i){lt(this,P),this.w=i.w,this.lineCtx=i}return rt(P,[{key:"sameValueSeriesFix",value:function(i,s){var r=this.w;if("line"===r.config.chart.type&&("gradient"===r.config.fill.type||"gradient"===r.config.fill.type[i])&&new wt(this.lineCtx.ctx,r).seriesHaveSameValues(i)){var l=s[i].slice();l[l.length-1]=l[l.length-1]+1e-6,s[i]=l}return s}},{key:"calculatePoints",value:function(i){var s=i.series,l=i.x,h=i.y,d=i.i,u=i.j,p=i.prevY,m=this.w,v=[],b=[];if(0===u){var _=this.lineCtx.categoryAxisCorrection+m.config.markers.offsetX;m.globals.isXNumeric&&(_=(m.globals.seriesX[i.realIndex][0]-m.globals.minX)/this.lineCtx.xRatio+m.config.markers.offsetX),v.push(_),b.push(B.isNumber(s[d][0])?p+m.config.markers.offsetY:null),v.push(l+m.config.markers.offsetX),b.push(B.isNumber(s[d][u+1])?h+m.config.markers.offsetY:null)}else v.push(l+m.config.markers.offsetX),b.push(B.isNumber(s[d][u+1])?h+m.config.markers.offsetY:null);return{x:v,y:b}}},{key:"checkPreviousPaths",value:function(i){for(var s=i.pathFromLine,r=i.pathFromArea,l=i.realIndex,h=this.w,d=0;d<h.globals.previousPaths.length;d++){var u=h.globals.previousPaths[d];("line"===u.type||"area"===u.type)&&u.paths.length>0&&parseInt(u.realIndex,10)===parseInt(l,10)&&("line"===u.type?(this.lineCtx.appendPathFrom=!1,s=h.globals.previousPaths[d].paths[0].d):"area"===u.type&&(this.lineCtx.appendPathFrom=!1,r=h.globals.previousPaths[d].paths[0].d,h.config.stroke.show&&h.globals.previousPaths[d].paths[1]&&(s=h.globals.previousPaths[d].paths[1].d)))}return{pathFromLine:s,pathFromArea:r}}},{key:"determineFirstPrevY",value:function(i){var s=i.i,r=i.series,l=i.prevY,h=i.lineYPosition,d=this.w;if(void 0!==r[s][0])l=(h=d.config.chart.stacked&&s>0?this.lineCtx.prevSeriesY[s-1][0]:this.lineCtx.zeroY)-r[s][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?r[s][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(d.config.chart.stacked&&s>0&&void 0===r[s][0])for(var u=s-1;u>=0;u--)if(null!=r[u][0]){l=h=this.lineCtx.prevSeriesY[u][0];break}return{prevY:l,lineYPosition:h}}}]),P}(),_n=function(){function P(i,s,r){lt(this,P),this.ctx=i,this.w=i.w,this.xyRatios=s,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||r,this.scatter=new _i(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Ye(this),this.markers=new Lt(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return rt(P,[{key:"draw",value:function(i,s,r){var l=this.w,h=new U(this.ctx),d=l.globals.comboCharts?s:l.config.chart.type,u=h.group({class:"apexcharts-".concat(d,"-series apexcharts-plot-series")}),p=new wt(this.ctx,l);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,i=p.getLogSeries(i),this.yRatio=p.getLogYRatios(this.yRatio);for(var m=[],v=0;v<i.length;v++){i=this.lineHelpers.sameValueSeriesFix(v,i);var b=l.globals.comboCharts?r[v]:v;this._initSerieVariables(i,v,b);var _=[],A=[],E=l.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,b),l.globals.isXNumeric&&l.globals.seriesX.length>0&&(E=(l.globals.seriesX[b][0]-l.globals.minX)/this.xRatio),A.push(E);var k,R=E,O=R,N=this.zeroY;N=this.lineHelpers.determineFirstPrevY({i:v,series:i,prevY:N,lineYPosition:0}).prevY,_.push(N),k=N;var z=this._calculatePathsFrom({series:i,i:v,realIndex:b,prevX:O,prevY:N}),x=this._iterateOverDataPoints({series:i,realIndex:b,i:v,x:E,y:1,pX:R,pY:k,pathsFrom:z,linePaths:[],areaPaths:[],seriesIndex:r,lineYPosition:0,xArrj:A,yArrj:_});this._handlePaths({type:d,realIndex:b,i:v,paths:x}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),m.push(this.elSeries)}if(l.config.chart.stacked)for(var C=m.length;C>0;C--)u.add(m[C-1]);else for(var T=0;T<m.length;T++)u.add(m[T]);return u}},{key:"_initSerieVariables",value:function(i,s,r){var l=this.w,h=new U(this.ctx);this.xDivision=l.globals.gridWidth/(l.globals.dataPoints-("on"===l.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(l.config.stroke.width)?l.config.stroke.width[r]:l.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=r),this.isReversed=l.config.yaxis[this.yaxisIndex]&&l.config.yaxis[this.yaxisIndex].reversed,this.zeroY=l.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?l.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>l.globals.gridHeight||"end"===l.config.plotOptions.area.fillTo)&&(this.areaBottomY=l.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=h.group({class:"apexcharts-series",seriesName:B.escapeString(l.globals.seriesNames[r])}),this.elPointsMain=h.group({class:"apexcharts-series-markers-wrap","data:realIndex":r}),this.elDataLabelsWrap=h.group({class:"apexcharts-datalabels","data:realIndex":r}),this.elSeries.attr({"data:longestSeries":i[s].length===l.globals.dataPoints,rel:s+1,"data:realIndex":r}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(i){var s,r,l,h,d=i.series,u=i.i,p=i.realIndex,m=i.prevX,v=i.prevY,b=this.w,_=new U(this.ctx);if(null===d[u][0]){for(var A=0;A<d[u].length;A++)if(null!==d[u][A]){s=_.move(m=this.xDivision*A,v=this.zeroY-d[u][A]/this.yRatio[this.yaxisIndex]),r=_.move(m,this.areaBottomY);break}}else s=_.move(m,v),r=_.move(m,this.areaBottomY)+_.line(m,v);if(l=_.move(-1,this.zeroY)+_.line(-1,this.zeroY),h=_.move(-1,this.zeroY)+_.line(-1,this.zeroY),b.globals.previousPaths.length>0){var E=this.lineHelpers.checkPreviousPaths({pathFromLine:l,pathFromArea:h,realIndex:p});l=E.pathFromLine,h=E.pathFromArea}return{prevX:m,prevY:v,linePath:s,areaPath:r,pathFromLine:l,pathFromArea:h}}},{key:"_handlePaths",value:function(i){var s=i.type,r=i.realIndex,l=i.i,h=i.paths,d=this.w,u=new U(this.ctx),p=new se(this.ctx);this.prevSeriesY.push(h.yArrj),d.globals.seriesXvalues[r]=h.xArrj,d.globals.seriesYvalues[r]=h.yArrj;var m=d.config.forecastDataPoints;if(m.count>0){var v=d.globals.seriesXvalues[r][d.globals.seriesXvalues[r].length-m.count-1],b=u.drawRect(v,0,d.globals.gridWidth,d.globals.gridHeight,0);d.globals.dom.elForecastMask.appendChild(b.node);var _=u.drawRect(0,0,v,d.globals.gridHeight,0);d.globals.dom.elNonForecastMask.appendChild(_.node)}this.pointsChart||d.globals.delayedElements.push({el:this.elPointsMain.node,index:r});var A={i:l,realIndex:r,animationDelay:l,initialSpeed:d.config.chart.animations.speed,dataChangeSpeed:d.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(s)};if("area"===s)for(var E=p.fillPath({seriesNumber:r}),k=0;k<h.areaPaths.length;k++){var R=u.renderPaths(Mt(Mt({},A),{},{pathFrom:h.pathFromArea,pathTo:h.areaPaths[k],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:E}));this.elSeries.add(R)}if(d.config.stroke.show&&!this.pointsChart){var O=null;if("line"===s)O=p.fillPath({seriesNumber:r,i:l});else if("solid"===d.config.stroke.fill.type)O=d.globals.stroke.colors[r];else{var N=d.config.fill;d.config.fill=d.config.stroke.fill,O=p.fillPath({seriesNumber:r,i:l}),d.config.fill=N}for(var z=0;z<h.linePaths.length;z++){var x=Mt(Mt({},A),{},{pathFrom:h.pathFromLine,pathTo:h.linePaths[z],stroke:O,strokeWidth:this.strokeWidth,strokeLineCap:d.config.stroke.lineCap,fill:"none"}),C=u.renderPaths(x);if(this.elSeries.add(C),m.count>0){var T=u.renderPaths(x);T.node.setAttribute("stroke-dasharray",m.dashArray),m.strokeWidth&&T.node.setAttribute("stroke-width",m.strokeWidth),this.elSeries.add(T),T.attr("clip-path","url(#forecastMask".concat(d.globals.cuid,")")),C.attr("clip-path","url(#nonForecastMask".concat(d.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(i){for(var s=i.series,r=i.realIndex,l=i.i,h=i.x,d=i.y,u=i.pX,p=i.pY,m=i.pathsFrom,v=i.linePaths,b=i.areaPaths,_=i.seriesIndex,A=i.lineYPosition,E=i.xArrj,k=i.yArrj,R=this.w,O=new U(this.ctx),N=this.yRatio,z=m.prevY,x=m.linePath,C=m.areaPath,T=m.pathFromLine,L=m.pathFromArea,W=B.isNumber(R.globals.minYArr[r])?R.globals.minYArr[r]:R.globals.minY,J=R.globals.dataPoints>1?R.globals.dataPoints-1:R.globals.dataPoints,H=0;H<J;H++){var et=null==s[l][H+1];if(R.globals.isXNumeric){var tt=R.globals.seriesX[r][H+1];void 0===R.globals.seriesX[r][H+1]&&(tt=R.globals.seriesX[r][J-1]),h=(tt-R.globals.minX)/this.xRatio}else h+=this.xDivision;A=R.config.chart.stacked&&l>0&&R.globals.collapsedSeries.length<R.config.series.length-1?this.prevSeriesY[function(Zt){for(var Xt=Zt,qt=0;qt<R.globals.series.length;qt++)if(R.globals.collapsedSeriesIndices.indexOf(Zt)>-1){Xt--;break}return Xt>=0?Xt:0}(l-1)][H+1]:this.zeroY,d=et?A-W/N[this.yaxisIndex]+2*(this.isReversed?W/N[this.yaxisIndex]:0):A-s[l][H+1]/N[this.yaxisIndex]+2*(this.isReversed?s[l][H+1]/N[this.yaxisIndex]:0),E.push(h),k.push(d);var at=this.lineHelpers.calculatePoints({series:s,x:h,y:d,realIndex:r,i:l,j:H,prevY:z}),pt=this._createPaths({series:s,i:l,realIndex:r,j:H,x:h,y:d,pX:u,pY:p,linePath:x,areaPath:C,linePaths:v,areaPaths:b,seriesIndex:_});b=pt.areaPaths,v=pt.linePaths,u=pt.pX,p=pt.pY,C=pt.areaPath,x=pt.linePath,this.appendPathFrom&&(T+=O.line(h,this.zeroY),L+=O.line(h,this.zeroY)),this.handleNullDataPoints(s,at,l,H,r),this._handleMarkersAndLabels({pointsPos:at,series:s,x:h,y:d,prevY:z,i:l,j:H,realIndex:r})}return{yArrj:k,xArrj:E,pathFromArea:L,areaPaths:b,pathFromLine:T,linePaths:v}}},{key:"_handleMarkersAndLabels",value:function(i){var s=i.pointsPos,r=i.i,l=i.j,h=i.realIndex,d=this.w,u=new Xe(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,l,{realIndex:h,pointsPos:s,zRatio:this.zRatio,elParent:this.elPointsMain});else{d.globals.series[r].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var p=this.markers.plotChartMarkers(s,h,l+1);null!==p&&this.elPointsMain.add(p)}var m=u.drawDataLabel(s,h,l+1,null);null!==m&&this.elDataLabelsWrap.add(m)}},{key:"_createPaths",value:function(i){var s=i.series,r=i.i,l=i.realIndex,h=i.j,d=i.x,u=i.y,p=i.pX,m=i.pY,v=i.linePath,b=i.areaPath,_=i.linePaths,A=i.areaPaths,E=i.seriesIndex,k=this.w,R=new U(this.ctx),O=k.config.stroke.curve,N=this.areaBottomY;if(Array.isArray(k.config.stroke.curve)&&(O=Array.isArray(E)?k.config.stroke.curve[E[r]]:k.config.stroke.curve[r]),"smooth"===O){var z=.35*(d-p);k.globals.hasNullValues?(null!==s[r][h]&&(null!==s[r][h+1]?(v=R.move(p,m)+R.curve(p+z,m,d-z,u,d+1,u),b=R.move(p+1,m)+R.curve(p+z,m,d-z,u,d+1,u)+R.line(d,N)+R.line(p,N)+"z"):(v=R.move(p,m),b=R.move(p,m)+"z")),_.push(v),A.push(b)):(v+=R.curve(p+z,m,d-z,u,d,u),b+=R.curve(p+z,m,d-z,u,d,u)),p=d,m=u,h===s[r].length-2&&(b=b+R.curve(p,m,d,u,d,N)+R.move(d,u)+"z",k.globals.hasNullValues||(_.push(v),A.push(b)))}else null===s[r][h+1]&&(v+=R.move(d,u),b=b+R.line(k.globals.isXNumeric?(k.globals.seriesX[l][h]-k.globals.minX)/this.xRatio:d-this.xDivision,N)+R.move(d,u)+"z"),null===s[r][h]&&(v+=R.move(d,u),b+=R.move(d,N)),"stepline"===O?(v=v+R.line(d,null,"H")+R.line(null,u,"V"),b=b+R.line(d,null,"H")+R.line(null,u,"V")):"straight"===O&&(v+=R.line(d,u),b+=R.line(d,u)),h===s[r].length-2&&(b=b+R.line(d,N)+R.move(d,u)+"z",_.push(v),A.push(b));return{linePaths:_,areaPaths:A,pX:p,pY:m,linePath:v,areaPath:b}}},{key:"handleNullDataPoints",value:function(i,s,r,l,h){var d=this.w;if(null===i[r][l]&&d.config.markers.showNullDataPoints||1===i[r].length){var u=this.markers.plotChartMarkers(s,h,l+1,this.strokeWidth-d.config.markers.strokeWidth/2,!0);null!==u&&this.elPointsMain.add(u)}}}]),P}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function P(u,p,m,v){this.xoffset=u,this.yoffset=p,this.height=v,this.width=m,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(b){var _,A=[],E=this.xoffset,k=this.yoffset,R=h(b)/this.height,O=h(b)/this.width;if(this.width>=this.height)for(_=0;_<b.length;_++)A.push([E,k,E+R,k+b[_]/R]),k+=b[_]/R;else for(_=0;_<b.length;_++)A.push([E,k,E+b[_]/O,k+O]),E+=b[_]/O;return A},this.cutArea=function(b){var _;if(this.width>=this.height){var A=b/this.height;_=new P(this.xoffset+A,this.yoffset,this.width-A,this.height)}else{var k=b/this.width;_=new P(this.xoffset,this.yoffset+k,this.width,this.height-k)}return _}}function i(u,p,m,v,b){return v=void 0===v?0:v,b=void 0===b?0:b,function(_){var A,E,k=[];for(A=0;A<_.length;A++)for(E=0;E<_[A].length;E++)k.push(_[A][E]);return k}(s(function(_,A){var E,k=[],R=A/h(_);for(E=0;E<_.length;E++)k[E]=_[E]*R;return k}(u,p*m),[],new P(v,b,p,m),[]))}function s(u,p,m,v){var b,_,A,E,k,R,O;if(0!==u.length)return b=m.shortestEdge(),k=_=u[0],R=b,0===(E=p).length||((O=E.slice()).push(k),r(E,R)>=r(O,R))?(p.push(_),s(u.slice(1),p,m,v)):(A=m.cutArea(h(p),v),v.push(m.getCoordinates(p)),s(u,[],A,v)),v;v.push(m.getCoordinates(p))}function r(u,p){var m=Math.min.apply(Math,u),v=Math.max.apply(Math,u),b=h(u);return Math.max(Math.pow(p,2)*v/Math.pow(b,2),Math.pow(b,2)/(Math.pow(p,2)*m))}function l(u){return u&&u.constructor===Array}function h(u){var p,m=0;for(p=0;p<u.length;p++)m+=u[p];return m}function d(u){var p,m=0;if(l(u[0]))for(p=0;p<u.length;p++)m+=d(u[p]);else m=h(u);return m}return function u(p,m,v,b,_){b=void 0===b?0:b,_=void 0===_?0:_;var A,E,k=[],R=[];if(l(p[0])){for(E=0;E<p.length;E++)k[E]=d(p[E]);for(A=i(k,m,v,b,_),E=0;E<p.length;E++)R.push(u(p[E],A[E][2]-A[E][0],A[E][3]-A[E][1],A[E][0],A[E][1]))}else R=i(p,m,v,b,_);return R}}();var gs,Vi,Ir=function(){function P(i,s){lt(this,P),this.ctx=i,this.w=i.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new yn(i),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return rt(P,[{key:"draw",value:function(i){var s=this,r=this.w,l=new U(this.ctx),h=new se(this.ctx),d=l.group({class:"apexcharts-treemap"});if(r.globals.noData)return d;var u=[];return i.forEach(function(p){var m=p.map(function(v){return Math.abs(v)});u.push(m)}),this.negRange=this.helpers.checkColorRange(),r.config.series.forEach(function(p,m){p.data.forEach(function(v){Array.isArray(s.labels[m])||(s.labels[m]=[]),s.labels[m].push(v.x)})}),window.TreemapSquared.generate(u,r.globals.gridWidth,r.globals.gridHeight).forEach(function(p,m){var v=l.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:B.escapeString(r.globals.seriesNames[m]),rel:m+1,"data:realIndex":m});if(r.config.chart.dropShadow.enabled){var b=r.config.chart.dropShadow;new ct(s.ctx).dropShadow(d,b,m)}var _=l.group({class:"apexcharts-data-labels"});p.forEach(function(A,E){var k=A[0],R=A[1],O=A[2],N=A[3],z=l.drawRect(k,R,O-k,N-R,0,"#fff",1,s.strokeWidth,r.config.plotOptions.treemap.useFillColorAsStroke?C:r.globals.stroke.colors[m]);z.attr({cx:k,cy:R,index:m,i:m,j:E,width:O-k,height:N-R});var x=s.helpers.getShadeColor(r.config.chart.type,m,E,s.negRange),C=x.color;void 0!==r.config.series[m].data[E]&&r.config.series[m].data[E].fillColor&&(C=r.config.series[m].data[E].fillColor);var T=h.fillPath({color:C,seriesNumber:m,dataPointIndex:E});z.node.classList.add("apexcharts-treemap-rect"),z.attr({fill:T}),s.helpers.addListeners(z);var L={x:k+(O-k)/2,y:R+(N-R)/2,width:0,height:0},W={x:k,y:R,width:O-k,height:N-R};if(r.config.chart.animations.enabled&&!r.globals.dataChanged){var J=1;r.globals.resized||(J=r.config.chart.animations.speed),s.animateTreemap(z,L,W,J)}r.globals.dataChanged&&s.dynamicAnim.enabled&&r.globals.shouldAnimate&&(r.globals.previousPaths[m]&&r.globals.previousPaths[m][E]&&r.globals.previousPaths[m][E].rect&&(L=r.globals.previousPaths[m][E].rect),s.animateTreemap(z,L,W,s.dynamicAnim.speed));var et=s.getFontSize(A),tt=r.config.dataLabels.formatter(s.labels[m][E],{value:r.globals.series[m][E],seriesIndex:m,dataPointIndex:E,w:r}),at=s.helpers.calculateDataLabels({text:tt,x:(k+O)/2,y:(R+N)/2+s.strokeWidth/2+et/3,i:m,j:E,colorProps:x,fontSize:et,series:i});r.config.dataLabels.enabled&&at&&s.rotateToFitLabel(at,et,tt,k,R,O,N),v.add(z),null!==at&&v.add(at)}),v.add(_),d.add(v)}),d}},{key:"getFontSize",value:function(i){var d,s=this.w,u=function p(m){var v,b=0;if(Array.isArray(m[0]))for(v=0;v<m.length;v++)b+=p(m[v]);else for(v=0;v<m.length;v++)b+=m[v].length;return b}(this.labels)/function p(m){var v,b=0;if(Array.isArray(m[0]))for(v=0;v<m.length;v++)b+=p(m[v]);else for(v=0;v<m.length;v++)b+=1;return b}(this.labels);return d=Math.pow((i[2]-i[0])*(i[3]-i[1]),.5),Math.min(d/u,parseInt(s.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(i,s,r,l,h,d,u){var p=new U(this.ctx),m=p.getTextRects(r,s);if(m.width+this.w.config.stroke.width+5>d-l&&m.width<=u-h){var v=p.rotateAroundCenter(i.node);i.node.setAttribute("transform","rotate(-90 ".concat(v.x," ").concat(v.y,")"))}}},{key:"animateTreemap",value:function(i,s,r,l){var h=new ft(this.ctx);h.animateRect(i,{x:s.x,y:s.y,width:s.width,height:s.height},{x:r.x,y:r.y,width:r.width,height:r.height},l,function(){h.animationCompleted(i)})}}]),P}(),ue=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return rt(P,[{key:"calculateTimeScaleTicks",value:function(i,s){var r=this,l=this.w;if(l.globals.allSeriesCollapsed)return l.globals.labels=[],l.globals.timescaleLabels=[],[];var h=new xe(this.ctx),d=(s-i)/864e5;this.determineInterval(d),l.globals.disableZoomIn=!1,l.globals.disableZoomOut=!1,d<.00011574074074074075?l.globals.disableZoomIn=!0:d>5e4&&(l.globals.disableZoomOut=!0);var u=h.getTimeUnitsfromTimestamp(i,s,this.utc),p=l.globals.gridWidth/d,m=p/24,v=m/60,b=v/60,_=Math.floor(24*d),A=Math.floor(1440*d),E=Math.floor(86400*d),k=Math.floor(d),R=Math.floor(d/30),O=Math.floor(d/365),N={minMillisecond:u.minMillisecond,minSecond:u.minSecond,minMinute:u.minMinute,minHour:u.minHour,minDate:u.minDate,minMonth:u.minMonth,minYear:u.minYear},z={firstVal:N,currentMillisecond:N.minMillisecond,currentSecond:N.minSecond,currentMinute:N.minMinute,currentHour:N.minHour,currentMonthDate:N.minDate,currentDate:N.minDate,currentMonth:N.minMonth,currentYear:N.minYear,daysWidthOnXAxis:p,hoursWidthOnXAxis:m,minutesWidthOnXAxis:v,secondsWidthOnXAxis:b,numberOfSeconds:E,numberOfMinutes:A,numberOfHours:_,numberOfDays:k,numberOfMonths:R,numberOfYears:O};switch(this.tickInterval){case"years":this.generateYearScale(z);break;case"months":case"half_year":this.generateMonthScale(z);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(z);break;case"hours":this.generateHourScale(z);break;case"minutes_fives":case"minutes":this.generateMinuteScale(z);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(z)}var x=this.timeScaleArray.map(function(C){var T={position:C.position,unit:C.unit,year:C.year,day:C.day?C.day:1,hour:C.hour?C.hour:0,month:C.month+1};return"month"===C.unit?Mt(Mt({},T),{},{day:1,value:C.value+1}):"day"===C.unit||"hour"===C.unit?Mt(Mt({},T),{},{value:C.value}):"minute"===C.unit?Mt(Mt({},T),{},{value:C.value,minute:C.value}):"second"===C.unit?Mt(Mt({},T),{},{value:C.value,minute:C.minute,second:C.second}):C});return x.filter(function(C){var T=1,L=Math.ceil(l.globals.gridWidth/120),W=C.value;void 0!==l.config.xaxis.tickAmount&&(L=l.config.xaxis.tickAmount),x.length>L&&(T=Math.floor(x.length/L));var J=!1,H=!1;switch(r.tickInterval){case"years":"year"===C.unit&&(J=!0);break;case"half_year":T=7,"year"===C.unit&&(J=!0);break;case"months":T=1,"year"===C.unit&&(J=!0);break;case"months_fortnight":T=15,"year"!==C.unit&&"month"!==C.unit||(J=!0),30===W&&(H=!0);break;case"months_days":T=10,"month"===C.unit&&(J=!0),30===W&&(H=!0);break;case"week_days":T=8,"month"===C.unit&&(J=!0);break;case"days":T=1,"month"===C.unit&&(J=!0);break;case"hours":"day"===C.unit&&(J=!0);break;case"minutes_fives":case"seconds_fives":W%5!=0&&(H=!0);break;case"seconds_tens":W%10!=0&&(H=!0)}if("hours"===r.tickInterval||"minutes_fives"===r.tickInterval||"seconds_tens"===r.tickInterval||"seconds_fives"===r.tickInterval){if(!H)return!0}else if((W%T==0||J)&&!H)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(i,s){var r=this.w,l=this.formatDates(i),h=this.removeOverlappingTS(l);r.globals.timescaleLabels=h.slice(),new Mi(this.ctx).plotCoords()}},{key:"determineInterval",value:function(i){var s=24*i,r=60*s;switch(!0){case i/365>5:this.tickInterval="years";break;case i>800:this.tickInterval="half_year";break;case i>180:this.tickInterval="months";break;case i>90:this.tickInterval="months_fortnight";break;case i>60:this.tickInterval="months_days";break;case i>30:this.tickInterval="week_days";break;case i>2:this.tickInterval="days";break;case s>2.4:this.tickInterval="hours";break;case r>15:this.tickInterval="minutes_fives";break;case r>5:this.tickInterval="minutes";break;case r>1:this.tickInterval="seconds_tens";break;case 60*r>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(i){var s=i.firstVal,r=i.currentMonth,l=i.currentYear,h=i.daysWidthOnXAxis,d=i.numberOfYears,u=s.minYear,p=0,m=new xe(this.ctx),v="year";if(s.minDate>1||s.minMonth>0){var b=m.determineRemainingDaysOfYear(s.minYear,s.minMonth,s.minDate);p=(m.determineDaysOfYear(s.minYear)-b+1)*h,this.timeScaleArray.push({position:p,value:u=s.minYear+1,unit:v,year:u,month:B.monthMod(r+1)})}else 1===s.minDate&&0===s.minMonth&&this.timeScaleArray.push({position:p,value:u,unit:v,year:l,month:B.monthMod(r+1)});for(var _=u,A=p,E=0;E<d;E++)_++,A=m.determineDaysOfYear(_-1)*h+A,this.timeScaleArray.push({position:A,value:_,unit:v,year:_,month:1})}},{key:"generateMonthScale",value:function(i){var s=i.firstVal,r=i.currentMonthDate,l=i.currentMonth,h=i.currentYear,d=i.daysWidthOnXAxis,u=i.numberOfMonths,p=l,m=0,v=new xe(this.ctx),b="month",_=0;if(s.minDate>1){m=(v.determineDaysOfMonths(l+1,s.minYear)-r+1)*d,p=B.monthMod(l+1);var A=h+_,E=B.monthMod(p),k=p;0===p&&(b="year",k=A,E=1,A+=_+=1),this.timeScaleArray.push({position:m,value:k,unit:b,year:A,month:E})}else this.timeScaleArray.push({position:m,value:p,unit:b,year:h,month:B.monthMod(l)});for(var R=p+1,O=m,N=0,z=1;N<u;N++,z++){0===(R=B.monthMod(R))?(b="year",_+=1):b="month";var x=this._getYear(h,R,_);O=v.determineDaysOfMonths(R,x)*d+O,this.timeScaleArray.push({position:O,value:0===R?x:R,unit:b,year:x,month:0===R?1:R}),R++}}},{key:"generateDayScale",value:function(i){var s=i.firstVal,r=i.currentMonth,l=i.currentYear,h=i.hoursWidthOnXAxis,d=i.numberOfDays,u=new xe(this.ctx),p="day",m=s.minDate+1,v=m,b=function(z,x,C){return z>u.determineDaysOfMonths(x+1,C)&&(v=1,p="month",A=x+=1),x},_=(24-s.minHour)*h,A=m,E=b(v,r,l);0===s.minHour&&1===s.minDate?(_=0,A=B.monthMod(s.minMonth),p="month",v=s.minDate,d++):1!==s.minDate&&0===s.minHour&&0===s.minMinute&&(_=0,A=m=s.minDate,E=b(v=m,r,l)),this.timeScaleArray.push({position:_,value:A,unit:p,year:this._getYear(l,E,0),month:B.monthMod(E),day:v});for(var k=_,R=0;R<d;R++){p="day",E=b(v+=1,E,this._getYear(l,E,0));var O=this._getYear(l,E,0);k=24*h+k;var N=1===v?B.monthMod(E):v;this.timeScaleArray.push({position:k,value:N,unit:p,year:O,month:B.monthMod(E),day:N})}}},{key:"generateHourScale",value:function(i){var s=i.firstVal,r=i.currentDate,l=i.currentMonth,h=i.currentYear,d=i.minutesWidthOnXAxis,u=i.numberOfHours,p=new xe(this.ctx),m="hour",b=function(T,L){return T>p.determineDaysOfMonths(L+1,h)?L+=1:L},_=60-(s.minMinute+s.minSecond/60),A=_*d,E=s.minHour+1,k=E+1;60===_&&(A=0,k=(E=s.minHour)+1);var T,L,R=r,O=b(R,l);this.timeScaleArray.push({position:A,value:E,unit:m,day:R,hour:k,year:h,month:B.monthMod(O)});for(var N=A,z=0;z<u;z++){m="hour",k>=24&&(k=0,m="day",O=(T=R+=1,L=O,T>p.determineDaysOfMonths(L+1,h)&&(R=1,L+=1),{month:L,date:R}).month,O=b(R,O));var x=this._getYear(h,O,0);this.timeScaleArray.push({position:N=0===k&&0===z?_*d:60*d+N,value:0===k?R:k,unit:m,hour:k,day:R,year:x,month:B.monthMod(O)}),k++}}},{key:"generateMinuteScale",value:function(i){for(var m=i.minutesWidthOnXAxis,b=i.numberOfMinutes,_=i.currentMinute+1,A=i.currentDate,E=i.currentMonth,k=i.currentYear,R=i.currentHour,O=(60-i.currentSecond-i.currentMillisecond/1e3)*i.secondsWidthOnXAxis,N=0;N<b;N++)_>=60&&(_=0,24===(R+=1)&&(R=0)),this.timeScaleArray.push({position:O,value:_,unit:"minute",hour:R,minute:_,day:A,year:this._getYear(k,E,0),month:B.monthMod(E)}),O+=m,_++}},{key:"generateSecondScale",value:function(i){for(var m=i.secondsWidthOnXAxis,v=i.numberOfSeconds,b=i.currentSecond+1,_=i.currentMinute,A=i.currentDate,E=i.currentMonth,k=i.currentYear,R=i.currentHour,O=(1e3-i.currentMillisecond)/1e3*m,N=0;N<v;N++)b>=60&&(b=0,++_>=60&&(_=0,24==++R&&(R=0))),this.timeScaleArray.push({position:O,value:b,unit:"second",hour:R,minute:_,second:b,day:A,year:this._getYear(k,E,0),month:B.monthMod(E)}),O+=m,b++}},{key:"createRawDateString",value:function(i,s){var r=i.year;return 0===i.month&&(i.month=1),r+="-"+("0"+i.month.toString()).slice(-2),r+="day"===i.unit?"day"===i.unit?"-"+("0"+s).slice(-2):"-01":"-"+("0"+(i.day?i.day:"1")).slice(-2),r+="hour"===i.unit?"hour"===i.unit?"T"+("0"+s).slice(-2):"T00":"T"+("0"+(i.hour?i.hour:"0")).slice(-2),r+="minute"===i.unit?":"+("0"+s).slice(-2):":"+(i.minute?("0"+i.minute).slice(-2):"00"),r+="second"===i.unit?":"+("0"+s).slice(-2):":00",this.utc&&(r+=".000Z"),r}},{key:"formatDates",value:function(i){var s=this,r=this.w;return i.map(function(l){var h=l.value.toString(),d=new xe(s.ctx),u=s.createRawDateString(l,h),p=d.getDate(d.parseDate(u));if(s.utc||(p=d.getDate(d.parseDateWithTimezone(u))),void 0===r.config.xaxis.labels.format){var m="dd MMM",v=r.config.xaxis.labels.datetimeFormatter;"year"===l.unit&&(m=v.year),"month"===l.unit&&(m=v.month),"day"===l.unit&&(m=v.day),"hour"===l.unit&&(m=v.hour),"minute"===l.unit&&(m=v.minute),"second"===l.unit&&(m=v.second),h=d.formatDate(p,m)}else h=d.formatDate(p,r.config.xaxis.labels.format);return{dateString:u,position:l.position,value:h,unit:l.unit,year:l.year,month:l.month}})}},{key:"removeOverlappingTS",value:function(i){var s,r=this,l=new U(this.ctx),h=!1;i.length>0&&i[0].value&&i.every(function(p){return p.value.length===i[0].value.length})&&(h=!0,s=l.getTextRects(i[0].value).width);var d=0;return i.map(function(p,m){if(m>0&&r.w.config.xaxis.labels.hideOverlappingLabels){var v=h?s:l.getTextRects(i[d].value).width;return p.position>i[d].position+v+10?(d=m,p):null}return p}).filter(function(p){return null!==p})}},{key:"_getYear",value:function(i,s,r){return i+Math.floor(s/12)+r}}]),P}(),cl=function(){function P(i,s){lt(this,P),this.ctx=s,this.w=s.w,this.el=i}return rt(P,[{key:"setupElements",value:function(){var i=this.w.globals,s=this.w.config,r=s.chart.type;i.axisCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(r)>-1,i.xyCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble"].indexOf(r)>-1,i.isBarHorizontal=("bar"===s.chart.type||"rangeBar"===s.chart.type||"boxPlot"===s.chart.type)&&s.plotOptions.bar.horizontal,i.chartClass=".apexcharts"+i.chartID,i.dom.baseEl=this.el,i.dom.elWrap=document.createElement("div"),U.setAttrs(i.dom.elWrap,{id:i.chartClass.substring(1),class:"apexcharts-canvas "+i.chartClass.substring(1)}),this.el.appendChild(i.dom.elWrap),i.dom.Paper=new window.SVG.Doc(i.dom.elWrap),i.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(s.chart.offsetX,", ").concat(s.chart.offsetY,")")}),i.dom.Paper.node.style.background=s.chart.background,this.setSVGDimensions(),i.dom.elGraphical=i.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),i.dom.elAnnotations=i.dom.Paper.group().attr({class:"apexcharts-annotations"}),i.dom.elDefs=i.dom.Paper.defs(),i.dom.elLegendWrap=document.createElement("div"),i.dom.elLegendWrap.classList.add("apexcharts-legend"),i.dom.elWrap.appendChild(i.dom.elLegendWrap),i.dom.Paper.add(i.dom.elGraphical),i.dom.elGraphical.add(i.dom.elDefs)}},{key:"plotChartType",value:function(i,s){var r=this.w,l=r.config,h=r.globals,d={series:[],i:[]},u={series:[],i:[]},p={series:[],i:[]},m={series:[],i:[]},v={series:[],i:[]},b={series:[],i:[]},_={series:[],i:[]};h.series.map(function(C,T){var L=0;void 0!==i[T].type?("column"===i[T].type||"bar"===i[T].type?(h.series.length>1&&l.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),v.series.push(C),v.i.push(T),L++,r.globals.columnSeries=v.series):"area"===i[T].type?(u.series.push(C),u.i.push(T),L++):"line"===i[T].type?(d.series.push(C),d.i.push(T),L++):"scatter"===i[T].type?(p.series.push(C),p.i.push(T)):"bubble"===i[T].type?(m.series.push(C),m.i.push(T),L++):"candlestick"===i[T].type?(b.series.push(C),b.i.push(T),L++):"boxPlot"===i[T].type?(_.series.push(C),_.i.push(T),L++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),L>1&&(h.comboCharts=!0)):(d.series.push(C),d.i.push(T))});var A=new _n(this.ctx,s),E=new ma(this.ctx,s);this.ctx.pie=new bn(this.ctx);var k=new xa(this.ctx);this.ctx.rangeBar=new Rs(this.ctx,s);var R=new wn(this.ctx),O=[];if(h.comboCharts){if(u.series.length>0&&O.push(A.draw(u.series,"area",u.i)),v.series.length>0)if(r.config.chart.stacked){var N=new Tr(this.ctx,s);O.push(N.draw(v.series,v.i))}else this.ctx.bar=new Dt(this.ctx,s),O.push(this.ctx.bar.draw(v.series,v.i));if(d.series.length>0&&O.push(A.draw(d.series,"line",d.i)),b.series.length>0&&O.push(E.draw(b.series,b.i)),_.series.length>0&&O.push(E.draw(_.series,_.i)),p.series.length>0){var z=new _n(this.ctx,s,!0);O.push(z.draw(p.series,"scatter",p.i))}if(m.series.length>0){var x=new _n(this.ctx,s,!0);O.push(x.draw(m.series,"bubble",m.i))}}else switch(l.chart.type){case"line":O=A.draw(h.series,"line");break;case"area":O=A.draw(h.series,"area");break;case"bar":l.chart.stacked?O=new Tr(this.ctx,s).draw(h.series):(this.ctx.bar=new Dt(this.ctx,s),O=this.ctx.bar.draw(h.series));break;case"candlestick":case"boxPlot":O=new ma(this.ctx,s).draw(h.series);break;case"rangeBar":O=this.ctx.rangeBar.draw(h.series);break;case"heatmap":O=new vn(this.ctx,s).draw(h.series);break;case"treemap":O=new Ir(this.ctx,s).draw(h.series);break;case"pie":case"donut":case"polarArea":O=this.ctx.pie.draw(h.series);break;case"radialBar":O=k.draw(h.series);break;case"radar":O=R.draw(h.series);break;default:O=A.draw(h.series)}return O}},{key:"setSVGDimensions",value:function(){var i=this.w.globals,s=this.w.config;i.svgWidth=s.chart.width,i.svgHeight=s.chart.height;var r=B.getDimensions(this.el),l=s.chart.width.toString().split(/[0-9]+/g).pop();"%"===l?B.isNumber(r[0])&&(0===r[0].width&&(r=B.getDimensions(this.el.parentNode)),i.svgWidth=r[0]*parseInt(s.chart.width,10)/100):"px"!==l&&""!==l||(i.svgWidth=parseInt(s.chart.width,10));var h=s.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==i.svgHeight&&""!==i.svgHeight)if("%"===h){var d=B.getDimensions(this.el.parentNode);i.svgHeight=d[1]*parseInt(s.chart.height,10)/100}else i.svgHeight=parseInt(s.chart.height,10);else i.svgHeight=i.axisCharts?i.svgWidth/1.61:i.svgWidth/1.2;i.svgWidth<0&&(i.svgWidth=0),i.svgHeight<0&&(i.svgHeight=0),U.setAttrs(i.dom.Paper.node,{width:i.svgWidth,height:i.svgHeight}),"%"!==h&&(i.dom.Paper.node.parentNode.parentNode.style.minHeight=i.svgHeight+(s.chart.sparkline.enabled?0:i.axisCharts?s.chart.parentHeightOffset:0)+"px"),i.dom.elWrap.style.width=i.svgWidth+"px",i.dom.elWrap.style.height=i.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var i=this.w.globals;U.setAttrs(i.dom.elGraphical.node,{transform:"translate("+i.translateX+", "+i.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var i=this.w,s=i.globals,r=0,l=i.config.chart.sparkline.enabled?1:15;l+=i.config.grid.padding.bottom,"top"!==i.config.legend.position&&"bottom"!==i.config.legend.position||!i.config.legend.show||i.config.legend.floating||(r=new fn(this.ctx).legendHelpers.getLegendBBox().clwh+10);var h=i.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),d=2.05*i.globals.radialSize;if(h&&!i.config.chart.sparkline.enabled&&0!==i.config.plotOptions.radialBar.startAngle){var u=B.getBoundingClientRect(h);d=u.bottom,d=Math.max(2.05*i.globals.radialSize,u.bottom-u.top)}var m=d+s.translateY+r+l;s.dom.elLegendForeign&&s.dom.elLegendForeign.setAttribute("height",m),i.config.chart.height&&String(i.config.chart.height).indexOf("%")>0||(s.dom.elWrap.style.height=m+"px",U.setAttrs(s.dom.Paper.node,{height:m}),s.dom.Paper.node.parentNode.parentNode.style.minHeight=m+"px")}},{key:"coreCalculations",value:function(){new cn(this.ctx).init()}},{key:"resetGlobals",value:function(){var i=this,s=function(){return i.w.config.series.map(function(h){return[]})},r=new Yt,l=this.w.globals;r.initGlobalVars(l),l.seriesXvalues=s(),l.seriesYvalues=s()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var i=null,s=this.w;if(s.globals.axisCharts){if("back"===s.config.xaxis.crosshairs.position&&new un(this.ctx).drawXCrosshairs(),"back"===s.config.yaxis[0].crosshairs.position&&new un(this.ctx).drawYCrosshairs(),"datetime"===s.config.xaxis.type&&void 0===s.config.xaxis.labels.formatter){this.ctx.timeScale=new ue(this.ctx);var r=[];isFinite(s.globals.minX)&&isFinite(s.globals.maxX)&&!s.globals.isBarHorizontal?r=this.ctx.timeScale.calculateTimeScaleTicks(s.globals.minX,s.globals.maxX):s.globals.isBarHorizontal&&(r=this.ctx.timeScale.calculateTimeScaleTicks(s.globals.minY,s.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(r)}i=new wt(this.ctx).getCalculatedRatios()}return i}},{key:"updateSourceChart",value:function(i){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:i.w.globals.minX,max:i.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var i=this,s=this.w;if(s.config.chart.brush.enabled&&"function"!=typeof s.config.chart.events.selection){var r=s.config.chart.brush.targets||[s.config.chart.brush.target];r.forEach(function(l){var h=ApexCharts.getChartByID(l);h.w.globals.brushSource=i.ctx,"function"!=typeof h.w.config.chart.events.zoomed&&(h.w.config.chart.events.zoomed=function(){i.updateSourceChart(h)}),"function"!=typeof h.w.config.chart.events.scrolled&&(h.w.config.chart.events.scrolled=function(){i.updateSourceChart(h)})}),s.config.chart.events.selection=function(l,h){r.forEach(function(d){var u=ApexCharts.getChartByID(d),p=B.clone(s.config.yaxis);if(s.config.chart.brush.autoScaleYaxis&&1===u.w.globals.series.length){var m=new Gi(u);p=m.autoScaleY(u,p,h)}var v=u.w.config.yaxis.reduce(function(b,_,A){return[].concat(K(b),[Mt(Mt({},u.w.config.yaxis[A]),{},{min:p[0].min,max:p[0].max})])},[]);u.ctx.updateHelpers._updateOptions({xaxis:{min:h.xaxis.min,max:h.xaxis.max},yaxis:v},!1,!1,!1,!1)})}}}}]),P}(),ul=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"_updateOptions",value:function(i){var s=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],h=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],d=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(u){var p=[s.ctx];h&&(p=s.ctx.getSyncedCharts()),s.ctx.w.globals.isExecCalled&&(p=[s.ctx],s.ctx.w.globals.isExecCalled=!1),p.forEach(function(m,v){var b=m.w;if(b.globals.shouldAnimate=l,r||(b.globals.resized=!0,b.globals.dataChanged=!0,l&&m.series.getPreviousPaths()),i&&"object"===ee(i)&&(m.config=new ye(i),i=wt.extendArrayProps(m.config,i,b),m.w.globals.chartID!==s.ctx.w.globals.chartID&&delete i.series,b.config=B.extend(b.config,i),d&&(b.globals.lastXAxis=i.xaxis?B.clone(i.xaxis):[],b.globals.lastYAxis=i.yaxis?B.clone(i.yaxis):[],b.globals.initialConfig=B.extend({},b.config),b.globals.initialSeries=B.clone(b.config.series),i.series))){for(var _=0;_<b.globals.collapsedSeriesIndices.length;_++){var A=b.config.series[b.globals.collapsedSeriesIndices[_]];b.globals.collapsedSeries[_].data=b.globals.axisCharts?A.data.slice():A}for(var E=0;E<b.globals.ancillaryCollapsedSeriesIndices.length;E++){var k=b.config.series[b.globals.ancillaryCollapsedSeriesIndices[E]];b.globals.ancillaryCollapsedSeries[E].data=b.globals.axisCharts?k.data.slice():k}m.series.emptyCollapsedSeries(b.config.series)}return m.update(i).then(function(){v===p.length-1&&u(m)})})})}},{key:"_updateSeries",value:function(i,s){var r=this,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(h){var d,u=r.w;return u.globals.shouldAnimate=s,u.globals.dataChanged=!0,s&&r.ctx.series.getPreviousPaths(),u.globals.axisCharts?(0===(d=i.map(function(p,m){return r._extendSeries(p,m)})).length&&(d=[{data:[]}]),u.config.series=d):u.config.series=i.slice(),l&&(u.globals.initialConfig.series=B.clone(u.config.series),u.globals.initialSeries=B.clone(u.config.series)),r.ctx.update().then(function(){h(r.ctx)})})}},{key:"_extendSeries",value:function(i,s){var r=this.w,l=r.config.series[s];return Mt(Mt({},r.config.series[s]),{},{name:i.name?i.name:l&&l.name,color:i.color?i.color:l&&l.color,type:i.type?i.type:l&&l.type,data:i.data?i.data:l&&l.data})}},{key:"toggleDataPointSelection",value:function(i,s){var r=this.w,l=null,h=".apexcharts-series[data\\:realIndex='".concat(i,"']");return r.globals.axisCharts?l=r.globals.dom.Paper.select("".concat(h," path[j='").concat(s,"'], ").concat(h," circle[j='").concat(s,"'], ").concat(h," rect[j='").concat(s,"']")).members[0]:void 0===s&&(l=r.globals.dom.Paper.select("".concat(h," path[j='").concat(i,"']")).members[0],"pie"!==r.config.chart.type&&"polarArea"!==r.config.chart.type&&"donut"!==r.config.chart.type||this.ctx.pie.pieClicked(i)),l?(new U(this.ctx).pathMouseDown(l,null),l.node?l.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(i){var s=this.w;if(["min","max"].forEach(function(l){void 0!==i.xaxis[l]&&(s.config.xaxis[l]=i.xaxis[l],s.globals.lastXAxis[l]=i.xaxis[l])}),i.xaxis.categories&&i.xaxis.categories.length&&(s.config.xaxis.categories=i.xaxis.categories),s.config.xaxis.convertedCatToNumeric){var r=new us(i);i=r.convertCatToNumericXaxis(i,this.ctx)}return i}},{key:"forceYAxisUpdate",value:function(i){return i.chart&&i.chart.stacked&&"100%"===i.chart.stackType&&(Array.isArray(i.yaxis)?i.yaxis.forEach(function(s,r){i.yaxis[r].min=0,i.yaxis[r].max=100}):(i.yaxis.min=0,i.yaxis.max=100)),i}},{key:"revertDefaultAxisMinMax",value:function(i){var s=this,r=this.w,l=r.globals.lastXAxis,h=r.globals.lastYAxis;i&&i.xaxis&&(l=i.xaxis),i&&i.yaxis&&(h=i.yaxis),r.config.xaxis.min=l.min,r.config.xaxis.max=l.max,r.config.yaxis.map(function(u,p){r.globals.zoomed||void 0!==h[p]?function(u){void 0!==h[u]&&(r.config.yaxis[u].min=h[u].min,r.config.yaxis[u].max=h[u].max)}(p):void 0!==s.ctx.opts.yaxis[p]&&(u.min=s.ctx.opts.yaxis[p].min,u.max=s.ctx.opts.yaxis[p].max)})}}]),P}();gs=typeof window<"u"?window:void 0,Vi=function(P,i){var s=(void 0!==this?this:P).SVG=function(x){if(s.supported)return x=new s.Doc(x),s.parser.draw||s.prepare(),x};if(s.ns="http://www.w3.org/2000/svg",s.xmlns="http://www.w3.org/2000/xmlns/",s.xlink="http://www.w3.org/1999/xlink",s.svgjs="http://svgjs.dev",s.supported=!0,!s.supported)return!1;s.did=1e3,s.eid=function(x){return"Svgjs"+v(x)+s.did++},s.create=function(x){var C=i.createElementNS(this.ns,x);return C.setAttribute("id",this.eid(x)),C},s.extend=function(){var x,C;C=(x=[].slice.call(arguments)).pop();for(var T=x.length-1;T>=0;T--)if(x[T])for(var L in C)x[T].prototype[L]=C[L];s.Set&&s.Set.inherit&&s.Set.inherit()},s.invent=function(x){var C="function"==typeof x.create?x.create:function(){this.constructor.call(this,s.create(x.create))};return x.inherit&&(C.prototype=new x.inherit),x.extend&&s.extend(C,x.extend),x.construct&&s.extend(x.parent||s.Container,x.construct),C},s.adopt=function(x){return x?x.instance?x.instance:((C="svg"==x.nodeName?x.parentNode instanceof P.SVGElement?new s.Nested:new s.Doc:"linearGradient"==x.nodeName?new s.Gradient("linear"):"radialGradient"==x.nodeName?new s.Gradient("radial"):s[v(x.nodeName)]?new(s[v(x.nodeName)]):new s.Element(x)).type=x.nodeName,C.node=x,x.instance=C,C instanceof s.Doc&&C.namespace().defs(),C.setData(JSON.parse(x.getAttribute("svgjs:data"))||{}),C):null;var C},s.prepare=function(){var x=i.getElementsByTagName("body")[0],C=(x?new s.Doc(x):s.adopt(i.documentElement).nested()).size(2,0);s.parser={body:x||i.documentElement,draw:C.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:C.polyline().node,path:C.path().node,native:s.create("svg")}},s.parser={native:s.create("svg")},i.addEventListener("DOMContentLoaded",function(){s.parser.draw||s.prepare()},!1),s.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},s.utils={map:function(x,C){for(var T=x.length,L=[],W=0;W<T;W++)L.push(C(x[W]));return L},filter:function(x,C){for(var T=x.length,L=[],W=0;W<T;W++)C(x[W])&&L.push(x[W]);return L},filterSVGElements:function(x){return this.filter(x,function(C){return C instanceof P.SVGElement})}},s.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},s.Color=function(x){var C,T;this.r=0,this.g=0,this.b=0,x&&("string"==typeof x?s.regex.isRgb.test(x)?(C=s.regex.rgb.exec(x.replace(s.regex.whitespace,"")),this.r=parseInt(C[1]),this.g=parseInt(C[2]),this.b=parseInt(C[3])):s.regex.isHex.test(x)&&(C=s.regex.hex.exec(4==(T=x).length?["#",T.substring(1,2),T.substring(1,2),T.substring(2,3),T.substring(2,3),T.substring(3,4),T.substring(3,4)].join(""):T),this.r=parseInt(C[1],16),this.g=parseInt(C[2],16),this.b=parseInt(C[3],16)):"object"===ee(x)&&(this.r=x.r,this.g=x.g,this.b=x.b))},s.extend(s.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+b(this.r)+b(this.g)+b(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(x){return this.destination=new s.Color(x),this},at:function(x){return this.destination?new s.Color({r:~~(this.r+(this.destination.r-this.r)*(x=x<0?0:x>1?1:x)),g:~~(this.g+(this.destination.g-this.g)*x),b:~~(this.b+(this.destination.b-this.b)*x)}):this}}),s.Color.test=function(x){return s.regex.isHex.test(x+="")||s.regex.isRgb.test(x)},s.Color.isRgb=function(x){return x&&"number"==typeof x.r&&"number"==typeof x.g&&"number"==typeof x.b},s.Color.isColor=function(x){return s.Color.isRgb(x)||s.Color.test(x)},s.Array=function(x,C){0==(x=(x||[]).valueOf()).length&&C&&(x=C.valueOf()),this.value=this.parse(x)},s.extend(s.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(x){return x=x.valueOf(),Array.isArray(x)?x:this.split(x)}}),s.PointArray=function(x,C){s.Array.call(this,x,C||[[0,0]])},s.PointArray.prototype=new s.Array,s.PointArray.prototype.constructor=s.PointArray;for(var r={M:function(x,C,T){return C.x=T.x=x[0],C.y=T.y=x[1],["M",C.x,C.y]},L:function(x,C){return C.x=x[0],C.y=x[1],["L",x[0],x[1]]},H:function(x,C){return C.x=x[0],["H",x[0]]},V:function(x,C){return C.y=x[0],["V",x[0]]},C:function(x,C){return C.x=x[4],C.y=x[5],["C",x[0],x[1],x[2],x[3],x[4],x[5]]},Q:function(x,C){return C.x=x[2],C.y=x[3],["Q",x[0],x[1],x[2],x[3]]},Z:function(x,C,T){return C.x=T.x,C.y=T.y,["Z"]}},l="mlhvqtcsaz".split(""),h=0,d=l.length;h<d;++h)r[l[h]]=function(x){return function(C,T,L){if("H"==x)C[0]=C[0]+T.x;else if("V"==x)C[0]=C[0]+T.y;else if("A"==x)C[5]=C[5]+T.x,C[6]=C[6]+T.y;else for(var W=0,J=C.length;W<J;++W)C[W]=C[W]+(W%2?T.y:T.x);if(r&&"function"==typeof r[x])return r[x](C,T,L)}}(l[h].toUpperCase());s.PathArray=function(x,C){s.Array.call(this,x,C||[["M",0,0]])},s.PathArray.prototype=new s.Array,s.PathArray.prototype.constructor=s.PathArray,s.extend(s.PathArray,{toString:function(){return function(x){for(var C=0,T=x.length,L="";C<T;C++)L+=x[C][0],null!=x[C][1]&&(L+=x[C][1],null!=x[C][2]&&(L+=" ",L+=x[C][2],null!=x[C][3]&&(L+=" ",L+=x[C][3],L+=" ",L+=x[C][4],null!=x[C][5]&&(L+=" ",L+=x[C][5],L+=" ",L+=x[C][6],null!=x[C][7]&&(L+=" ",L+=x[C][7])))));return L+" "}(this.value)},move:function(x,C){return this.bbox(),this},at:function(x){if(!this.destination)return this;for(var C=this.value,T=this.destination.value,L=[],W=new s.PathArray,J=0,H=C.length;J<H;J++){L[J]=[C[J][0]];for(var et=1,tt=C[J].length;et<tt;et++)L[J][et]=C[J][et]+(T[J][et]-C[J][et])*x;"A"===L[J][0]&&(L[J][4]=+(0!=L[J][4]),L[J][5]=+(0!=L[J][5]))}return W.value=L,W},parse:function(x){if(x instanceof s.PathArray)return x.valueOf();var C,T={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};x="string"==typeof x?x.replace(s.regex.numbersWithDots,p).replace(s.regex.pathLetters," $& ").replace(s.regex.hyphen,"$1 -").trim().split(s.regex.delimiter):x.reduce(function(tt,at){return[].concat.call(tt,at)},[]);var L=[],W=new s.Point,J=new s.Point,H=0,et=x.length;do{s.regex.isPathLetter.test(x[H])?(C=x[H],++H):"M"==C?C="L":"m"==C&&(C="l"),L.push(r[C].call(null,x.slice(H,H+=T[C.toUpperCase()]).map(parseFloat),W,J))}while(et>H);return L},bbox:function(){return s.parser.draw||s.prepare(),s.parser.path.setAttribute("d",this.toString()),s.parser.path.getBBox()}}),s.Number=s.invent({create:function(x,C){this.value=0,this.unit=C||"","number"==typeof x?this.value=isNaN(x)?0:isFinite(x)?x:x<0?-34e37:34e37:"string"==typeof x?(C=x.match(s.regex.numberAndUnit))&&(this.value=parseFloat(C[1]),"%"==C[5]?this.value/=100:"s"==C[5]&&(this.value*=1e3),this.unit=C[5]):x instanceof s.Number&&(this.value=x.valueOf(),this.unit=x.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(x){return x=new s.Number(x),new s.Number(this+x,this.unit||x.unit)},minus:function(x){return x=new s.Number(x),new s.Number(this-x,this.unit||x.unit)},times:function(x){return x=new s.Number(x),new s.Number(this*x,this.unit||x.unit)},divide:function(x){return x=new s.Number(x),new s.Number(this/x,this.unit||x.unit)},to:function(x){var C=new s.Number(this);return"string"==typeof x&&(C.unit=x),C},morph:function(x){return this.destination=new s.Number(x),x.relative&&(this.destination.value+=this.value),this},at:function(x){return this.destination?new s.Number(this.destination).minus(this).times(x).plus(this):this}}}),s.Element=s.invent({create:function(x){this._stroke=s.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=x)&&(this.type=x.nodeName,this.node.instance=this,this._stroke=x.getAttribute("stroke")||this._stroke)},extend:{x:function(x){return this.attr("x",x)},y:function(x){return this.attr("y",x)},cx:function(x){return null==x?this.x()+this.width()/2:this.x(x-this.width()/2)},cy:function(x){return null==x?this.y()+this.height()/2:this.y(x-this.height()/2)},move:function(x,C){return this.x(x).y(C)},center:function(x,C){return this.cx(x).cy(C)},width:function(x){return this.attr("width",x)},height:function(x){return this.attr("height",x)},size:function(x,C){var T=_(this,x,C);return this.width(new s.Number(T.width)).height(new s.Number(T.height))},clone:function(x){this.writeDataToDom();var C=k(this.node.cloneNode(!0));return x?x.add(C):this.after(C),C},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(x){return this.after(x).remove(),x},addTo:function(x){return x.put(this)},putIn:function(x){return x.add(this)},id:function(x){return this.attr("id",x)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var x=this.attr("class");return null==x?[]:x.trim().split(s.regex.delimiter)},hasClass:function(x){return-1!=this.classes().indexOf(x)},addClass:function(x){if(!this.hasClass(x)){var C=this.classes();C.push(x),this.attr("class",C.join(" "))}return this},removeClass:function(x){return this.hasClass(x)&&this.attr("class",this.classes().filter(function(C){return C!=x}).join(" ")),this},toggleClass:function(x){return this.hasClass(x)?this.removeClass(x):this.addClass(x)},reference:function(x){return s.get(this.attr(x))},parent:function(x){var C=this;if(!C.node.parentNode)return null;if(C=s.adopt(C.node.parentNode),!x)return C;for(;C&&C.node instanceof P.SVGElement;){if("string"==typeof x?C.matches(x):C instanceof x)return C;if(!C.node.parentNode||"#document"==C.node.parentNode.nodeName)return null;C=s.adopt(C.node.parentNode)}},doc:function(){return this instanceof s.Doc?this:this.parent(s.Doc)},parents:function(x){var C=[],T=this;do{if(!(T=T.parent(x))||!T.node)break;C.push(T)}while(T.parent);return C},matches:function(x){return((C=this.node).matches||C.matchesSelector||C.msMatchesSelector||C.mozMatchesSelector||C.webkitMatchesSelector||C.oMatchesSelector).call(C,x);var C},native:function(){return this.node},svg:function(x){var C=i.createElement("svg");if(!(x&&this instanceof s.Parent))return C.appendChild(x=i.createElement("svg")),this.writeDataToDom(),x.appendChild(this.node.cloneNode(!0)),C.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");C.innerHTML="<svg>"+x.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var T=0,L=C.firstChild.childNodes.length;T<L;T++)this.node.appendChild(C.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(x){return this.dom=x,this},is:function(x){return this instanceof x}}}),s.easing={"-":function(x){return x},"<>":function(x){return-Math.cos(x*Math.PI)/2+.5},">":function(x){return Math.sin(x*Math.PI/2)},"<":function(x){return 1-Math.cos(x*Math.PI/2)}},s.morph=function(x){return function(C,T){return new s.MorphObj(C,T).at(x)}},s.Situation=s.invent({create:function(x){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new s.Number(x.duration).valueOf(),this.delay=new s.Number(x.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=x.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),s.FX=s.invent({create:function(x){this._target=x,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(x,C,T){"object"===ee(x)&&(C=x.ease,T=x.delay,x=x.duration);var L=new s.Situation({duration:x||1e3,delay:T||0,ease:s.easing[C||"-"]||C});return this.queue(L),this},target:function(x){return x&&x instanceof s.Element?(this._target=x,this):this._target},timeToAbsPos:function(x){return(x-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(x){return this.situation.duration/this._speed*x+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=P.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){P.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(x){return("function"==typeof x||x instanceof s.Situation)&&this.situations.push(x),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof s.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var x,C=this.situation;if(C.init)return this;for(var T in C.animations){x=this.target()[T](),Array.isArray(x)||(x=[x]),Array.isArray(C.animations[T])||(C.animations[T]=[C.animations[T]]);for(var L=x.length;L--;)C.animations[T][L]instanceof s.Number&&(x[L]=new s.Number(x[L])),C.animations[T][L]=x[L].morph(C.animations[T][L])}for(var T in C.attrs)C.attrs[T]=new s.MorphObj(this.target().attr(T),C.attrs[T]);for(var T in C.styles)C.styles[T]=new s.MorphObj(this.target().style(T),C.styles[T]);return C.initialTransformation=this.target().matrixify(),C.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(x,C){var T=this.active;return this.active=!1,C&&this.clearQueue(),x&&this.situation&&(!T&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(x){var C=this.last();return this.target().on("finished.fx",function T(L){L.detail.situation==C&&(x.call(this,C),this.off("finished.fx",T))}),this._callStart()},during:function(x){var C=this.last(),T=function(L){L.detail.situation==C&&x.call(this,L.detail.pos,s.morph(L.detail.pos),L.detail.eased,C)};return this.target().off("during.fx",T).on("during.fx",T),this.after(function(){this.off("during.fx",T)}),this._callStart()},afterAll:function(x){var C=function T(L){x.call(this),this.off("allfinished.fx",T)};return this.target().off("allfinished.fx",C).on("allfinished.fx",C),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(x,C,T){return this.last()[T||"animations"][x]=C,this._callStart()},step:function(x){var C,T,L;x||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(C=Math.max(this.absPos,0),T=Math.floor(C),!0===this.situation.loops||T<this.situation.loops?(this.pos=C-T,L=this.situation.loop,this.situation.loop=T):(this.absPos=this.situation.loops,this.pos=1,L=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-L)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var W=this.situation.ease(this.pos);for(var J in this.situation.once)J>this.lastPos&&J<=W&&(this.situation.once[J].call(this.target(),this.pos,W),delete this.situation.once[J]);return this.active&&this.target().fire("during",{pos:this.pos,eased:W,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=W,this):this},eachAt:function(){var x,C=this,T=this.target(),L=this.situation;for(var W in L.animations)x=[].concat(L.animations[W]).map(function(et){return"string"!=typeof et&&et.at?et.at(L.ease(C.pos),C.pos):et}),T[W].apply(T,x);for(var W in L.attrs)x=[W].concat(L.attrs[W]).map(function(tt){return"string"!=typeof tt&&tt.at?tt.at(L.ease(C.pos),C.pos):tt}),T.attr.apply(T,x);for(var W in L.styles)x=[W].concat(L.styles[W]).map(function(tt){return"string"!=typeof tt&&tt.at?tt.at(L.ease(C.pos),C.pos):tt}),T.style.apply(T,x);if(L.transforms.length){x=L.initialTransformation,W=0;for(var J=L.transforms.length;W<J;W++){var H=L.transforms[W];H instanceof s.Matrix?x=H.relative?x.multiply((new s.Matrix).morph(H).at(L.ease(this.pos))):x.morph(H).at(L.ease(this.pos)):(H.relative||H.undo(x.extract()),x=x.multiply(H.at(L.ease(this.pos))))}T.matrix(x)}return this},once:function(x,C,T){var L=this.last();return T||(x=L.ease(x)),L.once[x]=C,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:s.Element,construct:{animate:function(x,C,T){return(this.fx||(this.fx=new s.FX(this))).animate(x,C,T)},delay:function(x){return(this.fx||(this.fx=new s.FX(this))).delay(x)},stop:function(x,C){return this.fx&&this.fx.stop(x,C),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),s.MorphObj=s.invent({create:function(x,C){return s.Color.isColor(C)?new s.Color(x).morph(C):s.regex.delimiter.test(x)?s.regex.pathLetters.test(x)?new s.PathArray(x).morph(C):new s.Array(x).morph(C):s.regex.numberAndUnit.test(C)?new s.Number(x).morph(C):(this.value=x,void(this.destination=C))},extend:{at:function(x,C){return C<1?this.value:this.destination},valueOf:function(){return this.value}}}),s.extend(s.FX,{attr:function(x,C,T){if("object"===ee(x))for(var L in x)this.attr(L,x[L]);else this.add(x,C,"attrs");return this},plot:function(x,C,T,L){return 4==arguments.length?this.plot([x,C,T,L]):this.add("plot",new(this.target().morphArray)(x))}}),s.Box=s.invent({create:function(x,C,T,L){if(!("object"!==ee(x)||x instanceof s.Element))return s.Box.call(this,null!=x.left?x.left:x.x,null!=x.top?x.top:x.y,x.width,x.height);4==arguments.length&&(this.x=x,this.y=C,this.width=T,this.height=L),R(this)}}),s.BBox=s.invent({create:function(x){if(s.Box.apply(this,[].slice.call(arguments)),x instanceof s.Element){var C;try{if(!i.documentElement.contains){for(var T=x.node;T.parentNode;)T=T.parentNode;if(T!=i)throw new Error("Element not in the dom")}C=x.node.getBBox()}catch{if(x instanceof s.Shape){s.parser.draw||s.prepare();var L=x.clone(s.parser.draw.instance).show();L&&L.node&&"function"==typeof L.node.getBBox&&(C=L.node.getBBox()),L&&"function"==typeof L.remove&&L.remove()}else C={x:x.node.clientLeft,y:x.node.clientTop,width:x.node.clientWidth,height:x.node.clientHeight}}s.Box.call(this,C)}},inherit:s.Box,parent:s.Element,construct:{bbox:function(){return new s.BBox(this)}}}),s.BBox.prototype.constructor=s.BBox,s.Matrix=s.invent({create:function(x){var C=E([1,0,0,1,0,0]);x=null===x?C:x instanceof s.Element?x.matrixify():"string"==typeof x?E(x.split(s.regex.delimiter).map(parseFloat)):6==arguments.length?E([].slice.call(arguments)):Array.isArray(x)?E(x):x&&"object"===ee(x)?x:C;for(var T=N.length-1;T>=0;--T)this[N[T]]=null!=x[N[T]]?x[N[T]]:C[N[T]]},extend:{extract:function(){var x=A(this,0,1);A(this,1,0);var C=180/Math.PI*Math.atan2(x.y,x.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(C*Math.PI/180)+this.f*Math.sin(C*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(C*Math.PI/180)+this.e*Math.sin(-C*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:C,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new s.Matrix(this)}},clone:function(){return new s.Matrix(this)},morph:function(x){return this.destination=new s.Matrix(x),this},multiply:function(x){return new s.Matrix(this.native().multiply((C=x,C instanceof s.Matrix||(C=new s.Matrix(C)),C).native()));var C},inverse:function(){return new s.Matrix(this.native().inverse())},translate:function(x,C){return new s.Matrix(this.native().translate(x||0,C||0))},native:function(){for(var x=s.parser.native.createSVGMatrix(),C=N.length-1;C>=0;C--)x[N[C]]=this[N[C]];return x},toString:function(){return"matrix("+O(this.a)+","+O(this.b)+","+O(this.c)+","+O(this.d)+","+O(this.e)+","+O(this.f)+")"}},parent:s.Element,construct:{ctm:function(){return new s.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof s.Nested){var x=this.rect(1,1),C=x.node.getScreenCTM();return x.remove(),new s.Matrix(C)}return new s.Matrix(this.node.getScreenCTM())}}}),s.Point=s.invent({create:function(x,C){var T;T=Array.isArray(x)?{x:x[0],y:x[1]}:"object"===ee(x)?{x:x.x,y:x.y}:null!=x?{x,y:C??x}:{x:0,y:0},this.x=T.x,this.y=T.y},extend:{clone:function(){return new s.Point(this)},morph:function(x,C){return this.destination=new s.Point(x,C),this}}}),s.extend(s.Element,{point:function(x,C){return new s.Point(x,C).transform(this.screenCTM().inverse())}}),s.extend(s.Element,{attr:function(x,C,T){if(null==x){for(x={},T=(C=this.node.attributes).length-1;T>=0;T--)x[C[T].nodeName]=s.regex.isNumber.test(C[T].nodeValue)?parseFloat(C[T].nodeValue):C[T].nodeValue;return x}if("object"===ee(x))for(var L in x)this.attr(L,x[L]);else if(null===C)this.node.removeAttribute(x);else{if(null==C)return null==(C=this.node.getAttribute(x))?s.defaults.attrs[x]:s.regex.isNumber.test(C)?parseFloat(C):C;"stroke-width"==x?this.attr("stroke",parseFloat(C)>0?this._stroke:null):"stroke"==x&&(this._stroke=C),"fill"!=x&&"stroke"!=x||(s.regex.isImage.test(C)&&(C=this.doc().defs().image(C,0,0)),C instanceof s.Image&&(C=this.doc().defs().pattern(0,0,function(){this.add(C)}))),"number"==typeof C?C=new s.Number(C):s.Color.isColor(C)?C=new s.Color(C):Array.isArray(C)&&(C=new s.Array(C)),"leading"==x?this.leading&&this.leading(C):"string"==typeof T?this.node.setAttributeNS(T,x,C.toString()):this.node.setAttribute(x,C.toString()),!this.rebuild||"font-size"!=x&&"x"!=x||this.rebuild(x,C)}return this}}),s.extend(s.Element,{transform:function(x,C){var T;return"object"!==ee(x)?(T=new s.Matrix(this).extract(),"string"==typeof x?T[x]:T):(T=new s.Matrix(this),C=!!C||!!x.relative,null!=x.a&&(T=C?T.multiply(new s.Matrix(x)):new s.Matrix(x)),this.attr("transform",T))}}),s.extend(s.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(s.regex.transforms).slice(0,-1).map(function(x){var C=x.trim().split("(");return[C[0],C[1].split(s.regex.delimiter).map(function(T){return parseFloat(T)})]}).reduce(function(x,C){return"matrix"==C[0]?x.multiply(E(C[1])):x[C[0]].apply(x,C[1])},new s.Matrix)},toParent:function(x){if(this==x)return this;var C=this.screenCTM(),T=x.screenCTM().inverse();return this.addTo(x).untransform().transform(T.multiply(C)),this},toDoc:function(){return this.toParent(this.doc())}}),s.Transformation=s.invent({create:function(x,C){if(arguments.length>1&&"boolean"!=typeof C)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(x))for(var T=0,L=this.arguments.length;T<L;++T)this[this.arguments[T]]=x[T];else if(x&&"object"===ee(x))for(T=0,L=this.arguments.length;T<L;++T)this[this.arguments[T]]=x[this.arguments[T]];this.inversed=!1,!0===C&&(this.inversed=!0)}}),s.Translate=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(x,C){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),s.extend(s.Element,{style:function(x,C){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===ee(x))for(var T in x)this.style(T,x[T]);else{if(!s.regex.isCss.test(x))return this.node.style[m(x)];for(x=x.split(/\s*;\s*/).filter(function(L){return!!L}).map(function(L){return L.split(/\s*:\s*/)});C=x.pop();)this.style(C[0],C[1])}else this.node.style[m(x)]=null===C||s.regex.isBlank.test(C)?"":C;return this}}),s.Parent=s.invent({create:function(x){this.constructor.call(this,x)},inherit:s.Element,extend:{children:function(){return s.utils.map(s.utils.filterSVGElements(this.node.childNodes),function(x){return s.adopt(x)})},add:function(x,C){return null==C?this.node.appendChild(x.node):x.node!=this.node.childNodes[C]&&this.node.insertBefore(x.node,this.node.childNodes[C]),this},put:function(x,C){return this.add(x,C),x},has:function(x){return this.index(x)>=0},index:function(x){return[].slice.call(this.node.childNodes).indexOf(x.node)},get:function(x){return s.adopt(this.node.childNodes[x])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(x,C){for(var T=this.children(),L=0,W=T.length;L<W;L++)T[L]instanceof s.Element&&x.apply(T[L],[L,T]),C&&T[L]instanceof s.Container&&T[L].each(x,C);return this},removeElement:function(x){return this.node.removeChild(x.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),s.extend(s.Parent,{ungroup:function(x,C){return 0===C||this instanceof s.Defs||this.node==s.parser.draw||(x=x||(this instanceof s.Doc?this:this.parent(s.Parent)),C=C||1/0,this.each(function(){return this instanceof s.Defs?this:this instanceof s.Parent?this.ungroup(x,C-1):this.toParent(x)}),this.node.firstChild||this.remove()),this},flatten:function(x,C){return this.ungroup(x,C)}}),s.Container=s.invent({create:function(x){this.constructor.call(this,x)},inherit:s.Parent}),s.ViewBox=s.invent({parent:s.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(x){s.Element.prototype[x]=function(C){return s.on(this.node,x,C),this}}),s.listeners=[],s.handlerMap=[],s.listenerId=0,s.on=function(x,C,T,L,W){var J=T.bind(L||x.instance||x),H=(s.handlerMap.indexOf(x)+1||s.handlerMap.push(x))-1,et=C.split(".")[0],tt=C.split(".")[1]||"*";s.listeners[H]=s.listeners[H]||{},s.listeners[H][et]=s.listeners[H][et]||{},s.listeners[H][et][tt]=s.listeners[H][et][tt]||{},T._svgjsListenerId||(T._svgjsListenerId=++s.listenerId),s.listeners[H][et][tt][T._svgjsListenerId]=J,x.addEventListener(et,J,W||{passive:!0})},s.off=function(x,C,T){var L=s.handlerMap.indexOf(x),W=C&&C.split(".")[0],J=C&&C.split(".")[1],H="";if(-1!=L)if(T){if("function"==typeof T&&(T=T._svgjsListenerId),!T)return;s.listeners[L][W]&&s.listeners[L][W][J||"*"]&&(x.removeEventListener(W,s.listeners[L][W][J||"*"][T],!1),delete s.listeners[L][W][J||"*"][T])}else if(J&&W){if(s.listeners[L][W]&&s.listeners[L][W][J]){for(var et in s.listeners[L][W][J])s.off(x,[W,J].join("."),et);delete s.listeners[L][W][J]}}else if(J)for(var tt in s.listeners[L])for(var H in s.listeners[L][tt])J===H&&s.off(x,[tt,J].join("."));else if(W){if(s.listeners[L][W]){for(var H in s.listeners[L][W])s.off(x,[W,H].join("."));delete s.listeners[L][W]}}else{for(var tt in s.listeners[L])s.off(x,tt);delete s.listeners[L],delete s.handlerMap[L]}},s.extend(s.Element,{on:function(x,C,T,L){return s.on(this.node,x,C,T,L),this},off:function(x,C){return s.off(this.node,x,C),this},fire:function(x,C){return this.node.dispatchEvent(x instanceof P.Event?x:x=new s.CustomEvent(x,{detail:C,cancelable:!0})),this._event=x,this},event:function(){return this._event}}),s.Defs=s.invent({create:"defs",inherit:s.Container}),s.G=s.invent({create:"g",inherit:s.Container,extend:{x:function(x){return null==x?this.transform("x"):this.transform({x:x-this.x()},!0)}},construct:{group:function(){return this.put(new s.G)}}}),s.Doc=s.invent({create:function(x){x&&("svg"==(x="string"==typeof x?i.getElementById(x):x).nodeName?this.constructor.call(this,x):(this.constructor.call(this,s.create("svg")),x.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:s.Container,extend:{namespace:function(){return this.attr({xmlns:s.ns,version:"1.1"}).attr("xmlns:xlink",s.xlink,s.xmlns).attr("xmlns:svgjs",s.svgjs,s.xmlns)},defs:function(){var x;return this._defs||(this._defs=(x=this.node.getElementsByTagName("defs")[0])?s.adopt(x):new s.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,s.parser.draw&&!s.parser.draw.parentNode&&this.node.appendChild(s.parser.draw),this},clone:function(x){this.writeDataToDom();var C=this.node,T=k(C.cloneNode(!0));return x?(x.node||x).appendChild(T.node):C.parentNode.insertBefore(T.node,C.nextSibling),T}}}),s.extend(s.Element,{}),s.Gradient=s.invent({create:function(x){this.constructor.call(this,s.create(x+"Gradient")),this.type=x},inherit:s.Container,extend:{at:function(x,C,T){return this.put(new s.Stop).update(x,C,T)},update:function(x){return this.clear(),"function"==typeof x&&x.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(x,C,T){return"transform"==x&&(x="gradientTransform"),s.Container.prototype.attr.call(this,x,C,T)}},construct:{gradient:function(x,C){return this.defs().gradient(x,C)}}}),s.extend(s.Gradient,s.FX,{from:function(x,C){return this.attr("radial"==(this._target||this).type?{fx:new s.Number(x),fy:new s.Number(C)}:{x1:new s.Number(x),y1:new s.Number(C)})},to:function(x,C){return this.attr("radial"==(this._target||this).type?{cx:new s.Number(x),cy:new s.Number(C)}:{x2:new s.Number(x),y2:new s.Number(C)})}}),s.extend(s.Defs,{gradient:function(x,C){return this.put(new s.Gradient(x)).update(C)}}),s.Stop=s.invent({create:"stop",inherit:s.Element,extend:{update:function(x){return("number"==typeof x||x instanceof s.Number)&&(x={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=x.opacity&&this.attr("stop-opacity",x.opacity),null!=x.color&&this.attr("stop-color",x.color),null!=x.offset&&this.attr("offset",new s.Number(x.offset)),this}}}),s.Pattern=s.invent({create:"pattern",inherit:s.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(x){return this.clear(),"function"==typeof x&&x.call(this,this),this},toString:function(){return this.fill()},attr:function(x,C,T){return"transform"==x&&(x="patternTransform"),s.Container.prototype.attr.call(this,x,C,T)}},construct:{pattern:function(x,C,T){return this.defs().pattern(x,C,T)}}}),s.extend(s.Defs,{pattern:function(x,C,T){return this.put(new s.Pattern).update(T).attr({x:0,y:0,width:x,height:C,patternUnits:"userSpaceOnUse"})}}),s.Shape=s.invent({create:function(x){this.constructor.call(this,x)},inherit:s.Element}),s.Symbol=s.invent({create:"symbol",inherit:s.Container,construct:{symbol:function(){return this.put(new s.Symbol)}}}),s.Use=s.invent({create:"use",inherit:s.Shape,extend:{element:function(x,C){return this.attr("href",(C||"")+"#"+x,s.xlink)}},construct:{use:function(x,C){return this.put(new s.Use).element(x,C)}}}),s.Rect=s.invent({create:"rect",inherit:s.Shape,construct:{rect:function(x,C){return this.put(new s.Rect).size(x,C)}}}),s.Circle=s.invent({create:"circle",inherit:s.Shape,construct:{circle:function(x){return this.put(new s.Circle).rx(new s.Number(x).divide(2)).move(0,0)}}}),s.extend(s.Circle,s.FX,{rx:function(x){return this.attr("r",x)},ry:function(x){return this.rx(x)}}),s.Ellipse=s.invent({create:"ellipse",inherit:s.Shape,construct:{ellipse:function(x,C){return this.put(new s.Ellipse).size(x,C).move(0,0)}}}),s.extend(s.Ellipse,s.Rect,s.FX,{rx:function(x){return this.attr("rx",x)},ry:function(x){return this.attr("ry",x)}}),s.extend(s.Circle,s.Ellipse,{x:function(x){return null==x?this.cx()-this.rx():this.cx(x+this.rx())},y:function(x){return null==x?this.cy()-this.ry():this.cy(x+this.ry())},cx:function(x){return null==x?this.attr("cx"):this.attr("cx",x)},cy:function(x){return null==x?this.attr("cy"):this.attr("cy",x)},width:function(x){return null==x?2*this.rx():this.rx(new s.Number(x).divide(2))},height:function(x){return null==x?2*this.ry():this.ry(new s.Number(x).divide(2))},size:function(x,C){var T=_(this,x,C);return this.rx(new s.Number(T.width).divide(2)).ry(new s.Number(T.height).divide(2))}}),s.Line=s.invent({create:"line",inherit:s.Shape,extend:{array:function(){return new s.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(x,C,T,L){return null==x?this.array():(x=void 0!==C?{x1:x,y1:C,x2:T,y2:L}:new s.PointArray(x).toLine(),this.attr(x))},move:function(x,C){return this.attr(this.array().move(x,C).toLine())},size:function(x,C){var T=_(this,x,C);return this.attr(this.array().size(T.width,T.height).toLine())}},construct:{line:function(x,C,T,L){return s.Line.prototype.plot.apply(this.put(new s.Line),null!=x?[x,C,T,L]:[0,0,0,0])}}}),s.Polyline=s.invent({create:"polyline",inherit:s.Shape,construct:{polyline:function(x){return this.put(new s.Polyline).plot(x||new s.PointArray)}}}),s.Polygon=s.invent({create:"polygon",inherit:s.Shape,construct:{polygon:function(x){return this.put(new s.Polygon).plot(x||new s.PointArray)}}}),s.extend(s.Polyline,s.Polygon,{array:function(){return this._array||(this._array=new s.PointArray(this.attr("points")))},plot:function(x){return null==x?this.array():this.clear().attr("points","string"==typeof x?x:this._array=new s.PointArray(x))},clear:function(){return delete this._array,this},move:function(x,C){return this.attr("points",this.array().move(x,C))},size:function(x,C){var T=_(this,x,C);return this.attr("points",this.array().size(T.width,T.height))}}),s.extend(s.Line,s.Polyline,s.Polygon,{morphArray:s.PointArray,x:function(x){return null==x?this.bbox().x:this.move(x,this.bbox().y)},y:function(x){return null==x?this.bbox().y:this.move(this.bbox().x,x)},width:function(x){var C=this.bbox();return null==x?C.width:this.size(x,C.height)},height:function(x){var C=this.bbox();return null==x?C.height:this.size(C.width,x)}}),s.Path=s.invent({create:"path",inherit:s.Shape,extend:{morphArray:s.PathArray,array:function(){return this._array||(this._array=new s.PathArray(this.attr("d")))},plot:function(x){return null==x?this.array():this.clear().attr("d","string"==typeof x?x:this._array=new s.PathArray(x))},clear:function(){return delete this._array,this}},construct:{path:function(x){return this.put(new s.Path).plot(x||new s.PathArray)}}}),s.Image=s.invent({create:"image",inherit:s.Shape,extend:{load:function(x){if(!x)return this;var C=this,T=new P.Image;return s.on(T,"load",function(){s.off(T);var L=C.parent(s.Pattern);null!==L&&(0==C.width()&&0==C.height()&&C.size(T.width,T.height),L&&0==L.width()&&0==L.height()&&L.size(C.width(),C.height()),"function"==typeof C._loaded&&C._loaded.call(C,{width:T.width,height:T.height,ratio:T.width/T.height,url:x}))}),s.on(T,"error",function(L){s.off(T),"function"==typeof C._error&&C._error.call(C,L)}),this.attr("href",T.src=this.src=x,s.xlink)},loaded:function(x){return this._loaded=x,this},error:function(x){return this._error=x,this}},construct:{image:function(x,C,T){return this.put(new s.Image).load(x).size(C||0,T||C||0)}}}),s.Text=s.invent({create:function(){this.constructor.call(this,s.create("text")),this.dom.leading=new s.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",s.defaults.attrs["font-family"])},inherit:s.Shape,extend:{x:function(x){return null==x?this.attr("x"):this.attr("x",x)},text:function(x){if(void 0===x){x="";for(var C=this.node.childNodes,T=0,L=C.length;T<L;++T)0!=T&&3!=C[T].nodeType&&1==s.adopt(C[T]).dom.newLined&&(x+="\n"),x+=C[T].textContent;return x}if(this.clear().build(!0),"function"==typeof x)x.call(this,this);else{T=0;for(var W=(x=x.split("\n")).length;T<W;T++)this.tspan(x[T]).newLine()}return this.build(!1).rebuild()},size:function(x){return this.attr("font-size",x).rebuild()},leading:function(x){return null==x?this.dom.leading:(this.dom.leading=new s.Number(x),this.rebuild())},lines:function(){var x=(this.textPath&&this.textPath()||this).node,C=s.utils.map(s.utils.filterSVGElements(x.childNodes),function(T){return s.adopt(T)});return new s.Set(C)},rebuild:function(x){if("boolean"==typeof x&&(this._rebuild=x),this._rebuild){var C=this,T=0,L=this.dom.leading*new s.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(C.textPath()||this.attr("x",C.attr("x")),"\n"==this.text()?T+=L:(this.attr("dy",L+T),T=0))}),this.fire("rebuild")}return this},build:function(x){return this._build=!!x,this},setData:function(x){return this.dom=x,this.dom.leading=new s.Number(x.leading||1.3),this}},construct:{text:function(x){return this.put(new s.Text).text(x)},plain:function(x){return this.put(new s.Text).plain(x)}}}),s.Tspan=s.invent({create:"tspan",inherit:s.Shape,extend:{text:function(x){return null==x?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof x?x.call(this,this):this.plain(x),this)},dx:function(x){return this.attr("dx",x)},dy:function(x){return this.attr("dy",x)},newLine:function(){var x=this.parent(s.Text);return this.dom.newLined=!0,this.dy(x.dom.leading*x.attr("font-size")).attr("x",x.x())}}}),s.extend(s.Text,s.Tspan,{plain:function(x){return!1===this._build&&this.clear(),this.node.appendChild(i.createTextNode(x)),this},tspan:function(x){var C=(this.textPath&&this.textPath()||this).node,T=new s.Tspan;return!1===this._build&&this.clear(),C.appendChild(T.node),T.text(x)},clear:function(){for(var x=(this.textPath&&this.textPath()||this).node;x.hasChildNodes();)x.removeChild(x.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),s.TextPath=s.invent({create:"textPath",inherit:s.Parent,parent:s.Text,construct:{morphArray:s.PathArray,array:function(){var x=this.track();return x?x.array():null},plot:function(x){var C=this.track(),T=null;return C&&(T=C.plot(x)),null==x?T:this},track:function(){var x=this.textPath();if(x)return x.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return s.adopt(this.node.firstChild)}}}),s.Nested=s.invent({create:function(){this.constructor.call(this,s.create("svg")),this.style("overflow","visible")},inherit:s.Container,construct:{nested:function(){return this.put(new s.Nested)}}});var u={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(x,C){return"color"==C?x:x+"-"+C}};function p(x,C,T,L){return T+L.replace(s.regex.dots," .")}function m(x){return x.toLowerCase().replace(/-(.)/g,function(C,T){return T.toUpperCase()})}function v(x){return x.charAt(0).toUpperCase()+x.slice(1)}function b(x){var C=x.toString(16);return 1==C.length?"0"+C:C}function _(x,C,T){if(null==C||null==T){var L=x.bbox();null==C?C=L.width/L.height*T:null==T&&(T=L.height/L.width*C)}return{width:C,height:T}}function A(x,C,T){return{x:C*x.a+T*x.c+0,y:C*x.b+T*x.d+0}}function E(x){return{a:x[0],b:x[1],c:x[2],d:x[3],e:x[4],f:x[5]}}function k(x){for(var C=x.childNodes.length-1;C>=0;C--)x.childNodes[C]instanceof P.SVGElement&&k(x.childNodes[C]);return s.adopt(x).id(s.eid(x.nodeName))}function R(x){return null==x.x&&(x.x=0,x.y=0,x.width=0,x.height=0),x.w=x.width,x.h=x.height,x.x2=x.x+x.width,x.y2=x.y+x.height,x.cx=x.x+x.width/2,x.cy=x.y+x.height/2,x}function O(x){return Math.abs(x)>1e-37?x:0}["fill","stroke"].forEach(function(x){var C={};C[x]=function(T){if(void 0===T)return this;if("string"==typeof T||s.Color.isRgb(T)||T&&"function"==typeof T.fill)this.attr(x,T);else for(var L=u[x].length-1;L>=0;L--)null!=T[u[x][L]]&&this.attr(u.prefix(x,u[x][L]),T[u[x][L]]);return this},s.extend(s.Element,s.FX,C)}),s.extend(s.Element,s.FX,{translate:function(x,C){return this.transform({x,y:C})},matrix:function(x){return this.attr("transform",new s.Matrix(6==arguments.length?[].slice.call(arguments):x))},opacity:function(x){return this.attr("opacity",x)},dx:function(x){return this.x(new s.Number(x).plus(this instanceof s.FX?0:this.x()),!0)},dy:function(x){return this.y(new s.Number(x).plus(this instanceof s.FX?0:this.y()),!0)}}),s.extend(s.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(x){return this.node.getPointAtLength(x)}}),s.Set=s.invent({create:function(x){Array.isArray(x)?this.members=x:this.clear()},extend:{add:function(){for(var x=[].slice.call(arguments),C=0,T=x.length;C<T;C++)this.members.push(x[C]);return this},remove:function(x){var C=this.index(x);return C>-1&&this.members.splice(C,1),this},each:function(x){for(var C=0,T=this.members.length;C<T;C++)x.apply(this.members[C],[C,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(x){return this.index(x)>=0},index:function(x){return this.members.indexOf(x)},get:function(x){return this.members[x]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(x){return new s.Set(x)}}}),s.FX.Set=s.invent({create:function(x){this.set=x}}),s.Set.inherit=function(){var x=[];for(var C in s.Shape.prototype)"function"==typeof s.Shape.prototype[C]&&"function"!=typeof s.Set.prototype[C]&&x.push(C);for(var C in x.forEach(function(L){s.Set.prototype[L]=function(){for(var W=0,J=this.members.length;W<J;W++)this.members[W]&&"function"==typeof this.members[W][L]&&this.members[W][L].apply(this.members[W],arguments);return"animate"==L?this.fx||(this.fx=new s.FX.Set(this)):this}}),x=[],s.FX.prototype)"function"==typeof s.FX.prototype[C]&&"function"!=typeof s.FX.Set.prototype[C]&&x.push(C);x.forEach(function(T){s.FX.Set.prototype[T]=function(){for(var L=0,W=this.set.members.length;L<W;L++)this.set.members[L].fx[T].apply(this.set.members[L].fx,arguments);return this}})},s.extend(s.Element,{}),s.extend(s.Element,{remember:function(x,C){if("object"===ee(arguments[0]))for(var T in x)this.remember(T,x[T]);else{if(1==arguments.length)return this.memory()[x];this.memory()[x]=C}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var x=arguments.length-1;x>=0;x--)delete this.memory()[arguments[x]];return this},memory:function(){return this._memory||(this._memory={})}}),s.get=function(x){var C=i.getElementById(function(T){var L=(T||"").toString().match(s.regex.reference);if(L)return L[1]}(x)||x);return s.adopt(C)},s.select=function(x,C){return new s.Set(s.utils.map((C||i).querySelectorAll(x),function(T){return s.adopt(T)}))},s.extend(s.Parent,{select:function(x){return s.select(x,this.node)}});var N="abcdef".split("");if("function"!=typeof P.CustomEvent){var z=function(x,C){C=C||{bubbles:!1,cancelable:!1,detail:void 0};var T=i.createEvent("CustomEvent");return T.initCustomEvent(x,C.bubbles,C.cancelable,C.detail),T};z.prototype=P.Event.prototype,s.CustomEvent=z}else s.CustomEvent=P.CustomEvent;return s},void 0!==(Ae=function(){return Vi(gs,gs.document)}.call(Wi,Et,Wi,Is))&&(Is.exports=Ae),function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(u,p){return this.add(u,p),!u.attr("in")&&this.autoSetIn&&u.attr("in",this.source),u.attr("result")||u.attr("result",u),u},blend:function(u,p,m){return this.put(new SVG.BlendEffect(u,p,m))},colorMatrix:function(u,p){return this.put(new SVG.ColorMatrixEffect(u,p))},convolveMatrix:function(u){return this.put(new SVG.ConvolveMatrixEffect(u))},componentTransfer:function(u){return this.put(new SVG.ComponentTransferEffect(u))},composite:function(u,p,m){return this.put(new SVG.CompositeEffect(u,p,m))},flood:function(u,p){return this.put(new SVG.FloodEffect(u,p))},offset:function(u,p){return this.put(new SVG.OffsetEffect(u,p))},image:function(u){return this.put(new SVG.ImageEffect(u))},merge:function(){var u=[void 0];for(var p in arguments)u.push(arguments[p]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,u)))},gaussianBlur:function(u,p){return this.put(new SVG.GaussianBlurEffect(u,p))},morphology:function(u,p){return this.put(new SVG.MorphologyEffect(u,p))},diffuseLighting:function(u,p,m){return this.put(new SVG.DiffuseLightingEffect(u,p,m))},displacementMap:function(u,p,m,v,b){return this.put(new SVG.DisplacementMapEffect(u,p,m,v,b))},specularLighting:function(u,p,m,v){return this.put(new SVG.SpecularLightingEffect(u,p,m,v))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(u,p,m,v,b){return this.put(new SVG.TurbulenceEffect(u,p,m,v,b))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(u){var p=this.put(new SVG.Filter);return"function"==typeof u&&u.call(p,p),p}}),SVG.extend(SVG.Container,{filter:function(u){return this.defs().filter(u)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(u){return this.filterer=u instanceof SVG.Element?u:this.doc().filter(u),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(u){return this.filterer&&!0===u&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(u){return null==u?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",u)},result:function(u){return null==u?this.attr("result"):this.attr("result",u)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(u){return null==u?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",u)},result:function(u){return null==u?this.attr("result"):this.attr("result",u)},toString:function(){return this.result()}}});var P={blend:function(u,p){return this.parent()&&this.parent().blend(this,u,p)},colorMatrix:function(u,p){return this.parent()&&this.parent().colorMatrix(u,p).in(this)},convolveMatrix:function(u){return this.parent()&&this.parent().convolveMatrix(u).in(this)},componentTransfer:function(u){return this.parent()&&this.parent().componentTransfer(u).in(this)},composite:function(u,p){return this.parent()&&this.parent().composite(this,u,p)},flood:function(u,p){return this.parent()&&this.parent().flood(u,p)},offset:function(u,p){return this.parent()&&this.parent().offset(u,p).in(this)},image:function(u){return this.parent()&&this.parent().image(u)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(u,p){return this.parent()&&this.parent().gaussianBlur(u,p).in(this)},morphology:function(u,p){return this.parent()&&this.parent().morphology(u,p).in(this)},diffuseLighting:function(u,p,m){return this.parent()&&this.parent().diffuseLighting(u,p,m).in(this)},displacementMap:function(u,p,m,v){return this.parent()&&this.parent().displacementMap(this,u,p,m,v)},specularLighting:function(u,p,m,v){return this.parent()&&this.parent().specularLighting(u,p,m,v).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(u,p,m,v,b){return this.parent()&&this.parent().turbulence(u,p,m,v,b).in(this)}};SVG.extend(SVG.Effect,P),SVG.extend(SVG.ParentEffect,P),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(u){this.attr("in",u)}}});var i={blend:function(u,p,m){this.attr({in:u,in2:p,mode:m||"normal"})},colorMatrix:function(u,p){"matrix"==u&&(p=l(p)),this.attr({type:u,values:void 0===p?null:p})},convolveMatrix:function(u){u=l(u),this.attr({order:Math.sqrt(u.split(" ").length),kernelMatrix:u})},composite:function(u,p,m){this.attr({in:u,in2:p,operator:m})},flood:function(u,p){this.attr("flood-color",u),null!=p&&this.attr("flood-opacity",p)},offset:function(u,p){this.attr({dx:u,dy:p})},image:function(u){this.attr("href",u,SVG.xlink)},displacementMap:function(u,p,m,v,b){this.attr({in:u,in2:p,scale:m,xChannelSelector:v,yChannelSelector:b})},gaussianBlur:function(u,p){this.attr("stdDeviation",null!=u||null!=p?h(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(u,p){this.attr({operator:u,radius:p})},tile:function(){},turbulence:function(u,p,m,v,b){this.attr({numOctaves:p,seed:m,stitchTiles:v,baseFrequency:u,type:b})}},s={merge:function(){var u;if(arguments[0]instanceof SVG.Set){var p=this;arguments[0].each(function(v){this instanceof SVG.MergeNode?p.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&p.put(new SVG.MergeNode(this))})}else{u=Array.isArray(arguments[0])?arguments[0]:arguments;for(var m=0;m<u.length;m++)u[m]instanceof SVG.MergeNode?this.put(u[m]):this.put(new SVG.MergeNode(u[m]))}},componentTransfer:function(u){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(m){this[m]=new(SVG["Func"+m.toUpperCase()])("identity"),this.rgb.add(this[m]),this.node.appendChild(this[m].node)}.bind(this)),u)for(var p in u.rgb&&(["r","g","b"].forEach(function(m){this[m].attr(u.rgb)}.bind(this)),delete u.rgb),u)this[p].attr(u[p])},diffuseLighting:function(u,p,m){this.attr({surfaceScale:u,diffuseConstant:p,kernelUnitLength:m})},specularLighting:function(u,p,m,v){this.attr({surfaceScale:u,diffuseConstant:p,specularExponent:m,kernelUnitLength:v})}},r={distantLight:function(u,p){this.attr({azimuth:u,elevation:p})},pointLight:function(u,p,m){this.attr({x:u,y:p,z:m})},spotLight:function(u,p,m,v,b,_){this.attr({x:u,y:p,z:m,pointsAtX:v,pointsAtY:b,pointsAtZ:_})},mergeNode:function(u){this.attr("in",u)}};function l(u){return Array.isArray(u)&&(u=new SVG.Array(u)),u.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function h(u){if(!Array.isArray(u))return u;for(var p=0,m=u.length,v=[];p<m;p++)v.push(u[p]);return v.join(" ")}function d(){var u=function(){};for(var p in"function"==typeof arguments[arguments.length-1]&&(u=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var m in arguments[p])u(arguments[p][m],m,arguments[p])}["r","g","b","a"].forEach(function(u){r["Func"+u.toUpperCase()]=function(p){switch(this.attr("type",p),p){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),d(i,function(u,p){var m=p.charAt(0).toUpperCase()+p.slice(1);SVG[m+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+m)),u.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),d(s,function(u,p){var m=p.charAt(0).toUpperCase()+p.slice(1);SVG[m+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+m)),u.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),d(r,function(u,p){var m=p.charAt(0).toUpperCase()+p.slice(1);SVG[m]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+m)),u.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(u){return u instanceof SVG.MergeNode?this.add(u,0):this.add(new SVG.MergeNode(u),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(u){return null==u?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",u)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function P(h,d,u,p,m,v,b){for(var _=h.slice(d,u||b),A=p.slice(m,v||b),E=0,k={pos:[0,0],start:[0,0]},R={pos:[0,0],start:[0,0]};_[E]=i.call(k,_[E]),A[E]=i.call(R,A[E]),_[E][0]!=A[E][0]||"M"==_[E][0]||"A"==_[E][0]&&(_[E][4]!=A[E][4]||_[E][5]!=A[E][5])?(Array.prototype.splice.apply(_,[E,1].concat(r.call(k,_[E]))),Array.prototype.splice.apply(A,[E,1].concat(r.call(R,A[E])))):(_[E]=s.call(k,_[E]),A[E]=s.call(R,A[E])),++E!=_.length||E!=A.length;)E==_.length&&_.push(["C",k.pos[0],k.pos[1],k.pos[0],k.pos[1],k.pos[0],k.pos[1]]),E==A.length&&A.push(["C",R.pos[0],R.pos[1],R.pos[0],R.pos[1],R.pos[0],R.pos[1]]);return{start:_,dest:A}}function i(h){switch(h[0]){case"z":case"Z":h[0]="L",h[1]=this.start[0],h[2]=this.start[1];break;case"H":h[0]="L",h[2]=this.pos[1];break;case"V":h[0]="L",h[2]=h[1],h[1]=this.pos[0];break;case"T":h[0]="Q",h[3]=h[1],h[4]=h[2],h[1]=this.reflection[1],h[2]=this.reflection[0];break;case"S":h[0]="C",h[6]=h[4],h[5]=h[3],h[4]=h[2],h[3]=h[1],h[2]=this.reflection[1],h[1]=this.reflection[0]}return h}function s(h){var d=h.length;return this.pos=[h[d-2],h[d-1]],-1!="SCQT".indexOf(h[0])&&(this.reflection=[2*this.pos[0]-h[d-4],2*this.pos[1]-h[d-3]]),h}function r(h){var d=[h];switch(h[0]){case"M":return this.pos=this.start=[h[1],h[2]],d;case"L":h[5]=h[3]=h[1],h[6]=h[4]=h[2],h[1]=this.pos[0],h[2]=this.pos[1];break;case"Q":h[6]=h[4],h[5]=h[3],h[4]=1*h[4]/3+2*h[2]/3,h[3]=1*h[3]/3+2*h[1]/3,h[2]=1*this.pos[1]/3+2*h[2]/3,h[1]=1*this.pos[0]/3+2*h[1]/3;break;case"A":h=(d=function(u,p){var m,v,b,_,A,E,k,R,O,N,z,x,C,T,L,W,J,H,et,tt,at,pt,Zt,Xt,qt,ie,ge=Math.abs(p[1]),hi=Math.abs(p[2]),ji=p[3]%360,Lr=p[4],Sn=p[5],ci=p[6],An=p[7],we=new SVG.Point(u),ae=new SVG.Point(ci,An),ya=[];if(0===ge||0===hi||we.x===ae.x&&we.y===ae.y)return[["C",we.x,we.y,ae.x,ae.y,ae.x,ae.y]];for((v=(m=new SVG.Point((we.x-ae.x)/2,(we.y-ae.y)/2).transform((new SVG.Matrix).rotate(ji))).x*m.x/(ge*ge)+m.y*m.y/(hi*hi))>1&&(ge*=v=Math.sqrt(v),hi*=v),b=(new SVG.Matrix).rotate(ji).scale(1/ge,1/hi).rotate(-ji),we=we.transform(b),E=(_=[(ae=ae.transform(b)).x-we.x,ae.y-we.y])[0]*_[0]+_[1]*_[1],A=Math.sqrt(E),_[0]/=A,_[1]/=A,k=E<4?Math.sqrt(1-E/4):0,Lr===Sn&&(k*=-1),R=new SVG.Point((ae.x+we.x)/2+k*-_[1],(ae.y+we.y)/2+k*_[0]),O=new SVG.Point(we.x-R.x,we.y-R.y),N=new SVG.Point(ae.x-R.x,ae.y-R.y),z=Math.acos(O.x/Math.sqrt(O.x*O.x+O.y*O.y)),O.y<0&&(z*=-1),x=Math.acos(N.x/Math.sqrt(N.x*N.x+N.y*N.y)),N.y<0&&(x*=-1),Sn&&z>x&&(x+=2*Math.PI),!Sn&&z<x&&(x-=2*Math.PI),W=[],J=z,C=(x-z)/(T=Math.ceil(2*Math.abs(z-x)/Math.PI)),L=4*Math.tan(C/4)/3,at=0;at<=T;at++)et=Math.cos(J),H=Math.sin(J),tt=new SVG.Point(R.x+et,R.y+H),W[at]=[new SVG.Point(tt.x+L*H,tt.y-L*et),tt,new SVG.Point(tt.x-L*H,tt.y+L*et)],J+=C;for(W[0][0]=W[0][1].clone(),W[W.length-1][2]=W[W.length-1][1].clone(),b=(new SVG.Matrix).rotate(ji).scale(ge,hi).rotate(-ji),at=0,pt=W.length;at<pt;at++)W[at][0]=W[at][0].transform(b),W[at][1]=W[at][1].transform(b),W[at][2]=W[at][2].transform(b);for(at=1,pt=W.length;at<pt;at++)Zt=(tt=W[at-1][2]).x,Xt=tt.y,qt=(tt=W[at][0]).x,ie=tt.y,ci=(tt=W[at][1]).x,ya.push(["C",Zt,Xt,qt,ie,ci,An=tt.y]);return ya}(this.pos,h))[0]}return h[0]="C",this.pos=[h[5],h[6]],this.reflection=[2*h[5]-h[3],2*h[6]-h[4]],d}function l(h,d){if(!1===d)return!1;for(var u=d,p=h.length;u<p;++u)if("M"==h[u][0])return u;return!1}SVG.extend(SVG.PathArray,{morph:function(h){for(var d=this.value,u=this.parse(h),p=0,m=0,v=!1,b=!1;!1!==p||!1!==m;){var _;v=l(d,!1!==p&&p+1),b=l(u,!1!==m&&m+1),!1===p&&(p=0==(_=new SVG.PathArray(A.start).bbox()).height||0==_.width?d.push(d[0])-1:d.push(["M",_.x+_.width/2,_.y+_.height/2])-1),!1===m&&(m=0==(_=new SVG.PathArray(A.dest).bbox()).height||0==_.width?u.push(u[0])-1:u.push(["M",_.x+_.width/2,_.y+_.height/2])-1);var A=P(d,p,v,u,m,b);d=d.slice(0,p).concat(A.start,!1===v?[]:d.slice(v)),u=u.slice(0,m).concat(A.dest,!1===b?[]:u.slice(b)),p=!1!==v&&p+A.start.length,m=!1!==b&&m+A.dest.length}return this.value=d,this.destination=new SVG.PathArray,this.destination.value=u,this}})}(),function(){function P(i){i.remember("_draggable",this),this.el=i}P.prototype.init=function(i,s){var r=this;this.constraint=i,this.value=s,this.el.on("mousedown.drag",function(l){r.start(l)}),this.el.on("touchstart.drag",function(l){r.start(l)})},P.prototype.transformPoint=function(i,s){var r=(i=i||window.event).changedTouches&&i.changedTouches[0]||i;return this.p.x=r.clientX-(s||0),this.p.y=r.clientY,this.p.matrixTransform(this.m)},P.prototype.getBBox=function(){var i=this.el.bbox();return this.el instanceof SVG.Nested&&(i=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(i.x=this.el.x(),i.y=this.el.y()),i},P.prototype.start=function(i){if("click"!=i.type&&"mousedown"!=i.type&&"mousemove"!=i.type||1==(i.which||i.buttons)){var s=this;if(this.el.fire("beforedrag",{event:i,handler:this}),!this.el.event().defaultPrevented){i.preventDefault(),i.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var r,l=this.getBBox();if(this.el instanceof SVG.Text)switch(r=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":r/=2;break;case"start":r=0}this.startPoints={point:this.transformPoint(i,r),box:l,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(h){s.drag(h)}),SVG.on(window,"touchmove.drag",function(h){s.drag(h)}),SVG.on(window,"mouseup.drag",function(h){s.end(h)}),SVG.on(window,"touchend.drag",function(h){s.end(h)}),this.el.fire("dragstart",{event:i,p:this.startPoints.point,m:this.m,handler:this})}}},P.prototype.drag=function(i){var s=this.getBBox(),r=this.transformPoint(i),l=this.startPoints.box.x+r.x-this.startPoints.point.x,h=this.startPoints.box.y+r.y-this.startPoints.point.y,d=this.constraint,u=r.x-this.startPoints.point.x,p=r.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:i,p:r,m:this.m,handler:this}),this.el.event().defaultPrevented)return r;if("function"==typeof d){var m=d.call(this.el,l,h,this.m);"boolean"==typeof m&&(m={x:m,y:m}),!0===m.x?this.el.x(l):!1!==m.x&&this.el.x(m.x),!0===m.y?this.el.y(h):!1!==m.y&&this.el.y(m.y)}else"object"==typeof d&&(null!=d.minX&&l<d.minX?u=(l=d.minX)-this.startPoints.box.x:null!=d.maxX&&l>d.maxX-s.width&&(u=(l=d.maxX-s.width)-this.startPoints.box.x),null!=d.minY&&h<d.minY?p=(h=d.minY)-this.startPoints.box.y:null!=d.maxY&&h>d.maxY-s.height&&(p=(h=d.maxY-s.height)-this.startPoints.box.y),null!=d.snapToGrid&&(l-=l%d.snapToGrid,h-=h%d.snapToGrid,u-=u%d.snapToGrid,p-=p%d.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:u,y:p},!0):this.el.move(l,h));return r},P.prototype.end=function(i){var s=this.drag(i);this.el.fire("dragend",{event:i,p:s,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(i,s){"function"!=typeof i&&"object"!=typeof i||(s=i,i=!0);var r=this.remember("_draggable")||new P(this);return(i=void 0===i||i)?r.init(s||{},i):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function P(i){this.el=i,i.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(s,r,l){var h="string"!=typeof s?s:r[s];return l?h/2:h},this.pointCoords=function(s,r){var l=this.pointsList[s];return{x:this.pointCoord(l[0],r,"t"===s||"b"===s),y:this.pointCoord(l[1],r,"r"===s||"l"===s)}}}P.prototype.init=function(i,s){var r=this.el.bbox();this.options={};var l=this.el.selectize.defaults.points;for(var h in this.el.selectize.defaults)this.options[h]=this.el.selectize.defaults[h],void 0!==s[h]&&(this.options[h]=s[h]);var d=["points","pointsExclude"];for(var h in d){var u=this.options[d[h]];"string"==typeof u?u=u.length>0?u.split(/\s*,\s*/i):[]:"boolean"==typeof u&&"points"===d[h]&&(u=u?l:[]),this.options[d[h]]=u}this.options.points=[l,this.options.points].reduce(function(p,m){return p.filter(function(v){return m.indexOf(v)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(p,m){return p.filter(function(v){return m.indexOf(v)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(r.x,r.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(i):this.selectRect(i),this.observe(),this.cleanup()},P.prototype.selectPoints=function(i){return this.pointSelection.isSelected=i,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},P.prototype.getPointArray=function(){var i=this.el.bbox();return this.el.array().valueOf().map(function(s){return[s[0]-i.x,s[1]-i.y]})},P.prototype.drawPoints=function(){for(var i=this,s=this.getPointArray(),r=0,l=s.length;r<l;++r){var h=function(u){return function(p){(p=p||window.event).preventDefault?p.preventDefault():p.returnValue=!1,p.stopPropagation(),i.el.fire("point",{x:p.pageX||p.touches[0].pageX,y:p.pageY||p.touches[0].pageY,i:u,event:p})}}(r),d=this.drawPoint(s[r][0],s[r][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",h).on("mousedown",h);this.pointSelection.set.add(d)}},P.prototype.drawPoint=function(i,s){var r=this.options.pointType;switch(r){case"circle":return this.drawCircle(i,s);case"rect":return this.drawRect(i,s);default:if("function"==typeof r)return r.call(this,i,s);throw new Error("Unknown "+r+" point type!")}},P.prototype.drawCircle=function(i,s){return this.nested.circle(this.options.pointSize).center(i,s)},P.prototype.drawRect=function(i,s){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(i,s)},P.prototype.updatePointSelection=function(){var i=this.getPointArray();this.pointSelection.set.each(function(s){this.cx()===i[s][0]&&this.cy()===i[s][1]||this.center(i[s][0],i[s][1])})},P.prototype.updateRectSelection=function(){var i=this,s=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:s.width,height:s.height}),this.options.points.length&&this.options.points.map(function(l,h){var d=i.pointCoords(l,s);i.rectSelection.set.get(h+1).center(d.x,d.y)}),this.options.rotationPoint){var r=this.rectSelection.set.length();this.rectSelection.set.get(r-1).center(s.width/2,20)}},P.prototype.selectRect=function(i){var s=this,r=this.el.bbox();function l(u){return function(p){(p=p||window.event).preventDefault?p.preventDefault():p.returnValue=!1,p.stopPropagation(),s.el.fire(u,{x:p.pageX||p.touches[0].pageX,y:p.pageY||p.touches[0].pageY,event:p})}}if(this.rectSelection.isSelected=i,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(r.width,r.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(u,p){var m=s.pointCoords(u,r),v=s.drawPoint(m.x,m.y).attr("class",s.options.classPoints+"_"+u).on("mousedown",l(u)).on("touchstart",l(u));s.rectSelection.set.add(v)}),this.rectSelection.set.each(function(){this.addClass(s.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var h=function(u){(u=u||window.event).preventDefault?u.preventDefault():u.returnValue=!1,u.stopPropagation(),s.el.fire("rot",{x:u.pageX||u.touches[0].pageX,y:u.pageY||u.touches[0].pageY,event:u})},d=this.drawPoint(r.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",h).on("mousedown",h);this.rectSelection.set.add(d)}},P.prototype.handler=function(){var i=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(i.x,i.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},P.prototype.observe=function(){var i=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){i.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){i.handler()})},P.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(i,s){return"object"==typeof i&&(s=i,i=!0),(this.remember("_selectHandler")||new P(this)).init(void 0===i||i,s||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function P(i){i.remember("_resizeHandler",this),this.el=i,this.parameters={},this.lastUpdateCall=null,this.p=i.doc().node.createSVGPoint()}P.prototype.transformPoint=function(i,s,r){return this.p.x=i-(this.offset.x-window.pageXOffset),this.p.y=s-(this.offset.y-window.pageYOffset),this.p.matrixTransform(r||this.m)},P.prototype._extractPosition=function(i){return{x:null!=i.clientX?i.clientX:i.touches[0].clientX,y:null!=i.clientY?i.clientY:i.touches[0].clientY}},P.prototype.init=function(i){var s=this;if(this.stop(),"stop"!==i){for(var r in this.options={},this.el.resize.defaults)this.options[r]=this.el.resize.defaults[r],void 0!==i[r]&&(this.options[r]=i[r]);this.el.on("lt.resize",function(l){s.resize(l||window.event)}),this.el.on("rt.resize",function(l){s.resize(l||window.event)}),this.el.on("rb.resize",function(l){s.resize(l||window.event)}),this.el.on("lb.resize",function(l){s.resize(l||window.event)}),this.el.on("t.resize",function(l){s.resize(l||window.event)}),this.el.on("r.resize",function(l){s.resize(l||window.event)}),this.el.on("b.resize",function(l){s.resize(l||window.event)}),this.el.on("l.resize",function(l){s.resize(l||window.event)}),this.el.on("rot.resize",function(l){s.resize(l||window.event)}),this.el.on("point.resize",function(l){s.resize(l||window.event)}),this.update()}},P.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},P.prototype.resize=function(i){var s=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var r=this._extractPosition(i.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(r.x,r.y),x:i.detail.x,y:i.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==i.detail.i){var l=this.el.array().valueOf();this.parameters.i=i.detail.i,this.parameters.pointCoords=[l[i.detail.i][0],l[i.detail.i][1]]}switch(i.type){case"lt":this.calc=function(h,d){var u=this.snapToGrid(h,d);if(this.parameters.box.width-u[0]>0&&this.parameters.box.height-u[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+u[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-u[0]);u=this.checkAspectRatio(u),this.el.move(this.parameters.box.x+u[0],this.parameters.box.y+u[1]).size(this.parameters.box.width-u[0],this.parameters.box.height-u[1])}};break;case"rt":this.calc=function(h,d){var u=this.snapToGrid(h,d,2);if(this.parameters.box.width+u[0]>0&&this.parameters.box.height-u[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-u[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+u[0]);u=this.checkAspectRatio(u,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+u[1]).size(this.parameters.box.width+u[0],this.parameters.box.height-u[1])}};break;case"rb":this.calc=function(h,d){var u=this.snapToGrid(h,d,0);if(this.parameters.box.width+u[0]>0&&this.parameters.box.height+u[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-u[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+u[0]);u=this.checkAspectRatio(u),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+u[0],this.parameters.box.height+u[1])}};break;case"lb":this.calc=function(h,d){var u=this.snapToGrid(h,d,1);if(this.parameters.box.width-u[0]>0&&this.parameters.box.height+u[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+u[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-u[0]);u=this.checkAspectRatio(u,!0),this.el.move(this.parameters.box.x+u[0],this.parameters.box.y).size(this.parameters.box.width-u[0],this.parameters.box.height+u[1])}};break;case"t":this.calc=function(h,d){var u=this.snapToGrid(h,d,2);if(this.parameters.box.height-u[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+u[1]).height(this.parameters.box.height-u[1])}};break;case"r":this.calc=function(h,d){var u=this.snapToGrid(h,d,0);if(this.parameters.box.width+u[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+u[0])}};break;case"b":this.calc=function(h,d){var u=this.snapToGrid(h,d,0);if(this.parameters.box.height+u[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+u[1])}};break;case"l":this.calc=function(h,d){var u=this.snapToGrid(h,d,1);if(this.parameters.box.width-u[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+u[0],this.parameters.box.y).width(this.parameters.box.width-u[0])}};break;case"rot":this.calc=function(h,d){var u=h+this.parameters.p.x,p=d+this.parameters.p.y,m=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),v=Math.atan2(p-this.parameters.box.y-this.parameters.box.height/2,u-this.parameters.box.x-this.parameters.box.width/2),b=this.parameters.rotation+180*(v-m)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(b-b%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(h,d){var u=this.snapToGrid(h,d,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),p=this.el.array().valueOf();p[this.parameters.i][0]=this.parameters.pointCoords[0]+u[0],p[this.parameters.i][1]=this.parameters.pointCoords[1]+u[1],this.el.plot(p)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:i}),SVG.on(window,"touchmove.resize",function(h){s.update(h||window.event)}),SVG.on(window,"touchend.resize",function(){s.done()}),SVG.on(window,"mousemove.resize",function(h){s.update(h||window.event)}),SVG.on(window,"mouseup.resize",function(){s.done()})},P.prototype.update=function(i){if(i){var s=this._extractPosition(i),r=this.transformPoint(s.x,s.y),l=r.x-this.parameters.p.x,h=r.y-this.parameters.p.y;this.lastUpdateCall=[l,h],this.calc(l,h),this.el.fire("resizing",{dx:l,dy:h,event:i})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},P.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},P.prototype.snapToGrid=function(i,s,r,l){var h;return h=void 0!==l?[(r+i)%this.options.snapToGrid,(l+s)%this.options.snapToGrid]:[(this.parameters.box.x+i+(1&(r=r??3)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+s+(2&r?0:this.parameters.box.height))%this.options.snapToGrid],i<0&&(h[0]-=this.options.snapToGrid),s<0&&(h[1]-=this.options.snapToGrid),i-=Math.abs(h[0])<this.options.snapToGrid/2?h[0]:h[0]-(i<0?-this.options.snapToGrid:this.options.snapToGrid),s-=Math.abs(h[1])<this.options.snapToGrid/2?h[1]:h[1]-(s<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(i,s,r,l)},P.prototype.constraintToBox=function(i,s,r,l){var h,d,u=this.options.constraint||{};return void 0!==l?(h=r,d=l):(h=this.parameters.box.x+(1&r?0:this.parameters.box.width),d=this.parameters.box.y+(2&r?0:this.parameters.box.height)),void 0!==u.minX&&h+i<u.minX&&(i=u.minX-h),void 0!==u.maxX&&h+i>u.maxX&&(i=u.maxX-h),void 0!==u.minY&&d+s<u.minY&&(s=u.minY-d),void 0!==u.maxY&&d+s>u.maxY&&(s=u.maxY-d),[i,s]},P.prototype.checkAspectRatio=function(i,s){if(!this.options.saveAspectRatio)return i;var r=i.slice(),l=this.parameters.box.width/this.parameters.box.height,h=this.parameters.box.width+i[0],d=this.parameters.box.height-i[1],u=h/d;return u<l?(r[1]=h/l-this.parameters.box.height,s&&(r[1]=-r[1])):u>l&&(r[0]=this.parameters.box.width-d*l,s&&(r[0]=-r[0])),r},SVG.extend(SVG.Element,{resize:function(i){return(this.remember("_resizeHandler")||new P(this)).init(i||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var Cn=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new ft(this.ctx),this.ctx.axes=new ga(this.ctx),this.ctx.core=new cl(this.ctx.el,this.ctx),this.ctx.config=new ye({}),this.ctx.data=new hn(this.ctx),this.ctx.grid=new Ci(this.ctx),this.ctx.graphics=new U(this.ctx),this.ctx.coreUtils=new wt(this.ctx),this.ctx.crosshairs=new un(this.ctx),this.ctx.events=new Si(this.ctx),this.ctx.exports=new Ut(this.ctx),this.ctx.localization=new Ai(this.ctx),this.ctx.options=new yt,this.ctx.responsive=new Ls(this.ctx),this.ctx.series=new bt(this.ctx),this.ctx.theme=new Ps(this.ctx),this.ctx.formatters=new ds(this.ctx),this.ctx.titleSubtitle=new Ar(this.ctx),this.ctx.legend=new fn(this.ctx),this.ctx.toolbar=new gn(this.ctx),this.ctx.dimensions=new Mi(this.ctx),this.ctx.updateHelpers=new ul(this.ctx),this.ctx.zoomPanSelection=new le(this.ctx),this.ctx.w.globals.tooltip=new hl(this.ctx)}}]),P}(),Rr=function(){function P(i){lt(this,P),this.ctx=i,this.w=i.w}return rt(P,[{key:"clear",value:function(i){var s=i.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:s})}},{key:"killSVG",value:function(i){i.each(function(s,r){this.removeClass("*"),this.off(),this.stop()},!0),i.ungroup(),i.clear()}},{key:"clearDomElements",value:function(i){var s=this,l=this.w.globals.dom.Paper.node;l.parentNode&&l.parentNode.parentNode&&!i.isUpdating&&(l.parentNode.parentNode.style.minHeight="unset");var h=this.w.globals.dom.baseEl;h&&this.ctx.eventList.forEach(function(u){h.removeEventListener(u,s.ctx.events.documentEvent)});var d=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(d.Paper),d.Paper.remove(),d.elWrap=null,d.elGraphical=null,d.elAnnotations=null,d.elLegendWrap=null,d.baseEl=null,d.elGridRect=null,d.elGridRectMask=null,d.elGridRectMarkerMask=null,d.elForecastMask=null,d.elNonForecastMask=null,d.elDefs=null}}]),P}(),We=new WeakMap,dl=function(){function P(i,s){lt(this,P),this.opts=s,this.ctx=this,this.w=new Sr(s).init(),this.el=i,this.w.globals.cuid=B.randomId(),this.w.globals.chartID=this.w.config.chart.id?B.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Cn(this).initModules(),this.create=B.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return rt(P,[{key:"render",value:function(){var i=this;return new Promise(function(s,r){if(null!==i.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),i.w.config.chart.id&&Apex._chartInstances.push({id:i.w.globals.chartID,group:i.w.config.chart.group,chart:i}),i.setLocale(i.w.config.chart.defaultLocale);var l=i.w.config.chart.events.beforeMount;if("function"==typeof l&&l(i,i.w),i.events.fireEvent("beforeMount",[i,i.w]),window.addEventListener("resize",i.windowResizeHandler),function(v,b){var _=!1;if(v.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var A=v.getBoundingClientRect();"none"!==v.style.display&&0!==A.width||(_=!0)}var E=new ResizeObserver(function(k){_&&b.call(v,k),_=!0});v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(v.children).forEach(function(k){return E.observe(k)}):E.observe(v),We.set(b,E)}(i.el.parentNode,i.parentResizeHandler),!i.css){var h=i.el.getRootNode&&i.el.getRootNode(),d=B.is("ShadowRoot",h),u=i.el.ownerDocument,p=u.getElementById("apexcharts-css");!d&&p||(i.css=document.createElement("style"),i.css.id="apexcharts-css",i.css.textContent='.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-title:empty,\n.apexcharts-tooltip-text-y-label:empty,\n.apexcharts-tooltip-text-y-value:empty,\n.apexcharts-tooltip-text-goals-label:empty,\n.apexcharts-tooltip-text-goals-value:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-goals-group, \n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  display: flex;\n}\n.apexcharts-tooltip-text-goals-label:not(:empty),\n.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-box, .apexcharts-custom-tooltip {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-xaxis-annotation-label,\n.apexcharts-yaxis-annotation-label,\n.apexcharts-point-annotation-label,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}',d?h.prepend(i.css):u.head.appendChild(i.css))}var m=i.create(i.w.config.series,{});if(!m)return s(i);i.mount(m).then(function(){"function"==typeof i.w.config.chart.events.mounted&&i.w.config.chart.events.mounted(i,i.w),i.events.fireEvent("mounted",[i,i.w]),s(m)}).catch(function(v){r(v)})}else r(new Error("Element not found"))})}},{key:"create",value:function(i,s){var r=this.w;new Cn(this).initModules();var l=this.w.globals;if(l.noData=!1,l.animationEnded=!1,this.responsive.checkResponsiveConfig(s),r.config.xaxis.convertedCatToNumeric&&new us(r.config).convertCatToNumericXaxis(r.config,this.ctx),null===this.el||(this.core.setupElements(),"treemap"===r.config.chart.type&&(r.config.grid.show=!1,r.config.yaxis[0].show=!1),0===l.svgWidth))return l.animationEnded=!0,null;var h=wt.checkComboSeries(i);l.comboCharts=h.comboCharts,l.comboBarCount=h.comboBarCount;var d=i.every(function(b){return b.data&&0===b.data.length});(0===i.length||d)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(i),this.theme.init(),new Lt(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),l.noData&&l.collapsedSeries.length!==l.series.length&&!r.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),l.axisCharts&&(this.core.coreCalculations(),"category"!==r.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=r.globals.minX,this.ctx.toolbar.maxX=r.globals.maxX),this.formatters.heatmapLabelFormatters(),new wt(this).getLargestMarkerSize(),this.dimensions.plotCoords();var u=this.core.xySettings();this.grid.createGridMask();var p=this.core.plotChartType(i,u),m=new Xe(this);return m.bringForward(),r.config.dataLabels.background.enabled&&m.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:p,xyRatios:u,elInner:r.globals.dom.elGraphical,dimensions:{plot:{left:r.globals.translateX,top:r.globals.translateY,width:r.globals.gridWidth,height:r.globals.gridHeight}}}}},{key:"mount",value:function(){var i=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this,l=r.w;return new Promise(function(h,d){if(null===r.el)return d(new Error("Not enough data to display or target element not found"));(null===s||l.globals.allSeriesCollapsed)&&r.series.handleNoData(),"treemap"!==l.config.chart.type&&r.axes.drawAxis(l.config.chart.type,s.xyRatios),r.grid=new Ci(r);var u=r.grid.drawGrid();r.annotations=new At(r),r.annotations.drawImageAnnos(),r.annotations.drawTextAnnos(),"back"===l.config.grid.position&&u&&l.globals.dom.elGraphical.add(u.el);var p=new fs(i.ctx),m=new Hi(i.ctx);if(null!==u&&(p.xAxisLabelCorrections(u.xAxisTickWidth),m.setYAxisTextAlignments(),l.config.yaxis.map(function(_,A){-1===l.globals.ignoreYAxisIndexes.indexOf(A)&&m.yAxisTitleRotate(A,_.opposite)})),"back"===l.config.annotations.position&&(l.globals.dom.Paper.add(l.globals.dom.elAnnotations),r.annotations.drawAxesAnnotations()),Array.isArray(s.elGraph))for(var v=0;v<s.elGraph.length;v++)l.globals.dom.elGraphical.add(s.elGraph[v]);else l.globals.dom.elGraphical.add(s.elGraph);if("front"===l.config.grid.position&&u&&l.globals.dom.elGraphical.add(u.el),"front"===l.config.xaxis.crosshairs.position&&r.crosshairs.drawXCrosshairs(),"front"===l.config.yaxis[0].crosshairs.position&&r.crosshairs.drawYCrosshairs(),"front"===l.config.annotations.position&&(l.globals.dom.Paper.add(l.globals.dom.elAnnotations),r.annotations.drawAxesAnnotations()),!l.globals.noData){if(l.config.tooltip.enabled&&!l.globals.noData&&r.w.globals.tooltip.drawTooltip(s.xyRatios),l.globals.axisCharts&&(l.globals.isXNumeric||l.config.xaxis.convertedCatToNumeric||l.globals.isRangeBar))(l.config.chart.zoom.enabled||l.config.chart.selection&&l.config.chart.selection.enabled||l.config.chart.pan&&l.config.chart.pan.enabled)&&r.zoomPanSelection.init({xyRatios:s.xyRatios});else{var b=l.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(_){b[_]=!1})}l.config.chart.toolbar.show&&!l.globals.allSeriesCollapsed&&r.toolbar.createToolbar()}l.globals.memory.methodsToExec.length>0&&l.globals.memory.methodsToExec.forEach(function(_){_.method(_.params,!1,_.context)}),l.globals.axisCharts||l.globals.noData||r.core.resizeNonAxisCharts(),h(r)})}},{key:"destroy",value:function(){var i,s;window.removeEventListener("resize",this.windowResizeHandler),(s=We.get(i=this.parentResizeHandler))&&(s.disconnect(),We.delete(i));var r=this.w.config.chart.id;r&&Apex._chartInstances.forEach(function(l,h){l.id===B.escapeString(r)&&Apex._chartInstances.splice(h,1)}),new Rr(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(i){var s=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],h=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],d=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=this.w;return u.globals.selection=void 0,i.series&&(this.series.resetSeries(!1,!0,!1),i.series.length&&i.series[0].data&&(i.series=i.series.map(function(p,m){return s.updateHelpers._extendSeries(p,m)})),this.updateHelpers.revertDefaultAxisMinMax()),i.xaxis&&(i=this.updateHelpers.forceXAxisUpdate(i)),i.yaxis&&(i=this.updateHelpers.forceYAxisUpdate(i)),u.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),i.theme&&(i=this.theme.updateThemeOptions(i)),this.updateHelpers._updateOptions(i,r,l,h,d)}},{key:"updateSeries",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(i,s,r)}},{key:"appendSeries",value:function(i){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=this.w.config.series.slice();return l.push(i),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(l,s,r)}},{key:"appendData",value:function(i){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;r.w.globals.dataChanged=!0,r.series.getPreviousPaths();for(var l=r.w.config.series.slice(),h=0;h<l.length;h++)if(null!=i[h])for(var d=0;d<i[h].data.length;d++)l[h].data.push(i[h].data[d]);return r.w.config.series=l,s&&(r.w.globals.initialSeries=B.clone(r.w.config.series)),this.update()}},{key:"update",value:function(i){var s=this;return new Promise(function(r,l){new Rr(s.ctx).clear({isUpdating:!0});var h=s.create(s.w.config.series,i);if(!h)return r(s);s.mount(h).then(function(){"function"==typeof s.w.config.chart.events.updated&&s.w.config.chart.events.updated(s,s.w),s.events.fireEvent("updated",[s,s.w]),s.w.globals.isDirty=!0,r(s)}).catch(function(d){l(d)})})}},{key:"getSyncedCharts",value:function(){var i=this.getGroupedCharts(),s=[this];return i.length&&(s=[],i.forEach(function(r){s.push(r)})),s}},{key:"getGroupedCharts",value:function(){var i=this;return Apex._chartInstances.filter(function(s){if(s.group)return!0}).map(function(s){return i.w.config.chart.group===s.group?s.chart:i})}},{key:"toggleSeries",value:function(i){return this.series.toggleSeries(i)}},{key:"highlightSeriesOnLegendHover",value:function(i,s){return this.series.toggleSeriesOnHover(i,s)}},{key:"showSeries",value:function(i){this.series.showSeries(i)}},{key:"hideSeries",value:function(i){this.series.hideSeries(i)}},{key:"resetSeries",value:function(){var i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(i,s)}},{key:"addEventListener",value:function(i,s){this.events.addEventListener(i,s)}},{key:"removeEventListener",value:function(i,s){this.events.removeEventListener(i,s)}},{key:"addXaxisAnnotation",value:function(i){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,l=this;r&&(l=r),l.annotations.addXaxisAnnotationExternal(i,s,l)}},{key:"addYaxisAnnotation",value:function(i){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,l=this;r&&(l=r),l.annotations.addYaxisAnnotationExternal(i,s,l)}},{key:"addPointAnnotation",value:function(i){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,l=this;r&&(l=r),l.annotations.addPointAnnotationExternal(i,s,l)}},{key:"clearAnnotations",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,s=this;i&&(s=i),s.annotations.clearAnnotations(s)}},{key:"removeAnnotation",value:function(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this;s&&(r=s),r.annotations.removeAnnotation(r,i)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(i,s){return this.coreUtils.getSeriesTotalsXRange(i,s)}},{key:"getHighestValueInSeries",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=new cn(this.ctx);return s.getMinYMaxY(i).highestY}},{key:"getLowestValueInSeries",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=new cn(this.ctx);return s.getMinYMaxY(i).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(i,s){return this.updateHelpers.toggleDataPointSelection(i,s)}},{key:"zoomX",value:function(i,s){this.ctx.toolbar.zoomUpdateOptions(i,s)}},{key:"setLocale",value:function(i){this.localization.setCurrentLocaleValues(i)}},{key:"dataURI",value:function(i){return new Ut(this.ctx).dataURI(i)}},{key:"exportToCSV",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new Ut(this.ctx);return s.exportToCSV(i)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var i=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){i.w.globals.resized=!0,i.w.globals.dataChanged=!1,i.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var i=this.w.config.chart.redrawOnWindowResize;"function"==typeof i&&(i=i()),i&&this._windowResize()}}],[{key:"getChartByID",value:function(i){var s=B.escapeString(i),r=Apex._chartInstances.filter(function(l){return l.id===s})[0];return r&&r.chart}},{key:"initOnLoad",value:function(){for(var i=document.querySelectorAll("[data-apexcharts]"),s=0;s<i.length;s++)new P(i[s],JSON.parse(i[s].getAttribute("data-options"))).render()}},{key:"exec",value:function(i,s){var r=this.getChartByID(i);if(r){r.w.globals.isExecCalled=!0;var l=null;if(-1!==r.publicMethods.indexOf(s)){for(var h=arguments.length,d=new Array(h>2?h-2:0),u=2;u<h;u++)d[u-2]=arguments[u];l=r[s].apply(r,d)}return l}}},{key:"merge",value:function(i,s){return B.extend(i,s)}}]),P}();Is.exports=dl},2402:function(Is){Is.exports=function(){"use strict";function Wi(K,Q,ot,B,ft){!function ct(U,wt,zt,Ot,jt){for(;Ot>zt;){if(Ot-zt>600){var Wt=Ot-zt+1,Qt=wt-zt+1,yt=Math.log(Wt),At=.5*Math.exp(2*yt/3),se=.5*Math.sqrt(yt*At*(Wt-At)/Wt)*(Qt-Wt/2<0?-1:1);ct(U,wt,Math.max(zt,Math.floor(wt-Qt*At/Wt+se)),Math.min(Ot,Math.floor(wt+(Wt-Qt)*At/Wt+se)),jt)}var Xe=U[wt],ri=zt,bt=Ot;for(Et(U,zt,wt),jt(U[Ot],Xe)>0&&Et(U,zt,Ot);ri<bt;){for(Et(U,ri,bt),ri++,bt--;jt(U[ri],Xe)<0;)ri++;for(;jt(U[bt],Xe)>0;)bt--}0===jt(U[zt],Xe)?Et(U,zt,bt):Et(U,++bt,Ot),bt<=wt&&(zt=bt+1),wt<=bt&&(Ot=bt-1)}}(K,Q,ot||0,B||K.length-1,ft||Ae)}function Et(K,Q,ot){var B=K[Q];K[Q]=K[ot],K[ot]=B}function Ae(K,Q){return K<Q?-1:K>Q?1:0}var Vt=function(K){void 0===K&&(K=9),this._maxEntries=Math.max(4,K),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Mt(K,Q,ot){if(!ot)return Q.indexOf(K);for(var B=0;B<Q.length;B++)if(ot(K,Q[B]))return B;return-1}function ee(K,Q){lt(K,0,K.children.length,Q,K)}function lt(K,Q,ot,B,ft){ft||(ft=Re(null)),ft.minX=1/0,ft.minY=1/0,ft.maxX=-1/0,ft.maxY=-1/0;for(var ct=Q;ct<ot;ct++){var U=K.children[ct];fe(ft,K.leaf?B(U):U)}return ft}function fe(K,Q){return K.minX=Math.min(K.minX,Q.minX),K.minY=Math.min(K.minY,Q.minY),K.maxX=Math.max(K.maxX,Q.maxX),K.maxY=Math.max(K.maxY,Q.maxY),K}function rt(K,Q){return K.minX-Q.minX}function Bi(K,Q){return K.minY-Q.minY}function ze(K){return(K.maxX-K.minX)*(K.maxY-K.minY)}function wi(K){return K.maxX-K.minX+(K.maxY-K.minY)}function Ie(K,Q){return K.minX<=Q.minX&&K.minY<=Q.minY&&Q.maxX<=K.maxX&&Q.maxY<=K.maxY}function ni(K,Q){return Q.minX<=K.maxX&&Q.minY<=K.maxY&&Q.maxX>=K.minX&&Q.maxY>=K.minY}function Re(K){return{children:K,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function cs(K,Q,ot,B,ft){for(var ct=[Q,ot];ct.length;)if(!((ot=ct.pop())-(Q=ct.pop())<=B)){var U=Q+Math.ceil((ot-Q)/B/2)*B;Wi(K,U,Q,ot,ft),ct.push(Q,U,U,ot)}}return Vt.prototype.all=function(){return this._all(this.data,[])},Vt.prototype.search=function(K){var Q=this.data,ot=[];if(!ni(K,Q))return ot;for(var B=this.toBBox,ft=[];Q;){for(var ct=0;ct<Q.children.length;ct++){var U=Q.children[ct],wt=Q.leaf?B(U):U;ni(K,wt)&&(Q.leaf?ot.push(U):Ie(K,wt)?this._all(U,ot):ft.push(U))}Q=ft.pop()}return ot},Vt.prototype.collides=function(K){var Q=this.data;if(!ni(K,Q))return!1;for(var ot=[];Q;){for(var B=0;B<Q.children.length;B++){var ft=Q.children[B],ct=Q.leaf?this.toBBox(ft):ft;if(ni(K,ct)){if(Q.leaf||Ie(K,ct))return!0;ot.push(ft)}}Q=ot.pop()}return!1},Vt.prototype.load=function(K){if(!K||!K.length)return this;if(K.length<this._minEntries){for(var Q=0;Q<K.length;Q++)this.insert(K[Q]);return this}var ot=this._build(K.slice(),0,K.length-1,0);if(this.data.children.length)if(this.data.height===ot.height)this._splitRoot(this.data,ot);else{if(this.data.height<ot.height){var B=this.data;this.data=ot,ot=B}this._insert(ot,this.data.height-ot.height-1,!0)}else this.data=ot;return this},Vt.prototype.insert=function(K){return K&&this._insert(K,this.data.height-1),this},Vt.prototype.clear=function(){return this.data=Re([]),this},Vt.prototype.remove=function(K,Q){if(!K)return this;for(var ot,B,ft,ct=this.data,U=this.toBBox(K),wt=[],zt=[];ct||wt.length;){if(ct||(ct=wt.pop(),B=wt[wt.length-1],ot=zt.pop(),ft=!0),ct.leaf){var Ot=Mt(K,ct.children,Q);if(-1!==Ot)return ct.children.splice(Ot,1),wt.push(ct),this._condense(wt),this}ft||ct.leaf||!Ie(ct,U)?B?(ot++,ct=B.children[ot],ft=!1):ct=null:(wt.push(ct),zt.push(ot),ot=0,B=ct,ct=ct.children[0])}return this},Vt.prototype.toBBox=function(K){return K},Vt.prototype.compareMinX=function(K,Q){return K.minX-Q.minX},Vt.prototype.compareMinY=function(K,Q){return K.minY-Q.minY},Vt.prototype.toJSON=function(){return this.data},Vt.prototype.fromJSON=function(K){return this.data=K,this},Vt.prototype._all=function(K,Q){for(var ot=[];K;)K.leaf?Q.push.apply(Q,K.children):ot.push.apply(ot,K.children),K=ot.pop();return Q},Vt.prototype._build=function(K,Q,ot,B){var ft,ct=ot-Q+1,U=this._maxEntries;if(ct<=U)return ee(ft=Re(K.slice(Q,ot+1)),this.toBBox),ft;B||(B=Math.ceil(Math.log(ct)/Math.log(U)),U=Math.ceil(ct/Math.pow(U,B-1))),(ft=Re([])).leaf=!1,ft.height=B;var wt=Math.ceil(ct/U),zt=wt*Math.ceil(Math.sqrt(U));cs(K,Q,ot,zt,this.compareMinX);for(var Ot=Q;Ot<=ot;Ot+=zt){var jt=Math.min(Ot+zt-1,ot);cs(K,Ot,jt,wt,this.compareMinY);for(var Wt=Ot;Wt<=jt;Wt+=wt){var Qt=Math.min(Wt+wt-1,jt);ft.children.push(this._build(K,Wt,Qt,B-1))}}return ee(ft,this.toBBox),ft},Vt.prototype._chooseSubtree=function(K,Q,ot,B){for(;B.push(Q),!Q.leaf&&B.length-1!==ot;){for(var ft=1/0,ct=1/0,U=void 0,wt=0;wt<Q.children.length;wt++){var zt=Q.children[wt],Ot=ze(zt),jt=(Wt=K,Qt=zt,(Math.max(Qt.maxX,Wt.maxX)-Math.min(Qt.minX,Wt.minX))*(Math.max(Qt.maxY,Wt.maxY)-Math.min(Qt.minY,Wt.minY))-Ot);jt<ct?(ct=jt,ft=Ot<ft?Ot:ft,U=zt):jt===ct&&Ot<ft&&(ft=Ot,U=zt)}Q=U||Q.children[0]}var Wt,Qt;return Q},Vt.prototype._insert=function(K,Q,ot){var B=ot?K:this.toBBox(K),ft=[],ct=this._chooseSubtree(B,this.data,Q,ft);for(ct.children.push(K),fe(ct,B);Q>=0&&ft[Q].children.length>this._maxEntries;)this._split(ft,Q),Q--;this._adjustParentBBoxes(B,ft,Q)},Vt.prototype._split=function(K,Q){var ot=K[Q],B=ot.children.length,ft=this._minEntries;this._chooseSplitAxis(ot,ft,B);var ct=this._chooseSplitIndex(ot,ft,B),U=Re(ot.children.splice(ct,ot.children.length-ct));U.height=ot.height,U.leaf=ot.leaf,ee(ot,this.toBBox),ee(U,this.toBBox),Q?K[Q-1].children.push(U):this._splitRoot(ot,U)},Vt.prototype._splitRoot=function(K,Q){this.data=Re([K,Q]),this.data.height=K.height+1,this.data.leaf=!1,ee(this.data,this.toBBox)},Vt.prototype._chooseSplitIndex=function(K,Q,ot){for(var B,ft,ct,U,wt,zt,Ot,jt=1/0,Wt=1/0,Qt=Q;Qt<=ot-Q;Qt++){var yt=lt(K,0,Qt,this.toBBox),At=lt(K,Qt,ot,this.toBBox),se=(ft=yt,ct=At,void 0,void 0,void 0,void 0,U=Math.max(ft.minX,ct.minX),wt=Math.max(ft.minY,ct.minY),zt=Math.min(ft.maxX,ct.maxX),Ot=Math.min(ft.maxY,ct.maxY),Math.max(0,zt-U)*Math.max(0,Ot-wt)),Lt=ze(yt)+ze(At);se<jt?(jt=se,B=Qt,Wt=Lt<Wt?Lt:Wt):se===jt&&Lt<Wt&&(Wt=Lt,B=Qt)}return B||ot-Q},Vt.prototype._chooseSplitAxis=function(K,Q,ot){var B=K.leaf?this.compareMinX:rt,ft=K.leaf?this.compareMinY:Bi;this._allDistMargin(K,Q,ot,B)<this._allDistMargin(K,Q,ot,ft)&&K.children.sort(B)},Vt.prototype._allDistMargin=function(K,Q,ot,B){K.children.sort(B);for(var ft=this.toBBox,ct=lt(K,0,Q,ft),U=lt(K,ot-Q,ot,ft),wt=wi(ct)+wi(U),zt=Q;zt<ot-Q;zt++){var Ot=K.children[zt];fe(ct,K.leaf?ft(Ot):Ot),wt+=wi(ct)}for(var jt=ot-Q-1;jt>=Q;jt--){var Wt=K.children[jt];fe(U,K.leaf?ft(Wt):Wt),wt+=wi(U)}return wt},Vt.prototype._adjustParentBBoxes=function(K,Q,ot){for(var B=ot;B>=0;B--)fe(Q[B],K)},Vt.prototype._condense=function(K){for(var Q=K.length-1,ot=void 0;Q>=0;Q--)0===K[Q].children.length?Q>0?(ot=K[Q-1].children).splice(ot.indexOf(K[Q]),1):this.clear():ee(K[Q],this.toBBox)},Vt}()},9038:()=>{}}]);