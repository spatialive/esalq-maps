(self.webpackChunkteeb_webmap=self.webpackChunkteeb_webmap||[]).push([[795],{1795:(ds,Ai,_e)=>{"use strict";_e.r(Ai),_e.d(Ai,{LayersModule:()=>$p});var bt=_e(6895),Ye=_e(6962);function Je(r){r.stopPropagation()}const rt=class Ce{constructor(e){this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},Tt=class ki{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function _t(r,e){return r>e?1:r<e?-1:0}function jt(r,e,s){const a=r.length;if(r[0]<=e)return 0;if(e<=r[a-1])return a-1;{let c;if(s>0){for(c=1;c<a;++c)if(r[c]<e)return c-1}else if(s<0){for(c=1;c<a;++c)if(r[c]<=e)return c}else for(c=1;c<a;++c){if(r[c]==e)return c;if(r[c]<e)return"function"==typeof s?s(e,r[c-1],r[c])>0?c-1:c:r[c-1]-e<e-r[c]?c-1:c}return a-1}}function Ct(r,e,s){for(;e<s;){const a=r[e];r[e]=r[s],r[s]=a,++e,--s}}function ji(r,e){const s=Array.isArray(e)?e:[e],a=s.length;for(let c=0;c<a;c++)r[r.length]=s[c]}function J(r,e){const s=r.length;if(s!==e.length)return!1;for(let a=0;a<s;a++)if(r[a]!==e[a])return!1;return!0}function le(){return!0}function oe(){return!1}function j(){}function Le(r){for(const e in r)delete r[e]}function Be(r){let e;for(e in r)return!1;return!e}const Ue=class ze extends Tt{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,s){if(!e||!s)return;const a=this.listeners_||(this.listeners_={}),c=a[e]||(a[e]=[]);c.includes(s)||c.push(s)}dispatchEvent(e){const s="string"==typeof e,a=s?e:e.type,c=this.listeners_&&this.listeners_[a];if(!c)return;const d=s?new rt(e):e;d.target||(d.target=this.eventTarget_||this);const m=this.dispatching_||(this.dispatching_={}),b=this.pendingRemovals_||(this.pendingRemovals_={});let v;a in m||(m[a]=0,b[a]=0),++m[a];for(let S=0,A=c.length;S<A;++S)if(v="handleEvent"in c[S]?c[S].handleEvent(d):c[S].call(this,d),!1===v||d.propagationStopped){v=!1;break}if(0==--m[a]){let S=b[a];for(delete b[a];S--;)this.removeEventListener(a,j);delete m[a]}return v}disposeInternal(){this.listeners_&&Le(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,s){const a=this.listeners_&&this.listeners_[e];if(a){const c=a.indexOf(s);-1!==c&&(this.pendingRemovals_&&e in this.pendingRemovals_?(a[c]=j,++this.pendingRemovals_[e]):(a.splice(c,1),0===a.length&&delete this.listeners_[e]))}}};function we(r,e,s,a,c){if(a&&a!==r&&(s=s.bind(a)),c){const m=s;s=function(){r.removeEventListener(e,s),m.apply(this,arguments)}}const d={target:r,type:e,listener:s};return r.addEventListener(e,s),d}function Qe(r,e,s,a){return we(r,e,s,a,!0)}function Ie(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Le(r))}const Ut=class ri extends Ue{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(e,s){if(Array.isArray(e)){const a=e.length,c=new Array(a);for(let d=0;d<a;++d)c[d]=we(this,e[d],s);return c}return we(this,e,s)}onceInternal(e,s){let a;if(Array.isArray(e)){const c=e.length;a=new Array(c);for(let d=0;d<c;++d)a[d]=Qe(this,e[d],s)}else a=Qe(this,e,s);return s.ol_key=a,a}unInternal(e,s){const a=s.ol_key;if(a)!function It(r){if(Array.isArray(r))for(let e=0,s=r.length;e<s;++e)Ie(r[e]);else Ie(r)}(a);else if(Array.isArray(e))for(let c=0,d=e.length;c<d;++c)this.removeEventListener(e[c],s);else this.removeEventListener(e,s)}};function pe(){throw new Error("Unimplemented abstract method.")}let Ca=0;function Me(r){return r.ol_uid||(r.ol_uid=String(++Ca))}class gs extends rt{constructor(e,s,a){super(e),this.key=s,this.oldValue=a}}const ut=class Ui extends Ut{constructor(e){super(),Me(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let s;return this.values_&&this.values_.hasOwnProperty(e)&&(s=this.values_[e]),s}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,s){let a;a=`change:${e}`,this.hasListener(a)&&this.dispatchEvent(new gs(a,e,s)),a="propertychange",this.hasListener(a)&&this.dispatchEvent(new gs(a,e,s))}addChangeListener(e,s){this.addEventListener(`change:${e}`,s)}removeChangeListener(e,s){this.removeEventListener(`change:${e}`,s)}set(e,s,a){const c=this.values_||(this.values_={});if(a)c[e]=s;else{const d=c[e];c[e]=s,d!==s&&this.notify(e,d)}}setProperties(e,s){for(const a in e)this.set(a,e[a],s)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,s){if(this.values_&&e in this.values_){const a=this.values_[e];delete this.values_[e],Be(this.values_)&&(this.values_=null),s||this.notify(e,a)}}},Sa={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class yn extends Error{constructor(e){const s=Sa[e];super(s),this.code=e,this.name="AssertionError",this.message=s}}const Zi=yn;function Ee(r,e){if(!r)throw new Zi(e)}function Ve(r,e,s){return Math.min(Math.max(r,e),s)}function Ki(r,e,s,a,c,d){const m=c-s,b=d-a;if(0!==m||0!==b){const v=((r-s)*m+(e-a)*b)/(m*m+b*b);v>1?(s=c,a=d):v>0&&(s+=m*v,a+=b*v)}return oi(r,e,s,a)}function oi(r,e,s,a){const c=s-r,d=a-e;return c*c+d*d}function Ti(r){return r*Math.PI/180}function Ii(r,e){const s=r%e;return s*e<0?s+e:s}function li(r,e,s){return r+s*(e-r)}function Ys(r,e){const s=Math.pow(10,e);return Math.round(r*s)/s}function fs(r,e){return Math.floor(Ys(r,e))}function ps(r,e){return Math.ceil(Ys(r,e))}const wn=class Aa extends ut{constructor(e){super(),this.background_=e.background;const s=Object.assign({},e);"object"==typeof e.properties&&(delete s.properties,Object.assign(s,e.properties)),s.opacity=void 0!==e.opacity?e.opacity:1,Ee("number"==typeof s.opacity,64),s.visible=void 0===e.visible||e.visible,s.zIndex=e.zIndex,s.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,s.minResolution=void 0!==e.minResolution?e.minResolution:0,s.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,s.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,this.className_=void 0!==s.className?s.className:"ol-layer",delete s.className,this.setProperties(s),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const s=this.state_||{layer:this,managed:void 0===e||e},a=this.getZIndex();return s.opacity=Ve(Math.round(100*this.getOpacity())/100,0,1),s.visible=this.getVisible(),s.extent=this.getExtent(),s.zIndex=void 0!==a||s.managed?a:1/0,s.maxResolution=this.getMaxResolution(),s.minResolution=Math.max(this.getMinResolution(),0),s.minZoom=this.getMinZoom(),s.maxZoom=this.getMaxZoom(),this.state_=s,s}getLayersArray(e){return pe()}getLayerStatesArray(e){return pe()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return pe()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set("extent",e)}setMaxResolution(e){this.set("maxResolution",e)}setMinResolution(e){this.set("minResolution",e)}setMaxZoom(e){this.set("maxZoom",e)}setMinZoom(e){this.set("minZoom",e)}setOpacity(e){Ee("number"==typeof e,64),this.set("opacity",e)}setVisible(e){this.set("visible",e)}setZIndex(e){this.set("zIndex",e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}};function Ws(r,e){if(!r.visible)return!1;const s=e.resolution;if(s<r.minResolution||s>=r.maxResolution)return!1;const a=e.zoom;return a>r.minZoom&&a<=r.maxZoom}const ci=class ka extends wn{constructor(e){const s=Object.assign({},e);delete s.source,super(s),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(e.source?e.source:null)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ie(this.sourceChangeKey_),this.sourceChangeKey_=null);const e=this.getSource();e&&(this.sourceChangeKey_=we(e,"change",this.handleSourceChange_,this)),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(s=>s([]))}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}render(e,s){const a=this.getRenderer();if(a.prepareFrame(e))return this.rendered=!0,a.renderFrame(e,s)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set("map",e)}getMapInternal(){return this.get("map")}setMap(e){this.mapPrecomposeKey_&&(Ie(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ie(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=we(e,"precompose",function(s){const c=s.frameState.layerStatesArray,d=this.getLayerState(!1);Ee(!c.some(function(m){return m.layer===d.layer}),67),c.push(d)},this),this.mapRenderKey_=we(this,"change",e.render,e),this.changed())}setSource(e){this.set("source",e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}},Cn=class _n extends ci{constructor(e){e=e||{};const s=Object.assign({},e);delete s.preload,delete s.useInterimTilesOnError,super(s),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(e){this.set("preload",e)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(e){this.set("useInterimTilesOnError",e)}getData(e){return super.getData(e)}},Ea=class Sn extends Ut{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return pe()}getData(e){return null}prepareFrame(e){return pe()}renderFrame(e,s){return pe()}loadedTileCallback(e,s,a){e[s]||(e[s]={}),e[s][a.tileCoord.toString()]=a}createLoadedTileFinder(e,s,a){return function(c,d){const m=this.loadedTileCallback.bind(this,a,c);return e.forEachLoadedTile(s,c,d,m)}.bind(this)}forEachFeatureAtCoordinate(e,s,a,c,d){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){2===e.target.getState()&&this.renderIfReadyAndVisible()}loadImage(e){let s=e.getState();return 2!=s&&3!=s&&e.addEventListener("change",this.boundHandleImageChange_),0==s&&(e.load(),s=e.getState()),2==s}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},kn=class An extends rt{constructor(e,s,a,c){super(e),this.inversePixelTransform=s,this.frameState=a,this.context=c}},Kt=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Ta=Kt.includes("firefox"),Bs=(Kt.includes("safari")&&!Kt.includes("chrom")&&(Kt.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Kt)),Kt.includes("webkit")&&!Kt.includes("edge")),En=Kt.includes("macintosh"),Tn=typeof devicePixelRatio<"u"?devicePixelRatio:1,xs=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,In=typeof Image<"u"&&Image.prototype.decode,Ln=function(){let r=!1;try{const e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return r}();function nt(r,e){const s=e[0],a=e[1];return e[0]=r[0]*s+r[2]*a+r[4],e[1]=r[1]*s+r[3]*a+r[5],e}function Rt(r,e,s,a,c,d,m,b){const v=Math.sin(d),S=Math.cos(d);return r[0]=a*S,r[1]=c*v,r[2]=-a*v,r[3]=c*S,r[4]=m*a*S-b*a*v+e,r[5]=m*c*v+b*c*S+s,r}function t(r,e){const s=function i(r){return r[0]*r[3]-r[1]*r[2]}(e);Ee(0!==s,32);const a=e[0],c=e[1],d=e[2],m=e[3],b=e[4],v=e[5];return r[0]=m/s,r[1]=-c/s,r[2]=-d/s,r[3]=a/s,r[4]=(d*v-m*b)/s,r[5]=-(a*v-c*b)/s,r}let n;function o(r){const e="matrix("+r.join(", ")+")";if(xs)return e;const s=n||(n=document.createElement("div"));return s.style.transform=e,s.style.transform}new Array(6);const l=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,u=/^([a-z]*)$|^hsla?\(.*\)$/i;function h(r){return"string"==typeof r?r:C(r)}const f=function(){const e={};let s=0;return function(a){let c;if(e.hasOwnProperty(a))c=e[a];else{if(s>=1024){let d=0;for(const m in e)0==(3&d++)&&(delete e[m],--s)}c=function y(r){let e,s,a,c,d;if(u.exec(r)&&(r=function g(r){const e=document.createElement("div");if(e.style.color=r,""!==e.style.color){document.body.appendChild(e);const s=getComputedStyle(e).color;return document.body.removeChild(e),s}return""}(r)),l.exec(r)){const m=r.length-1;let b;b=m<=4?1:2;const v=4===m||8===m;e=parseInt(r.substr(1+0*b,b),16),s=parseInt(r.substr(1+1*b,b),16),a=parseInt(r.substr(1+2*b,b),16),c=v?parseInt(r.substr(1+3*b,b),16):255,1==b&&(e=(e<<4)+e,s=(s<<4)+s,a=(a<<4)+a,v&&(c=(c<<4)+c)),d=[e,s,a,c/255]}else r.startsWith("rgba(")?(d=r.slice(5,-1).split(",").map(Number),w(d)):r.startsWith("rgb(")?(d=r.slice(4,-1).split(",").map(Number),d.push(1),w(d)):Ee(!1,14);return d}(a),e[a]=c,++s}return c}}();function x(r){return Array.isArray(r)?r:f(r)}function w(r){return r[0]=Ve(r[0]+.5|0,0,255),r[1]=Ve(r[1]+.5|0,0,255),r[2]=Ve(r[2]+.5|0,0,255),r[3]=Ve(r[3],0,1),r}function C(r){let e=r[0];e!=(0|e)&&(e=e+.5|0);let s=r[1];s!=(0|s)&&(s=s+.5|0);let a=r[2];return a!=(0|a)&&(a=a+.5|0),"rgba("+e+","+s+","+a+","+(void 0===r[3]?1:Math.round(100*r[3])/100)+")"}function k(r,e,s,a){let c;return c=s&&s.length?s.shift():xs?new OffscreenCanvas(r||300,e||300):document.createElement("canvas"),r&&(c.width=r),e&&(c.height=e),c.getContext("2d",a)}function I(r){const e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function P(r){let e=r.offsetWidth;const s=getComputedStyle(r);return e+=parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),e}function O(r){let e=r.offsetHeight;const s=getComputedStyle(r);return e+=parseInt(s.marginTop,10)+parseInt(s.marginBottom,10),e}function D(r,e){const s=e.parentNode;s&&s.replaceChild(r,e)}function p(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}function _(r){for(;r.lastChild;)r.removeChild(r.lastChild)}function z(r){const e=[1/0,1/0,-1/0,-1/0];for(let s=0,a=r.length;s<a;++s)et(e,r[s]);return e}function W(r,e,s){return s?(s[0]=r[0]-e,s[1]=r[1]-e,s[2]=r[2]+e,s[3]=r[3]+e,s):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function ee(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function Q(r,e,s){let a,c;return a=e<r[0]?r[0]-e:r[2]<e?e-r[2]:0,c=s<r[1]?r[1]-s:r[3]<s?s-r[3]:0,a*a+c*c}function ie(r,e){return He(r,e[0],e[1])}function he(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function He(r,e,s){return r[0]<=e&&e<=r[2]&&r[1]<=s&&s<=r[3]}function Fe(r,e){const m=e[0],b=e[1];let v=0;return m<r[0]?v|=16:m>r[2]&&(v|=4),b<r[1]?v|=8:b>r[3]&&(v|=2),0===v&&(v=1),v}function $e(r,e,s,a,c){return c?(c[0]=r,c[1]=e,c[2]=s,c[3]=a,c):[r,e,s,a]}function ot(r){return $e(1/0,1/0,-1/0,-1/0,r)}function Jt(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function et(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function so(r,e,s,a,c){for(;s<a;s+=c)Lc(r,e[s],e[s+1]);return r}function Lc(r,e,s){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],s),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],s)}function no(r,e){let s;return s=e(Dn(r)),!!(s||(s=e(Vs(r)),s)||(s=e(Nn(r)),s)||(s=e(Mi(r)),s))&&s}function On(r){let e=0;return Oa(r)||(e=Ze(r)*Bt(r)),e}function Dn(r){return[r[0],r[1]]}function Vs(r){return[r[2],r[1]]}function ys(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function Rc(r,e){let s;return"bottom-left"===e?s=Dn(r):"bottom-right"===e?s=Vs(r):"top-left"===e?s=Mi(r):"top-right"===e?s=Nn(r):Ee(!1,13),s}function Pa(r,e,s,a,c){const[d,m,b,v,S,A,R,F]=Fa(r,e,s,a);return $e(Math.min(d,b,S,R),Math.min(m,v,A,F),Math.max(d,b,S,R),Math.max(m,v,A,F),c)}function Fa(r,e,s,a){const c=e*a[0]/2,d=e*a[1]/2,m=Math.cos(s),b=Math.sin(s),v=c*m,S=c*b,A=d*m,R=d*b,F=r[0],N=r[1];return[F-v+R,N-S-A,F-v-R,N-S+A,F+v-R,N+S+A,F+v+R,N+S-A,F-v+R,N-S-A]}function Bt(r){return r[3]-r[1]}function bs(r,e,s){const a=s||[1/0,1/0,-1/0,-1/0];return St(r,e)?(a[0]=r[0]>e[0]?r[0]:e[0],a[1]=r[1]>e[1]?r[1]:e[1],a[2]=r[2]<e[2]?r[2]:e[2],a[3]=r[3]<e[3]?r[3]:e[3]):ot(a),a}function Mi(r){return[r[0],r[3]]}function Nn(r){return[r[2],r[3]]}function Ze(r){return r[2]-r[0]}function St(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function Oa(r){return r[2]<r[0]||r[3]<r[1]}function ao(r,e){const s=e.getExtent(),a=ys(r);if(e.canWrapX()&&(a[0]<s[0]||a[0]>=s[2])){const c=Ze(s),m=Math.floor((a[0]-s[0])/c)*c;r[0]-=m,r[2]-=m}return r}const ro=[];let vs=null;const oo=class zc extends Ea{constructor(e){super(e),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,s,a){let c;vs||function Nc(){const r=document.createElement("canvas");r.width=1,r.height=1,vs=r.getContext("2d")}(),vs.clearRect(0,0,1,1);try{vs.drawImage(e,s,a,1,1,0,0,1,1),c=vs.getImageData(0,0,1,1).data}catch{return vs=null,null}return c}getBackground(e){let a=this.getLayer().getBackground();return"function"==typeof a&&(a=a(e.viewState.resolution)),a||void 0}useContainer(e,s,a){const c=this.getLayer().getClassName();let d,m;if(e&&e.className===c&&(!a||e&&e.style.backgroundColor&&J(x(e.style.backgroundColor),x(a)))){const b=e.firstElementChild;b instanceof HTMLCanvasElement&&(m=b.getContext("2d"))}if(m&&m.canvas.style.transform===s?(this.container=e,this.context=m,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){d=document.createElement("div"),d.className=c;let b=d.style;b.position="absolute",b.width="100%",b.height="100%",m=k();const v=m.canvas;d.appendChild(v),b=v.style,b.position="absolute",b.left="0",b.transformOrigin="top left",this.container=d,this.context=m}!this.containerReused&&a&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=a)}clipUnrotated(e,s,a){const c=Mi(a),d=Nn(a),m=Vs(a),b=Dn(a);nt(s.coordinateToPixelTransform,c),nt(s.coordinateToPixelTransform,d),nt(s.coordinateToPixelTransform,m),nt(s.coordinateToPixelTransform,b);const v=this.inversePixelTransform;nt(v,c),nt(v,d),nt(v,m),nt(v,b),e.save(),e.beginPath(),e.moveTo(Math.round(c[0]),Math.round(c[1])),e.lineTo(Math.round(d[0]),Math.round(d[1])),e.lineTo(Math.round(m[0]),Math.round(m[1])),e.lineTo(Math.round(b[0]),Math.round(b[1])),e.clip()}dispatchRenderEvent_(e,s,a){const c=this.getLayer();if(c.hasListener(e)){const d=new kn(e,this.inversePixelTransform,a,s);c.dispatchEvent(d)}}preRender(e,s){this.frameState=s,this.dispatchRenderEvent_("prerender",e,s)}postRender(e,s){this.dispatchRenderEvent_("postrender",e,s)}getRenderTransform(e,s,a,c,d,m,b){const A=c/s;return Rt(this.tempTransform,d/2,m/2,A,-A,-a,-e[0]+b,-e[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}};function lo(r){return Math.pow(r,3)}function Ji(r){return 1-lo(1-r)}function Da(r){return 3*r*r-2*r*r*r}function Xc(r){return r}const co=class Yc extends Ue{constructor(e,s,a){super(),a=a||{},this.tileCoord=e,this.state=s,this.interimTile=null,this.key="",this.transition_=void 0===a.transition?250:a.transition,this.transitionStarts_={},this.interpolate=!!a.interpolate}changed(){this.dispatchEvent("change")}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(2==e.getState())return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,s=this;do{if(2==e.getState()){e.interimTile=null;break}1==e.getState()?s=e:0==e.getState()?s.interimTile=e.interimTile:s=e,e=s.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){pe()}getAlpha(e,s){if(!this.transition_)return 1;let a=this.transitionStarts_[e];if(a){if(-1===a)return 1}else a=s,this.transitionStarts_[e]=a;const c=s-a+1e3/60;return c>=this.transition_?1:lo(c/this.transition_)}inTransition(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}};function Na(r,e,s){const a=r;let c=!0,d=!1,m=!1;const b=[Qe(a,"load",function(){m=!0,d||e()})];return a.src&&In?(d=!0,a.decode().then(function(){c&&e()}).catch(function(v){c&&(m?e():s())})):b.push(Qe(a,"error",s)),function(){c=!1,b.forEach(Ie)}}const ho=class Wc extends co{constructor(e,s,a,c,d,m){super(e,s,m),this.crossOrigin_=c,this.src_=a,this.key=a,this.image_=new Image,null!==c&&(this.image_.crossOrigin=c),this.unlisten_=null,this.tileLoadFunction_=d}getImage(){return this.image_}setImage(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function Bc(){const r=k(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}(),this.changed()}handleImageLoad_(){const e=this.image_;this.state=e.naturalWidth&&e.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Na(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}},Pi={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},uo=class Vc{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Pi[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},js=6378137,ws=Math.PI*js,jc=[-ws,-ws,ws,ws],Uc=[-180,-85,180,85],zn=js*Math.log(Math.tan(Math.PI/2));class _s extends uo{constructor(e){super({code:e,units:"m",extent:jc,global:!0,worldExtent:Uc,getPointResolution:function(s,a){return s/Math.cosh(a[1]/js)}})}}const go=[new _s("EPSG:3857"),new _s("EPSG:102100"),new _s("EPSG:102113"),new _s("EPSG:900913"),new _s("http://www.opengis.net/def/crs/EPSG/0/3857"),new _s("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Zc(r,e,s){const a=r.length;s=s>1?s:2,void 0===e&&(e=s>2?r.slice():new Array(a));for(let c=0;c<a;c+=s){e[c]=ws*r[c]/180;let d=js*Math.log(Math.tan(Math.PI*(+r[c+1]+90)/360));d>zn?d=zn:d<-zn&&(d=-zn),e[c+1]=d}return e}function Kc(r,e,s){const a=r.length;s=s>1?s:2,void 0===e&&(e=s>2?r.slice():new Array(a));for(let c=0;c<a;c+=s)e[c]=180*r[c]/ws,e[c+1]=360*Math.atan(Math.exp(r[c+1]/js))/Math.PI-90;return e}const fo=[-180,-90,180,90],Jc=6378137*Math.PI/180;class $i extends uo{constructor(e,s){super({code:e,units:"degrees",extent:fo,axisOrientation:s,global:!0,metersPerUnit:Jc,worldExtent:fo})}}const po=[new $i("CRS:84"),new $i("EPSG:4326","neu"),new $i("urn:ogc:def:crs:OGC:1.3:CRS84"),new $i("urn:ogc:def:crs:OGC:2:84"),new $i("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new $i("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new $i("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Xn={},Ht={};function Yn(r,e,s){const a=r.getCode(),c=e.getCode();a in Ht||(Ht[a]={}),Ht[a][c]=s}function Wn(r,e){let s=!0;for(let a=r.length-1;a>=0;--a)if(r[a]!=e[a]){s=!1;break}return s}function za(r,e){const s=Math.cos(e),a=Math.sin(e),d=r[1]*s+r[0]*a;return r[0]=r[0]*s-r[1]*a,r[1]=d,r}function yo(r,e){if(e.canWrapX()){const s=Ze(e.getExtent()),a=function rh(r,e,s){const a=e.getExtent();let c=0;return e.canWrapX()&&(r[0]<a[0]||r[0]>a[2])&&(s=s||Ze(a),c=Math.floor((r[0]-a[0])/s)),c}(r,e,s);a&&(r[0]-=a*s)}return r}function Xa(r,e,s){s=s||6371008.8;const a=Ti(r[1]),c=Ti(e[1]),d=(c-a)/2,m=Ti(e[0]-r[0])/2,b=Math.sin(d)*Math.sin(d)+Math.sin(m)*Math.sin(m)*Math.cos(a)*Math.cos(c);return 2*s*Math.atan2(Math.sqrt(b),Math.sqrt(1-b))}let Wa=!0;function bo(r){Wa=!(void 0===r||r)}function Ba(r,e,s){if(void 0!==e)for(let a=0,c=r.length;a<c;++a)e[a]=r[a];else e=r.slice();return e}function Ha(r,e,s){if(void 0!==e&&r!==e){for(let a=0,c=r.length;a<c;++a)e[a]=r[a];r=e}return r}function ch(r){(function Qc(r,e){Xn[r]=e})(r.getCode(),r),Yn(r,r,Ba)}function dt(r){return"string"==typeof r?function $c(r){return Xn[r]||Xn[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(r):r||null}function Gn(r,e,s,a){let c;const d=(r=dt(r)).getPointResolutionFunc();if(d){if(c=d(e,s),a&&a!==r.getUnits()){const m=r.getMetersPerUnit();m&&(c=c*m/Pi[a])}}else{const m=r.getUnits();if("degrees"==m&&!a||"degrees"==a)c=e;else{const b=Qi(r,dt("EPSG:4326"));if(b===Ha&&"degrees"!==m)c=e*r.getMetersPerUnit();else{let S=[s[0]-e/2,s[1],s[0]+e/2,s[1],s[0],s[1]-e/2,s[0],s[1]+e/2];S=b(S,S,2),c=(Xa(S.slice(0,2),S.slice(2,4))+Xa(S.slice(4,6),S.slice(6,8)))/2}const v=a?Pi[a]:r.getMetersPerUnit();void 0!==v&&(c/=v)}}return c}function vo(r){(function hh(r){r.forEach(ch)})(r),r.forEach(function(e){r.forEach(function(s){e!==s&&Yn(e,s,Ba)})})}function Ga(r,e){return r?"string"==typeof r?dt(r):r:dt(e)}function Vn(r,e){return bo(),Zs(r,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function Cs(r,e){if(r===e)return!0;const s=r.getUnits()===e.getUnits();return(r.getCode()===e.getCode()||Qi(r,e)===Ba)&&s}function Qi(r,e){let c=function eh(r,e){let s;return r in Ht&&e in Ht[r]&&(s=Ht[r][e]),s}(r.getCode(),e.getCode());return c||(c=Ha),c}function Us(r,e){return Qi(dt(r),dt(e))}function Zs(r,e,s){return Us(e,s)(r,void 0,r.length)}let vt=null;function Va(){return vt}function ja(r,e){return r}function hi(r,e){return Wa&&!Wn(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(Wa=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function Ua(r,e){return r}function es(r,e){return r}!function fh(){vo(go),vo(po),function uh(r,e,s,a){r.forEach(function(c){e.forEach(function(d){Yn(c,d,s),Yn(d,c,a)})})}(po,go,Zc,Kc)}();let Za;const So=[];function Ao(r,e,s,a,c){r.beginPath(),r.moveTo(0,0),r.lineTo(e,s),r.lineTo(a,c),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,a)+1,Math.max(s,c)),r.restore()}function Ka(r,e){return Math.abs(r[4*e]-210)>2||Math.abs(r[4*e+3]-191.25)>2}function ko(r,e,s,a){const c=Zs(s,e,r);let d=Gn(e,a,s);const m=e.getMetersPerUnit();void 0!==m&&(d*=m);const b=r.getMetersPerUnit();void 0!==b&&(d/=b);const v=r.getExtent();if(!v||ie(v,c)){const S=Gn(r,d,c)/d;isFinite(S)&&S>0&&(d/=S)}return d}const qa=class wh extends co{constructor(e,s,a,c,d,m,b,v,S,A,R,F){super(d,0,{interpolate:!!F}),this.renderEdges_=void 0!==R&&R,this.pixelRatio_=b,this.gutter_=v,this.canvas_=null,this.sourceTileGrid_=s,this.targetTileGrid_=c,this.wrappedTileCoord_=m||d,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const N=c.getTileCoordExtent(this.wrappedTileCoord_),X=this.targetTileGrid_.getExtent();let B=this.sourceTileGrid_.getExtent();const H=X?bs(N,X):N;if(0===On(H))return void(this.state=4);const V=e.getExtent();V&&(B=B?bs(B,V):V);const U=c.getResolution(this.wrappedTileCoord_[0]),q=function bh(r,e,s,a){const c=ys(s);let d=ko(r,e,c,a);return(!isFinite(d)||d<=0)&&no(s,function(m){return d=ko(r,e,m,a),isFinite(d)&&d>0}),d}(e,a,H,U);if(!isFinite(q)||q<=0)return void(this.state=4);if(this.triangulation_=new class mh{constructor(e,s,a,c,d,m){this.sourceProj_=e,this.targetProj_=s;let b={};const v=Us(this.targetProj_,this.sourceProj_);this.transformInv_=function(U){const q=U[0]+"/"+U[1];return b[q]||(b[q]=v(U)),b[q]},this.maxSourceExtent_=c,this.errorThresholdSquared_=d*d,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!c&&!!this.sourceProj_.getExtent()&&Ze(c)==Ze(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ze(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ze(this.targetProj_.getExtent()):null;const S=Mi(a),A=Nn(a),R=Vs(a),F=Dn(a),N=this.transformInv_(S),X=this.transformInv_(A),B=this.transformInv_(R),H=this.transformInv_(F),V=10+(m?Math.max(0,Math.ceil(Math.log2(On(a)/(m*m*256*256)))):0);if(this.addQuad_(S,A,R,F,N,X,B,H,V),this.wrapsXInSource_){let U=1/0;this.triangles_.forEach(function(q,$,te){U=Math.min(U,q.source[0][0],q.source[1][0],q.source[2][0])}),this.triangles_.forEach(function(q){if(Math.max(q.source[0][0],q.source[1][0],q.source[2][0])-U>this.sourceWorldWidth_/2){const $=[[q.source[0][0],q.source[0][1]],[q.source[1][0],q.source[1][1]],[q.source[2][0],q.source[2][1]]];$[0][0]-U>this.sourceWorldWidth_/2&&($[0][0]-=this.sourceWorldWidth_),$[1][0]-U>this.sourceWorldWidth_/2&&($[1][0]-=this.sourceWorldWidth_),$[2][0]-U>this.sourceWorldWidth_/2&&($[2][0]-=this.sourceWorldWidth_);const te=Math.min($[0][0],$[1][0],$[2][0]);Math.max($[0][0],$[1][0],$[2][0])-te<this.sourceWorldWidth_/2&&(q.source=$)}}.bind(this))}b={}}addTriangle_(e,s,a,c,d,m){this.triangles_.push({source:[c,d,m],target:[e,s,a]})}addQuad_(e,s,a,c,d,m,b,v,S){const A=z([d,m,b,v]),R=this.sourceWorldWidth_?Ze(A)/this.sourceWorldWidth_:null,F=this.sourceWorldWidth_,N=this.sourceProj_.canWrapX()&&R>.5&&R<1;let X=!1;if(S>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(X=Ze(z([e,s,a,c]))/this.targetWorldWidth_>.25||X),!N&&this.sourceProj_.isGlobal()&&R&&(X=R>.25||X)),!X&&this.maxSourceExtent_&&isFinite(A[0])&&isFinite(A[1])&&isFinite(A[2])&&isFinite(A[3])&&!St(A,this.maxSourceExtent_))return;let B=0;if(!(X||isFinite(d[0])&&isFinite(d[1])&&isFinite(m[0])&&isFinite(m[1])&&isFinite(b[0])&&isFinite(b[1])&&isFinite(v[0])&&isFinite(v[1])))if(S>0)X=!0;else if(B=(isFinite(d[0])&&isFinite(d[1])?0:8)+(isFinite(m[0])&&isFinite(m[1])?0:4)+(isFinite(b[0])&&isFinite(b[1])?0:2)+(isFinite(v[0])&&isFinite(v[1])?0:1),1!=B&&2!=B&&4!=B&&8!=B)return;if(S>0){if(!X){const V=this.transformInv_([(e[0]+a[0])/2,(e[1]+a[1])/2]);let U;U=N?(Ii(d[0],F)+Ii(b[0],F))/2-Ii(V[0],F):(d[0]+b[0])/2-V[0];const q=(d[1]+b[1])/2-V[1];X=U*U+q*q>this.errorThresholdSquared_}if(X){if(Math.abs(e[0]-a[0])<=Math.abs(e[1]-a[1])){const H=[(s[0]+a[0])/2,(s[1]+a[1])/2],V=this.transformInv_(H),U=[(c[0]+e[0])/2,(c[1]+e[1])/2],q=this.transformInv_(U);this.addQuad_(e,s,H,U,d,m,V,q,S-1),this.addQuad_(U,H,a,c,q,V,b,v,S-1)}else{const H=[(e[0]+s[0])/2,(e[1]+s[1])/2],V=this.transformInv_(H),U=[(a[0]+c[0])/2,(a[1]+c[1])/2],q=this.transformInv_(U);this.addQuad_(e,H,U,c,d,V,q,v,S-1),this.addQuad_(H,s,a,U,V,m,b,q,S-1)}return}}if(N){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&B)&&this.addTriangle_(e,a,c,d,b,v),0==(14&B)&&this.addTriangle_(e,a,s,d,b,m),B&&(0==(13&B)&&this.addTriangle_(s,c,e,m,v,d),0==(7&B)&&this.addTriangle_(s,c,a,m,v,b))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(s,a,c){const d=s.source;et(e,d[0]),et(e,d[1]),et(e,d[2])}),e}getTriangles(){return this.triangles_}}(e,a,H,B,q*(void 0!==A?A:.5),U),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=s.getZForResolution(q);let te=this.triangulation_.calculateSourceExtent();if(B&&(e.canWrapX()?(te[1]=Ve(te[1],B[1],B[3]),te[3]=Ve(te[3],B[1],B[3])):te=bs(te,B)),On(te)){const ce=s.getTileRangeForExtentAndZ(te,this.sourceZ_);for(let ue=ce.minX;ue<=ce.maxX;ue++)for(let xe=ce.minY;xe<=ce.maxY;xe++){const Ae=S(this.sourceZ_,ue,xe,b);Ae&&this.sourceTiles_.push(Ae)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(function(s,a,c){s&&2==s.getState()&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(s.tileCoord),image:s.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=3;else{const s=this.wrappedTileCoord_[0],a=this.targetTileGrid_.getTileSize(s),c="number"==typeof a?a:a[0],d="number"==typeof a?a:a[1],m=this.targetTileGrid_.getResolution(s),b=this.sourceTileGrid_.getResolution(this.sourceZ_),v=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function vh(r,e,s,a,c,d,m,b,v,S,A,R){const F=k(Math.round(s*r),Math.round(s*e),So);if(R||(F.imageSmoothingEnabled=!1),0===v.length)return F.canvas;function N($){return Math.round($*s)/s}F.scale(s,s),F.globalCompositeOperation="lighter";const X=[1/0,1/0,-1/0,-1/0];v.forEach(function($,te,ce){!function mt(r,e){e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3])}(X,$.extent)});const B=Ze(X),H=Bt(X),V=k(Math.round(s*B/a),Math.round(s*H/a));R||(V.imageSmoothingEnabled=!1);const U=s/a;v.forEach(function($,te,ce){const ue=$.extent[0]-X[0],xe=-($.extent[3]-X[3]),Ae=Ze($.extent),ke=Bt($.extent);$.image.width>0&&$.image.height>0&&V.drawImage($.image,S,S,$.image.width-2*S,$.image.height-2*S,ue*U,xe*U,Ae*U,ke*U)});const q=Mi(m);return b.getTriangles().forEach(function($,te,ce){const ue=$.source,xe=$.target;let Ae=ue[0][0],ke=ue[0][1],Ne=ue[1][0],Oe=ue[1][1],Te=ue[2][0],at=ue[2][1];const Re=N((xe[0][0]-q[0])/d),de=N(-(xe[0][1]-q[1])/d),ge=N((xe[1][0]-q[0])/d),be=N(-(xe[1][1]-q[1])/d),Ke=N((xe[2][0]-q[0])/d),qe=N(-(xe[2][1]-q[1])/d),ct=Ae,se=ke;Ae=0,ke=0,Ne-=ct,Oe-=se,Te-=ct,at-=se;const We=function Ei(r){const e=r.length;for(let a=0;a<e;a++){let c=a,d=Math.abs(r[a][a]);for(let b=a+1;b<e;b++){const v=Math.abs(r[b][a]);v>d&&(d=v,c=b)}if(0===d)return null;const m=r[c];r[c]=r[a],r[a]=m;for(let b=a+1;b<e;b++){const v=-r[b][a]/r[a][a];for(let S=a;S<e+1;S++)a==S?r[b][S]=0:r[b][S]+=v*r[a][S]}}const s=new Array(e);for(let a=e-1;a>=0;a--){s[a]=r[a][e]/r[a][a];for(let c=a-1;c>=0;c--)r[c][e]-=r[c][a]*s[a]}return s}([[Ne,Oe,0,0,ge-Re],[Te,at,0,0,Ke-Re],[0,0,Ne,Oe,be-de],[0,0,Te,at,qe-de]]);if(We){if(F.save(),F.beginPath(),function yh(){if(void 0===Za){const r=document.createElement("canvas").getContext("2d");r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",Ao(r,4,5,4,0),Ao(r,4,5,0,5);const e=r.getImageData(0,0,3,3).data;Za=Ka(e,0)||Ka(e,4)||Ka(e,8)}return Za}()||!R){F.moveTo(ge,be);const je=4,Bi=Re-ge,ni=de-be;for(let pt=0;pt<je;pt++)F.lineTo(ge+N((pt+1)*Bi/je),be+N(pt*ni/(je-1))),pt!=je-1&&F.lineTo(ge+N((pt+1)*Bi/je),be+N((pt+1)*ni/(je-1)));F.lineTo(Ke,qe)}else F.moveTo(ge,be),F.lineTo(Re,de),F.lineTo(Ke,qe);F.clip(),F.transform(We[0],We[2],We[1],We[3],Re,de),F.translate(X[0]-ct,X[3]-se),F.scale(a/s,-a/s),F.drawImage(V.canvas,0,0),F.restore()}}),A&&(F.save(),F.globalCompositeOperation="source-over",F.strokeStyle="black",F.lineWidth=1,b.getTriangles().forEach(function($,te,ce){const ue=$.target,xe=(ue[0][0]-q[0])/d,Ae=-(ue[0][1]-q[1])/d,ke=(ue[1][0]-q[0])/d,Ne=-(ue[1][1]-q[1])/d,Oe=(ue[2][0]-q[0])/d,Te=-(ue[2][1]-q[1])/d;F.beginPath(),F.moveTo(ke,Ne),F.lineTo(xe,Ae),F.lineTo(Oe,Te),F.closePath(),F.stroke()}),F.restore()),F.canvas}(c,d,this.pixelRatio_,b,this.sourceTileGrid_.getExtent(),m,v,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(s,a,c){const d=s.getState();if(0==d||1==d){e++;const m=we(s,"change",function(b){const v=s.getState();(2==v||3==v||4==v)&&(Ie(m),e--,0===e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(m)}}.bind(this)),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(s,a,c){0==s.getState()&&s.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ie),this.sourcesListenerKeys_=null}release(){this.canvas_&&(I(this.canvas_.getContext("2d")),So.push(this.canvas_),this.canvas_=null),super.release()}};class Eo{constructor(e,s,a,c){this.minX=e,this.maxX=s,this.minY=a,this.maxY=c}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,s){return this.minX<=e&&e<=this.maxX&&this.minY<=s&&s<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Ss(r,e,s,a,c){return void 0!==c?(c.minX=r,c.maxX=e,c.minY=s,c.maxY=a,c):new Eo(r,e,s,a)}const To=Eo;function Io(r){return r[0]>0&&r[1]>0}function Mt(r,e){return Array.isArray(r)?r:(void 0===e?e=[r,r]:(e[0]=r,e[1]=r),e)}const Sh=class Ch extends oo{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new To(0,0,0,0)}isDrawableTile(e){const s=this.getLayer(),a=e.getState(),c=s.getUseInterimTilesOnError();return 2==a||4==a||3==a&&!c}getTile(e,s,a,c){const d=c.pixelRatio,m=c.viewState.projection,b=this.getLayer();let S=b.getSource().getTile(e,s,a,d,m);return 3==S.getState()&&b.getUseInterimTilesOnError()&&b.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(S)||(S=S.getInterimTile()),S}getData(e){const s=this.frameState;if(!s)return null;const a=this.getLayer(),c=nt(s.pixelToCoordinateTransform,e.slice()),d=a.getExtent();if(d&&!ie(d,c))return null;const m=s.pixelRatio,b=s.viewState.projection,v=s.viewState,S=a.getRenderSource(),A=S.getTileGridForProjection(v.projection),R=S.getTilePixelRatio(s.pixelRatio);for(let F=A.getZForResolution(v.resolution);F>=A.getMinZoom();--F){const N=A.getTileCoordForCoordAndZ(c,F),X=S.getTile(F,N[1],N[2],m,b);if(!(X instanceof ho||X instanceof qa)||X instanceof qa&&4===X.getState())return null;if(2!==X.getState())continue;const B=A.getOrigin(F),H=Mt(A.getTileSize(F)),V=A.getResolution(F),U=Math.floor(R*((c[0]-B[0])/V-N[1]*H[0])),q=Math.floor(R*((B[1]-c[1])/V-N[2]*H[1])),$=Math.round(R*S.getGutterForProjection(v.projection));return this.getImageData(X.getImage(),U+$,q+$)}return null}loadedTileCallback(e,s,a){return!!this.isDrawableTile(a)&&super.loadedTileCallback(e,s,a)}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,s){const a=e.layerStatesArray[e.layerIndex],c=e.viewState,d=c.projection,m=c.resolution,b=c.center,v=c.rotation,S=e.pixelRatio,A=this.getLayer(),R=A.getSource(),F=R.getRevision(),N=R.getTileGridForProjection(d),X=N.getZForResolution(m,R.zDirection),B=N.getResolution(X);let H=e.extent;const V=e.viewState.resolution,U=R.getTilePixelRatio(S),q=Math.round(Ze(H)/V*S),$=Math.round(Bt(H)/V*S),te=a.extent&&es(a.extent);te&&(H=bs(H,es(a.extent)));const ce=B*q/2/U,ue=B*$/2/U,xe=[b[0]-ce,b[1]-ue,b[0]+ce,b[1]+ue],Ae=N.getTileRangeForExtentAndZ(H,X),ke={};ke[X]={};const Ne=this.createLoadedTileFinder(R,d,ke),Oe=this.tmpExtent,Te=this.tmpTileRange_;this.newTiles_=!1;const at=v?Fa(c.center,V,v,e.size):void 0;for(let Ot=Ae.minX;Ot<=Ae.maxX;++Ot)for(let We=Ae.minY;We<=Ae.maxY;++We){if(v&&!N.tileCoordIntersectsViewport([X,Ot,We],at))continue;const je=this.getTile(X,Ot,We,e);if(this.isDrawableTile(je)){const pt=Me(this);if(2==je.getState()){ke[X][je.tileCoord.toString()]=je;let wi=je.inTransition(pt);wi&&1!==a.opacity&&(je.endTransition(pt),wi=!1),!this.newTiles_&&(wi||!this.renderedTiles.includes(je))&&(this.newTiles_=!0)}if(1===je.getAlpha(pt,e.time))continue}const Bi=N.getTileCoordChildTileRange(je.tileCoord,Te,Oe);let ni=!1;Bi&&(ni=Ne(X+1,Bi)),ni||N.forEachTileCoordParentTileRange(je.tileCoord,Ne,Te,Oe)}const Re=B/m*S/U;Rt(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/S,1/S,v,-q/2,-$/2);const de=o(this.pixelTransform);this.useContainer(s,de,this.getBackground(e));const ge=this.context,be=ge.canvas;t(this.inversePixelTransform,this.pixelTransform),Rt(this.tempTransform,q/2,$/2,Re,Re,0,-q/2,-$/2),be.width!=q||be.height!=$?(be.width=q,be.height=$):this.containerReused||ge.clearRect(0,0,q,$),te&&this.clipUnrotated(ge,e,te),R.getInterpolate()||(ge.imageSmoothingEnabled=!1),this.preRender(ge,e),this.renderedTiles.length=0;let qe,ct,se,Ke=Object.keys(ke).map(Number);Ke.sort(_t),1!==a.opacity||this.containerReused&&!R.getOpaque(e.viewState.projection)?(qe=[],ct=[]):Ke=Ke.reverse();for(let Ot=Ke.length-1;Ot>=0;--Ot){const We=Ke[Ot],je=R.getTilePixelSize(We,S,d),ni=N.getResolution(We)/B,pt=je[0]*ni*Re,wi=je[1]*ni*Re,Fs=N.getTileCoordForCoordAndZ(Mi(xe),We),pa=N.getTileCoordExtent(Fs),Os=nt(this.tempTransform,[U*(pa[0]-xe[0])/B,U*(xe[3]-pa[3])/B]),ma=U*R.getGutterForProjection(d),Hi=ke[We];for(const fn in Hi){const Gi=Hi[fn],xa=Gi.tileCoord,ya=Fs[1]-xa[1],ba=Math.round(Os[0]-(ya-1)*pt),Ds=Fs[2]-xa[2],Kr=Math.round(Os[1]-(Ds-1)*wi),kt=Math.round(Os[0]-ya*pt),Xt=Math.round(Os[1]-Ds*wi),Vt=ba-kt,_i=Kr-Xt,Ns=X===We,us=Ns&&1!==Gi.getAlpha(Me(this),e.time);let Vi=!1;if(!us)if(qe){se=[kt,Xt,kt+Vt,Xt,kt+Vt,Xt+_i,kt,Xt+_i];for(let zs=0,va=qe.length;zs<va;++zs)if(X!==We&&We<ct[zs]){const wt=qe[zs];St([kt,Xt,kt+Vt,Xt+_i],[wt[0],wt[3],wt[4],wt[7]])&&(Vi||(ge.save(),Vi=!0),ge.beginPath(),ge.moveTo(se[0],se[1]),ge.lineTo(se[2],se[3]),ge.lineTo(se[4],se[5]),ge.lineTo(se[6],se[7]),ge.moveTo(wt[6],wt[7]),ge.lineTo(wt[4],wt[5]),ge.lineTo(wt[2],wt[3]),ge.lineTo(wt[0],wt[1]),ge.clip())}qe.push(se),ct.push(We)}else ge.clearRect(kt,Xt,Vt,_i);this.drawTileImage(Gi,e,kt,Xt,Vt,_i,ma,Ns),qe&&!us?(Vi&&ge.restore(),this.renderedTiles.unshift(Gi)):this.renderedTiles.push(Gi),this.updateUsedTiles(e.usedTiles,R,Gi)}}return this.renderedRevision=F,this.renderedResolution=B,this.extentChanged=!this.renderedExtent_||!Jt(this.renderedExtent_,xe),this.renderedExtent_=xe,this.renderedPixelRatio=S,this.renderedProjection=d,this.manageTilePyramid(e,R,N,S,d,H,X,A.getPreload()),this.scheduleExpireCache(e,R),this.postRender(ge,e),a.extent&&ge.restore(),ge.imageSmoothingEnabled=!0,de!==be.style.transform&&(be.style.transform=de),this.container}drawTileImage(e,s,a,c,d,m,b,v){const S=this.getTileImage(e);if(!S)return;const A=Me(this),R=s.layerStatesArray[s.layerIndex],F=R.opacity*(v?e.getAlpha(A,s.time):1),N=F!==this.context.globalAlpha;N&&(this.context.save(),this.context.globalAlpha=F),this.context.drawImage(S,b,b,S.width-2*b,S.height-2*b,a,c,d,m),N&&this.context.restore(),F!==R.opacity?s.animate=!0:v&&e.endTransition(A)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,s){if(s.canExpireCache()){const a=function(c,d,m){const b=Me(c);b in m.usedTiles&&c.expireCache(m.viewState.projection,m.usedTiles[b])}.bind(null,s);e.postRenderFunctions.push(a)}}updateUsedTiles(e,s,a){const c=Me(s);c in e||(e[c]={}),e[c][a.getKey()]=!0}manageTilePyramid(e,s,a,c,d,m,b,v,S){const A=Me(s);A in e.wantedTiles||(e.wantedTiles[A]={});const R=e.wantedTiles[A],F=e.tileQueue,N=a.getMinZoom(),X=e.viewState.rotation,B=X?Fa(e.viewState.center,e.viewState.resolution,X,e.size):void 0;let V,U,q,$,te,ce,H=0;for(ce=N;ce<=b;++ce)for(U=a.getTileRangeForExtentAndZ(m,ce,U),q=a.getResolution(ce),$=U.minX;$<=U.maxX;++$)for(te=U.minY;te<=U.maxY;++te)X&&!a.tileCoordIntersectsViewport([ce,$,te],B)||(b-ce<=v?(++H,V=s.getTile(ce,$,te,c,d),0==V.getState()&&(R[V.getKey()]=!0,F.isKeyQueued(V.getKey())||F.enqueue([V,A,a.getTileCoordCenter(V.tileCoord),q])),void 0!==S&&S(V)):s.useTile(ce,$,te,d));s.updateCacheSize(H,d)}},kh=class Ah extends Cn{constructor(e){super(e)}createRenderer(){return new Sh(this)}};function Lo(r,e,s,a){return void 0!==a?(a[0]=r,a[1]=e,a[2]=s,a):[r,e,s]}function Ks(r,e,s){return r+"/"+e+"/"+s}function Ro(r){return Ks(r[0],r[1],r[2])}const Mo=class Mh extends class Eh{constructor(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let s=this.oldest_;for(;s;)e(s.value_,s.key_,this),s=s.newer}get(e,s){const a=this.entries_[e];return Ee(void 0!==a,15),a===this.newest_||(a===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(a.newer.older=a.older,a.older.newer=a.newer),a.newer=null,a.older=this.newest_,this.newest_.newer=a,this.newest_=a),a.value_}remove(e){const s=this.entries_[e];return Ee(void 0!==s,15),s===this.newest_?(this.newest_=s.older,this.newest_&&(this.newest_.newer=null)):s===this.oldest_?(this.oldest_=s.newer,this.oldest_&&(this.oldest_.older=null)):(s.newer.older=s.older,s.older.newer=s.newer),delete this.entries_[e],--this.count_,s.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let a,s=0;for(a=this.newest_;a;a=a.older)e[s++]=a.key_;return e}getValues(){const e=new Array(this.count_);let a,s=0;for(a=this.newest_;a;a=a.older)e[s++]=a.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,s){this.get(e),this.entries_[e].value_=s}set(e,s){Ee(!(e in this.entries_),16);const a={key_:e,newer:null,older:this.newest_,value_:s};this.newest_?this.newest_.newer=a:this.oldest_=a,this.newest_=a,this.entries_[e]=a,++this.count_}setSize(e){this.highWaterMark=e}}{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const a=function Ih(r){return r.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(c){c.tileCoord[0]!==a&&(this.remove(Ro(c.tileCoord)),c.release())}.bind(this))}};function Po(r){return r?Array.isArray(r)?function(e){return r}:"function"==typeof r?r:function(e){return[r]}:null}const Fo=class Ph extends ut{constructor(e){super(),this.projection=dt(e.projection),this.attributions_=Po(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:"ready",this.wrapX_=void 0!==e.wrapX&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const s=this;this.viewPromise_=new Promise(function(a,c){s.viewResolver=a,s.viewRejector=c})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return pe()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Po(e),this.changed()}setState(e){this.state_=e,this.changed()}};function Dh(r,e,s,a,c){return!no(c,function(m){return!ts(r,e,s,a,m[0],m[1])})}function ts(r,e,s,a,c,d){let m=0,b=r[s-a],v=r[s-a+1];for(;e<s;e+=a){const S=r[e],A=r[e+1];v<=d?A>d&&(S-b)*(d-v)-(c-b)*(A-v)>0&&m++:A<=d&&(S-b)*(d-v)-(c-b)*(A-v)<0&&m--,b=S,v=A}return 0!==m}function Qa(r,e,s,a,c,d){if(0===s.length||!ts(r,e,s[0],a,c,d))return!1;for(let m=1,b=s.length;m<b;++m)if(ts(r,s[m-1],s[m],a,c,d))return!1;return!0}function er(r,e,s,a,c){const d=so([1/0,1/0,-1/0,-1/0],r,e,s,a);return!!St(c,d)&&(!!(he(c,d)||d[0]>=c[0]&&d[2]<=c[2]||d[1]>=c[1]&&d[3]<=c[3])||function Oh(r,e,s,a,c){let d;for(e+=a;e<s;e+=a)if(d=c(r.slice(e-a,e),r.slice(e,e+a)),d)return d;return!1}(r,e,s,a,function(m,b){return function Fc(r,e,s){let a=!1;const c=Fe(r,e),d=Fe(r,s);if(1===c||1===d)a=!0;else{const m=r[0],b=r[1],v=r[2],S=r[3],F=s[0],N=s[1],X=(N-e[1])/(F-e[0]);let B,H;!!(2&d)&&!(2&c)&&(B=F-(N-S)/X,a=B>=m&&B<=v),!a&&!!(4&d)&&!(4&c)&&(H=N-(F-v)*X,a=H>=b&&H<=S),!a&&!!(8&d)&&!(8&c)&&(B=F-(N-b)/X,a=B>=m&&B<=v),!a&&16&d&&!(16&c)&&(H=N-(F-m)*X,a=H>=b&&H<=S)}return a}(c,m,b)}))}function Oo(r,e,s,a,c){return!!(er(r,e,s,a,c)||ts(r,e,s,a,c[0],c[1])||ts(r,e,s,a,c[0],c[3])||ts(r,e,s,a,c[2],c[1])||ts(r,e,s,a,c[2],c[3]))}const Nh=[0,0,0],No=class zh{constructor(e){let s;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,Ee(function Y(r,e,s){const a=e||_t;return r.every(function(c,d){if(0===d)return!0;const m=a(r[d-1],c);return!(m>0||s&&0===m)})}(this.resolutions_,function(c,d){return d-c},!0),17),!e.origins)for(let c=0,d=this.resolutions_.length-1;c<d;++c)if(s){if(this.resolutions_[c]/this.resolutions_[c+1]!==s){s=void 0;break}}else s=this.resolutions_[c]/this.resolutions_[c+1];this.zoomFactor_=s,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,Ee(this.origins_.length==this.resolutions_.length,20));const a=e.extent;void 0!==a&&!this.origin_&&!this.origins_&&(this.origin_=Mi(a)),Ee(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,Ee(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:256,Ee(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map(function(c,d){const m=new To(Math.min(0,c[0]),Math.max(c[0]-1,-1),Math.min(0,c[1]),Math.max(c[1]-1,-1));if(a){const b=this.getTileRangeForExtentAndZ(a,d);m.minX=Math.max(b.minX,m.minX),m.maxX=Math.min(b.maxX,m.maxX),m.minY=Math.max(b.minY,m.minY),m.maxY=Math.min(b.maxY,m.maxY)}return m},this):a&&this.calculateTileRanges_(a)}forEachTileCoord(e,s,a){const c=this.getTileRangeForExtentAndZ(e,s);for(let d=c.minX,m=c.maxX;d<=m;++d)for(let b=c.minY,v=c.maxY;b<=v;++b)a([s,d,b])}forEachTileCoordParentTileRange(e,s,a,c){let d,m,b,v=null,S=e[0]-1;for(2===this.zoomFactor_?(m=e[1],b=e[2]):v=this.getTileCoordExtent(e,c);S>=this.minZoom;){if(2===this.zoomFactor_?(m=Math.floor(m/2),b=Math.floor(b/2),d=Ss(m,m,b,b,a)):d=this.getTileRangeForExtentAndZ(v,S,a),s(S,d))return!0;--S}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,s,a){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){const d=2*e[1],m=2*e[2];return Ss(d,d+1,m,m+1,s)}const c=this.getTileCoordExtent(e,a||this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,e[0]+1,s)}return null}getTileRangeForTileCoordAndZ(e,s,a){if(s>this.maxZoom||s<this.minZoom)return null;const c=e[0],d=e[1],m=e[2];if(s===c)return Ss(d,m,d,m,a);if(this.zoomFactor_){const v=Math.pow(this.zoomFactor_,s-c),S=Math.floor(d*v),A=Math.floor(m*v);return s<c?Ss(S,S,A,A,a):Ss(S,Math.floor(v*(d+1))-1,A,Math.floor(v*(m+1))-1,a)}const b=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(b,s,a)}getTileRangeExtent(e,s,a){const c=this.getOrigin(e),d=this.getResolution(e),m=Mt(this.getTileSize(e),this.tmpSize_);return $e(c[0]+s.minX*m[0]*d,c[1]+s.minY*m[1]*d,c[0]+(s.maxX+1)*m[0]*d,c[1]+(s.maxY+1)*m[1]*d,a)}getTileRangeForExtentAndZ(e,s,a){const c=Nh;this.getTileCoordForXYAndZ_(e[0],e[3],s,!1,c);const d=c[1],m=c[2];return this.getTileCoordForXYAndZ_(e[2],e[1],s,!0,c),Ss(d,c[1],m,c[2],a)}getTileCoordCenter(e){const s=this.getOrigin(e[0]),a=this.getResolution(e[0]),c=Mt(this.getTileSize(e[0]),this.tmpSize_);return[s[0]+(e[1]+.5)*c[0]*a,s[1]-(e[2]+.5)*c[1]*a]}getTileCoordExtent(e,s){const a=this.getOrigin(e[0]),c=this.getResolution(e[0]),d=Mt(this.getTileSize(e[0]),this.tmpSize_),m=a[0]+e[1]*d[0]*c,b=a[1]-(e[2]+1)*d[1]*c;return $e(m,b,m+d[0]*c,b+d[1]*c,s)}getTileCoordForCoordAndResolution(e,s,a){return this.getTileCoordForXYAndResolution_(e[0],e[1],s,!1,a)}getTileCoordForXYAndResolution_(e,s,a,c,d){const m=this.getZForResolution(a),b=a/this.getResolution(m),v=this.getOrigin(m),S=Mt(this.getTileSize(m),this.tmpSize_);let A=b*(e-v[0])/a/S[0],R=b*(v[1]-s)/a/S[1];return c?(A=ps(A,5)-1,R=ps(R,5)-1):(A=fs(A,5),R=fs(R,5)),Lo(m,A,R,d)}getTileCoordForXYAndZ_(e,s,a,c,d){const m=this.getOrigin(a),b=this.getResolution(a),v=Mt(this.getTileSize(a),this.tmpSize_);let S=(e-m[0])/b/v[0],A=(m[1]-s)/b/v[1];return c?(S=ps(S,5)-1,A=ps(A,5)-1):(S=fs(S,5),A=fs(A,5)),Lo(a,S,A,d)}getTileCoordForCoordAndZ(e,s,a){return this.getTileCoordForXYAndZ_(e[0],e[1],s,!1,a)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,s){return Ve(jt(this.resolutions_,e,s||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,s){return Oo(s,0,s.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const s=this.resolutions_.length,a=new Array(s);for(let c=this.minZoom;c<s;++c)a[c]=this.getTileRangeForExtentAndZ(e,c);this.fullTileRanges_=a}};function zo(r){let e=r.getDefaultTileGrid();return e||(e=function Bh(r,e,s,a){return function Yh(r,e,s,a){a=void 0!==a?a:"top-left";const c=Xo(r,e,s);return new No({extent:r,origin:Rc(r,a),resolutions:c,tileSize:s})}(tr(r),e,s,a)}(r),r.setDefaultTileGrid(e)),e}function Xo(r,e,s,a){e=void 0!==e?e:42,s=Mt(void 0!==s?s:256);const c=Bt(r),d=Ze(r);a=a>0?a:Math.max(d/s[0],c/s[1]);const m=e+1,b=new Array(m);for(let v=0;v<m;++v)b[v]=a/Math.pow(2,v);return b}function tr(r){let e=(r=dt(r)).getExtent();if(!e){const s=180*Pi.degrees/r.getMetersPerUnit();e=$e(-s,-s,s,s)}return e}class Gh extends rt{constructor(e,s){super(e),this.tile=s}}const Vh=class Hh extends Fo{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileGrid&&Mt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new Mo(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,s){const a=this.getTileCacheForProjection(e);a&&a.expireCache(s)}forEachLoadedTile(e,s,a,c){const d=this.getTileCacheForProjection(e);if(!d)return!1;let b,v,S,m=!0;for(let A=a.minX;A<=a.maxX;++A)for(let R=a.minY;R<=a.maxY;++R)v=Ks(s,A,R),S=!1,d.containsKey(v)&&(b=d.get(v),S=2===b.getState(),S&&(S=!1!==c(b))),S||(m=!1);return m}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(e,s,a,c,d){return pe()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:zo(e)}getTileCacheForProjection(e){const s=this.getProjection();return Ee(null===s||Cs(s,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,s,a){const c=this.getTileGridForProjection(a),d=this.getTilePixelRatio(s),m=Mt(c.getTileSize(e),this.tmpSize);return 1==d?m:function _h(r,e,s){return void 0===s&&(s=[0,0]),s[0]=r[0]*e+.5|0,s[1]=r[1]*e+.5|0,s}(m,d,this.tmpSize)}getTileCoordForTileUrlFunction(e,s){s=void 0!==s?s:this.getProjection();const a=this.getTileGridForProjection(s);return this.getWrapX()&&s.isGlobal()&&(e=function Xh(r,e,s){const a=e[0],c=r.getTileCoordCenter(e),d=tr(s);if(ie(d,c))return e;{const m=Ze(d),b=Math.ceil((d[0]-c[0])/m);return c[0]+=m*b,r.getTileCoordForCoordAndZ(c,a)}}(a,e,s)),function Rh(r,e){const s=r[0],a=r[1],c=r[2];if(e.getMinZoom()>s||s>e.getMaxZoom())return!1;const d=e.getFullTileRange(s);return!d||d.containsXY(a,c)}(e,a)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,s){const a=this.getTileCacheForProjection(s);e>a.highWaterMark&&(a.highWaterMark=e)}useTile(e,s,a,c){}};function jh(r,e){const s=/\{z\}/g,a=/\{x\}/g,c=/\{y\}/g,d=/\{-y\}/g;return function(m,b,v){if(m)return r.replace(s,m[0].toString()).replace(a,m[1].toString()).replace(c,m[2].toString()).replace(d,function(){const A=e.getFullTileRange(m[0]);return Ee(A,55),(A.getHeight()-m[2]-1).toString()})}}class ir extends Vh{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===ir.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const s=e.target,a=Me(s),c=s.getState();let d;1==c?(this.tileLoadingKeys_[a]=!0,d="tileloadstart"):a in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[a],d=3==c?"tileloaderror":2==c?"tileloadend":void 0),null!=d&&this.dispatchEvent(new Gh(d,s))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,s){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof s<"u"?this.setKey(s):this.changed()}setUrl(e){const s=function Kh(r){const e=[];let s=/\{([a-z])-([a-z])\}/.exec(r);if(s){const a=s[1].charCodeAt(0),c=s[2].charCodeAt(0);let d;for(d=a;d<=c;++d)e.push(r.replace(s[0],String.fromCharCode(d)));return e}if(s=/\{(\d+)-(\d+)\}/.exec(r),s){const a=parseInt(s[2],10);for(let c=parseInt(s[1],10);c<=a;c++)e.push(r.replace(s[0],c.toString()));return e}return e.push(r),e}(e);this.urls=s,this.setUrls(s)}setUrls(e){this.urls=e;const s=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function Uh(r,e){const s=r.length,a=new Array(s);for(let c=0;c<s;++c)a[c]=jh(r[c],e);return function Zh(r){return 1===r.length?r[0]:function(e,s,a){if(e){const c=function Lh(r){return(r[1]<<r[0])+r[2]}(e),d=Ii(c,r.length);return r[d](e,s,a)}}}(a)}(e,this.tileGrid),s):this.setKey(s)}tileUrlFunction(e,s,a){}useTile(e,s,a){const c=Ks(e,s,a);this.tileCache.containsKey(c)&&this.tileCache.get(c)}}const qh=ir;function $h(r,e){r.getImage().src=e}const Qh=class Jh extends qh{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:$h,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:ho,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,s){const a=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==a?s:{});for(const c in this.tileCacheForProjection){const d=this.tileCacheForProjection[c];d.expireCache(d==a?s:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Cs(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return!(this.getProjection()&&e&&!Cs(this.getProjection(),e))&&super.getOpaque(e)}getTileGridForProjection(e){const s=this.getProjection();if(this.tileGrid&&(!s||Cs(s,e)))return this.tileGrid;{const a=Me(e);return a in this.tileGridForProjection||(this.tileGridForProjection[a]=zo(e)),this.tileGridForProjection[a]}}getTileCacheForProjection(e){const s=this.getProjection();if(!s||Cs(s,e))return this.tileCache;{const a=Me(e);return a in this.tileCacheForProjection||(this.tileCacheForProjection[a]=new Mo(this.tileCache.highWaterMark)),this.tileCacheForProjection[a]}}createTile_(e,s,a,c,d,m){const b=[e,s,a],v=this.getTileCoordForTileUrlFunction(b,d),S=v?this.tileUrlFunction(v,c,d):void 0,A=new this.tileClass(b,void 0!==S?0:4,void 0!==S?S:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return A.key=m,A.addEventListener("change",this.handleTileChange.bind(this)),A}getTile(e,s,a,c,d){const m=this.getProjection();if(!m||!d||Cs(m,d))return this.getTileInternal(e,s,a,c,m||d);{const b=this.getTileCacheForProjection(d),v=[e,s,a];let S;const A=Ro(v);b.containsKey(A)&&(S=b.get(A));const R=this.getKey();if(S&&S.key==R)return S;{const F=this.getTileGridForProjection(m),N=this.getTileGridForProjection(d),X=this.getTileCoordForTileUrlFunction(v,d),B=new qa(m,F,d,N,v,X,this.getTilePixelRatio(c),this.getGutter(),function(H,V,U,q){return this.getTileInternal(H,V,U,q,m)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return B.key=R,S?(B.interimTile=S,B.refreshInterimChain(),b.replace(A,B)):b.set(A,B),B}}}getTileInternal(e,s,a,c,d){let m=null;const b=Ks(e,s,a),v=this.getKey();if(this.tileCache.containsKey(b)){if(m=this.tileCache.get(b),m.key!=v){const S=m;m=this.createTile_(e,s,a,c,d,v),m.interimTile=0==S.getState()?S.interimTile:S,m.refreshInterimChain(),this.tileCache.replace(b,m)}}else m=this.createTile_(e,s,a,c,d,v),this.tileCache.set(b,m);return m}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const s in this.tileCacheForProjection)this.tileCacheForProjection[s].clear();this.changed()}}setTileGridForProjection(e,s){const a=dt(e);if(a){const c=Me(a);c in this.tileGridForProjection||(this.tileGridForProjection[c]=s)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}},tu=class eu extends Qh{constructor(e){const s=void 0!==(e=e||{}).projection?e.projection:"EPSG:3857",a=void 0!==e.tileGrid?e.tileGrid:function Wh(r){const e=r||{},s=e.extent||dt("EPSG:3857").getExtent(),a={extent:s,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Xo(s,e.maxZoom,e.tileSize,e.maxResolution)};return new No(a)}({extent:tr(s),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:s,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:a,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=void 0!==e.gutter?e.gutter:0}getGutter(){return this.gutter_}};var As=_e(7579),G=_e(4650),Yo=_e(4707),iu=_e(8505),sr=_e(4004),Wo=_e(2340),nr=_e(529);let su=(()=>{class r{constructor(s){this._httpClient=s,this._features=new Yo.t,this._apiUrl=Wo.N.apiUrl+"/api/features"}get features$(){return this._features.asObservable()}set features(s){this._features.next(s)}get(){return this._httpClient.get(`${Wo.N.apiUrl}/`).pipe((0,iu.b)(s=>{this._features.next(s)}))}getById(s){return this._httpClient.get(`${this._apiUrl}/${s}`).pipe((0,sr.U)(a=>a))}getByDatasetId(s){return this._httpClient.get(`${this._apiUrl}/geopandas/dataset/${s}`).pipe((0,sr.U)(a=>a))}}return r.\u0275fac=function(s){return new(s||r)(G.LFG(nr.eN))},r.\u0275prov=G.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var Bo=_e(5412),nu=_e(262),au=_e(9646);function ar(r,e){return Ho(r,e,[]).join("")}function Ho(r,e,s){if(r.nodeType==Node.CDATA_SECTION_NODE||r.nodeType==Node.TEXT_NODE)s.push(e?String(r.nodeValue).replace(/(\r\n|\r|\n)/g,""):r.nodeValue);else{let a;for(a=r.firstChild;a;a=a.nextSibling)Ho(a,e,s)}return s}function Go(r,e){return function(s,a){const c=r.call(void 0!==e?e:this,s,a);void 0!==c&&a[a.length-1].push(c)}}function Pt(r,e,s){return function(a,c){const d=r.call(void 0!==s?s:this,a,c);if(void 0!==d){const m=c[c.length-1],b=void 0!==e?e:a.localName;let v;b in m?v=m[b]:(v=[],m[b]=v),v.push(d)}}}function me(r,e,s){return function(a,c){const d=r.call(void 0!==s?s:this,a,c);void 0!==d&&(c[c.length-1][void 0!==e?e:a.localName]=d)}}function gt(r,e,s){let a,c;for(s=void 0!==s?s:{},a=0,c=r.length;a<c;++a)s[r[a]]=e;return s}function lt(r,e,s,a,c){return a.push(r),function cu(r,e,s,a){let c;for(c=e.firstElementChild;c;c=c.nextElementSibling){const d=r[c.namespaceURI];if(void 0!==d){const m=d[c.localName];void 0!==m&&m.call(a,c,s)}}}(e,s,a,c),a.pop()}let Un;!function Vo(r,e){return function(s,a,c){let b=r;return void 0===b&&(b=c),function ru(r,e){return function hu(){return void 0===Un&&typeof document<"u"&&(Un=document.implementation.createDocument("","",null)),Un}().createElementNS(r,e)}(void 0!==e?e:a[a.length-1].node.namespaceURI,b)}}();function is(r){const e=/^\s*(true|1)|(false|0)\s*$/.exec(r);if(e)return void 0!==e[1]||!1}function ks(r){return ui(ar(r,!1))}function ui(r){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(r);if(e)return parseFloat(e[1])}function rr(r){return Zn(ar(r,!1))}function Zn(r){const e=/^\s*(\d+)\s*$/.exec(r);if(e)return parseInt(e[1],10)}function Xe(r){return ar(r,!1).trim()}function or(r){return r.getAttributeNS("http://www.w3.org/1999/xlink","href")}const ft=[null,"http://www.opengis.net/wms"],pu=gt(ft,{Service:me(function Du(r,e){return lt({},yu,r,e)}),Capability:me(function Ou(r,e){return lt({},mu,r,e)})}),mu=gt(ft,{Request:me(function Hu(r,e){return lt({},Au,r,e)}),Exception:me(function Yu(r,e){return lt([],_u,r,e)}),Layer:me(function Wu(r,e){const s=lt({},Uo,r,e);return void 0===s.Layer?Object.assign(s,Zo(r,e)):s})}),yu=gt(ft,{Name:me(Xe),Title:me(Xe),Abstract:me(Xe),KeywordList:me(qo),OnlineResource:me(or),ContactInformation:me(function Nu(r,e){return lt({},bu,r,e)}),Fees:me(Xe),AccessConstraints:me(Xe),LayerLimit:me(rr),MaxWidth:me(rr),MaxHeight:me(rr)}),bu=gt(ft,{ContactPersonPrimary:me(function zu(r,e){return lt({},vu,r,e)}),ContactPosition:me(Xe),ContactAddress:me(function Xu(r,e){return lt({},wu,r,e)}),ContactVoiceTelephone:me(Xe),ContactFacsimileTelephone:me(Xe),ContactElectronicMailAddress:me(Xe)}),vu=gt(ft,{ContactPerson:me(Xe),ContactOrganization:me(Xe)}),wu=gt(ft,{AddressType:me(Xe),Address:me(Xe),City:me(Xe),StateOrProvince:me(Xe),PostCode:me(Xe),Country:me(Xe)}),_u=gt(ft,{Format:Go(Xe)}),Uo=gt(ft,{Name:me(Xe),Title:me(Xe),Abstract:me(Xe),KeywordList:me(qo),CRS:Pt(Xe),EX_GeographicBoundingBox:me(function Fu(r,e){const s=lt({},Su,r,e);if(!s)return;const a=s.westBoundLongitude,c=s.southBoundLatitude,d=s.eastBoundLongitude,m=s.northBoundLatitude;return void 0!==a&&void 0!==c&&void 0!==d&&void 0!==m?[a,c,d,m]:void 0}),BoundingBox:Pt(function Pu(r,e){const s=[ui(r.getAttribute("minx")),ui(r.getAttribute("miny")),ui(r.getAttribute("maxx")),ui(r.getAttribute("maxy"))],a=[ui(r.getAttribute("resx")),ui(r.getAttribute("resy"))];return{crs:r.getAttribute("CRS"),extent:s,res:a}}),Dimension:Pt(function Bu(r,e){return{name:r.getAttribute("name"),units:r.getAttribute("units"),unitSymbol:r.getAttribute("unitSymbol"),default:r.getAttribute("default"),multipleValues:is(r.getAttribute("multipleValues")),nearestValue:is(r.getAttribute("nearestValue")),current:is(r.getAttribute("current")),values:Xe(r)}}),Attribution:me(function Mu(r,e){return lt({},Cu,r,e)}),AuthorityURL:Pt(function ju(r,e){const s=di(r,e);if(s)return s.name=r.getAttribute("name"),s}),Identifier:Pt(Xe),MetadataURL:Pt(function Uu(r,e){const s=di(r,e);if(s)return s.type=r.getAttribute("type"),s}),DataURL:Pt(di),FeatureListURL:Pt(di),Style:Pt(function Zu(r,e){return lt({},Iu,r,e)}),MinScaleDenominator:me(ks),MaxScaleDenominator:me(ks),Layer:Pt(Zo)}),Cu=gt(ft,{Title:me(Xe),OnlineResource:me(or),LogoURL:me(Ko)}),Su=gt(ft,{westBoundLongitude:me(ks),eastBoundLongitude:me(ks),southBoundLatitude:me(ks),northBoundLatitude:me(ks)}),Au=gt(ft,{GetCapabilities:me(lr),GetMap:me(lr),GetFeatureInfo:me(lr)}),ku=gt(ft,{Format:Pt(Xe),DCPType:Pt(function Gu(r,e){return lt({},Eu,r,e)})}),Eu=gt(ft,{HTTP:me(function Vu(r,e){return lt({},Tu,r,e)})}),Tu=gt(ft,{Get:me(di),Post:me(di)}),Iu=gt(ft,{Name:me(Xe),Title:me(Xe),Abstract:me(Xe),LegendURL:Pt(Ko),StyleSheetURL:me(di),StyleURL:me(di)}),Lu=gt(ft,{Format:me(Xe),OnlineResource:me(or)}),Ru=gt(ft,{Keyword:Go(Xe)});function Zo(r,e){const s=e[e.length-1],a=lt({},Uo,r,e);if(!a)return;let c=is(r.getAttribute("queryable"));void 0===c&&(c=s.queryable),a.queryable=void 0!==c&&c;let d=Zn(r.getAttribute("cascaded"));void 0===d&&(d=s.cascaded),a.cascaded=d;let m=is(r.getAttribute("opaque"));void 0===m&&(m=s.opaque),a.opaque=void 0!==m&&m;let b=is(r.getAttribute("noSubsets"));void 0===b&&(b=s.noSubsets),a.noSubsets=void 0!==b&&b;let v=ui(r.getAttribute("fixedWidth"));v||(v=s.fixedWidth),a.fixedWidth=v;let S=ui(r.getAttribute("fixedHeight"));return S||(S=s.fixedHeight),a.fixedHeight=S,["Style","CRS","AuthorityURL"].forEach(function(F){F in s&&(a[F]=(a[F]||[]).concat(s[F]))}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(F){F in a||(a[F]=s[F])}),a}function di(r,e){return lt({},Lu,r,e)}function lr(r,e){return lt({},ku,r,e)}function Ko(r,e){const s=di(r,e);if(s){const a=[Zn(r.getAttribute("width")),Zn(r.getAttribute("height"))];return s.size=a,s}}function qo(r,e){return lt([],Ru,r,e)}let Jo=(()=>{class r{constructor(s){this._http=s,this._layers=new Yo.t,this.wmsUrl="/geoservico/geoserver/ows"}get layers$(){return this._layers.asObservable()}set layers(s){this._layers.next(s)}get(){return this._http.get(`${this.wmsUrl}?service=wms&version=1.1.1&request=GetCapabilities`,{responseType:"text"}).pipe((0,sr.U)(s=>this.parseWMSCapabilities(s)),(0,nu.K)(()=>(0,au.of)([])))}parseWMSCapabilities(s){const d=(new class xu extends class uu{read(e){if(e){if("string"==typeof e){const s=function lu(r){return(new DOMParser).parseFromString(r,"application/xml")}(e);return this.readFromDocument(s)}return function ou(r){return"documentElement"in r}(e)?this.readFromDocument(e):this.readFromNode(e)}return null}readFromDocument(e){for(let s=e.firstChild;s;s=s.nextSibling)if(s.nodeType==Node.ELEMENT_NODE)return this.readFromNode(s);return null}readFromNode(e){}}{constructor(){super(),this.version=void 0}readFromNode(e){return this.version=e.getAttribute("version").trim(),lt({version:this.version},pu,e,[])||null}}).read(s)?.Capability?.Layer.Layer;let m=[];return Array.isArray(d)&&(m=d.filter(b=>b.Name.includes("teeb:"))),m}}return r.\u0275fac=function(s){return new(s||r)(G.LFG(nr.eN))},r.\u0275prov=G.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var qu=_e(1135);let Ju=(()=>{class r{constructor(){this.capabilities$=new qu.X(null)}getState(){return this.capabilities$.asObservable()}setState(s){this.capabilities$.next(s)}}return r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=G.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();_e(9038);class Kn extends rt{constructor(e,s,a){super(e),this.element=s,this.index=a}}const zt=class $u extends ut{constructor(e,s){if(super(),this.unique_=!!(s=s||{}).unique,this.array_=e||[],this.unique_)for(let a=0,c=this.array_.length;a<c;++a)this.assertUnique_(this.array_[a],a);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let s=0,a=e.length;s<a;++s)this.push(e[s]);return this}forEach(e){const s=this.array_;for(let a=0,c=s.length;a<c;++a)e(s[a],a,s)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get("length")}insertAt(e,s){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(s),this.array_.splice(e,0,s),this.updateLength_(),this.dispatchEvent(new Kn("add",s,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const s=this.getLength();return this.insertAt(s,e),this.getLength()}remove(e){const s=this.array_;for(let a=0,c=s.length;a<c;++a)if(s[a]===e)return this.removeAt(a)}removeAt(e){if(e<0||e>=this.getLength())return;const s=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Kn("remove",s,e)),s}setAt(e,s){if(e>=this.getLength())return void this.insertAt(e,s);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(s,e);const c=this.array_[e];this.array_[e]=s,this.dispatchEvent(new Kn("remove",c,e)),this.dispatchEvent(new Kn("add",s,e))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(e,s){for(let a=0,c=this.array_.length;a<c;++a)if(this.array_[a]===e&&a!==s)throw new Zi(58)}};function Qo(r,e,s){return e+":"+r+":"+(s?h(s):"null")}const qn=new class Qu{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const s in this.cache_){const a=this.cache_[s];0==(3&e++)&&!a.hasListener()&&(delete this.cache_[s],--this.cacheSize_)}}}get(e,s,a){const c=Qo(e,s,a);return c in this.cache_?this.cache_[c]:null}set(e,s,a,c){const d=Qo(e,s,a);this.cache_[d]=c,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}};function td(r,e){qn.expire()}const id=class ed extends Tt{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,s){pe()}calculateMatrices2D(e){const s=e.viewState,a=e.coordinateToPixelTransform,c=e.pixelToCoordinateTransform;Rt(a,e.size[0]/2,e.size[1]/2,1/s.resolution,-1/s.resolution,-s.rotation,-s.center[0],-s.center[1]),t(c,a)}forEachFeatureAtCoordinate(e,s,a,c,d,m,b,v){let S;const A=s.viewState;function R($,te,ce,ue){return d.call(m,te,$?ce:null,ue)}const F=A.projection,N=yo(e.slice(),F),X=[[0,0]];if(F.canWrapX()&&c){const te=Ze(F.getExtent());X.push([-te,0],[te,0])}const B=s.layerStatesArray,H=B.length,V=[],U=[];for(let $=0;$<X.length;$++)for(let te=H-1;te>=0;--te){const ce=B[te],ue=ce.layer;if(ue.hasRenderer()&&Ws(ce,A)&&b.call(v,ue)){const xe=ue.getRenderer(),Ae=ue.getSource();if(xe&&Ae){const ke=Ae.getWrapX()?N:e,Ne=R.bind(null,ce.managed);U[0]=ke[0]+X[$][0],U[1]=ke[1]+X[$][1],S=xe.forEachFeatureAtCoordinate(U,s,a,Ne,V)}if(S)return S}}if(0===V.length)return;const q=1/V.length;return V.forEach(($,te)=>$.distanceSq+=te*q),V.sort(($,te)=>$.distanceSq-te.distanceSq),V.some($=>S=$.callback($.feature,$.layer,$.geometry)),S}hasFeatureAtCoordinate(e,s,a,c,d,m){return void 0!==this.forEachFeatureAtCoordinate(e,s,a,c,le,this,d,m)}getMap(){return this.map_}renderFrame(e){pe()}scheduleExpireIconCache(e){qn.canExpireCache()&&e.postRenderFunctions.push(td)}},Jn="ol-hidden",$t="ol-unselectable",el="ol-unsupported",ss="ol-control",$n="ol-collapsed",nd=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),tl=["style","variant","weight","size","lineHeight","family"],il=function(r){const e=r.match(nd);if(!e)return null;const s={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let a=0,c=tl.length;a<c;++a){const d=e[a+1];void 0!==d&&(s[tl[a]]=d)}return s.families=s.family.split(/,\s?/),s},sl="10px sans-serif",gi="#000",Qn="round",qs=[],Es="round",Qs="#000",en="center",ea="middle",ns=[0,0,0,0],fi=new ut;let cr,Ts=null;const hr={},ad=function(){const e="32px ",s=["monospace","serif"],a=s.length,c="wmytzilWMYTZIL@#/&?$%10\uf013";let d,m;function b(S,A,R){let F=!0;for(let N=0;N<a;++N){const X=s[N];if(m=ta(S+" "+A+" "+e+X,c),R!=X){const B=ta(S+" "+A+" "+e+R+","+X,c);F=F&&B!=m}}return!!F}function v(){let S=!0;const A=fi.getKeys();for(let R=0,F=A.length;R<F;++R){const N=A[R];fi.get(N)<100&&(b.apply(this,N.split("\n"))?(Le(hr),Ts=null,cr=void 0,fi.set(N,100)):(fi.set(N,fi.get(N)+1,!0),S=!1))}S&&(clearInterval(d),d=void 0)}return function(S){const A=il(S);if(!A)return;const R=A.families;for(let F=0,N=R.length;F<N;++F){const X=R[F],B=A.style+"\n"+A.weight+"\n"+X;void 0===fi.get(B)&&(fi.set(B,100,!0),b(A.style,A.weight,X)||(fi.set(B,0,!0),void 0===d&&(d=setInterval(v,32))))}}}(),rd=function(){let r;return function(e){let s=hr[e];if(null==s){if(xs){const a=il(e),c=nl(e,"\u017dg");s=(isNaN(Number(a.lineHeight))?1.2:Number(a.lineHeight))*(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),s=r.offsetHeight,document.body.removeChild(r);hr[e]=s}return s}}();function nl(r,e){return Ts||(Ts=k(1,1)),r!=cr&&(Ts.font=r,cr=Ts.font),Ts.measureText(e)}function ta(r,e){return nl(r,e).width}function al(r,e,s){if(e in s)return s[e];const a=e.split("\n").reduce((c,d)=>Math.max(c,ta(r,d)),0);return s[e]=a,a}const ud=class hd extends id{constructor(e){super(e),this.fontChangeListenerKey_=we(fi,"propertychange",e.redrawText.bind(e)),this.element_=document.createElement("div");const s=this.element_.style;s.position="absolute",s.width="100%",s.height="100%",s.zIndex="0",this.element_.className=$t+" ol-layers";const a=e.getViewport();a.insertBefore(this.element_,a.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,s){const a=this.getMap();if(a.hasListener(e)){const c=new kn(e,void 0,s);a.dispatchEvent(c)}}disposeInternal(){Ie(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);const s=e.layerStatesArray.sort(function(m,b){return m.zIndex-b.zIndex}),a=e.viewState;this.children_.length=0;const c=[];let d=null;for(let m=0,b=s.length;m<b;++m){const v=s[m];e.layerIndex=m;const S=v.layer,A=S.getSourceState();if(!Ws(v,a)||"ready"!=A&&"undefined"!=A){S.unrender();continue}const R=S.render(e,d);!R||(R!==d&&(this.children_.push(R),d=R),"getDeclutter"in S&&c.push(S))}for(let m=c.length-1;m>=0;--m)c[m].renderDeclutter(e);(function T(r,e){const s=r.childNodes;for(let a=0;;++a){const c=s[a],d=e[a];if(!c&&!d)break;if(c!==d){if(!c){r.appendChild(d);continue}if(!d){r.removeChild(c),--a;continue}r.insertBefore(d,c)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}};class Oi extends rt{constructor(e,s){super(e),this.layer=s}}class dr extends wn{constructor(e){e=e||{};const s=Object.assign({},e);delete s.layers;let a=e.layers;super(s),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),a?Array.isArray(a)?a=new zt(a.slice(),{unique:!0}):Ee("function"==typeof a.getArray,43):a=new zt(void 0,{unique:!0}),this.setLayers(a)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ie),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(we(e,"add",this.handleLayersAdd_,this),we(e,"remove",this.handleLayersRemove_,this));for(const a in this.listenerKeys_)this.listenerKeys_[a].forEach(Ie);Le(this.listenerKeys_);const s=e.getArray();for(let a=0,c=s.length;a<c;a++){const d=s[a];this.registerLayerListeners_(d),this.dispatchEvent(new Oi("addlayer",d))}this.changed()}registerLayerListeners_(e){const s=[we(e,"propertychange",this.handleLayerChange_,this),we(e,"change",this.handleLayerChange_,this)];e instanceof dr&&s.push(we(e,"addlayer",this.handleLayerGroupAdd_,this),we(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Me(e)]=s}handleLayerGroupAdd_(e){this.dispatchEvent(new Oi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Oi("removelayer",e.layer))}handleLayersAdd_(e){const s=e.element;this.registerLayerListeners_(s),this.dispatchEvent(new Oi("addlayer",s)),this.changed()}handleLayersRemove_(e){const s=e.element,a=Me(s);this.listenerKeys_[a].forEach(Ie),delete this.listenerKeys_[a],this.dispatchEvent(new Oi("removelayer",s)),this.changed()}getLayers(){return this.get("layers")}setLayers(e){const s=this.getLayers();if(s){const a=s.getArray();for(let c=0,d=a.length;c<d;++c)this.dispatchEvent(new Oi("removelayer",a[c]))}this.set("layers",e)}getLayersArray(e){return e=void 0!==e?e:[],this.getLayers().forEach(function(s){s.getLayersArray(e)}),e}getLayerStatesArray(e){const s=void 0!==e?e:[],a=s.length;this.getLayers().forEach(function(m){m.getLayerStatesArray(s)});const c=this.getLayerState();let d=c.zIndex;!e&&void 0===c.zIndex&&(d=0);for(let m=a,b=s.length;m<b;m++){const v=s[m];v.opacity*=c.opacity,v.visible=v.visible&&c.visible,v.maxResolution=Math.min(v.maxResolution,c.maxResolution),v.minResolution=Math.max(v.minResolution,c.minResolution),v.minZoom=Math.max(v.minZoom,c.minZoom),v.maxZoom=Math.min(v.maxZoom,c.maxZoom),void 0!==c.extent&&(v.extent=void 0!==v.extent?bs(v.extent,c.extent):c.extent),void 0===v.zIndex&&(v.zIndex=d)}return s}getSourceState(){return"ready"}}const ia=dr,Is=class dd extends rt{constructor(e,s,a){super(e),this.map=s,this.frameState=void 0!==a?a:null}},Di=class gd extends Is{constructor(e,s,a,c,d,m){super(e,s,d),this.originalEvent=a,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==c&&c,this.activePointers=m}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},tt={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},pd=class fd extends Ue{constructor(e,s){super(e),this.map_=e,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===s?1:s,this.down_=null;const a=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=a,this.pointerdownListenerKey_=we(a,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=we(a,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!Ln&&{passive:!1})}emulateClick_(e){let s=new Di(tt.CLICK,this.map_,e);this.dispatchEvent(s),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,s=new Di(tt.DBLCLICK,this.map_,e),this.dispatchEvent(s)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const a=new Di(tt.SINGLECLICK,this.map_,e);this.dispatchEvent(a)}.bind(this),250)}updateActivePointers_(e){const s=e,a=s.pointerId;if(s.type==tt.POINTERUP||s.type==tt.POINTERCANCEL){delete this.trackedTouches_[a];for(const c in this.trackedTouches_)if(this.trackedTouches_[c].target!==s.target){delete this.trackedTouches_[c];break}}else(s.type==tt.POINTERDOWN||s.type==tt.POINTERMOVE)&&(this.trackedTouches_[a]=s);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const s=new Di(tt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(s),this.emulateClicks_&&!s.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(Ie),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);const s=new Di(tt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(s),this.down_={};for(const a in e){const c=e[a];this.down_[a]="function"==typeof c?j:c}if(0===this.dragListenerKeys_.length){const a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(we(a,tt.POINTERMOVE,this.handlePointerMove_,this),we(a,tt.POINTERUP,this.handlePointerUp_,this),we(this.element_,tt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(we(this.element_.getRootNode(),tt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const s=new Di(tt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(s)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const s=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Di(tt.POINTERMOVE,this.map_,e,s))}handleTouchMove_(e){const s=this.originalPointerMoveEvent_;(!s||s.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ie(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ie(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ie),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},sa=1/0,Ft={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function rl(r,e,s){return function(a,c,d,m,b){if(!a)return;if(!c&&!e)return a;const v=e?0:d[0]*c,S=e?0:d[1]*c,A=b?b[0]:0,R=b?b[1]:0;let F=r[0]+v/2+A,N=r[2]-v/2+A,X=r[1]+S/2+R,B=r[3]-S/2+R;F>N&&(F=(N+F)/2,N=F),X>B&&(X=(B+X)/2,B=X);let H=Ve(a[0],F,N),V=Ve(a[1],X,B);if(m&&s&&c){const U=30*c;H+=-U*Math.log(1+Math.max(0,F-a[0])/U)+U*Math.log(1+Math.max(0,a[0]-N)/U),V+=-U*Math.log(1+Math.max(0,X-a[1])/U)+U*Math.log(1+Math.max(0,a[1]-B)/U)}return[H,V]}}function wd(r){return r}function gr(r,e,s,a){const c=Ze(e)/s[0],d=Bt(e)/s[1];return a?Math.min(r,Math.max(c,d)):Math.min(r,Math.min(c,d))}function fr(r,e,s){let a=Math.min(r,e);return a*=Math.log(1+50*Math.max(0,r/e-1))/50+1,s&&(a=Math.max(a,s),a/=Math.log(1+50*Math.max(0,s/r-1))/50+1),Ve(a,s/2,2*e)}function ol(r,e,s,a,c){return s=void 0===s||s,function(d,m,b,v){if(void 0!==d){const S=a?gr(r,a,b,c):r;return s&&v?fr(d,S,e):Ve(d,e,S)}}}function pr(r){if(void 0!==r)return 0}function ll(r){if(void 0!==r)return r}function as(r,e,s,a,c,d){d=d||[];let m=0;for(let b=e;b<s;b+=a){const v=r[b],S=r[b+1];d[m++]=c[0]*v+c[2]*S+c[4],d[m++]=c[1]*v+c[3]*S+c[5]}return d&&d.length!=m&&(d.length=m),d}function cl(r,e,s,a,c,d,m){m=m||[];const b=Math.cos(c),v=Math.sin(c),S=d[0],A=d[1];let R=0;for(let F=e;F<s;F+=a){const N=r[F]-S,X=r[F+1]-A;m[R++]=S+N*b-X*v,m[R++]=A+N*v+X*b;for(let B=F+2;B<F+a;++B)m[R++]=r[B]}return m&&m.length!=R&&(m.length=R),m}const hl=[1,0,0,1,0,0],Id=class Td extends ut{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function ye(r){let s,a,c,e=!1;return function(){const d=Array.prototype.slice.call(arguments);return(!e||this!==c||!J(d,a))&&(e=!0,c=this,a=d,s=r.apply(this,arguments)),s}}(function(e,s,a){if(!a)return this.getSimplifiedGeometry(s);const c=this.clone();return c.applyTransform(a),c.getSimplifiedGeometry(s)})}simplifyTransformed(e,s){return this.simplifyTransformedInternal(this.getRevision(),e,s)}clone(){return pe()}closestPointXY(e,s,a,c){return pe()}containsXY(e,s){const a=this.getClosestPoint([e,s]);return a[0]===e&&a[1]===s}getClosestPoint(e,s){return this.closestPointXY(e[0],e[1],s=s||[NaN,NaN],1/0),s}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return pe()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const s=this.computeExtent(this.extent_);(isNaN(s[0])||isNaN(s[1]))&&ot(s),this.extentRevision_=this.getRevision()}return function Mc(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}(this.extent_,e)}rotate(e,s){pe()}scale(e,s,a){pe()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return pe()}getType(){return pe()}applyTransform(e){pe()}intersectsExtent(e){return pe()}translate(e,s){pe()}transform(e,s){const a=dt(e),c="tile-pixels"==a.getUnits()?function(d,m,b){const v=a.getExtent(),S=a.getWorldExtent(),A=Bt(S)/Bt(v);return Rt(hl,S[0],S[3],A,-A,0,0,0),as(d,0,d.length,b,hl,m),Us(a,s)(d,m,b)}:Us(a,s);return this.applyTransform(c),this}};function ul(r){let e;return"XY"==r?e=2:"XYZ"==r||"XYM"==r?e=3:"XYZM"==r&&(e=4),e}const mr=class Ld extends Id{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return function Ma(r,e,s,a,c){return so(ot(c),r,e,s,a)}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return pe()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const s=this.getSimplifiedGeometryInternal(e);return s.getFlatCoordinates().length<this.flatCoordinates.length?s:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,s){this.stride=ul(e),this.layout=e,this.flatCoordinates=s}setCoordinates(e,s){pe()}setLayout(e,s,a){let c;if(e)c=ul(e);else{for(let d=0;d<a;++d){if(0===s.length)return this.layout="XY",void(this.stride=2);s=s[0]}c=s.length,e=function Rd(r){let e;return 2==r?e="XY":3==r?e="XYZ":4==r&&(e="XYZM"),e}(c)}this.layout=e,this.stride=c}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,s){const a=this.getFlatCoordinates();if(a){const c=this.getStride();cl(a,0,a.length,c,e,s,a),this.changed()}}scale(e,s,a){void 0===s&&(s=e),a||(a=ys(this.getExtent()));const c=this.getFlatCoordinates();if(c){const d=this.getStride();(function kd(r,e,s,a,c,d,m,b){b=b||[];const v=m[0],S=m[1];let A=0;for(let R=e;R<s;R+=a){const N=r[R+1]-S;b[A++]=v+c*(r[R]-v),b[A++]=S+d*N;for(let X=R+2;X<R+a;++X)b[A++]=r[X]}b&&b.length!=A&&(b.length=A)})(c,0,c.length,d,e,s,a,c),this.changed()}}translate(e,s){const a=this.getFlatCoordinates();if(a){const c=this.getStride();(function Ed(r,e,s,a,c,d,m){m=m||[];let b=0;for(let v=e;v<s;v+=a){m[b++]=r[v]+c,m[b++]=r[v+1]+d;for(let S=v+2;S<v+a;++S)m[b++]=r[S]}m&&m.length!=b&&(m.length=b)})(a,0,a.length,c,e,s,a),this.changed()}}};function dl(r,e,s,a,c,d,m){const b=r[e],v=r[e+1],S=r[s]-b,A=r[s+1]-v;let R;if(0===S&&0===A)R=e;else{const F=((c-b)*S+(d-v)*A)/(S*S+A*A);if(F>1)R=s;else{if(F>0){for(let N=0;N<a;++N)m[N]=li(r[e+N],r[s+N],F);return void(m.length=a)}R=e}}for(let F=0;F<a;++F)m[F]=r[R+F];m.length=a}function gl(r,e,s,a,c){let d=r[e],m=r[e+1];for(e+=a;e<s;e+=a){const b=r[e],v=r[e+1],S=oi(d,m,b,v);S>c&&(c=S),d=b,m=v}return c}function pl(r,e,s,a,c,d,m,b,v,S,A){if(e==s)return S;let R,F;if(0===c){if(F=oi(m,b,r[e],r[e+1]),F<S){for(R=0;R<a;++R)v[R]=r[e+R];return v.length=a,F}return S}A=A||[NaN,NaN];let N=e+a;for(;N<s;)if(dl(r,N-a,N,a,m,b,A),F=oi(m,b,A[0],A[1]),F<S){for(S=F,R=0;R<a;++R)v[R]=A[R];v.length=a,N+=a}else N+=a*Math.max((Math.sqrt(F)-Math.sqrt(S))/c|0,1);if(d&&(dl(r,s-a,e,a,m,b,A),F=oi(m,b,A[0],A[1]),F<S)){for(S=F,R=0;R<a;++R)v[R]=A[R];v.length=a}return S}function xl(r,e,s,a){for(let c=0,d=s.length;c<d;++c){const m=s[c];for(let b=0;b<a;++b)r[e++]=m[b]}return e}function rs(r,e){return e*Math.round(r/e)}function Dd(r,e,s,a,c,d,m){if(e==s)return m;let S,A,b=rs(r[e],c),v=rs(r[e+1],c);e+=a,d[m++]=b,d[m++]=v;do{if(S=rs(r[e],c),A=rs(r[e+1],c),(e+=a)==s)return d[m++]=S,d[m++]=A,m}while(S==b&&A==v);for(;e<s;){const R=rs(r[e],c),F=rs(r[e+1],c);if(e+=a,R==S&&F==A)continue;const N=S-b,X=A-v,B=R-b,H=F-v;N*H==X*B&&(N<0&&B<N||N==B||N>0&&B>N)&&(X<0&&H<X||X==H||X>0&&H>X)?(S=R,A=F):(d[m++]=S,d[m++]=A,b=S,v=A,S=R,A=F)}return d[m++]=S,d[m++]=A,m}function Ls(r,e,s,a,c){c=void 0!==c?c:[];let d=0;for(let m=e;m<s;m+=a)c[d++]=r.slice(m,m+a);return c.length=d,c}function na(r,e,s,a,c){c=void 0!==c?c:[];let d=0;for(let m=0,b=s.length;m<b;++m){const v=s[m];c[d++]=Ls(r,e,v,a,c[d]),e=v}return c.length=d,c}function vl(r,e,s,a,c){c=void 0!==c?c:[];let d=0;for(let m=0,b=s.length;m<b;++m){const v=s[m];c[d++]=1===v.length&&v[0]===e?[]:na(r,e,v,a,c[d]),e=v[v.length-1]}return c.length=d,c}function wl(r,e,s,a){let c=0,d=r[s-a],m=r[s-a+1];for(;e<s;e+=a){const b=r[e],v=r[e+1];c+=m*b-d*v,d=b,m=v}return c/2}class aa extends mr{constructor(e,s){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===s||Array.isArray(e[0])?this.setCoordinates(e,s):this.setFlatCoordinates(s,e)}clone(){return new aa(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,s,a,c){return c<Q(this.getExtent(),e,s)?c:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(gl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,s,a,c))}getArea(){return wl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ls(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const s=[];return s.length=function xr(r,e,s,a,c,d,m){const b=(s-e)/a;if(b<3){for(;e<s;e+=a)d[m++]=r[e],d[m++]=r[e+1];return m}const v=new Array(b);v[0]=1,v[b-1]=1;const S=[e,s-a];let A=0;for(;S.length>0;){const R=S.pop(),F=S.pop();let N=0;const X=r[F],B=r[F+1],H=r[R],V=r[R+1];for(let U=F+a;U<R;U+=a){const te=Ki(r[U],r[U+1],X,B,H,V);te>N&&(A=U,N=te)}N>c&&(v[(A-e)/a]=1,F+a<A&&S.push(F,A),A+a<R&&S.push(A,R))}for(let R=0;R<b;++R)v[R]&&(d[m++]=r[e+R*a],d[m++]=r[e+R*a+1]);return m}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,s,0),new aa(s,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,s){this.setLayout(s,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xl(this.flatCoordinates,0,e,this.stride),this.changed()}}const Cl=aa;class yr extends mr{constructor(e,s){super(),this.setCoordinates(e,s)}clone(){const e=new yr(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,s,a,c){const d=this.flatCoordinates,m=oi(e,s,d[0],d[1]);if(m<c){const b=this.stride;for(let v=0;v<b;++v)a[v]=d[v];return a.length=b,m}return c}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return function qt(r,e){const s=r[0],a=r[1];return $e(s,a,s,a,e)}(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return He(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,s){this.setLayout(s,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function Pd(r,e,s,a){for(let c=0,d=s.length;c<d;++c)r[e++]=s[c];return e}(this.flatCoordinates,0,e),this.changed()}}const ra=yr;function Nd(r,e,s,a){for(;e<s-a;){for(let c=0;c<a;++c){const d=r[e+c];r[e+c]=r[s-a+c],r[s-a+c]=d}e+=a,s-=a}}function br(r,e,s,a){let c=0,d=r[s-a],m=r[s-a+1];for(;e<s;e+=a){const b=r[e],v=r[e+1];c+=(b-d)*(v+m),d=b,m=v}return 0===c?void 0:c>0}function vr(r,e,s,a,c){c=void 0!==c&&c;for(let d=0,m=s.length;d<m;++d){const b=s[d],v=br(r,e,b,a);(0===d?c&&v||!c&&!v:c&&!v||!c&&v)&&Nd(r,e,b,a),e=b}return e}class os extends mr{constructor(e,s,a){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==s&&a?(this.setFlatCoordinates(s,e),this.ends_=a):this.setCoordinates(e,s)}appendLinearRing(e){this.flatCoordinates?ji(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new os(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,s,a,c){return c<Q(this.getExtent(),e,s)?c:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function fl(r,e,s,a,c){for(let d=0,m=s.length;d<m;++d){const b=s[d];c=gl(r,e,b,a,c),e=b}return c}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function ml(r,e,s,a,c,d,m,b,v,S,A){A=A||[NaN,NaN];for(let R=0,F=s.length;R<F;++R){const N=s[R];S=pl(r,e,N,a,c,d,m,b,v,S,A),e=N}return S}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,s,a,c))}containsXY(e,s){return Qa(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,s)}getArea(){return function _l(r,e,s,a){let c=0;for(let d=0,m=s.length;d<m;++d){const b=s[d];c+=wl(r,e,b,a),e=b}return c}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let s;return void 0!==e?(s=this.getOrientedFlatCoordinates().slice(),vr(s,0,this.ends_,this.stride,e)):s=this.flatCoordinates,na(s,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=ys(this.getExtent());this.flatInteriorPoint_=function Sl(r,e,s,a,c,d,m){let b,v,S,A,R,F,N;const X=c[d+1],B=[];for(let U=0,q=s.length;U<q;++U){const $=s[U];for(A=r[$-a],F=r[$-a+1],b=e;b<$;b+=a)R=r[b],N=r[b+1],(X<=F&&N<=X||F<=X&&X<=N)&&(S=(X-F)/(N-F)*(R-A)+A,B.push(S)),A=R,F=N}let H=NaN,V=-1/0;for(B.sort(_t),A=B[0],b=1,v=B.length;b<v;++b){R=B[b];const U=Math.abs(R-A);U>V&&(S=(A+R)/2,Qa(r,e,s,a,S,X)&&(H=S,V=U)),A=R}return isNaN(H)&&(H=c[d]),m?(m.push(H,X,V),m):[H,X,V]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ra(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Cl(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,s=this.flatCoordinates,a=this.ends_,c=[];let d=0;for(let m=0,b=a.length;m<b;++m){const v=a[m],S=new Cl(s.slice(d,v),e);c.push(S),d=v}return c}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;!function Al(r,e,s,a,c){c=void 0!==c&&c;for(let d=0,m=s.length;d<m;++d){const b=s[d],v=br(r,e,b,a);if(0===d){if(c&&v||!c&&!v)return!1}else if(c&&!v||!c&&v)return!1;e=b}return!0}(e,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=vr(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const s=[],a=[];return s.length=function bl(r,e,s,a,c,d,m,b){for(let v=0,S=s.length;v<S;++v){const A=s[v];m=Dd(r,e,A,a,c,d,m),b.push(m),e=A}return m}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),s,0,a),new os(s,"XY",a)}getType(){return"Polygon"}intersectsExtent(e){return function Do(r,e,s,a,c){if(!Oo(r,e,s[0],a,c))return!1;if(1===s.length)return!0;for(let d=1,m=s.length;d<m;++d)if(Dh(r,s[d-1],s[d],a,c)&&!er(r,s[d-1],s[d],a,c))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,s){this.setLayout(s,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const a=function yl(r,e,s,a,c){c=c||[];let d=0;for(let m=0,b=s.length;m<b;++m){const v=xl(r,e,s[m],a);c[d++]=v,e=v}return c.length=d,c}(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===a.length?0:a[a.length-1],this.changed()}}const zd=os;function oa(r){const e=r[0],s=r[1],a=r[2],c=r[3],d=[e,s,e,c,a,c,a,s,e,s];return new os(d,"XY",[d.length])}function la(r,e){setTimeout(function(){r(e)},0)}function _r(r,e,s,a,c){const d=Math.cos(-c);let m=Math.sin(-c),b=r[0]*d-r[1]*m,v=r[1]*d+r[0]*m;return b+=(e[0]/2-s[0])*a,v+=(s[1]-e[1]/2)*a,m=-m,[b*d-v*m,v*d+b*m]}const pi=class Yd extends ut{constructor(e){super(),e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.projection_=Ga(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,e.projection&&bo(),e.center&&(e.center=hi(e.center)),e.extent&&(e.extent=es(e.extent)),this.applyOptions_(e)}applyOptions_(e){const s=Object.assign({},e);for(const b in Ft)delete s[b];this.setProperties(s,!0);const a=function Bd(r){let e,s,a,m=void 0!==r.minZoom?r.minZoom:0,b=void 0!==r.maxZoom?r.maxZoom:28;const v=void 0!==r.zoomFactor?r.zoomFactor:2,S=void 0!==r.multiWorld&&r.multiWorld,A=void 0===r.smoothResolutionConstraint||r.smoothResolutionConstraint,R=void 0!==r.showFullExtent&&r.showFullExtent,F=Ga(r.projection,"EPSG:3857"),N=F.getExtent();let X=r.constrainOnlyCenter,B=r.extent;if(!S&&!B&&F.isGlobal()&&(X=!1,B=N),void 0!==r.resolutions){const H=r.resolutions;s=H[m],a=void 0!==H[b]?H[b]:H[H.length-1],e=r.constrainResolution?function _d(r,e,s,a){return e=void 0===e||e,function(c,d,m,b){if(void 0!==c){const v=r[0],S=r[r.length-1],A=s?gr(v,s,m,a):v;if(b)return e?fr(c,A,S):Ve(c,S,A);const R=Math.min(A,c),F=Math.floor(jt(r,R,d));return r[F]>A&&F<r.length-1?r[F+1]:r[F]}}}(H,A,!X&&B,R):ol(s,a,A,!X&&B,R)}else{const V=(N?Math.max(Ze(N),Bt(N)):360*Pi.degrees/F.getMetersPerUnit())/256/Math.pow(2,0),U=V/Math.pow(2,28);s=r.maxResolution,void 0!==s?m=0:s=V/Math.pow(v,m),a=r.minResolution,void 0===a&&(a=void 0!==r.maxZoom?void 0!==r.maxResolution?s/Math.pow(v,b):V/Math.pow(v,b):U),b=m+Math.floor(Math.log(s/a)/Math.log(v)),a=s/Math.pow(v,b-m),e=r.constrainResolution?function Cd(r,e,s,a,c,d){return a=void 0===a||a,s=void 0!==s?s:0,function(m,b,v,S){if(void 0!==m){const A=c?gr(e,c,v,d):e;if(S)return a?fr(m,A,s):Ve(m,s,A);const R=1e-9,F=Math.ceil(Math.log(e/A)/Math.log(r)-R),N=-b*(.5-R)+.5,X=Math.min(A,m),B=Math.floor(Math.log(e/X)/Math.log(r)+N),H=Math.max(F,B);return Ve(e/Math.pow(r,H),s,A)}}}(v,s,a,A,!X&&B,R):ol(s,a,A,!X&&B,R)}return{constraint:e,maxResolution:s,minResolution:a,minZoom:m,zoomFactor:v}}(e);this.maxResolution_=a.maxResolution,this.minResolution_=a.minResolution,this.zoomFactor_=a.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=a.minZoom;const c=function Wd(r){if(void 0!==r.extent)return rl(r.extent,r.constrainOnlyCenter,void 0===r.smoothExtentConstraint||r.smoothExtentConstraint);const e=Ga(r.projection,"EPSG:3857");if(!0!==r.multiWorld&&e.isGlobal()){const s=e.getExtent().slice();return s[0]=-1/0,s[2]=1/0,rl(s,!1,!1)}return wd}(e),d=a.constraint,m=function Hd(r){if(void 0===r.enableRotation||r.enableRotation){const s=r.constrainRotation;return void 0===s||!0===s?function Ad(r){return r=r||Ti(5),function(e,s){return s?e:void 0!==e?Math.abs(e)<=r?0:e:void 0}}():!1===s?ll:"number"==typeof s?function Sd(r){const e=2*Math.PI/r;return function(s,a){return a?s:void 0!==s?s=Math.floor(s/e+.5)*e:void 0}}(s):ll}return pr}(e);this.constraints_={center:c,resolution:d,rotation:m},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let s=this.padding_;this.padding_=e;const a=this.getCenter();if(a){const c=e||[0,0,0,0];s=s||[0,0,0,0];const d=this.getResolution();this.setCenterInternal([a[0]+d/2*(c[3]-s[3]+s[1]-c[1]),a[1]-d/2*(c[0]-s[0]+s[2]-c[2])])}}getUpdatedOptions_(e){const s=this.getProperties();return void 0!==s.resolution?s.resolution=this.getResolution():s.zoom=this.getZoom(),s.center=this.getCenterInternal(),s.rotation=this.getRotation(),Object.assign({},s,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const s=new Array(arguments.length);for(let a=0;a<s.length;++a){let c=arguments[a];c.center&&(c=Object.assign({},c),c.center=hi(c.center,this.getProjection())),c.anchor&&(c=Object.assign({},c),c.anchor=hi(c.anchor,this.getProjection())),s[a]=c}this.animateInternal.apply(this,s)}animateInternal(e){let a,s=arguments.length;s>1&&"function"==typeof arguments[s-1]&&(a=arguments[s-1],--s);let c=0;for(;c<s&&!this.isDef();++c){const A=arguments[c];A.center&&this.setCenterInternal(A.center),void 0!==A.zoom?this.setZoom(A.zoom):A.resolution&&this.setResolution(A.resolution),void 0!==A.rotation&&this.setRotation(A.rotation)}if(c===s)return void(a&&la(a,!0));let d=Date.now(),m=this.targetCenter_.slice(),b=this.targetResolution_,v=this.targetRotation_;const S=[];for(;c<s;++c){const A=arguments[c],R={start:d,complete:!1,anchor:A.anchor,duration:void 0!==A.duration?A.duration:1e3,easing:A.easing||Da,callback:a};if(A.center&&(R.sourceCenter=m,R.targetCenter=A.center.slice(),m=R.targetCenter),void 0!==A.zoom?(R.sourceResolution=b,R.targetResolution=this.getResolutionForZoom(A.zoom),b=R.targetResolution):A.resolution&&(R.sourceResolution=b,R.targetResolution=A.resolution,b=R.targetResolution),void 0!==A.rotation){R.sourceRotation=v;const F=Ii(A.rotation-v+Math.PI,2*Math.PI)-Math.PI;R.targetRotation=v+F,v=R.targetRotation}(r=R).sourceCenter&&r.targetCenter&&!Wn(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation?d+=R.duration:R.complete=!0,S.push(R)}var r;this.animations_.push(S),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let e;this.setHint(0,-this.hints_[0]);for(let s=0,a=this.animations_.length;s<a;++s){const c=this.animations_[s];if(c[0].callback&&la(c[0].callback,!1),!e)for(let d=0,m=c.length;d<m;++d){const b=c[d];if(!b.complete){e=b.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let s=!1;for(let a=this.animations_.length-1;a>=0;--a){const c=this.animations_[a];let d=!0;for(let m=0,b=c.length;m<b;++m){const v=c[m];if(v.complete)continue;const S=e-v.start;let A=v.duration>0?S/v.duration:1;A>=1?(v.complete=!0,A=1):d=!1;const R=v.easing(A);if(v.sourceCenter){const F=v.sourceCenter[0],N=v.sourceCenter[1],X=v.targetCenter[0],B=v.targetCenter[1];this.nextCenter_=v.targetCenter,this.targetCenter_=[F+R*(X-F),N+R*(B-N)]}if(v.sourceResolution&&v.targetResolution){const F=1===R?v.targetResolution:v.sourceResolution+R*(v.targetResolution-v.sourceResolution);if(v.anchor){const N=this.getViewportSize_(this.getRotation()),X=this.constraints_.resolution(F,0,N,!0);this.targetCenter_=this.calculateCenterZoom(X,v.anchor)}this.nextResolution_=v.targetResolution,this.targetResolution_=F,this.applyTargetState_(!0)}if(void 0!==v.sourceRotation&&void 0!==v.targetRotation){const F=1===R?Ii(v.targetRotation+Math.PI,2*Math.PI)-Math.PI:v.sourceRotation+R*(v.targetRotation-v.sourceRotation);if(v.anchor){const N=this.constraints_.rotation(F,!0);this.targetCenter_=this.calculateCenterRotate(N,v.anchor)}this.nextRotation_=v.targetRotation,this.targetRotation_=F}if(this.applyTargetState_(!0),s=!0,!v.complete)break}if(d){this.animations_[a]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const m=c[0].callback;m&&la(m,!0)}}this.animations_=this.animations_.filter(Boolean),s&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,s){let a;const c=this.getCenterInternal();return void 0!==c&&(a=[c[0]-s[0],c[1]-s[1]],za(a,e-this.getRotation()),function th(r,e){r[0]+=+e[0],r[1]+=+e[1]}(a,s)),a}calculateCenterZoom(e,s){let a;const c=this.getCenterInternal(),d=this.getResolution();return void 0!==c&&void 0!==d&&(a=[s[0]-e*(s[0]-c[0])/d,s[1]-e*(s[1]-c[1])/d]),a}getViewportSize_(e){const s=this.viewportSize_;if(e){const a=s[0],c=s[1];return[Math.abs(a*Math.cos(e))+Math.abs(c*Math.sin(e)),Math.abs(a*Math.sin(e))+Math.abs(c*Math.cos(e))]}return s}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&ja(e,this.getProjection())}getCenterInternal(){return this.get(Ft.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){return Ua(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const s=this.getCenterInternal();Ee(s,1);const a=this.getResolution();Ee(void 0!==a,2);const c=this.getRotation();return Ee(void 0!==c,3),Pa(s,a,c,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Ft.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,s){return this.getResolutionForExtentInternal(es(e,this.getProjection()),s)}getResolutionForExtentInternal(e,s){s=s||this.getViewportSizeMinusPadding_();const a=Ze(e)/s[0],c=Bt(e)/s[1];return Math.max(a,c)}getResolutionForValueFunction(e){e=e||2;const s=this.getConstrainedResolution(this.maxResolution_),c=Math.log(s/this.minResolution_)/Math.log(e);return function(d){return s/Math.pow(e,d*c)}}getRotation(){return this.get(Ft.ROTATION)}getValueForResolutionFunction(e){const s=Math.log(e||2),a=this.getConstrainedResolution(this.maxResolution_),d=Math.log(a/this.minResolution_)/s;return function(m){return Math.log(a/m)/s/d}}getViewportSizeMinusPadding_(e){let s=this.getViewportSize_(e);const a=this.padding_;return a&&(s=[s[0]-a[1]-a[3],s[1]-a[0]-a[2]]),s}getState(){const e=this.getProjection(),s=this.getResolution(),a=this.getRotation();let c=this.getCenterInternal();const d=this.padding_;if(d){const m=this.getViewportSizeMinusPadding_();c=_r(c,this.getViewportSize_(),[m[0]/2+d[3],m[1]/2+d[0]],s,a)}return{center:c.slice(0),projection:void 0!==e?e:null,resolution:s,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:a,zoom:this.getZoom()}}getZoom(){let e;const s=this.getResolution();return void 0!==s&&(e=this.getZoomForResolution(s)),e}getZoomForResolution(e){let a,c,s=this.minZoom_||0;if(this.resolutions_){const d=jt(this.resolutions_,e,1);s=d,a=this.resolutions_[d],c=d==this.resolutions_.length-1?2:a/this.resolutions_[d+1]}else a=this.maxResolution_,c=this.zoomFactor_;return s+Math.log(a/e)/Math.log(c)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const s=Ve(Math.floor(e),0,this.resolutions_.length-2);return this.resolutions_[s]/Math.pow(this.resolutions_[s]/this.resolutions_[s+1],Ve(e-s,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,s){let a;if(Ee(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e))Ee(!Oa(e),25),a=oa(es(e,this.getProjection()));else if("Circle"===e.getType()){const c=es(e.getExtent(),this.getProjection());a=oa(c),a.rotate(this.getRotation(),ys(c))}else{const c=Va();a=c?e.clone().transform(c,this.getProjection()):e}this.fitInternal(a,s)}rotatedExtentForGeometry(e){const s=this.getRotation(),a=Math.cos(s),c=Math.sin(-s),d=e.getFlatCoordinates(),m=e.getStride();let b=1/0,v=1/0,S=-1/0,A=-1/0;for(let R=0,F=d.length;R<F;R+=m){const N=d[R]*a-d[R+1]*c,X=d[R]*c+d[R+1]*a;b=Math.min(b,N),v=Math.min(v,X),S=Math.max(S,N),A=Math.max(A,X)}return[b,v,S,A]}fitInternal(e,s){let a=(s=s||{}).size;a||(a=this.getViewportSizeMinusPadding_());const c=void 0!==s.padding?s.padding:[0,0,0,0],d=void 0!==s.nearest&&s.nearest;let m;m=void 0!==s.minResolution?s.minResolution:void 0!==s.maxZoom?this.getResolutionForZoom(s.maxZoom):0;const b=this.rotatedExtentForGeometry(e);let v=this.getResolutionForExtentInternal(b,[a[0]-c[1]-c[3],a[1]-c[0]-c[2]]);v=isNaN(v)?m:Math.max(v,m),v=this.getConstrainedResolution(v,d?0:1);const S=this.getRotation(),A=Math.sin(S),R=Math.cos(S),F=ys(b);F[0]+=(c[1]-c[3])/2*v,F[1]+=(c[0]-c[2])/2*v;const B=this.getConstrainedCenter([F[0]*R-F[1]*A,F[1]*R+F[0]*A],v),H=s.callback?s.callback:j;void 0!==s.duration?this.animateInternal({resolution:v,center:B,duration:s.duration,easing:s.easing},H):(this.targetResolution_=v,this.targetCenter_=B,this.applyTargetState_(!1,!0),la(H,!0))}centerOn(e,s,a){this.centerOnInternal(hi(e,this.getProjection()),s,a)}centerOnInternal(e,s,a){this.setCenterInternal(_r(e,s,a,this.getResolution(),this.getRotation()))}calculateCenterShift(e,s,a,c){let d;const m=this.padding_;if(m&&e){const b=this.getViewportSizeMinusPadding_(-a),v=_r(e,c,[b[0]/2+m[3],b[1]/2+m[0]],s,a);d=[e[0]-v[0],e[1]-v[1]]}return d}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(e){const s=ja(this.targetCenter_,this.getProjection());this.setCenter([s[0]+e[0],s[1]+e[1]])}adjustCenterInternal(e){const s=this.targetCenter_;this.setCenterInternal([s[0]+e[0],s[1]+e[1]])}adjustResolution(e,s){s=s&&hi(s,this.getProjection()),this.adjustResolutionInternal(e,s)}adjustResolutionInternal(e,s){const a=this.getAnimating()||this.getInteracting(),c=this.getViewportSize_(this.getRotation()),d=this.constraints_.resolution(this.targetResolution_*e,0,c,a);s&&(this.targetCenter_=this.calculateCenterZoom(d,s)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,s){this.adjustResolution(Math.pow(this.zoomFactor_,-e),s)}adjustRotation(e,s){s&&(s=hi(s,this.getProjection())),this.adjustRotationInternal(e,s)}adjustRotationInternal(e,s){const a=this.getAnimating()||this.getInteracting(),c=this.constraints_.rotation(this.targetRotation_+e,a);s&&(this.targetCenter_=this.calculateCenterRotate(c,s)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&hi(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,s){return this.hints_[e]+=s,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,s){const a=this.getAnimating()||this.getInteracting()||s,c=this.constraints_.rotation(this.targetRotation_,a),d=this.getViewportSize_(c),m=this.constraints_.resolution(this.targetResolution_,0,d,a),b=this.constraints_.center(this.targetCenter_,m,d,a,this.calculateCenterShift(this.targetCenter_,m,c,d));this.get(Ft.ROTATION)!==c&&this.set(Ft.ROTATION,c),this.get(Ft.RESOLUTION)!==m&&(this.set(Ft.RESOLUTION,m),this.set("zoom",this.getZoom(),!0)),(!b||!this.get(Ft.CENTER)||!Wn(this.get(Ft.CENTER),b))&&this.set(Ft.CENTER,b),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,s,a){e=void 0!==e?e:200;const c=s||0,d=this.constraints_.rotation(this.targetRotation_),m=this.getViewportSize_(d),b=this.constraints_.resolution(this.targetResolution_,c,m),v=this.constraints_.center(this.targetCenter_,b,m,!1,this.calculateCenterShift(this.targetCenter_,b,d,m));if(0===e&&!this.cancelAnchor_)return this.targetResolution_=b,this.targetRotation_=d,this.targetCenter_=v,void this.applyTargetState_();a=a||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==b||this.getRotation()!==d||!this.getCenterInternal()||!Wn(this.getCenterInternal(),v))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:d,center:v,resolution:b,duration:e,easing:Ji,anchor:a}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(e,s,a){a=a&&hi(a,this.getProjection()),this.endInteractionInternal(e,s,a)}endInteractionInternal(e,s,a){this.setHint(1,-1),this.resolveConstraints(e,s,a)}getConstrainedCenter(e,s){const a=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,s||this.getResolution(),a)}getConstrainedZoom(e,s){const a=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(a,s))}getConstrainedResolution(e,s){s=s||0;const a=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,s,a)}},mi=class Vd extends ut{constructor(e){super();const s=e.element;s&&!e.target&&!s.style.pointerEvents&&(s.style.pointerEvents="auto"),this.element=s||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){p(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&p(this.element);for(let s=0,a=this.listenerKeys.length;s<a;++s)Ie(this.listenerKeys[s]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==j&&this.listenerKeys.push(we(e,"postrender",this.render,this)),e.render())}render(e){}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}},kl=class jd extends mi{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const s=void 0!==e.className?e.className:"ol-attribution",a=void 0!==e.tipLabel?e.tipLabel:"Attributions",c=void 0!==e.expandClassName?e.expandClassName:s+"-expand",d=void 0!==e.collapseLabel?e.collapseLabel:"\u203a",m=void 0!==e.collapseClassName?e.collapseClassName:s+"-collapse";"string"==typeof d?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=d,this.collapseLabel_.className=m):this.collapseLabel_=d;const b=void 0!==e.label?e.label:"i";"string"==typeof b?(this.label_=document.createElement("span"),this.label_.textContent=b,this.label_.className=c):this.label_=b;const v=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=a,this.toggleButton_.appendChild(v),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const A=this.element;A.className=s+" "+$t+" "+ss+(this.collapsed_&&this.collapsible_?" "+$n:"")+(this.collapsible_?"":" ol-uncollapsible"),A.appendChild(this.toggleButton_),A.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const s={},a=[];let c=!0;const d=e.layerStatesArray;for(let m=0,b=d.length;m<b;++m){const v=d[m];if(!Ws(v,e.viewState))continue;const S=v.layer.getSource();if(!S)continue;const A=S.getAttributions();if(!A)continue;const R=A(e);if(R)if(c=c&&!1!==S.getAttributionsCollapsible(),Array.isArray(R))for(let F=0,N=R.length;F<N;++F)R[F]in s||(a.push(R[F]),s[R[F]]=!0);else R in s||(a.push(R),s[R]=!0)}return this.overrideCollapsible_||this.setCollapsible(c),a}updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const s=this.collectSourceAttributions_(e),a=s.length>0;if(this.renderedVisible_!=a&&(this.element.style.display=a?"":"none",this.renderedVisible_=a),!J(s,this.renderedAttributions_)){_(this.ulElement_);for(let c=0,d=s.length;c<d;++c){const m=document.createElement("li");m.innerHTML=s[c],this.ulElement_.appendChild(m)}this.renderedAttributions_=s}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle($n),this.collapsed_?D(this.collapseLabel_,this.label_):D(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},Zd=class Ud extends mi{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const s=void 0!==e.className?e.className:"ol-rotate",a=void 0!==e.label?e.label:"\u21e7",c=void 0!==e.compassClassName?e.compassClassName:"ol-compass";this.label_=null,"string"==typeof a?(this.label_=document.createElement("span"),this.label_.className=c,this.label_.textContent=a):(this.label_=a,this.label_.classList.add(c));const d=e.tipLabel?e.tipLabel:"Reset rotation",m=document.createElement("button");m.className=s+"-reset",m.setAttribute("type","button"),m.title=d,m.appendChild(this.label_),m.addEventListener("click",this.handleClick_.bind(this),!1);const v=this.element;v.className=s+" "+$t+" "+ss,v.appendChild(m),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Jn)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const s=this.getMap().getView();if(!s)return;const a=s.getRotation();void 0!==a&&(this.duration_>0&&a%(2*Math.PI)!=0?s.animate({rotation:0,duration:this.duration_,easing:Ji}):s.setRotation(0))}render(e){const s=e.frameState;if(!s)return;const a=s.viewState.rotation;if(a!=this.rotation_){const c="rotate("+a+"rad)";if(this.autoHide_){const d=this.element.classList.contains(Jn);d||0!==a?d&&0!==a&&this.element.classList.remove(Jn):this.element.classList.add(Jn)}this.label_.style.transform=c}this.rotation_=a}},El=class Kd extends mi{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const s=void 0!==e.className?e.className:"ol-zoom",a=void 0!==e.delta?e.delta:1,c=void 0!==e.zoomInClassName?e.zoomInClassName:s+"-in",d=void 0!==e.zoomOutClassName?e.zoomOutClassName:s+"-out",m=void 0!==e.zoomInLabel?e.zoomInLabel:"+",b=void 0!==e.zoomOutLabel?e.zoomOutLabel:"\u2013",v=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",S=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",A=document.createElement("button");A.className=c,A.setAttribute("type","button"),A.title=v,A.appendChild("string"==typeof m?document.createTextNode(m):m),A.addEventListener("click",this.handleClick_.bind(this,a),!1);const R=document.createElement("button");R.className=d,R.setAttribute("type","button"),R.title=S,R.appendChild("string"==typeof b?document.createTextNode(b):b),R.addEventListener("click",this.handleClick_.bind(this,-a),!1);const N=this.element;N.className=s+" "+$t+" "+ss,N.appendChild(A),N.appendChild(R),this.duration_=void 0!==e.duration?e.duration:250}handleClick_(e,s){s.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const a=this.getMap().getView();if(!a)return;const c=a.getZoom();if(void 0!==c){const d=a.getConstrainedZoom(c+e);this.duration_>0?(a.getAnimating()&&a.cancelAnimations(),a.animate({zoom:d,duration:this.duration_,easing:Ji})):a.setZoom(d)}}};function Cr(r,e,s,a){const c=r.getZoom();if(void 0===c)return;const d=r.getConstrainedZoom(c+e),m=r.getResolutionForZoom(d);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:m,anchor:s,duration:void 0!==a?a:250,easing:Ji})}const sn=class Jd extends ut{constructor(e){super(),e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set("active",e)}setMap(e){this.map_=e}},eg=class Qd extends sn{constructor(e){super(),this.delta_=(e=e||{}).delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let s=!1;if(e.type==tt.DBLCLICK){const a=e.originalEvent,d=e.coordinate,m=a.shiftKey?-this.delta_:this.delta_;Cr(e.map.getView(),m,d,this.duration_),a.preventDefault(),s=!0}return!s}};function Sr(r){const e=r.length;let s=0,a=0;for(let c=0;c<e;c++)s+=r[c].clientX,a+=r[c].clientY;return[s/e,a/e]}const nn=class tg extends sn{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let s=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==tt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==tt.POINTERUP){const a=this.handleUpEvent(e);this.handlingDownUpSequence=a&&this.targetPointers.length>0}}else if(e.type==tt.POINTERDOWN){const a=this.handleDownEvent(e);this.handlingDownUpSequence=a,s=this.stopDown(a)}else e.type==tt.POINTERMOVE&&this.handleMoveEvent(e);return!s}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function Ar(r){const e=arguments;return function(s){let a=!0;for(let c=0,d=e.length;c<d&&(a=a&&e[c](s),a);++c);return a}}const ig=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Il=function(r){return!r.map.getTargetElement().hasAttribute("tabindex")||function(r){const e=r.map.getTargetElement(),s=r.map.getOwnerDocument().activeElement;return e.contains(s)}(r)},ng=le,Ll=function(r){const e=r.originalEvent;return 0==e.button&&!(Bs&&En&&e.ctrlKey)},Rl=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ag=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ml=function(r){const e=r.originalEvent,s=e.target.tagName;return"INPUT"!==s&&"SELECT"!==s&&"TEXTAREA"!==s&&!e.target.isContentEditable},kr=function(r){const e=r.originalEvent;return Ee(void 0!==e,56),"mouse"==e.pointerType},rg=function(r){const e=r.originalEvent;return Ee(void 0!==e,56),e.isPrimary&&0===e.button},lg=class og extends nn{constructor(e){super({stopDown:oe}),this.kinetic_=(e=e||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const s=e.condition?e.condition:Ar(Rl,rg);this.condition_=e.onFocusOnly?Ar(Il,s):s,this.noKinetic_=!1}handleDragEvent(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const s=this.targetPointers,a=Sr(s);if(s.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(a[0],a[1]),this.lastCentroid){const c=[this.lastCentroid[0]-a[0],a[1]-this.lastCentroid[1]],m=e.map.getView();(function nh(r,e){r[0]*=e,r[1]*=e})(c,m.getResolution()),za(c,m.getRotation()),m.adjustCenterInternal(c)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=a,this.lastPointersCount_=s.length,e.originalEvent.preventDefault()}handleUpEvent(e){const s=e.map,a=s.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const c=this.kinetic_.getDistance(),d=this.kinetic_.getAngle(),m=a.getCenterInternal(),b=s.getPixelFromCoordinateInternal(m),v=s.getCoordinateFromPixelInternal([b[0]-c*Math.cos(d),b[1]-c*Math.sin(d)]);a.animateInternal({center:a.getConstrainedCenter(v),duration:500,easing:Ji})}return this.panning_&&(this.panning_=!1,a.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const a=e.map.getView();return this.lastCentroid=null,a.getAnimating()&&a.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},hg=class cg extends nn{constructor(e){e=e||{},super({stopDown:oe}),this.condition_=e.condition?e.condition:ig,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){if(!kr(e))return;const s=e.map,a=s.getView();if(a.getConstraints().rotation===pr)return;const c=s.getSize(),d=e.pixel,m=Math.atan2(c[1]/2-d[1],d[0]-c[0]/2);void 0!==this.lastAngle_&&a.adjustRotationInternal(-(m-this.lastAngle_)),this.lastAngle_=m}handleUpEvent(e){return!kr(e)||(e.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(e){return!!(kr(e)&&Ll(e)&&this.condition_(e))&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},dg=class ug extends Tt{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,s=this.endPixel_,a="px",c=this.element_.style;c.left=Math.min(e[0],s[0])+a,c.top=Math.min(e[1],s[1])+a,c.width=Math.abs(s[0]-e[0])+a,c.height=Math.abs(s[1]-e[1])+a}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const s=this.element_.style;s.left="inherit",s.top="inherit",s.width="inherit",s.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,s){this.startPixel_=e,this.endPixel_=s,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,s=this.endPixel_,c=[e,[e[0],s[1]],s,[s[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);c[4]=c[0].slice(),this.geometry_?this.geometry_.setCoordinates([c]):this.geometry_=new zd([c])}getGeometry(){return this.geometry_}};class Er extends rt{constructor(e,s,a){super(e),this.coordinate=s,this.mapBrowserEvent=a}}const fg=class gg extends nn{constructor(e){super(),this.box_=new dg((e=e||{}).className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Ll,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,s,a){const c=a[0]-s[0],d=a[1]-s[1];return c*c+d*d>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Er("boxdrag",e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const s=this.boxEndCondition_(e,this.startPixel_,e.pixel);return s&&this.onBoxEnd(e),this.dispatchEvent(new Er(s?"boxend":"boxcancel",e.coordinate,e)),!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Er("boxstart",e.coordinate,e)),!0)}onBoxEnd(e){}},mg=class pg extends fg{constructor(e){super({condition:(e=e||{}).condition?e.condition:ag,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}onBoxEnd(e){const a=this.getMap().getView();let c=this.getGeometry();if(this.out_){const d=a.rotatedExtentForGeometry(c),m=a.getResolutionForExtentInternal(d),b=a.getResolution()/m;c=c.clone(),c.scale(b*b)}a.fitInternal(c,{duration:this.duration_,easing:Ji})}},yg=class xg extends sn{constructor(e){super(),e=e||{},this.defaultCondition_=function(s){return Rl(s)&&Ml(s)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}handleEvent(e){let s=!1;if("keydown"==e.type){const a=e.originalEvent,c=a.keyCode;if(this.condition_(e)&&(40==c||37==c||39==c||38==c)){const m=e.map.getView(),b=m.getResolution()*this.pixelDelta_;let v=0,S=0;40==c?S=-b:37==c?v=-b:39==c?v=b:S=b;const A=[v,S];za(A,m.getRotation()),function $d(r,e,s){const a=r.getCenterInternal();a&&r.animateInternal({duration:void 0!==s?s:250,easing:Xc,center:r.getConstrainedCenter([a[0]+e[0],a[1]+e[1]])})}(m,A,this.duration_),a.preventDefault(),s=!0}}return!s}},vg=class bg extends sn{constructor(e){super(),this.condition_=(e=e||{}).condition?e.condition:Ml,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}handleEvent(e){let s=!1;if("keydown"==e.type||"keypress"==e.type){const a=e.originalEvent,c=a.charCode;if(this.condition_(e)&&(c=="+".charCodeAt(0)||c=="-".charCodeAt(0))){const d=e.map,m=c=="+".charCodeAt(0)?this.delta_:-this.delta_;Cr(d.getView(),m,void 0,this.duration_),a.preventDefault(),s=!0}}return!s}},Sg=class Cg extends sn{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;const s=e.condition?e.condition:ng;this.condition_=e.onFocusOnly?Ar(Il,s):s,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||"wheel"!==e.type)return!0;const a=e.map,c=e.originalEvent;let d;if(c.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),"wheel"==e.type&&(d=c.deltaY,Ta&&c.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(d/=Tn),c.deltaMode===WheelEvent.DOM_DELTA_LINE&&(d*=40)),0===d)return!1;this.lastDelta_=d;const m=Date.now();void 0===this.startTime_&&(this.startTime_=m),(!this.mode_||m-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(d)<4?"trackpad":"wheel");const b=a.getView();if("trackpad"===this.mode_&&!b.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(b.getAnimating()&&b.cancelAnimations(),b.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),b.adjustZoom(-d/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=m,!1;this.totalDelta_+=d;const v=Math.max(this.timeout_-(m-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,a),v),!1}handleWheelZoom_(e){const s=e.getView();s.getAnimating()&&s.cancelAnimations();let a=-Ve(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(s.getConstrainResolution()||this.constrainResolution_)&&(a=a?a>0?1:-1:0),Cr(s,a,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},kg=class Ag extends nn{constructor(e){const s=e=e||{};s.stopDown||(s.stopDown=oe),super(s),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){let s=0;const a=this.targetPointers[0],c=this.targetPointers[1],d=Math.atan2(c.clientY-a.clientY,c.clientX-a.clientX);if(void 0!==this.lastAngle_){const A=d-this.lastAngle_;this.rotationDelta_+=A,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),s=A}this.lastAngle_=d;const m=e.map,b=m.getView();if(b.getConstraints().rotation===pr)return;const v=m.getViewport().getBoundingClientRect(),S=Sr(this.targetPointers);S[0]-=v.left,S[1]-=v.top,this.anchor_=m.getCoordinateFromPixelInternal(S),this.rotating_&&(m.render(),b.adjustRotationInternal(s,this.anchor_))}handleUpEvent(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))}handleDownEvent(e){if(this.targetPointers.length>=2){const s=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||s.getView().beginInteraction(),!0}return!1}},Tg=class Eg extends nn{constructor(e){const s=e=e||{};s.stopDown||(s.stopDown=oe),super(s),this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let s=1;const a=this.targetPointers[0],c=this.targetPointers[1],d=a.clientX-c.clientX,m=a.clientY-c.clientY,b=Math.sqrt(d*d+m*m);void 0!==this.lastDistance_&&(s=this.lastDistance_/b),this.lastDistance_=b;const v=e.map,S=v.getView();1!=s&&(this.lastScaleDelta_=s);const A=v.getViewport().getBoundingClientRect(),R=Sr(this.targetPointers);R[0]-=A.left,R[1]-=A.top,this.anchor_=v.getCoordinateFromPixelInternal(R),v.render(),S.adjustResolutionInternal(s,this.anchor_)}handleUpEvent(e){return!(this.targetPointers.length<2)||(e.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(e){if(this.targetPointers.length>=2){const s=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||s.getView().beginInteraction(),!0}return!1}};function Pl(r){r=r||{};const e=new zt,s=new class wg{constructor(e,s,a){this.decay_=e,this.minVelocity_=s,this.delay_=a,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,s){this.points_.push(e,s,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,s=this.points_.length-3;if(this.points_[s+2]<e)return!1;let a=s-3;for(;a>0&&this.points_[a+2]>e;)a-=3;const c=this.points_[s+2]-this.points_[a+2];if(c<1e3/60)return!1;const d=this.points_[s]-this.points_[a],m=this.points_[s+1]-this.points_[a+1];return this.angle_=Math.atan2(m,d),this.initialVelocity_=Math.sqrt(d*d+m*m)/c,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===r.altShiftDragRotate||r.altShiftDragRotate)&&e.push(new hg),(void 0===r.doubleClickZoom||r.doubleClickZoom)&&e.push(new eg({delta:r.zoomDelta,duration:r.zoomDuration})),(void 0===r.dragPan||r.dragPan)&&e.push(new lg({onFocusOnly:r.onFocusOnly,kinetic:s})),(void 0===r.pinchRotate||r.pinchRotate)&&e.push(new kg),(void 0===r.pinchZoom||r.pinchZoom)&&e.push(new Tg({duration:r.zoomDuration})),(void 0===r.keyboard||r.keyboard)&&(e.push(new yg),e.push(new vg({delta:r.zoomDelta,duration:r.zoomDuration}))),(void 0===r.mouseWheelZoom||r.mouseWheelZoom)&&e.push(new Sg({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(void 0===r.shiftDragZoom||r.shiftDragZoom)&&e.push(new mg({duration:r.zoomDuration})),e}function Fl(r){r instanceof ci?r.setMapInternal(null):r instanceof ia&&r.getLayers().forEach(Fl)}function Ol(r,e){if(r instanceof ci)r.setMapInternal(e);else if(r instanceof ia){const s=r.getLayers().getArray();for(let a=0,c=s.length;a<c;++a)Ol(s[a],e)}}const Dl=class Ig extends ut{constructor(e){super();const s=function Lg(r){let e=null;void 0!==r.keyboardEventTarget&&(e="string"==typeof r.keyboardEventTarget?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const s={},a=r.layers&&"function"==typeof r.layers.getLayers?r.layers:new ia({layers:r.layers});let c,d,m;return s.layergroup=a,s.target=r.target,s.view=r.view instanceof pi?r.view:new pi,void 0!==r.controls&&(Array.isArray(r.controls)?c=new zt(r.controls.slice()):(Ee("function"==typeof r.controls.getArray,47),c=r.controls)),void 0!==r.interactions&&(Array.isArray(r.interactions)?d=new zt(r.interactions.slice()):(Ee("function"==typeof r.interactions.getArray,48),d=r.interactions)),void 0!==r.overlays?Array.isArray(r.overlays)?m=new zt(r.overlays.slice()):(Ee("function"==typeof r.overlays.getArray,49),m=r.overlays):m=new zt,{controls:c,interactions:d,keyboardEventTarget:e,overlays:m,values:s}}(e=e||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Tn,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=s.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=s.controls||function qd(r){r=r||{};const e=new zt;return(void 0===r.zoom||r.zoom)&&e.push(new El(r.zoomOptions)),(void 0===r.rotate||r.rotate)&&e.push(new Zd(r.rotateOptions)),(void 0===r.attribution||r.attribution)&&e.push(new kl(r.attributionOptions)),e}(),this.interactions=s.interactions||Pl({onFocusOnly:!0}),this.overlays_=s.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new class yd extends class md{constructor(e,s){this.priorityFunction_=e,this.keyFunction_=s,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Le(this.queuedElements_)}dequeue(){const e=this.elements_,s=this.priorities_,a=e[0];1==e.length?(e.length=0,s.length=0):(e[0]=e.pop(),s[0]=s.pop(),this.siftUp_(0));const c=this.keyFunction_(a);return delete this.queuedElements_[c],a}enqueue(e){Ee(!(this.keyFunction_(e)in this.queuedElements_),31);const s=this.priorityFunction_(e);return s!=sa&&(this.elements_.push(e),this.priorities_.push(s),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const s=this.elements_,a=this.priorities_,c=s.length,d=s[e],m=a[e],b=e;for(;e<c>>1;){const v=this.getLeftChildIndex_(e),S=this.getRightChildIndex_(e),A=S<c&&a[S]<a[v]?S:v;s[e]=s[A],a[e]=a[A],e=A}s[e]=d,a[e]=m,this.siftDown_(b,e)}siftDown_(e,s){const a=this.elements_,c=this.priorities_,d=a[s],m=c[s];for(;s>e;){const b=this.getParentIndex_(s);if(!(c[b]>m))break;a[s]=a[b],c[s]=c[b],s=b}a[s]=d,c[s]=m}reprioritize(){const e=this.priorityFunction_,s=this.elements_,a=this.priorities_;let c=0;const d=s.length;let m,b,v;for(b=0;b<d;++b)m=s[b],v=e(m),v==sa?delete this.queuedElements_[this.keyFunction_(m)]:(a[c]=v,s[c++]=m);s.length=c,a.length=c,this.heapify_()}}{constructor(e,s){super(function(a){return e.apply(null,a)},function(a){return a[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=s,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const s=super.enqueue(e);return s&&e[0].addEventListener("change",this.boundHandleTileChange_),s}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const s=e.target,a=s.getState();if(2===a||3===a||4===a){3!==a&&s.removeEventListener("change",this.boundHandleTileChange_);const c=s.getKey();c in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[c],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,s){let c,d,m,a=0;for(;this.tilesLoading_<e&&a<s&&this.getCount()>0;)d=this.dequeue()[0],m=d.getKey(),c=d.getState(),0===c&&!(m in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[m]=!0,++this.tilesLoading_,++a,d.load())}}(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(s.values);const a=this;e.view&&!(e.view instanceof pi)&&e.view.then(function(c){a.setView(new pi(c))}),this.controls.addEventListener("add",function(c){c.element.setMap(this)}.bind(this)),this.controls.addEventListener("remove",function(c){c.element.setMap(null)}.bind(this)),this.interactions.addEventListener("add",function(c){c.element.setMap(this)}.bind(this)),this.interactions.addEventListener("remove",function(c){c.element.setMap(null)}.bind(this)),this.overlays_.addEventListener("add",function(c){this.addOverlayInternal_(c.element)}.bind(this)),this.overlays_.addEventListener("remove",function(c){const d=c.element.getId();void 0!==d&&delete this.overlayIdIndex_[d.toString()],c.element.setMap(null)}.bind(this)),this.controls.forEach(function(c){c.setMap(this)}.bind(this)),this.interactions.forEach(function(c){c.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Ol(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const s=e.getId();void 0!==s&&(this.overlayIdIndex_[s.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,s,a){if(!this.frameState_||!this.renderer_)return;const c=this.getCoordinateFromPixelInternal(e);return this.renderer_.forEachFeatureAtCoordinate(c,this.frameState_,void 0!==(a=void 0!==a?a:{}).hitTolerance?a.hitTolerance:0,!1!==a.checkWrapped,s,null,void 0!==a.layerFilter?a.layerFilter:le,null)}getFeaturesAtPixel(e,s){const a=[];return this.forEachFeatureAtPixel(e,function(c){a.push(c)},s),a}getAllLayers(){const e=[];return function s(a){a.forEach(function(c){c instanceof ia?s(c.getLayers()):e.push(c)})}(this.getLayers()),e}hasFeatureAtPixel(e,s){if(!this.frameState_||!this.renderer_)return!1;const a=this.getCoordinateFromPixelInternal(e);return this.renderer_.hasFeatureAtCoordinate(a,this.frameState_,void 0!==(s=void 0!==s?s:{}).hitTolerance?s.hitTolerance:0,!1!==s.checkWrapped,void 0!==s.layerFilter?s.layerFilter:le,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const s=this.viewport_.getBoundingClientRect(),a="changedTouches"in e?e.changedTouches[0]:e;return[a.clientX-s.left,a.clientY-s.top]}getTarget(){return this.get("target")}getTargetElement(){const e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null}getCoordinateFromPixel(e){return ja(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const s=this.frameState_;return s?nt(s.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const s=this.overlayIdIndex_[e.toString()];return void 0!==s?s:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(e){const s=this.getLayerGroup();if(e instanceof zt)return void s.setLayers(e);const a=s.getLayers();a.clear(),a.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let s=0,a=e.length;s<a;++s){const c=e[s];if(!c.visible)continue;const d=c.layer.getRenderer();if(d&&!d.ready)return!0;const m=c.layer.getSource();if(m&&m.loading)return!0}return!1}getPixelFromCoordinate(e){const s=hi(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(s)}getPixelFromCoordinateInternal(e){const s=this.frameState_;return s?nt(s.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,s,a,c){return function vd(r,e,s,a,c){if(!r||!(s in r.wantedTiles)||!r.wantedTiles[s][e.getKey()])return sa;const d=r.viewState.center,m=a[0]-d[0],b=a[1]-d[1];return 65536*Math.log(c)+Math.sqrt(m*m+b*b)/c}(this.frameState_,e,s,a,c)}handleBrowserEvent(e,s){const a=new Di(s=s||e.type,this,e);this.handleMapBrowserEvent(a)}handleMapBrowserEvent(e){if(!this.frameState_)return;const s=e.originalEvent,a=s.type;if("pointerdown"===a||"wheel"===a||"keydown"===a){const c=this.getOwnerDocument(),d=this.viewport_.getRootNode?this.viewport_.getRootNode():c,m=s.target;if(this.overlayContainerStopEvent_.contains(m)||!(d===c?c.documentElement:d).contains(m))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e)){const c=this.getInteractions().getArray().slice();for(let d=c.length-1;d>=0;d--){const m=c[d];if(m.getMap()===this&&m.getActive()&&this.getTargetElement()&&(!m.handleEvent(e)||e.propagationStopped))break}}}handlePostRender(){const e=this.frameState_,s=this.tileQueue_;if(!s.isEmpty()){let c=this.maxTilesLoading_,d=c;if(e){const m=e.viewHints;if(m[0]||m[1]){const b=Date.now()-e.time>8;c=b?0:8,d=b?0:2}}s.getTilesLoading()<c&&(s.reprioritize(),s.loadMoreTiles(c,d))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Is("loadend",this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Is("loadstart",this,e))));const a=this.postRenderFunctions_;for(let c=0,d=a.length;c<d;++c)a[c](this,e);a.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let s=0,a=this.targetChangeHandlerKeys_.length;s<a;++s)Ie(this.targetChangeHandlerKeys_[s]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,p(this.viewport_)}const e=this.getTargetElement();if(e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new ud(this)),this.mapBrowserEventHandler_=new pd(this,this.moveTolerance_);for(const c in tt)this.mapBrowserEventHandler_.addEventListener(tt[c],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!Ln&&{passive:!1});const s=this.getOwnerDocument().defaultView,a=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[we(a,"keydown",this.handleBrowserEvent,this),we(a,"keypress",this.handleBrowserEvent,this),we(s,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ie(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ie(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=we(e,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=we(e,"change",this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ie),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Oi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[we(e,"propertychange",this.render,this),we(e,"change",this.render,this),we(e,"addlayer",this.handleLayerAdd_,this),we(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let s=0,a=e.length;s<a;++s){const c=e[s].layer;c.hasRenderer()&&c.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Fl(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const s=this.getSize(),a=this.getView(),c=this.frameState_;let d=null;if(void 0!==s&&Io(s)&&a&&a.isDef()){const m=a.getHints(this.frameState_?this.frameState_.viewHints:void 0),b=a.getState();if(d={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Pa(b.center,b.resolution,b.rotation,s),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:s,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:b,viewHints:m,wantedTiles:{},mapId:Me(this),renderTargets:{}},b.nextCenter&&b.nextResolution){const v=isNaN(b.nextRotation)?b.rotation:b.nextRotation;d.nextExtent=Pa(b.nextCenter,b.nextResolution,v,s)}}this.frameState_=d,this.renderer_.renderFrame(d),d&&(d.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,d.postRenderFunctions),c&&(!this.previousExtent_||!Oa(this.previousExtent_)&&!Jt(d.extent,this.previousExtent_))&&(this.dispatchEvent(new Is("movestart",this,c)),this.previousExtent_=ot(this.previousExtent_)),this.previousExtent_&&!d.viewHints[0]&&!d.viewHints[1]&&!Jt(d.extent,this.previousExtent_)&&(this.dispatchEvent(new Is("moveend",this,d)),ee(d.extent,this.previousExtent_))),this.dispatchEvent(new Is("postrender",this,d)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const s=this.getLayerGroup();s&&this.handleLayerRemove_(new Oi("removelayer",s)),this.set("layergroup",e)}setSize(e){this.set("size",e)}setTarget(e){this.set("target",e)}setView(e){if(!e||e instanceof pi)return void this.set("view",e);this.set("view",new pi);const s=this;e.then(function(a){s.setView(new pi(a))})}updateSize(){const e=this.getTargetElement();let s;if(e){const a=getComputedStyle(e),c=e.offsetWidth-parseFloat(a.borderLeftWidth)-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight)-parseFloat(a.borderRightWidth),d=e.offsetHeight-parseFloat(a.borderTopWidth)-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)-parseFloat(a.borderBottomWidth);!isNaN(c)&&!isNaN(d)&&(s=[c,d],!Io(s)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(s),this.updateViewportSize_()}updateViewportSize_(){const e=this.getView();if(e){let s;const a=getComputedStyle(this.viewport_);a.width&&a.height&&(s=[parseInt(a.width,10),parseInt(a.height,10)]),e.setViewportSize(s)}}};var Rg=_e(646);const Mg=function(r,e){return{width:r,height:e}};function Pg(r,e){if(1&r&&(G.TgZ(0,"div",1)(1,"div",2),G.Hsn(2),G.qZA()()),2&r){const s=G.oxw();G.xp6(1),G.s9C("id",s.target),G.Q6J("ngStyle",G.WLB(2,Mg,s._width,s._height))}}const Fg=["*"];let Rs=(()=>{class r{constructor(s,a,c){this.elementRef=s,this.cdRef=a,this.fuseLoadingService=c,this.lat=-34.603490361131385,this.lon=-58.382037891217465,this.loading=!1,this.ready=new G.vpe,this.target=""}set width(s){s?(this._width=s,this.setSize()):this._width="100%",this.updateMapSize()}set height(s){s?(this._height=s,this.setSize()):this._height="500px",this.updateMapSize()}onWindowResize(){this.map.updateSize()}ngOnInit(){this.target="map-"+Math.random().toString(36).substring(2)}ngAfterViewInit(){const s=this;this.mapEl=this.elementRef.nativeElement.querySelector("#"+this.target),this.setSize(),this.map=new Dl({target:this.target,interactions:Pl({altShiftDragRotate:!1,pinchRotate:!1}),view:new pi({center:Vn([this.lon,this.lat]),zoom:this.zoom})}),this.map.on("loadstart",()=>{s.fuseLoadingService.show()}),this.map.on("loadend",()=>{s.fuseLoadingService.hide()}),this.cdRef.detectChanges(),setTimeout(()=>{this.ready.emit(this.map)})}updateMapSize(){this.map?.updateSize()}ngOnChanges(s){}setSize(){if(this.mapEl){const s=this.mapEl.style;s.height=this.coerceCssPixelValue(this._height)||"500px",s.width=this.coerceCssPixelValue(this._width)||"100%"}}addLayer(s){this.map.addLayer(s),this.cdRef.detectChanges()}setMarker(s){this.map.addLayer(s),this.cdRef.detectChanges()}setFeatures(s){this.map.addLayer(s);const a=s.getSource().getExtent();this.map.getView().fit(a),this.cdRef.detectChanges()}setControl(s){this.map.addControl(s)}coerceCssPixelValue(s){return null==s?"":/([A-Za-z%]+)$/.test(s)?s:`${s}px`}ngOnDestroy(){}}return r.\u0275fac=function(s){return new(s||r)(G.Y36(G.SBq),G.Y36(G.sBO),G.Y36(Rg.c))},r.\u0275cmp=G.Xpm({type:r,selectors:[["ol-map"]],hostBindings:function(s,a){1&s&&G.NdJ("resize",function(d){return a.onWindowResize(d)},!1,G.Jf7)},inputs:{lat:"lat",lon:"lon",loading:"loading",zoom:"zoom",width:"width",height:"height"},outputs:{ready:"ready"},features:[G.TTD],ngContentSelectors:Fg,decls:1,vars:1,consts:[["class","map-container",4,"ngIf"],[1,"map-container"],[1,"map",3,"id","ngStyle"]],template:function(s,a){1&s&&(G.F$t(),G.YNc(0,Pg,3,5,"div",0)),2&s&&G.Q6J("ngIf",0!==a._height&&0!==a._width)},dependencies:[bt.O5,bt.PC],styles:["[_nghost-%COMP%]     .ol-viewport{border-radius:5px;box-shadow:0 2px 4px #00000080}.map-container[_ngcontent-%COMP%]{width:100%;height:100%!important;position:relative}"]}),r})(),Xl=(()=>{class r{constructor(s,a){this.olMap=s,this.cdRef=a,this.layer={}}ngOnInit(){if(this.olMap.map){let s=!1;this.olMap.map.getLayers().forEach(a=>{a.get("key")===this.layer.get("key")&&(s=!0)}),s||this.olMap.addLayer(this.layer)}else setTimeout(()=>{this.ngOnInit()},10);this.cdRef.detectChanges()}}return r.\u0275fac=function(s){return new(s||r)(G.Y36(Rs),G.Y36(G.sBO))},r.\u0275cmp=G.Xpm({type:r,selectors:[["ol-layer"]],inputs:{layer:"layer"},decls:0,vars:0,template:function(s,a){}}),r})();const Yl=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function Bl(r){const e=r.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&r.fullscreenEnabled)}function Hl(r){return!(!r.webkitIsFullScreen&&!r.fullscreenElement)}function Gl(r){r.requestFullscreen?r.requestFullscreen():r.webkitRequestFullscreen&&r.webkitRequestFullscreen()}const Yg=class Ng extends mi{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.keys_=void 0!==e.keys&&e.keys,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==e.className?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==e.activeClassName?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==e.inactiveClassName?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const s=void 0!==e.label?e.label:"\u2922";this.labelNode_="string"==typeof s?document.createTextNode(s):s;const a=void 0!==e.labelActive?e.labelActive:"\xd7";this.labelActiveNode_="string"==typeof a?document.createTextNode(a):a;const c=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=c,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener("click",this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${$t} ${ss}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const s=e.getOwnerDocument();if(Bl(s))if(Hl(s))!function Xg(r){r.exitFullscreen?r.exitFullscreen():r.webkitExitFullscreen&&r.webkitExitFullscreen()}(s);else{let a;a=this.source_?"string"==typeof this.source_?s.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?function zg(r){r.webkitRequestFullscreen?r.webkitRequestFullscreen():Gl(r)}(a):Gl(a)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const s=this.isInFullscreen_;this.isInFullscreen_=Hl(e.getOwnerDocument()),s!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(D(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):(D(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),e.updateSize())}setClassName_(e,s){s?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const s=this.getMap();s&&s.removeChangeListener("target",this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener("target",this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let a=0,c=e.length;a<c;++a)Ie(e[a]);e.length=0;const s=this.getMap();if(s){const a=s.getOwnerDocument();Bl(a)?this.element.classList.remove(el):this.element.classList.add(el);for(let c=0,d=Yl.length;c<d;++c)e.push(we(a,Yl[c],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}},Tr="projection",Vl="coordinateFormat",Bg=class Wg extends mi{constructor(e){e=e||{};const s=document.createElement("div");s.className=void 0!==e.className?e.className:"ol-mouse-position",super({element:s,render:e.render,target:e.target}),this.addChangeListener(Tr,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=void 0!==e.placeholder,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=s.innerHTML,this.mapProjection_=null,this.transform_=null}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(Vl)}getProjection(){return this.get(Tr)}handleMouseMove(e){const s=this.getMap();this.updateHTML_(s.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){const s=e.getViewport();this.listenerKeys.push(we(s,"pointermove",this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(we(s,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(Vl,e)}setProjection(e){this.set(Tr,dt(e))}updateHTML_(e){let s=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){const d=this.getProjection();this.transform_=d?Qi(this.mapProjection_,d):Ha}const c=this.getMap().getCoordinateFromPixelInternal(e);if(c){const d=Va();d&&(this.transform_=Qi(this.mapProjection_,d)),this.transform_(c,c);const m=this.getCoordinateFormat();s=m?m(c):c.toString()}}(!this.renderedHTML_||s!==this.renderedHTML_)&&(this.element.innerHTML=s,this.renderedHTML_=s)}render(e){const s=e.frameState;s?this.mapProjection_!=s.viewState.projection&&(this.mapProjection_=s.viewState.projection,this.transform_=null):this.mapProjection_=null}},Gg=class Hg extends ut{constructor(e){super(),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){_(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(p(this.element),Ie(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=we(e,"postrender",this.render,this),this.updatePixelPosition();const s=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?s.insertBefore(this.element,s.childNodes[0]||null):s.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set("element",e)}setMap(e){this.set("map",e)}setOffset(e){this.set("offset",e)}setPosition(e){this.set("position",e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const s=this.getMap();if(!s||!s.getTargetElement()||!this.get("position"))return;const a=this.getRect(s.getTargetElement(),s.getSize()),c=this.getElement(),d=this.getRect(c,[P(c),O(c)]),m=void 0===(e=e||{}).margin?20:e.margin;if(!he(a,d)){const b=d[0]-a[0],v=a[2]-d[2],S=d[1]-a[1],A=a[3]-d[3],R=[0,0];if(b<0?R[0]=b-m:v<0&&(R[0]=Math.abs(v)+m),S<0?R[1]=S-m:A<0&&(R[1]=Math.abs(A)+m),0!==R[0]||0!==R[1]){const F=s.getView().getCenterInternal(),N=s.getPixelFromCoordinateInternal(F);if(!N)return;const X=[N[0]+R[0],N[1]+R[1]],B=e.animation||{};s.getView().animateInternal({center:s.getCoordinateFromPixelInternal(X),duration:B.duration,easing:B.easing})}}}getRect(e,s){const a=e.getBoundingClientRect(),c=a.left+window.pageXOffset,d=a.top+window.pageYOffset;return[c,d,c+s[0],d+s[1]]}setPositioning(e){this.set("positioning",e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),s=this.getPosition();if(!e||!e.isRendered()||!s)return void this.setVisible(!1);const a=e.getPixelFromCoordinate(s),c=e.getSize();this.updateRenderedPosition(a,c)}updateRenderedPosition(e,s){const a=this.element.style,c=this.getOffset(),d=this.getPositioning();this.setVisible(!0);let v="0%",S="0%";"bottom-right"==d||"center-right"==d||"top-right"==d?v="-100%":("bottom-center"==d||"center-center"==d||"top-center"==d)&&(v="-50%"),"bottom-left"==d||"bottom-center"==d||"bottom-right"==d?S="-100%":("center-left"==d||"center-center"==d||"center-right"==d)&&(S="-50%");const A=`translate(${v}, ${S}) translate(${Math.round(e[0]+c[0])+"px"}, ${Math.round(e[1]+c[1])+"px"})`;this.rendered.transform_!=A&&(this.rendered.transform_=A,a.transform=A)}getOptions(){return this.options}},jg=class Vg extends mi{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==e.rotateWithView&&e.rotateWithView,this.viewExtent_=void 0;const s=void 0!==e.className?e.className:"ol-overviewmap",a=void 0!==e.tipLabel?e.tipLabel:"Overview map",c=void 0!==e.collapseLabel?e.collapseLabel:"\u2039";"string"==typeof c?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=c):this.collapseLabel_=c;const d=void 0!==e.label?e.label:"\u203a";"string"==typeof d?(this.label_=document.createElement("span"),this.label_.textContent=d):this.label_=d;const m=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,b=document.createElement("button");b.setAttribute("type","button"),b.title=a,b.appendChild(m),b.addEventListener("click",this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const v=new Dl({view:e.view,controls:new zt,interactions:new zt});this.ovmap_=v,e.layers&&e.layers.forEach(function(U){v.addLayer(U)});const S=document.createElement("div");S.className="ol-overviewmap-box",S.style.boxSizing="border-box",this.boxOverlay_=new Gg({position:[0,0],positioning:"center-center",element:S}),this.ovmap_.addOverlay(this.boxOverlay_);const R=this.element;R.className=s+" "+$t+" "+ss+(this.collapsed_&&this.collapsible_?" "+$n:"")+(this.collapsible_?"":" ol-uncollapsible"),R.appendChild(this.ovmapDiv_),R.appendChild(b);const F=this,N=this.boxOverlay_,X=this.boxOverlay_.getElement(),H=function(U){const q=function(U){return{clientX:U.clientX,clientY:U.clientY}}(U),$=v.getEventCoordinateInternal(q);N.setPosition($)},V=function(U){const q=v.getEventCoordinateInternal(U);F.getMap().getView().setCenterInternal(q),window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",V)};X.addEventListener("mousedown",function(){window.addEventListener("mousemove",H),window.addEventListener("mouseup",V)})}setMap(e){const s=this.getMap();if(e!==s){if(s){const a=s.getView();a&&this.unbindView_(a),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(we(e,"propertychange",this.handleMapPropertyChange_,this));const a=e.getView();a&&(this.bindView_(a),a.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if("view"===e.key){const s=e.oldValue;s&&this.unbindView_(s);const a=this.getMap().getView();this.bindView_(a)}else!this.ovmap_.isRendered()&&("target"===e.key||"size"===e.key)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const s=new pi({projection:e.getProjection()});this.ovmap_.setView(s)}e.addChangeListener(Ft.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(Ft.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),s=this.ovmap_;if(!e.isRendered()||!s.isRendered())return;const a=e.getSize(),d=e.getView().calculateExtentInternal(a);if(this.viewExtent_&&Jt(d,this.viewExtent_))return;this.viewExtent_=d;const m=s.getSize(),v=s.getView().calculateExtentInternal(m),S=s.getPixelFromCoordinateInternal(Mi(d)),A=s.getPixelFromCoordinateInternal(Vs(d)),R=Math.abs(S[0]-A[0]),F=Math.abs(S[1]-A[1]),N=m[0],X=m[1];R<.1*N||F<.1*X||R>.75*N||F>.75*X?this.resetExtent_():he(v,d)||this.recenter_()}resetExtent_(){const e=this.getMap(),s=this.ovmap_,a=e.getSize(),d=e.getView().calculateExtentInternal(a),m=s.getView(),b=Math.log(7.5)/Math.LN2;(function Pc(r,e){const s=(r[2]-r[0])/2*(e-1),a=(r[3]-r[1])/2*(e-1);r[0]-=s,r[2]+=s,r[1]-=a,r[3]+=a})(d,1/(.1*Math.pow(2,b/2))),m.fitInternal(oa(d))}recenter_(){const e=this.getMap(),s=this.ovmap_,a=e.getView();s.getView().setCenterInternal(a.getCenterInternal())}updateBox_(){const e=this.getMap(),s=this.ovmap_;if(!e.isRendered()||!s.isRendered())return;const a=e.getSize(),c=e.getView(),d=s.getView(),m=this.rotateWithView_?0:-c.getRotation(),b=this.boxOverlay_,v=this.boxOverlay_.getElement(),S=c.getCenterInternal(),A=c.getResolution(),R=d.getResolution(),F=a[0]*A/R,N=a[1]*A/R;b.setPosition(S),v&&(v.style.width=F+"px",v.style.height=N+"px",v.style.transform="rotate("+m+"rad)")}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=Qe(this.ovmap_,"postrender",function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle($n),this.collapsed_?D(this.collapseLabel_,this.label_):D(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered())return this.viewExtent_=void 0,void e.render();e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}},Ir="units",Ug=[1,2,5],rn=25.4/.28,Kg=class Zg extends mi{constructor(e){e=e||{};const s=document.createElement("div");s.style.pointerEvents="none",super({element:s,render:e.render,target:e.target});const a=void 0!==e.className?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=a+"-inner",this.element.className=a+" "+$t,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==e.minWidth?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Ir,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(Ir)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(Ir,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const s=e.center,a=e.projection,c=this.getUnits();let m=Gn(a,e.resolution,s,"degrees"==c?"degrees":"m");const b=this.minWidth_*(this.dpi_||rn)/rn,v=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||rn)/rn:void 0;let S=b*m,A="";if("degrees"==c){const q=Pi.degrees;S*=q,S<q/60?(A="\u2033",m*=3600):S<q?(A="\u2032",m*=60):A="\xb0"}else"imperial"==c?S<.9144?(A="in",m/=.0254):S<1609.344?(A="ft",m/=.3048):(A="mi",m/=1609.344):"nautical"==c?(m/=1852,A="NM"):"metric"==c?S<.001?(A="\u03bcm",m*=1e6):S<1?(A="mm",m*=1e3):S<1e3?A="m":(A="km",m/=1e3):"us"==c?S<.9144?(A="in",m*=39.37):S<1609.344?(A="ft",m/=.30480061):(A="mi",m/=1609.3472):Ee(!1,33);let F,N,X,B,H,V,R=3*Math.floor(Math.log(b*m)/Math.log(10));for(;;){X=Math.floor(R/3);const q=Math.pow(10,X);if(F=Ug[(R%3+3)%3]*q,N=Math.round(F/m),isNaN(N))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==v&&N>=v){F=B,N=H,X=V;break}if(N>=b)break;B=F,H=N,V=X,++R}const U=this.scaleBar_?this.createScaleBar(N,F,A):F.toFixed(X<0?-X:0)+" "+A;this.renderedHTML_!=U&&(this.innerElement_.innerHTML=U,this.renderedHTML_=U),this.renderedWidth_!=N&&(this.innerElement_.style.width=N+"px",this.renderedWidth_=N),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,s,a){const c=this.getScaleForResolution(),d=c<1?Math.round(1/c).toLocaleString()+" : 1":"1 : "+Math.round(c).toLocaleString(),m=this.scaleBarSteps_,b=e/m,v=[this.createMarker("absolute")];for(let A=0;A<m;++A)v.push(`<div><div class="ol-scale-singlebar ${A%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even"}" style="width: ${b}px;"></div>`+this.createMarker("relative")+(A%2==0||2===m?this.createStepText(A,e,!1,s,a):"")+"</div>");return v.push(this.createStepText(m,e,!0,s,a)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+d+"</div>":"")+v.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${"absolute"===e?3:-10}px;"></div>`}createStepText(e,s,a,c,d){const b=(0===e?0:Math.round(c/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+d);return`<div class="ol-scale-step-text" style="margin-left: ${0===e?-3:s/this.scaleBarSteps_*-1}px;text-align: ${0===e?"left":"center"};min-width: ${0===e?0:s/this.scaleBarSteps_*2}px;left: ${a?s+"px":"unset"};">`+b+"</div>"}getScaleForResolution(){return Gn(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||rn)}render(e){const s=e.frameState;this.viewState_=s?s.viewState:null,this.updateElement_()}},Jg=class qg extends mi{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=0,this.heightLimit_=0,this.widthLimit_=0,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==e.duration?e.duration:200;const s=void 0!==e.className?e.className:"ol-zoomslider",a=document.createElement("button");a.setAttribute("type","button"),a.className=s+"-thumb "+$t;const c=this.element;c.className=s+" "+$t+" "+ss,c.appendChild(a),c.addEventListener("pointerdown",this.handleDraggerStart_.bind(this),!1),c.addEventListener("pointermove",this.handleDraggerDrag_.bind(this),!1),c.addEventListener("pointerup",this.handleDraggerEnd_.bind(this),!1),c.addEventListener("click",this.handleContainerClick_.bind(this),!1),a.addEventListener("click",Je,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let s=e.offsetWidth,a=e.offsetHeight;if(0===s&&0===a)return this.sliderInitialized_=!1;const c=getComputedStyle(e);s-=parseFloat(c.paddingRight)+parseFloat(c.paddingLeft),a-=parseFloat(c.paddingTop)+parseFloat(c.paddingBottom);const d=e.firstElementChild,m=getComputedStyle(d),b=d.offsetWidth+parseFloat(m.marginRight)+parseFloat(m.marginLeft),v=d.offsetHeight+parseFloat(m.marginTop)+parseFloat(m.marginBottom);return this.thumbSize_=[b,v],s>a?(this.direction_=1,this.widthLimit_=s-b):(this.direction_=0,this.heightLimit_=a-v),this.sliderInitialized_=!0}handleContainerClick_(e){const s=this.getMap().getView(),a=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),c=this.getResolutionForPosition_(a),d=s.getConstrainedZoom(s.getZoomForResolution(c));s.animateInternal({zoom:d,duration:this.duration_,easing:Ji})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const s=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(s.style.left),this.startY_=e.clientY-parseFloat(s.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){const a=this.handleDraggerDrag_,c=this.handleDraggerEnd_,d=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(we(d,"pointermove",a,this),we(d,"pointerup",c,this))}}}handleDraggerDrag_(e){if(this.dragging_){const c=this.getRelativePosition_(e.clientX-this.startX_,e.clientY-this.startY_);this.currentResolution_=this.getResolutionForPosition_(c),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(Ie),this.dragListenerKeys_.length=0)}setThumbPosition_(e){const s=this.getPositionForResolution_(e),a=this.element.firstElementChild;1==this.direction_?a.style.left=this.widthLimit_*s+"px":a.style.top=this.heightLimit_*s+"px"}getRelativePosition_(e,s){let a;return a=1===this.direction_?e/this.widthLimit_:s/this.heightLimit_,Ve(a,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){return Ve(1-this.getMap().getView().getValueForResolutionFunction()(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const s=e.frameState.viewState.resolution;this.currentResolution_=s,this.setThumbPosition_(s)}},Qg=class $g extends mi{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null;const s=void 0!==e.className?e.className:"ol-zoom-extent",a=void 0!==e.label?e.label:"E",c=void 0!==e.tipLabel?e.tipLabel:"Fit to extent",d=document.createElement("button");d.setAttribute("type","button"),d.title=c,d.appendChild("string"==typeof a?document.createTextNode(a):a),d.addEventListener("click",this.handleClick_.bind(this),!1);const b=this.element;b.className=s+" "+$t+" "+ss,b.appendChild(d)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const s=this.getMap().getView(),a=this.extent?this.extent:s.getProjection().getExtent();s.fitInternal(oa(a))}};let jl=(()=>{class r{constructor(s){this.olMap=s,this.control="",this.options={}}ngOnInit(){switch(this.control.toLocaleLowerCase()){case"fullscreen":this.chooseControl=new Yg(this.options);break;case"mouseposition":this.chooseControl=new Bg(this.options);break;case"overviewmap":this.chooseControl=new jg(this.options);break;case"scaleline":this.chooseControl=new Kg(this.options);break;case"zoomslider":this.chooseControl=new Jg(this.options);break;case"zoomtoextend":this.chooseControl=new Qg(this.options);break;case"attribution":this.chooseControl=new kl(this.options);break;default:this.chooseControl=new El(this.options)}this.olMap.map?this.olMap.setControl(this.chooseControl):setTimeout(()=>{this.ngOnInit()},10)}ngOnDestroy(){}}return r.\u0275fac=function(s){return new(s||r)(G.Y36(Rs))},r.\u0275cmp=G.Xpm({type:r,selectors:[["ol-control"]],inputs:{control:"control",options:"options"},decls:0,vars:0,template:function(s,a){}}),r})();const ef=["containerMap"];function tf(r,e){1&r&&G._UZ(0,"ol-layer",8),2&r&&G.Q6J("layer",e.$implicit)}let sf=(()=>{class r{constructor(s,a,c,d,m,b){this.cdr=s,this.layersService=a,this.dialog=c,this.wmsService=d,this.route=m,this.capabilitiesState=b,this.layers=[],this.collections=[],this.unsubscribeAll=new As.x,this.layers=[new kh({properties:{key:"mapbox",type:"bmap",visible:!0},source:new tu({wrapX:!1,attributions:"\xa9 <a href='https://www.mapbox.com/about/maps/'>Mapbox</a>",url:"https://api.mapbox.com/styles/v1/mapbox/light-v10/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoidGhhcmxlc2FuZHJhZGUiLCJhIjoiY2thaHAxcDM5MGx2dzJ4dDExaGQ0bGF3ciJ9.kiB2OzG3Q0THur8XLUW3Gg"}),visible:!0})]}setDimensions(){const s=this.containerMap.nativeElement.getBoundingClientRect();this.mapWidth=s.width<300?300:s.width-20,this.mapHeight=s.height-70,this.cdr.detectChanges()}ngOnInit(){const s=this.route.snapshot.data.capabilities;console.log(s),this.capabilitiesState.setState(s)}ngAfterViewInit(){this.setDimensions()}}return r.\u0275fac=function(s){return new(s||r)(G.Y36(G.sBO),G.Y36(su),G.Y36(Bo.uw),G.Y36(Jo),G.Y36(Ye.gz),G.Y36(Ju))},r.\u0275cmp=G.Xpm({type:r,selectors:[["layers"]],viewQuery:function(s,a){if(1&s&&G.Gf(ef,5),2&s){let c;G.iGM(c=G.CRH())&&(a.containerMap=c.first)}},hostBindings:function(s,a){1&s&&G.NdJ("resize",function(d){return a.setDimensions(d)},!1,G.Jf7)},decls:8,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-wrap","items-center","justify-around","w-full","h-full","p-2"],["containerMap",""],[1,"object-cover",3,"lat","lon","zoom","width","height"],["control","FullScreen",1,"mobileHide"],["control","scaleline",1,"mobileHide"],["control","zoomtoextend",1,"mobileHide"],[3,"layer",4,"ngFor","ngForOf"],[3,"layer"]],template:function(s,a){1&s&&(G.TgZ(0,"div",0)(1,"div",1,2)(3,"ol-map",3),G._UZ(4,"ol-control",4)(5,"ol-control",5)(6,"ol-control",6),G.YNc(7,tf,1,1,"ol-layer",7),G.qZA()()()),2&s&&(G.xp6(3),G.Q6J("lat",-16.6958288)("lon",-49.4443537)("zoom",4.6)("width",a.mapWidth)("height",a.mapHeight),G.xp6(4),G.Q6J("ngForOf",a.layers))},dependencies:[bt.sg,Rs,Xl,jl],styles:[".map-content{z-index:101;position:absolute}\n"],encapsulation:2}),r})();var Ul=_e(2402);const Zl=class nf{constructor(e){this.rbush_=new Ul(e),this.items_={}}insert(e,s){const a={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:s};this.rbush_.insert(a),this.items_[Me(s)]=a}load(e,s){const a=new Array(s.length);for(let c=0,d=s.length;c<d;c++){const m=e[c],b=s[c],v={minX:m[0],minY:m[1],maxX:m[2],maxY:m[3],value:b};a[c]=v,this.items_[Me(b)]=v}this.rbush_.load(a)}remove(e){const s=Me(e),a=this.items_[s];return delete this.items_[s],null!==this.rbush_.remove(a)}update(e,s){const a=this.items_[Me(s)];Jt([a.minX,a.minY,a.maxX,a.maxY],e)||(this.remove(s),this.insert(e,s))}getAll(){return this.rbush_.all().map(function(s){return s.value})}getInExtent(e){return this.rbush_.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).map(function(c){return c.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,s){return this.forEach_(this.getInExtent(e),s)}forEach_(e,s){let a;for(let c=0,d=e.length;c<d;c++)if(a=s(e[c]),a)return a;return a}isEmpty(){return Be(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const s=this.rbush_.toJSON();return $e(s.minX,s.minY,s.maxX,s.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const s in e.items_)this.items_[s]=e.items_[s]}};function af(r,e){return[[-1/0,-1/0,1/0,1/0]]}function ql(r,e){return function(s,a,c,d,m){const b=this;!function rf(r,e,s,a,c,d,m){const b=new XMLHttpRequest;b.open("GET","function"==typeof r?r(s,a,c):r,!0),"arraybuffer"==e.getType()&&(b.responseType="arraybuffer"),b.withCredentials=false,b.onload=function(v){if(!b.status||b.status>=200&&b.status<300){const S=e.getType();let A;"json"==S||"text"==S?A=b.responseText:"xml"==S?(A=b.responseXML,A||(A=(new DOMParser).parseFromString(b.responseText,"application/xml"))):"arraybuffer"==S&&(A=b.response),A?d(e.readFeatures(A,{extent:s,featureProjection:c}),e.readProjection(A)):m()}else m()},b.onerror=m,b.send()}(r,e,s,a,c,function(v,S){b.addFeatures(v),void 0!==d&&d(v)},m||j)}}class Ni extends rt{constructor(e,s,a){super(e),this.feature=s,this.features=a}}const Jl=class lf extends Fo{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=j,this.format_=e.format,this.overlaps_=void 0===e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(Ee(this.format_,7),this.loader_=ql(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:af;const s=void 0===e.useSpatialIndex||e.useSpatialIndex;let a,c;this.featuresRtree_=s?new Zl:null,this.loadedExtentsRtree_=new Zl,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?c=e.features:e.features&&(a=e.features,c=a.getArray()),!s&&void 0===a&&(a=new zt(c)),void 0!==c&&this.addFeaturesInternal(c),void 0!==a&&this.bindFeaturesCollection_(a)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const s=Me(e);if(!this.addToIndex_(s,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(s,e);const a=e.getGeometry();if(a){const c=a.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(c,e)}else this.nullGeometryFeatures_[s]=e;this.dispatchEvent(new Ni("addfeature",e))}setupChangeEvents_(e,s){this.featureChangeKeys_[e]=[we(s,"change",this.handleFeatureChange_,this),we(s,"propertychange",this.handleFeatureChange_,this)]}addToIndex_(e,s){let a=!0;const c=s.getId();return void 0!==c&&(c.toString()in this.idIndex_?a=!1:this.idIndex_[c.toString()]=s),a&&(Ee(!(e in this.uidIndex_),30),this.uidIndex_[e]=s),a}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const s=[],a=[],c=[];for(let d=0,m=e.length;d<m;d++){const b=e[d],v=Me(b);this.addToIndex_(v,b)&&a.push(b)}for(let d=0,m=a.length;d<m;d++){const b=a[d],v=Me(b);this.setupChangeEvents_(v,b);const S=b.getGeometry();if(S){const A=S.getExtent();s.push(A),c.push(b)}else this.nullGeometryFeatures_[v]=b}if(this.featuresRtree_&&this.featuresRtree_.load(s,c),this.hasListener("addfeature"))for(let d=0,m=a.length;d<m;d++)this.dispatchEvent(new Ni("addfeature",a[d]))}bindFeaturesCollection_(e){let s=!1;this.addEventListener("addfeature",function(a){s||(s=!0,e.push(a.feature),s=!1)}),this.addEventListener("removefeature",function(a){s||(s=!0,e.remove(a.feature),s=!1)}),e.addEventListener("add",function(a){s||(s=!0,this.addFeature(a.element),s=!1)}.bind(this)),e.addEventListener("remove",function(a){s||(s=!0,this.removeFeature(a.element),s=!1)}.bind(this)),this.featuresCollection_=e}clear(e){if(e){for(const a in this.featureChangeKeys_)this.featureChangeKeys_[a].forEach(Ie);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const a=function(c){this.removeFeatureInternal(c)}.bind(this);this.featuresRtree_.forEach(a);for(const c in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[c])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const s=new Ni("clear");this.dispatchEvent(s),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,s){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(c){if(c.getGeometry().intersectsCoordinate(e))return s(c)})}forEachFeatureInExtent(e,s){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,s);this.featuresCollection_&&this.featuresCollection_.forEach(s)}forEachFeatureIntersectingExtent(e,s){return this.forEachFeatureInExtent(e,function(a){if(a.getGeometry().intersectsExtent(e)){const d=s(a);if(d)return d}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Be(this.nullGeometryFeatures_)||ji(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const s=[];return this.forEachFeatureAtCoordinateDirect(e,function(a){s.push(a)}),s}getFeaturesInExtent(e,s){if(this.featuresRtree_){if(!(s&&s.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const c=function Dc(r,e){if(e.canWrapX()){const s=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[s[0],r[1],s[2],r[3]]];ao(r,e);const a=Ze(s);if(Ze(r)>a)return[[s[0],r[1],s[2],r[3]]];if(r[0]<s[0])return[[r[0]+a,r[1],s[2],r[3]],[s[0],r[1],r[2],r[3]]];if(r[2]>s[2])return[[r[0],r[1],s[2],r[3]],[s[0],r[1],r[2]-a,r[3]]]}return[r]}(e,s);return[].concat(...c.map(d=>this.featuresRtree_.getInExtent(d)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,s){const a=e[0],c=e[1];let d=null;const m=[NaN,NaN];let b=1/0;const v=[-1/0,-1/0,1/0,1/0];return s=s||le,this.featuresRtree_.forEachInExtent(v,function(S){if(s(S)){const A=S.getGeometry(),R=b;if(b=A.closestPointXY(a,c,m,b),b<R){d=S;const F=Math.sqrt(b);v[0]=a-F,v[1]=c-F,v[2]=a+F,v[3]=c+F}}}),d}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const s=this.idIndex_[e.toString()];return void 0!==s?s:null}getFeatureByUid(e){const s=this.uidIndex_[e];return void 0!==s?s:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const s=e.target,a=Me(s),c=s.getGeometry();if(c){const m=c.getExtent();a in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[a],this.featuresRtree_&&this.featuresRtree_.insert(m,s)):this.featuresRtree_&&this.featuresRtree_.update(m,s)}else a in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(s),this.nullGeometryFeatures_[a]=s);const d=s.getId();if(void 0!==d){const m=d.toString();this.idIndex_[m]!==s&&(this.removeFromIdIndex_(s),this.idIndex_[m]=s)}else this.removeFromIdIndex_(s),this.uidIndex_[a]=s;this.changed(),this.dispatchEvent(new Ni("changefeature",s))}hasFeature(e){const s=e.getId();return void 0!==s?s in this.idIndex_:Me(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Be(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(e,s,a){const c=this.loadedExtentsRtree_,d=this.strategy_(e,s,a);for(let m=0,b=d.length;m<b;++m){const v=d[m];c.forEachInExtent(v,function(A){return he(A.extent,v)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ni("featuresloadstart")),this.loader_.call(this,v,s,a,function(A){--this.loadingExtentsCount_,this.dispatchEvent(new Ni("featuresloadend",void 0,A))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Ni("featuresloaderror"))}.bind(this)),c.insert(v,{extent:v.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const s=this.loadedExtentsRtree_;let a;s.forEachInExtent(e,function(c){if(Jt(c.extent,e))return a=c,!0}),a&&s.remove(a)}removeFeature(e){if(!e)return;const s=Me(e);s in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[s]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const s=Me(e),a=this.featureChangeKeys_[s];if(!a)return;a.forEach(Ie),delete this.featureChangeKeys_[s];const c=e.getId();return void 0!==c&&delete this.idIndex_[c.toString()],delete this.uidIndex_[s],this.dispatchEvent(new Ni("removefeature",e)),e}removeFromIdIndex_(e){let s=!1;for(const a in this.idIndex_)if(this.idIndex_[a]===e){delete this.idIndex_[a],s=!0;break}return s}setLoader(e){this.loader_=e}setUrl(e){Ee(this.format_,7),this.url_=e,this.setLoader(ql(e,this.format_))}};class Lr{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Mt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Lr({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return pe()}getImage(e){return pe()}getHitDetectionImage(){return pe()}getPixelRatio(e){return 1}getImageState(){return pe()}getImageSize(){return pe()}getOrigin(){return pe()}getSize(){return pe()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Mt(e)}listenImageChange(e){pe()}load(){pe()}unlistenImageChange(e){pe()}}const $l=Lr;function ti(r){return Array.isArray(r)?C(r):r}class Rr extends $l{constructor(e){super({opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),s=new Rr({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return s.setOpacity(this.getOpacity()),s}getAnchor(){const e=this.size_;if(!e)return null;const s=this.getDisplacement(),a=this.getScaleArray();return[e[0]/2-s[0]/a[0],e[1]/2+s[1]/a[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let s=this.canvas_[e];if(!s){const a=this.renderOptions_,c=k(a.size*e,a.size*e);this.draw_(a,c,e),s=c.canvas,this.canvas_[e]=s}return s}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return 2}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,s,a){if(0===s||this.points_===1/0||"bevel"!==e&&"miter"!==e)return s;let c=this.radius_,d=void 0===this.radius2_?c:this.radius2_;if(c<d){const ce=c;c=d,d=ce}const b=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),v=d*Math.sin(b),A=c-Math.sqrt(d*d-v*v),R=Math.sqrt(v*v+A*A),F=R/v;if("miter"===e&&F<=a)return F*s;const N=s/2/F,X=s/2*(A/R),H=Math.sqrt((c+N)*(c+N)+X*X)-c;if(void 0===this.radius2_||"bevel"===e)return 2*H;const V=c*Math.sin(b),q=d-Math.sqrt(c*c-V*V),te=Math.sqrt(V*V+q*q)/V;return te<=a?2*Math.max(H,te*s/2-d-c):2*H}createRenderOptions(){let d,e=Es,s=0,a=null,c=0,m=0;this.stroke_&&(d=this.stroke_.getColor(),null===d&&(d=Qs),d=ti(d),m=this.stroke_.getWidth(),void 0===m&&(m=1),a=this.stroke_.getLineDash(),c=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=Es),s=this.stroke_.getMiterLimit(),void 0===s&&(s=10));const b=this.calculateLineJoinSize_(e,m,s),v=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:d,strokeWidth:m,size:Math.ceil(2*v+b),lineDash:a,lineDashOffset:c,lineJoin:e,miterLimit:s}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,s,a){if(s.scale(a,a),s.translate(e.size/2,e.size/2),this.createPath_(s),this.fill_){let c=this.fill_.getColor();null===c&&(c=gi),s.fillStyle=ti(c),s.fill()}this.stroke_&&(s.strokeStyle=e.strokeStyle,s.lineWidth=e.strokeWidth,e.lineDash&&(s.setLineDash(e.lineDash),s.lineDashOffset=e.lineDashOffset),s.lineJoin=e.lineJoin,s.miterLimit=e.miterLimit,s.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let s=this.fill_.getColor(),a=0;if("string"==typeof s&&(s=x(s)),null===s?a=1:Array.isArray(s)&&(a=4===s.length?s[3]:1),0===a){const c=k(e.size,e.size);this.hitDetectionCanvas_=c.canvas,this.drawHitDetectionCanvas_(e,c)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let s=this.points_;const a=this.radius_;if(s===1/0)e.arc(0,0,a,0,2*Math.PI);else{const c=void 0===this.radius2_?a:this.radius2_;void 0!==this.radius2_&&(s*=2);const d=this.angle_-Math.PI/2,m=2*Math.PI/s;for(let b=0;b<s;b++){const v=d+b*m,S=b%2==0?a:c;e.lineTo(S*Math.cos(v),S*Math.sin(v))}e.closePath()}}drawHitDetectionCanvas_(e,s){s.translate(e.size/2,e.size/2),this.createPath_(s),s.fillStyle=gi,s.fill(),this.stroke_&&(s.strokeStyle=e.strokeStyle,s.lineWidth=e.strokeWidth,e.lineDash&&(s.setLineDash(e.lineDash),s.lineDashOffset=e.lineDashOffset),s.lineJoin=e.lineJoin,s.miterLimit=e.miterLimit,s.stroke())}}const Ql=Rr;class Mr extends Ql{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),s=new Mr({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return s.setOpacity(this.getOpacity()),s}setRadius(e){this.radius_=e,this.render()}}const Pr=Mr;class Fr{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null}clone(){const e=this.getColor();return new Fr({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const Ms=Fr;class Or{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Or({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const ua=Or;class zi{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=ec,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new zi({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(s){return s.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=ec,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let Dr=null;function hf(r,e){if(!Dr){const s=new Ms({color:"rgba(255,255,255,0.4)"}),a=new ua({color:"#3399CC",width:1.25});Dr=[new zi({image:new Pr({fill:s,stroke:a,radius:5}),fill:s,stroke:a})]}return Dr}function ec(r){return r.getGeometry()}const cs=zi;let ln=null;class uf extends Ue{constructor(e,s,a,c,d,m){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=c,this.canvas_={},this.color_=m,this.unlisten_=null,this.imageState_=d,this.size_=a,this.src_=s}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&2===this.imageState_){ln||(ln=k(1,1)),ln.drawImage(this.image_,0,0);try{ln.getImageData(0,0,1,1),this.tainted_=!1}catch{ln=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],s=this.size_[1],a=k(e,s);a.fillRect(0,0,e,s),this.hitDetectionImage_=a.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Na(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||2!==this.imageState_)return;const s=this.image_,a=document.createElement("canvas");a.width=Math.ceil(s.width*e),a.height=Math.ceil(s.height*e);const c=a.getContext("2d");c.scale(e,e),c.drawImage(s,0,0),c.globalCompositeOperation="multiply",c.fillStyle=h(this.color_),c.fillRect(0,0,a.width/e,a.height/e),c.globalCompositeOperation="destination-in",c.drawImage(s,0,0),this.canvas_[e]=a}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}class Nr extends $l{constructor(e){super({opacity:void 0!==(e=e||{}).opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,declutterMode:e.declutterMode}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const m=void 0!==e.img?e.img:null;this.imgSize_=e.imgSize;let b=e.src;Ee(!(void 0!==b&&m),4),Ee(!m||m&&this.imgSize_,5),(void 0===b||0===b.length)&&m&&(b=m.src||Me(m)),Ee(void 0!==b&&b.length>0,6);const v=void 0!==e.src?0:2;this.color_=void 0!==e.color?x(e.color):null,this.iconImage_=function df(r,e,s,a,c,d){let m=qn.get(e,a,d);return m||(m=new uf(r,e,s,a,c,d),qn.set(e,a,d,m)),m}(m,b,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,v,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null}clone(){const e=this.getScale();return new Nr({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(e)?e.slice():e,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const c=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!c)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=c[0]),"fraction"==this.anchorYUnits_&&(e[1]*=c[1])}if("top-left"!=this.anchorOrigin_){if(!c)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+c[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+c[1])}this.normalizedAnchor_=e}const s=this.getDisplacement(),a=this.getScaleArray();return[e[0]-s[0]/a[0],e[1]+s[1]/a[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if("top-left"!=this.offsetOrigin_){const s=this.getSize(),a=this.iconImage_.getSize();if(!s||!a)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=a[0]-s[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=a[1]-s[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(e){this.iconImage_.addEventListener("change",e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener("change",e)}}const zr=Nr;class Xr{constructor(e){this.font_=(e=e||{}).font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Mt(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Ms({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}clone(){const e=this.getScale();return new Xr({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Mt(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const tc=Xr;function ic(r){return new cs({fill:cn(r,""),stroke:hn(r,""),text:ff(r),image:pf(r)})}function cn(r,e){const s=r[e+"fill-color"];if(s)return new Ms({color:s})}function hn(r,e){const s=r[e+"stroke-width"],a=r[e+"stroke-color"];if(s||a)return new ua({width:s,color:a,lineCap:r[e+"stroke-line-cap"],lineJoin:r[e+"stroke-line-join"],lineDash:r[e+"stroke-line-dash"],lineDashOffset:r[e+"stroke-line-dash-offset"],miterLimit:r[e+"stroke-miter-limit"]})}function ff(r){const e=r["text-value"];return e?new tc({text:e,font:r["text-font"],maxAngle:r["text-max-angle"],offsetX:r["text-offset-x"],offsetY:r["text-offset-y"],overflow:r["text-overflow"],placement:r["text-placement"],scale:r["text-scale"],rotateWithView:r["text-rotate-with-view"],rotation:r["text-rotation"],textAlign:r["text-align"],justify:r["text-justify"],textBaseline:r["text-baseline"],padding:r["text-padding"],fill:cn(r,"text-"),backgroundFill:cn(r,"text-background-"),stroke:hn(r,"text-"),backgroundStroke:hn(r,"text-background-")}):void 0}function pf(r){const e=r["icon-src"],s=r["icon-img"];if(e||s)return new zr({src:e,img:s,imgSize:r["icon-img-size"],anchor:r["icon-anchor"],anchorOrigin:r["icon-anchor-origin"],anchorXUnits:r["icon-anchor-x-units"],anchorYUnits:r["icon-anchor-y-units"],color:r["icon-color"],crossOrigin:r["icon-cross-origin"],offset:r["icon-offset"],displacement:r["icon-displacement"],opacity:r["icon-opacity"],scale:r["icon-scale"],rotation:r["icon-rotation"],rotateWithView:r["icon-rotate-with-view"],size:r["icon-size"],declutterMode:r["icon-declutter-mode"]});const a=r["shape-points"];if(a){const d="shape-";return new Ql({points:a,fill:cn(r,d),stroke:hn(r,d),radius:r["shape-radius"],radius1:r["shape-radius1"],radius2:r["shape-radius2"],angle:r["shape-angle"],displacement:r["shape-displacement"],rotation:r["shape-rotation"],rotateWithView:r["shape-rotate-with-view"],scale:r["shape-scale"],declutterMode:r["shape-declutter-mode"]})}const c=r["circle-radius"];if(c){const d="circle-";return new Pr({radius:c,fill:cn(r,d),stroke:hn(r,d),displacement:r["circle-displacement"],scale:r["circle-scale"],rotation:r["circle-rotation"],rotateWithView:r["circle-rotate-with-view"],declutterMode:r["circle-declutter-mode"]})}}const xf=class mf extends ci{constructor(e){e=e||{};const s=Object.assign({},e);delete s.style,delete s.renderBuffer,delete s.updateWhileAnimating,delete s.updateWhileInteracting,super(s),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new Ul(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set("renderOrder",e)}setStyle(e){let s;if(void 0===e)s=hf;else if(null===e)s=null;else if("function"==typeof e)s=e;else if(e instanceof cs)s=e;else if(Array.isArray(e)){const a=e.length,c=new Array(a);for(let d=0;d<a;++d){const m=e[d];c[d]=m instanceof cs?m:ic(m)}s=c}else s=ic(e);this.style_=s,this.styleFunction_=null===e?void 0:function cf(r){let e;if("function"==typeof r)e=r;else{let s;Array.isArray(r)?s=r:(Ee("function"==typeof r.getZIndex,41),s=[r]),e=function(){return s}}return e}(this.style_),this.changed()}},un={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},da=[un.FILL],Xi=[un.STROKE],hs=[un.BEGIN_PATH],nc=[un.CLOSE_PATH],Se=un,ac=class yf{drawCustom(e,s,a,c){}drawGeometry(e){}setStyle(e){}drawCircle(e,s){}drawFeature(e,s){}drawGeometryCollection(e,s){}drawLineString(e,s){}drawMultiLineString(e,s){}drawMultiPoint(e,s){}drawMultiPolygon(e,s){}drawPoint(e,s){}drawPolygon(e,s){}drawText(e,s){}setFillStrokeStyle(e,s){}setImageStyle(e,s){}setTextStyle(e,s){}},dn=class bf extends ac{constructor(e,s,a,c){super(),this.tolerance=e,this.maxExtent=s,this.pixelRatio=c,this.maxLineWidth=0,this.resolution=a,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const s=this.pixelRatio;return 1==s?e:e.map(function(a){return a*s})}appendFlatPointCoordinates(e,s){const a=this.getBufferedMaxExtent(),c=this.tmpCoordinate_,d=this.coordinates;let m=d.length;for(let b=0,v=e.length;b<v;b+=s)c[0]=e[b],c[1]=e[b+1],ie(a,c)&&(d[m++]=c[0],d[m++]=c[1]);return m}appendFlatLineCoordinates(e,s,a,c,d,m){const b=this.coordinates;let v=b.length;const S=this.getBufferedMaxExtent();m&&(s+=c);let A=e[s],R=e[s+1];const F=this.tmpCoordinate_;let X,B,H,N=!0;for(X=s+c;X<a;X+=c)F[0]=e[X],F[1]=e[X+1],H=Fe(S,F),H!==B?(N&&(b[v++]=A,b[v++]=R,N=!1),b[v++]=F[0],b[v++]=F[1]):1===H?(b[v++]=F[0],b[v++]=F[1],N=!1):N=!0,A=F[0],R=F[1],B=H;return(d&&N||X===s+c)&&(b[v++]=A,b[v++]=R),v}drawCustomCoordinates_(e,s,a,c,d){for(let m=0,b=a.length;m<b;++m){const v=a[m],S=this.appendFlatLineCoordinates(e,s,v,c,!1,!1);d.push(S),s=v}return s}drawCustom(e,s,a,c){this.beginGeometry(e,s);const d=e.getType(),m=e.getStride(),b=this.coordinates.length;let v,S,A,R,F;switch(d){case"MultiPolygon":v=e.getOrientedFlatCoordinates(),R=[];const N=e.getEndss();F=0;for(let X=0,B=N.length;X<B;++X){const H=[];F=this.drawCustomCoordinates_(v,F,N[X],m,H),R.push(H)}this.instructions.push([Se.CUSTOM,b,R,e,a,vl]),this.hitDetectionInstructions.push([Se.CUSTOM,b,R,e,c||a,vl]);break;case"Polygon":case"MultiLineString":A=[],v="Polygon"==d?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),F=this.drawCustomCoordinates_(v,0,e.getEnds(),m,A),this.instructions.push([Se.CUSTOM,b,A,e,a,na]),this.hitDetectionInstructions.push([Se.CUSTOM,b,A,e,c||a,na]);break;case"LineString":case"Circle":v=e.getFlatCoordinates(),S=this.appendFlatLineCoordinates(v,0,v.length,m,!1,!1),this.instructions.push([Se.CUSTOM,b,S,e,a,Ls]),this.hitDetectionInstructions.push([Se.CUSTOM,b,S,e,c||a,Ls]);break;case"MultiPoint":v=e.getFlatCoordinates(),S=this.appendFlatPointCoordinates(v,m),S>b&&(this.instructions.push([Se.CUSTOM,b,S,e,a,Ls]),this.hitDetectionInstructions.push([Se.CUSTOM,b,S,e,c||a,Ls]));break;case"Point":v=e.getFlatCoordinates(),this.coordinates.push(v[0],v[1]),S=this.coordinates.length,this.instructions.push([Se.CUSTOM,b,S,e,a]),this.hitDetectionInstructions.push([Se.CUSTOM,b,S,e,c||a])}this.endGeometry(s)}beginGeometry(e,s){this.beginGeometryInstruction1_=[Se.BEGIN_GEOMETRY,s,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Se.BEGIN_GEOMETRY,s,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let s;e.reverse();const a=e.length;let c,d,m=-1;for(s=0;s<a;++s)c=e[s],d=c[0],d==Se.END_GEOMETRY?m=s:d==Se.BEGIN_GEOMETRY&&(c[2]=s,Ct(this.hitDetectionInstructions,m,s),m=-1)}setFillStrokeStyle(e,s){const a=this.state;if(e){const c=e.getColor();a.fillStyle=ti(c||gi)}else a.fillStyle=void 0;if(s){const c=s.getColor();a.strokeStyle=ti(c||Qs);const d=s.getLineCap();a.lineCap=void 0!==d?d:Qn;const m=s.getLineDash();a.lineDash=m?m.slice():qs;const b=s.getLineDashOffset();a.lineDashOffset=b||0;const v=s.getLineJoin();a.lineJoin=void 0!==v?v:Es;const S=s.getWidth();a.lineWidth=void 0!==S?S:1;const A=s.getMiterLimit();a.miterLimit=void 0!==A?A:10,a.lineWidth>this.maxLineWidth&&(this.maxLineWidth=a.lineWidth,this.bufferedMaxExtent_=null)}else a.strokeStyle=void 0,a.lineCap=void 0,a.lineDash=null,a.lineDashOffset=void 0,a.lineJoin=void 0,a.lineWidth=void 0,a.miterLimit=void 0}createFill(e){const s=e.fillStyle,a=[Se.SET_FILL_STYLE,s];return"string"!=typeof s&&a.push(!0),a}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Se.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,s){const a=e.fillStyle;("string"!=typeof a||e.currentFillStyle!=a)&&(void 0!==a&&this.instructions.push(s.call(this,e)),e.currentFillStyle=a)}updateStrokeStyle(e,s){const a=e.strokeStyle,c=e.lineCap,d=e.lineDash,m=e.lineDashOffset,b=e.lineJoin,v=e.lineWidth,S=e.miterLimit;(e.currentStrokeStyle!=a||e.currentLineCap!=c||d!=e.currentLineDash&&!J(e.currentLineDash,d)||e.currentLineDashOffset!=m||e.currentLineJoin!=b||e.currentLineWidth!=v||e.currentMiterLimit!=S)&&(void 0!==a&&s.call(this,e),e.currentStrokeStyle=a,e.currentLineCap=c,e.currentLineDash=d,e.currentLineDashOffset=m,e.currentLineJoin=b,e.currentLineWidth=v,e.currentMiterLimit=S)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const s=[Se.END_GEOMETRY,e];this.instructions.push(s),this.hitDetectionInstructions.push(s)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=ee(this.maxExtent),this.maxLineWidth>0)&&W(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}},rc=class Sf extends dn{constructor(e,s,a,c){super(e,s,a,c)}drawFlatCoordinatess_(e,s,a,c){const d=this.state,m=void 0!==d.fillStyle,b=void 0!==d.strokeStyle,v=a.length;this.instructions.push(hs),this.hitDetectionInstructions.push(hs);for(let S=0;S<v;++S){const A=a[S],R=this.coordinates.length,F=this.appendFlatLineCoordinates(e,s,A,c,!0,!b),N=[Se.MOVE_TO_LINE_TO,R,F];this.instructions.push(N),this.hitDetectionInstructions.push(N),b&&(this.instructions.push(nc),this.hitDetectionInstructions.push(nc)),s=A}return m&&(this.instructions.push(da),this.hitDetectionInstructions.push(da)),b&&(this.instructions.push(Xi),this.hitDetectionInstructions.push(Xi)),s}drawCircle(e,s){const a=this.state;if(void 0===a.fillStyle&&void 0===a.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,s),void 0!==a.fillStyle&&this.hitDetectionInstructions.push([Se.SET_FILL_STYLE,gi]),void 0!==a.strokeStyle&&this.hitDetectionInstructions.push([Se.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,a.lineDash,a.lineDashOffset]);const m=e.getFlatCoordinates(),b=e.getStride(),v=this.coordinates.length;this.appendFlatLineCoordinates(m,0,m.length,b,!1,!1);const S=[Se.CIRCLE,v];this.instructions.push(hs,S),this.hitDetectionInstructions.push(hs,S),void 0!==a.fillStyle&&(this.instructions.push(da),this.hitDetectionInstructions.push(da)),void 0!==a.strokeStyle&&(this.instructions.push(Xi),this.hitDetectionInstructions.push(Xi)),this.endGeometry(s)}drawPolygon(e,s){const a=this.state;if(void 0===a.fillStyle&&void 0===a.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,s),void 0!==a.fillStyle&&this.hitDetectionInstructions.push([Se.SET_FILL_STYLE,gi]),void 0!==a.strokeStyle&&this.hitDetectionInstructions.push([Se.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,a.lineDash,a.lineDashOffset]);const m=e.getEnds(),b=e.getOrientedFlatCoordinates(),v=e.getStride();this.drawFlatCoordinatess_(b,0,m,v),this.endGeometry(s)}drawMultiPolygon(e,s){const a=this.state;if(void 0===a.fillStyle&&void 0===a.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,s),void 0!==a.fillStyle&&this.hitDetectionInstructions.push([Se.SET_FILL_STYLE,gi]),void 0!==a.strokeStyle&&this.hitDetectionInstructions.push([Se.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,a.lineDash,a.lineDashOffset]);const m=e.getEndss(),b=e.getOrientedFlatCoordinates(),v=e.getStride();let S=0;for(let A=0,R=m.length;A<R;++A)S=this.drawFlatCoordinatess_(b,S,m[A],v);this.endGeometry(s)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const s=this.coordinates;for(let a=0,c=s.length;a<c;++a)s[a]=rs(s[a],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)}};function Af(r,e,s,a,c){let A,R,F,N,X,B,H,V,U,q,d=s,m=s,b=0,v=0,S=s;for(R=s;R<a;R+=c){const $=e[R],te=e[R+1];void 0!==X&&(U=$-X,q=te-B,N=Math.sqrt(U*U+q*q),void 0!==H&&(v+=F,A=Math.acos((H*U+V*q)/(F*N)),A>r&&(v>b&&(b=v,d=S,m=R),v=0,S=R-c)),F=N,H=U,V=q),X=$,B=te}return v+=N,v>b?[S,R]:[d,m]}const gn={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Ef={Circle:rc,Default:dn,Image:class vf extends dn{constructor(e,s,a,c){super(e,s,a,c),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,s){if(!this.image_)return;this.beginGeometry(e,s);const a=e.getFlatCoordinates(),c=e.getStride(),d=this.coordinates.length,m=this.appendFlatPointCoordinates(a,c);this.instructions.push([Se.DRAW_IMAGE,d,m,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Se.DRAW_IMAGE,d,m,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(s)}drawMultiPoint(e,s){if(!this.image_)return;this.beginGeometry(e,s);const a=e.getFlatCoordinates(),c=e.getStride(),d=this.coordinates.length,m=this.appendFlatPointCoordinates(a,c);this.instructions.push([Se.DRAW_IMAGE,d,m,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Se.DRAW_IMAGE,d,m,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(s)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,s){const a=e.getAnchor(),c=e.getSize(),d=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=a[0],this.anchorY_=a[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=c[1],this.opacity_=e.getOpacity(),this.originX_=d[0],this.originY_=d[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=c[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=s}},LineString:class _f extends dn{constructor(e,s,a,c){super(e,s,a,c)}drawFlatCoordinates_(e,s,a,c){const d=this.coordinates.length,m=this.appendFlatLineCoordinates(e,s,a,c,!1,!1),b=[Se.MOVE_TO_LINE_TO,d,m];return this.instructions.push(b),this.hitDetectionInstructions.push(b),a}drawLineString(e,s){const a=this.state;if(void 0===a.strokeStyle||void 0===a.lineWidth)return;this.updateStrokeStyle(a,this.applyStroke),this.beginGeometry(e,s),this.hitDetectionInstructions.push([Se.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,qs,0],hs);const m=e.getFlatCoordinates(),b=e.getStride();this.drawFlatCoordinates_(m,0,m.length,b),this.hitDetectionInstructions.push(Xi),this.endGeometry(s)}drawMultiLineString(e,s){const a=this.state;if(void 0===a.strokeStyle||void 0===a.lineWidth)return;this.updateStrokeStyle(a,this.applyStroke),this.beginGeometry(e,s),this.hitDetectionInstructions.push([Se.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,a.lineDash,a.lineDashOffset],hs);const m=e.getEnds(),b=e.getFlatCoordinates(),v=e.getStride();let S=0;for(let A=0,R=m.length;A<R;++A)S=this.drawFlatCoordinates_(b,S,m[A],v);this.hitDetectionInstructions.push(Xi),this.endGeometry(s)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Xi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Xi),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(hs)}},Polygon:rc,Text:class kf extends dn{constructor(e,s,a,c){super(e,s,a,c),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,s){const d=this.textState_;if(""===this.text_||!d||!this.textFillState_&&!this.textStrokeState_)return;const m=this.coordinates;let b=m.length;const v=e.getType();let S=null,A=e.getStride();if("line"!==d.placement||"LineString"!=v&&"MultiLineString"!=v&&"Polygon"!=v&&"MultiPolygon"!=v){let R=d.overflow?null:[];switch(v){case"Point":case"MultiPoint":S=e.getFlatCoordinates();break;case"LineString":S=e.getFlatMidpoint();break;case"Circle":S=e.getCenter();break;case"MultiLineString":S=e.getFlatMidpoints(),A=2;break;case"Polygon":S=e.getFlatInteriorPoint(),d.overflow||R.push(S[2]/this.resolution),A=3;break;case"MultiPolygon":const H=e.getFlatInteriorPoints();S=[];for(let V=0,U=H.length;V<U;V+=3)d.overflow||R.push(H[V+2]/this.resolution),S.push(H[V],H[V+1]);if(0===S.length)return;A=2}const F=this.appendFlatPointCoordinates(S,A);if(F===b)return;if(R&&(F-b)/2!=S.length/A){let H=b/2;R=R.filter((V,U)=>{const q=m[2*(H+U)]===S[U*A]&&m[2*(H+U)+1]===S[U*A+1];return q||--H,q})}this.saveTextStates_(),(d.backgroundFill||d.backgroundStroke)&&(this.setFillStrokeStyle(d.backgroundFill,d.backgroundStroke),d.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),d.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,s);let N=d.padding;if(N!=ns&&(d.scale[0]<0||d.scale[1]<0)){let H=d.padding[0],V=d.padding[1],U=d.padding[2],q=d.padding[3];d.scale[0]<0&&(V=-V,q=-q),d.scale[1]<0&&(H=-H,U=-U),N=[H,V,U,q]}const X=this.pixelRatio;this.instructions.push([Se.DRAW_IMAGE,b,F,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,N==ns?ns:N.map(function(H){return H*X}),!!d.backgroundFill,!!d.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,R]);const B=1/X;this.hitDetectionInstructions.push([Se.DRAW_IMAGE,b,F,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[B,B],NaN,void 0,this.declutterImageWithText_,N,!!d.backgroundFill,!!d.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,R]),this.endGeometry(s)}else{if(!St(this.getBufferedMaxExtent(),e.getExtent()))return;let R;if(S=e.getFlatCoordinates(),"LineString"==v)R=[S.length];else if("MultiLineString"==v)R=e.getEnds();else if("Polygon"==v)R=e.getEnds().slice(0,1);else if("MultiPolygon"==v){const B=e.getEndss();R=[];for(let H=0,V=B.length;H<V;++H)R.push(B[H][0])}this.beginGeometry(e,s);const F=d.textAlign;let X,N=0;for(let B=0,H=R.length;B<H;++B){if(null==F){const U=Af(d.maxAngle,S,N,R[B],A);N=U[0],X=U[1]}else X=R[B];for(let U=N;U<X;U+=A)m.push(S[U],S[U+1]);const V=m.length;N=R[B],this.drawChars_(b,V),b=V}this.endGeometry(s)}}saveTextStates_(){const e=this.textStrokeState_,s=this.textState_,a=this.textFillState_,c=this.strokeKey_;e&&(c in this.strokeStates||(this.strokeStates[c]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const d=this.textKey_;d in this.textStates||(this.textStates[d]={font:s.font,textAlign:s.textAlign||en,justify:s.justify,textBaseline:s.textBaseline||ea,scale:s.scale});const m=this.fillKey_;a&&(m in this.fillStates||(this.fillStates[m]={fillStyle:a.fillStyle}))}drawChars_(e,s){const a=this.textStrokeState_,c=this.textState_,d=this.strokeKey_,m=this.textKey_,b=this.fillKey_;this.saveTextStates_();const v=this.pixelRatio,S=gn[c.textBaseline],A=this.textOffsetY_*v,R=this.text_,F=a?a.lineWidth*Math.abs(c.scale[0])/2:0;this.instructions.push([Se.DRAW_CHARS,e,s,S,c.overflow,b,c.maxAngle,v,A,d,F*v,R,m,1]),this.hitDetectionInstructions.push([Se.DRAW_CHARS,e,s,S,c.overflow,b,c.maxAngle,1,A,d,F,R,m,1/v])}setTextStyle(e,s){let a,c,d;if(e){const m=e.getFill();m?(c=this.textFillState_,c||(c={},this.textFillState_=c),c.fillStyle=ti(m.getColor()||gi)):(c=null,this.textFillState_=c);const b=e.getStroke();if(b){d=this.textStrokeState_,d||(d={},this.textStrokeState_=d);const X=b.getLineDash(),B=b.getLineDashOffset(),H=b.getWidth(),V=b.getMiterLimit();d.lineCap=b.getLineCap()||Qn,d.lineDash=X?X.slice():qs,d.lineDashOffset=void 0===B?0:B,d.lineJoin=b.getLineJoin()||Es,d.lineWidth=void 0===H?1:H,d.miterLimit=void 0===V?10:V,d.strokeStyle=ti(b.getColor()||Qs)}else d=null,this.textStrokeState_=d;a=this.textState_;const v=e.getFont()||sl;ad(v);const S=e.getScaleArray();a.overflow=e.getOverflow(),a.font=v,a.maxAngle=e.getMaxAngle(),a.placement=e.getPlacement(),a.textAlign=e.getTextAlign(),a.justify=e.getJustify(),a.textBaseline=e.getTextBaseline()||ea,a.backgroundFill=e.getBackgroundFill(),a.backgroundStroke=e.getBackgroundStroke(),a.padding=e.getPadding()||ns,a.scale=void 0===S?[1,1]:S;const A=e.getOffsetX(),R=e.getOffsetY(),F=e.getRotateWithView(),N=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===A?0:A,this.textOffsetY_=void 0===R?0:R,this.textRotateWithView_=void 0!==F&&F,this.textRotation_=void 0===N?0:N,this.strokeKey_=d?("string"==typeof d.strokeStyle?d.strokeStyle:Me(d.strokeStyle))+d.lineCap+d.lineDashOffset+"|"+d.lineWidth+d.lineJoin+d.miterLimit+"["+d.lineDash.join()+"]":"",this.textKey_=a.font+a.scale+(a.textAlign||"?")+(a.justify||"?")+(a.textBaseline||"?"),this.fillKey_=c?"string"==typeof c.fillStyle?c.fillStyle:"|"+Me(c.fillStyle):""}else this.text_="";this.declutterImageWithText_=s}}},oc=class Tf{constructor(e,s,a,c){this.tolerance_=e,this.maxExtent_=s,this.pixelRatio_=c,this.resolution_=a,this.buildersByZIndex_={}}finish(){const e={};for(const s in this.buildersByZIndex_){e[s]=e[s]||{};const a=this.buildersByZIndex_[s];for(const c in a){const d=a[c].finish();e[s][c]=d}}return e}getBuilder(e,s){const a=void 0!==e?e.toString():"0";let c=this.buildersByZIndex_[a];void 0===c&&(c={},this.buildersByZIndex_[a]=c);let d=c[s];return void 0===d&&(d=new(0,Ef[s])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),c[s]=d),d}};function If(r,e,s,a,c,d,m,b,v,S,A,R){let F=r[e],N=r[e+1],X=0,B=0,H=0,V=0;function U(){X=F,B=N,F=r[e+=a],N=r[e+1],V+=H,H=Math.sqrt((F-X)*(F-X)+(N-B)*(N-B))}do{U()}while(e<s-a&&V+H<d);let q=0===H?0:(d-V)/H;const $=li(X,F,q),te=li(B,N,q),ce=e-a,ue=V,xe=d+b*v(S,c,A);for(;e<s-a&&V+H<xe;)U();q=0===H?0:(xe-V)/H;const Ae=li(X,F,q),ke=li(B,N,q);let Ne;if(R){const de=[$,te,Ae,ke];cl(de,0,4,2,R,de,de),Ne=de[0]>de[2]}else Ne=$>Ae;const Oe=Math.PI,Te=[],at=ce+a===e;let Re;if(H=0,V=ue,F=r[e=ce],N=r[e+1],at)return U(),Re=Math.atan2(N-B,F-X),Ne&&(Re+=Re>0?-Oe:Oe),Te[0]=[(Ae+$)/2,(ke+te)/2,(xe-d)/2,Re,c],Te;for(let de=0,ge=(c=c.replace(/\n/g," ")).length;de<ge;){U();let be=Math.atan2(N-B,F-X);if(Ne&&(be+=be>0?-Oe:Oe),void 0!==Re){let We=be-Re;if(We+=We>Oe?-2*Oe:We<-Oe?2*Oe:0,Math.abs(We)>m)return null}Re=be;const Ke=de;let qe=0;for(;de<ge;++de){const je=b*v(S,c[Ne?ge-de-1:de],A);if(e+a<s&&V+H<d+qe+je/2)break;qe+=je}if(de===Ke)continue;const ct=Ne?c.substring(ge-Ke,ge-de):c.substring(Ke,de);q=0===H?0:(d+qe/2-V)/H;const se=li(X,F,q),Ot=li(B,N,q);Te.push([se,Ot,qe/2,be,ct]),d+=qe}return Te}function lc(r,e,s,a){let c=r[e],d=r[e+1],m=0;for(let b=e+a;b<s;b+=a){const v=r[b],S=r[b+1];m+=Math.sqrt((v-c)*(v-c)+(S-d)*(S-d)),c=v,d=S}return m}const Ps=[1/0,1/0,-1/0,-1/0],Yi=[],xi=[],yi=[],Wi=[];function cc(r){return r[3].declutterBox}const Lf=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function hc(r,e){return("start"===e||"end"===e)&&!Lf.test(r)&&(e="start"===e?"left":"right"),gn[e]}function Rf(r,e,s){return s>0&&r.push("\n",""),r.push(e,""),r}const Pf=class Mf{constructor(e,s,a,c){this.overlaps=a,this.pixelRatio=s,this.resolution=e,this.instructions=c.instructions,this.coordinates=c.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=c.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=c.fillStates||{},this.strokeStates=c.strokeStates||{},this.textStates=c.textStates||{},this.widths_={},this.labels_={}}createLabel(e,s,a,c){const d=e+s+a+c;if(this.labels_[d])return this.labels_[d];const m=c?this.strokeStates[c]:null,b=a?this.fillStates[a]:null,v=this.textStates[s],S=this.pixelRatio,A=[v.scale[0]*S,v.scale[1]*S],R=Array.isArray(e),F=v.justify?gn[v.justify]:hc(Array.isArray(e)?e[0]:e,v.textAlign||en),N=c&&m.lineWidth?m.lineWidth:0,X=R?e:e.split("\n").reduce(Rf,[]),{width:B,height:H,widths:V,heights:U,lineWidths:q}=function od(r,e){const s=[],a=[],c=[];let d=0,m=0,b=0,v=0;for(let S=0,A=e.length;S<=A;S+=2){const R=e[S];if("\n"===R||S===A){d=Math.max(d,m),c.push(m),m=0,b+=v;continue}const F=e[S+1]||r.font,N=ta(F,R);s.push(N),m+=N;const X=rd(F);a.push(X),v=Math.max(v,X)}return{width:d,height:b,widths:s,heights:a,lineWidths:c}}(v,X),$=B+N,te=[],ce=($+2)*A[0],ue=(H+N)*A[1],xe={width:ce<0?Math.floor(ce):Math.ceil(ce),height:ue<0?Math.floor(ue):Math.ceil(ue),contextInstructions:te};(1!=A[0]||1!=A[1])&&te.push("scale",A),c&&(te.push("strokeStyle",m.strokeStyle),te.push("lineWidth",N),te.push("lineCap",m.lineCap),te.push("lineJoin",m.lineJoin),te.push("miterLimit",m.miterLimit),te.push("setLineDash",[m.lineDash]),te.push("lineDashOffset",m.lineDashOffset)),a&&te.push("fillStyle",b.fillStyle),te.push("textBaseline","middle"),te.push("textAlign","center");const Ae=.5-F;let ke=F*$+Ae*N;const Ne=[],Oe=[];let ge,Te=0,at=0,Re=0,de=0;for(let be=0,Ke=X.length;be<Ke;be+=2){const qe=X[be];if("\n"===qe){at+=Te,Te=0,ke=F*$+Ae*N,++de;continue}const ct=X[be+1]||v.font;ct!==ge&&(c&&Ne.push("font",ct),a&&Oe.push("font",ct),ge=ct),Te=Math.max(Te,U[Re]);const se=[qe,ke+Ae*V[Re]+F*(V[Re]-q[de]),.5*(N+Te)+at];ke+=V[Re],c&&Ne.push("strokeText",se),a&&Oe.push("fillText",se),++Re}return Array.prototype.push.apply(te,Ne),Array.prototype.push.apply(te,Oe),this.labels_[d]=xe,xe}replayTextBackground_(e,s,a,c,d,m,b){e.beginPath(),e.moveTo.apply(e,s),e.lineTo.apply(e,a),e.lineTo.apply(e,c),e.lineTo.apply(e,d),e.lineTo.apply(e,s),m&&(this.alignFill_=m[2],this.fill_(e)),b&&(this.setStrokeStyle_(e,b),e.stroke())}calculateImageOrLabelDimensions_(e,s,a,c,d,m,b,v,S,A,R,F,N,X,B,H){let V=a-(b*=F[0]),U=c-(v*=F[1]);const q=d+S>e?e-S:d,$=m+A>s?s-A:m,te=X[3]+q*F[0]+X[1],ce=X[0]+$*F[1]+X[2],ue=V-X[3],xe=U-X[0];let Ae;return(B||0!==R)&&(Yi[0]=ue,Wi[0]=ue,Yi[1]=xe,xi[1]=xe,xi[0]=ue+te,yi[0]=xi[0],yi[1]=xe+ce,Wi[1]=yi[1]),0!==R?(Ae=Rt([1,0,0,1,0,0],a,c,1,1,R,-a,-c),nt(Ae,Yi),nt(Ae,xi),nt(Ae,yi),nt(Ae,Wi),$e(Math.min(Yi[0],xi[0],yi[0],Wi[0]),Math.min(Yi[1],xi[1],yi[1],Wi[1]),Math.max(Yi[0],xi[0],yi[0],Wi[0]),Math.max(Yi[1],xi[1],yi[1],Wi[1]),Ps)):$e(Math.min(ue,ue+te),Math.min(xe,xe+ce),Math.max(ue,ue+te),Math.max(xe,xe+ce),Ps),N&&(V=Math.round(V),U=Math.round(U)),{drawImageX:V,drawImageY:U,drawImageW:q,drawImageH:$,originX:S,originY:A,declutterBox:{minX:Ps[0],minY:Ps[1],maxX:Ps[2],maxY:Ps[3],value:H},canvasTransform:Ae,scale:F}}replayImageOrLabel_(e,s,a,c,d,m,b){const S=c.declutterBox,A=e.canvas,R=b?b[2]*c.scale[0]/2:0;return S.minX-R<=A.width/s&&S.maxX+R>=0&&S.minY-R<=A.height/s&&S.maxY+R>=0&&(!(!m&&!b)&&this.replayTextBackground_(e,Yi,xi,yi,Wi,m,b),function ld(r,e,s,a,c,d,m,b,v,S,A){r.save(),1!==s&&(r.globalAlpha*=s),e&&r.setTransform.apply(r,e),a.contextInstructions?(r.translate(v,S),r.scale(A[0],A[1]),function cd(r,e){const s=r.contextInstructions;for(let a=0,c=s.length;a<c;a+=2)Array.isArray(s[a+1])?e[s[a]].apply(e,s[a+1]):e[s[a]]=s[a+1]}(a,r)):A[0]<0||A[1]<0?(r.translate(v,S),r.scale(A[0],A[1]),r.drawImage(a,c,d,m,b,0,0,m,b)):r.drawImage(a,c,d,m,b,v,S,m*A[0],b*A[1]),r.restore()}(e,c.canvasTransform,d,a,c.originX,c.originY,c.drawImageW,c.drawImageH,c.drawImageX,c.drawImageY,c.scale)),!0}fill_(e){if(this.alignFill_){const s=nt(this.renderedTransform_,[0,0]),a=512*this.pixelRatio;e.save(),e.translate(s[0]%a,s[1]%a),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,s){e.strokeStyle=s[1],e.lineWidth=s[2],e.lineCap=s[3],e.lineJoin=s[4],e.miterLimit=s[5],e.lineDashOffset=s[7],e.setLineDash(s[6])}drawLabelWithPointPlacement_(e,s,a,c){const d=this.textStates[s],m=this.createLabel(e,s,c,a),b=this.strokeStates[a],v=this.pixelRatio,S=hc(Array.isArray(e)?e[0]:e,d.textAlign||en),A=gn[d.textBaseline||ea],R=b&&b.lineWidth?b.lineWidth:0;return{label:m,anchorX:S*(m.width/v-2*d.scale[0])+2*(.5-S)*R,anchorY:A*m.height/v+2*(.5-A)*R}}execute_(e,s,a,c,d,m,b,v){let S;this.pixelCoordinates_&&J(a,this.renderedTransform_)?S=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),S=as(this.coordinates,0,this.coordinates.length,2,a,this.pixelCoordinates_),function La(r,e){r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5]}(this.renderedTransform_,a));let A=0;const R=c.length;let N,X,B,H,V,U,q,$,te,ce,ue,xe,F=0,Ae=0,ke=0,Ne=null,Oe=null;const Te=this.coordinateCache_,at=this.viewRotation_,Re=Math.round(1e12*Math.atan2(-a[1],a[0]))/1e12,de={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:at},ge=this.instructions!=c||this.overlaps?0:200;let be,Ke,qe,ct;for(;A<R;){const se=c[A];switch(se[0]){case Se.BEGIN_GEOMETRY:be=se[1],ct=se[3],be.getGeometry()?void 0===b||St(b,ct.getExtent())?++A:A=se[2]+1:A=se[2];break;case Se.BEGIN_PATH:Ae>ge&&(this.fill_(e),Ae=0),ke>ge&&(e.stroke(),ke=0),!Ae&&!ke&&(e.beginPath(),H=NaN,V=NaN),++A;break;case Se.CIRCLE:F=se[1];const We=S[F],je=S[F+1],pt=S[F+2]-We,wi=S[F+3]-je,Fs=Math.sqrt(pt*pt+wi*wi);e.moveTo(We+Fs,je),e.arc(We,je,Fs,0,2*Math.PI,!0),++A;break;case Se.CLOSE_PATH:e.closePath(),++A;break;case Se.CUSTOM:F=se[1],N=se[2];const Os=se[4],ma=6==se.length?se[5]:void 0;de.geometry=se[3],de.feature=be,A in Te||(Te[A]=[]);const Hi=Te[A];ma?ma(S,F,N,2,Hi):(Hi[0]=S[F],Hi[1]=S[F+1],Hi.length=2),Os(Hi,de),++A;break;case Se.DRAW_IMAGE:F=se[1],N=se[2],$=se[3],X=se[4],B=se[5];let fn=se[6];const Gi=se[7],xa=se[8],ya=se[9],ba=se[10];let Ds=se[11];const Kr=se[12];let kt=se[13];const Xt=se[14],Vt=se[15];if(!$&&se.length>=20){te=se[19],ce=se[20],ue=se[21],xe=se[22];const Dt=this.drawLabelWithPointPlacement_(te,ce,ue,xe);$=Dt.label,se[3]=$,X=(Dt.anchorX-se[23])*this.pixelRatio,se[4]=X,B=(Dt.anchorY-se[24])*this.pixelRatio,se[5]=B,fn=$.height,se[6]=fn,kt=$.width,se[13]=kt}let _i,Ns,us,Vi;se.length>25&&(_i=se[25]),se.length>17?(Ns=se[16],us=se[17],Vi=se[18]):(Ns=ns,us=!1,Vi=!1),ba&&Re?Ds+=at:!ba&&!Re&&(Ds-=at);let zs=0;for(;F<N;F+=2){if(_i&&_i[zs++]<kt/this.pixelRatio)continue;const Dt=this.calculateImageOrLabelDimensions_($.width,$.height,S[F],S[F+1],kt,fn,X,B,xa,ya,Ds,Kr,d,Ns,us||Vi,be),Xs=[e,s,$,Dt,Gi,us?Ne:null,Vi?Oe:null];if(v){if("none"===Xt)continue;if("obstacle"===Xt){v.insert(Dt.declutterBox);continue}{let Yt,Ci;if(Vt){const Nt=N-F;if(!Vt[Nt]){Vt[Nt]=Xs;continue}if(Yt=Vt[Nt],delete Vt[Nt],Ci=cc(Yt),v.collides(Ci))continue}if(v.collides(Dt.declutterBox))continue;Yt&&(v.insert(Ci),this.replayImageOrLabel_.apply(this,Yt)),v.insert(Dt.declutterBox)}}this.replayImageOrLabel_.apply(this,Xs)}++A;break;case Se.DRAW_CHARS:const va=se[1],wt=se[2],qr=se[3],Qp=se[4];xe=se[5];const em=se[6],Sc=se[7],Ac=se[8];ue=se[9];const Jr=se[10];te=se[11],ce=se[12];const kc=[se[13],se[13]],$r=this.textStates[ce],pn=$r.font,mn=[$r.scale[0]*Sc,$r.scale[1]*Sc];let xn;pn in this.widths_?xn=this.widths_[pn]:(xn={},this.widths_[pn]=xn);const Ec=lc(S,va,wt,2),Tc=Math.abs(mn[0])*al(pn,te,xn);if(Qp||Tc<=Ec){const Yt=If(S,va,wt,2,te,(Ec-Tc)*gn[this.textStates[ce].textAlign],em,Math.abs(mn[0]),al,pn,xn,Re?0:this.viewRotation_);e:if(Yt){const Ci=[];let Nt,wa,_a,Et,Wt;if(ue)for(Nt=0,wa=Yt.length;Nt<wa;++Nt){Wt=Yt[Nt],_a=Wt[4],Et=this.createLabel(_a,ce,"",ue),X=Wt[2]+(mn[0]<0?-Jr:Jr),B=qr*Et.height+2*(.5-qr)*Jr*mn[1]/mn[0]-Ac;const Si=this.calculateImageOrLabelDimensions_(Et.width,Et.height,Wt[0],Wt[1],Et.width,Et.height,X,B,0,0,Wt[3],kc,!1,ns,!1,be);if(v&&v.collides(Si.declutterBox))break e;Ci.push([e,s,Et,Si,1,null,null])}if(xe)for(Nt=0,wa=Yt.length;Nt<wa;++Nt){Wt=Yt[Nt],_a=Wt[4],Et=this.createLabel(_a,ce,xe,""),X=Wt[2],B=qr*Et.height-Ac;const Si=this.calculateImageOrLabelDimensions_(Et.width,Et.height,Wt[0],Wt[1],Et.width,Et.height,X,B,0,0,Wt[3],kc,!1,ns,!1,be);if(v&&v.collides(Si.declutterBox))break e;Ci.push([e,s,Et,Si,1,null,null])}v&&v.load(Ci.map(cc));for(let Si=0,tm=Ci.length;Si<tm;++Si)this.replayImageOrLabel_.apply(this,Ci[Si])}}++A;break;case Se.END_GEOMETRY:if(void 0!==m){be=se[1];const Dt=m(be,ct);if(Dt)return Dt}++A;break;case Se.FILL:ge?Ae++:this.fill_(e),++A;break;case Se.MOVE_TO_LINE_TO:for(F=se[1],N=se[2],Ke=S[F],qe=S[F+1],U=Ke+.5|0,q=qe+.5|0,(U!==H||q!==V)&&(e.moveTo(Ke,qe),H=U,V=q),F+=2;F<N;F+=2)Ke=S[F],qe=S[F+1],U=Ke+.5|0,q=qe+.5|0,(F==N-2||U!==H||q!==V)&&(e.lineTo(Ke,qe),H=U,V=q);++A;break;case Se.SET_FILL_STYLE:Ne=se,this.alignFill_=se[2],Ae&&(this.fill_(e),Ae=0,ke&&(e.stroke(),ke=0)),e.fillStyle=se[1],++A;break;case Se.SET_STROKE_STYLE:Oe=se,ke&&(e.stroke(),ke=0),this.setStrokeStyle_(e,se),++A;break;case Se.STROKE:ge?ke++:e.stroke(),++A;break;default:++A}}Ae&&this.fill_(e),ke&&e.stroke()}execute(e,s,a,c,d,m){this.viewRotation_=c,this.execute_(e,s,a,this.instructions,d,void 0,void 0,m)}executeHitDetection(e,s,a,c,d){return this.viewRotation_=a,this.execute_(e,1,s,this.hitDetectionInstructions,!0,c,d)}},Yr=["Polygon","Circle","LineString","Image","Text","Default"],Wr={},uc=class Ff{constructor(e,s,a,c,d,m){this.maxExtent_=e,this.overlaps_=c,this.pixelRatio_=a,this.resolution_=s,this.renderBuffer_=m,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(d)}clip(e,s){const a=this.getClipCoords(s);e.beginPath(),e.moveTo(a[0],a[1]),e.lineTo(a[2],a[3]),e.lineTo(a[4],a[5]),e.lineTo(a[6],a[7]),e.clip()}createExecutors_(e){for(const s in e){let a=this.executorsByZIndex_[s];void 0===a&&(a={},this.executorsByZIndex_[s]=a);const c=e[s];for(const d in c)a[d]=new Pf(this.resolution_,this.pixelRatio_,this.overlaps_,c[d])}}hasExecutors(e){for(const s in this.executorsByZIndex_){const a=this.executorsByZIndex_[s];for(let c=0,d=e.length;c<d;++c)if(e[c]in a)return!0}return!1}forEachFeatureAtCoordinate(e,s,a,c,d,m){const b=2*(c=Math.round(c))+1,v=Rt(this.hitDetectionTransform_,c+.5,c+.5,1/s,-1/s,-a,-e[0],-e[1]),S=!this.hitDetectionContext_;S&&(this.hitDetectionContext_=k(b,b));const A=this.hitDetectionContext_;let R;A.canvas.width!==b||A.canvas.height!==b?(A.canvas.width=b,A.canvas.height=b):S||A.clearRect(0,0,b,b),void 0!==this.renderBuffer_&&(R=[1/0,1/0,-1/0,-1/0],et(R,e),W(R,s*(this.renderBuffer_+c),R));const F=function Of(r){if(void 0!==Wr[r])return Wr[r];const e=2*r+1,s=r*r,a=new Array(s+1);for(let d=0;d<=r;++d)for(let m=0;m<=r;++m){const b=d*d+m*m;if(b>s)break;let v=a[b];v||(v=[],a[b]=v),v.push(4*((r+d)*e+(r+m))+3),d>0&&v.push(4*((r-d)*e+(r+m))+3),m>0&&(v.push(4*((r+d)*e+(r-m))+3),d>0&&v.push(4*((r-d)*e+(r-m))+3))}const c=[];for(let d=0,m=a.length;d<m;++d)a[d]&&c.push(...a[d]);return Wr[r]=c,c}(c);let N;function X(te,ce){const ue=A.getImageData(0,0,b,b).data;for(let xe=0,Ae=F.length;xe<Ae;xe++)if(ue[F[xe]]>0){if(!m||"Image"!==N&&"Text"!==N||m.includes(te)){const ke=(F[xe]-3)/4,Ne=c-ke%b,Oe=c-(ke/b|0),Te=d(te,ce,Ne*Ne+Oe*Oe);if(Te)return Te}A.clearRect(0,0,b,b);break}}const B=Object.keys(this.executorsByZIndex_).map(Number);let H,V,U,q,$;for(B.sort(_t),H=B.length-1;H>=0;--H){const te=B[H].toString();for(U=this.executorsByZIndex_[te],V=Yr.length-1;V>=0;--V)if(N=Yr[V],q=U[N],void 0!==q&&($=q.executeHitDetection(A,v,a,X,R),$))return $}}getClipCoords(e){const s=this.maxExtent_;if(!s)return null;const a=s[0],c=s[1],d=s[2],m=s[3],b=[a,c,a,m,d,m,d,c];return as(b,0,8,2,e,b),b}isEmpty(){return Be(this.executorsByZIndex_)}execute(e,s,a,c,d,m,b){const v=Object.keys(this.executorsByZIndex_).map(Number);let S,A,R,F,N,X;for(v.sort(_t),this.maxExtent_&&(e.save(),this.clip(e,a)),m=m||Yr,b&&v.reverse(),S=0,A=v.length;S<A;++S){const B=v[S].toString();for(N=this.executorsByZIndex_[B],R=0,F=m.length;R<F;++R)X=N[m[R]],void 0!==X&&X.execute(e,s,a,c,d,b)}this.maxExtent_&&e.restore()}},Nf=class Df extends ac{constructor(e,s,a,c,d,m,b){super(),this.context_=e,this.pixelRatio_=s,this.extent_=a,this.transform_=c,this.viewRotation_=d,this.squaredTolerance_=m,this.userTransform_=b,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,s,a,c){if(!this.image_)return;const d=as(e,s,a,c,this.transform_,this.pixelCoordinates_),m=this.context_,b=this.tmpLocalTransform_,v=m.globalAlpha;1!=this.imageOpacity_&&(m.globalAlpha=v*this.imageOpacity_);let S=this.imageRotation_;this.imageRotateWithView_&&(S+=this.viewRotation_);for(let A=0,R=d.length;A<R;A+=2){const F=d[A]-this.imageAnchorX_,N=d[A+1]-this.imageAnchorY_;if(0!==S||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const X=F+this.imageAnchorX_,B=N+this.imageAnchorY_;Rt(b,X,B,1,1,S,-X,-B),m.setTransform.apply(m,b),m.translate(X,B),m.scale(this.imageScale_[0],this.imageScale_[1]),m.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),m.setTransform(1,0,0,1,0,0)}else m.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,F,N,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(m.globalAlpha=v)}drawText_(e,s,a,c){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const d=as(e,s,a,c,this.transform_,this.pixelCoordinates_),m=this.context_;let b=this.textRotation_;for(this.textRotateWithView_&&(b+=this.viewRotation_);s<a;s+=c){const v=d[s]+this.textOffsetX_,S=d[s+1]+this.textOffsetY_;0!==b||1!=this.textScale_[0]||1!=this.textScale_[1]?(m.translate(v-this.textOffsetX_,S-this.textOffsetY_),m.rotate(b),m.translate(this.textOffsetX_,this.textOffsetY_),m.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&m.strokeText(this.text_,0,0),this.textFillState_&&m.fillText(this.text_,0,0),m.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&m.strokeText(this.text_,v,S),this.textFillState_&&m.fillText(this.text_,v,S))}}moveToLineTo_(e,s,a,c,d){const m=this.context_,b=as(e,s,a,c,this.transform_,this.pixelCoordinates_);m.moveTo(b[0],b[1]);let v=b.length;d&&(v-=2);for(let S=2;S<v;S+=2)m.lineTo(b[S],b[S+1]);return d&&m.closePath(),a}drawRings_(e,s,a,c){for(let d=0,m=a.length;d<m;++d)s=this.moveToLineTo_(e,s,a[d],c,!0);return s}drawCircle(e){if(St(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const s=function Md(r,e,s){const a=r.getFlatCoordinates();if(a){const c=r.getStride();return as(a,0,a.length,c,e,s)}return null}(e,this.transform_,this.pixelCoordinates_),a=s[2]-s[0],c=s[3]-s[1],d=Math.sqrt(a*a+c*c),m=this.context_;m.beginPath(),m.arc(s[0],s[1],d,0,2*Math.PI),this.fillState_&&m.fill(),this.strokeState_&&m.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,s){const a=s.getGeometryFunction()(e);!a||!St(this.extent_,a.getExtent())||(this.setStyle(s),this.drawGeometry(a))}drawGeometryCollection(e){const s=e.getGeometriesArray();for(let a=0,c=s.length;a<c;++a)this.drawGeometry(s[a])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const s=e.getFlatCoordinates(),a=e.getStride();this.image_&&this.drawImages_(s,0,s.length,a),""!==this.text_&&this.drawText_(s,0,s.length,a)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const s=e.getFlatCoordinates(),a=e.getStride();this.image_&&this.drawImages_(s,0,s.length,a),""!==this.text_&&this.drawText_(s,0,s.length,a)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),St(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const s=this.context_,a=e.getFlatCoordinates();s.beginPath(),this.moveToLineTo_(a,0,a.length,e.getStride(),!1),s.stroke()}if(""!==this.text_){const s=e.getFlatMidpoint();this.drawText_(s,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const s=e.getExtent();if(St(this.extent_,s)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const a=this.context_,c=e.getFlatCoordinates();let d=0;const m=e.getEnds(),b=e.getStride();a.beginPath();for(let v=0,S=m.length;v<S;++v)d=this.moveToLineTo_(c,d,m[v],b,!1);a.stroke()}if(""!==this.text_){const a=e.getFlatMidpoints();this.drawText_(a,0,a.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),St(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const s=this.context_;s.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}if(""!==this.text_){const s=e.getFlatInteriorPoint();this.drawText_(s,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),St(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const s=this.context_,a=e.getOrientedFlatCoordinates();let c=0;const d=e.getEndss(),m=e.getStride();s.beginPath();for(let b=0,v=d.length;b<v;++b)c=this.drawRings_(a,c,d[b],m);this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}if(""!==this.text_){const s=e.getFlatInteriorPoints();this.drawText_(s,0,s.length,2)}}}setContextFillState_(e){const s=this.context_,a=this.contextFillState_;a?a.fillStyle!=e.fillStyle&&(a.fillStyle=e.fillStyle,s.fillStyle=e.fillStyle):(s.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const s=this.context_,a=this.contextStrokeState_;a?(a.lineCap!=e.lineCap&&(a.lineCap=e.lineCap,s.lineCap=e.lineCap),J(a.lineDash,e.lineDash)||s.setLineDash(a.lineDash=e.lineDash),a.lineDashOffset!=e.lineDashOffset&&(a.lineDashOffset=e.lineDashOffset,s.lineDashOffset=e.lineDashOffset),a.lineJoin!=e.lineJoin&&(a.lineJoin=e.lineJoin,s.lineJoin=e.lineJoin),a.lineWidth!=e.lineWidth&&(a.lineWidth=e.lineWidth,s.lineWidth=e.lineWidth),a.miterLimit!=e.miterLimit&&(a.miterLimit=e.miterLimit,s.miterLimit=e.miterLimit),a.strokeStyle!=e.strokeStyle&&(a.strokeStyle=e.strokeStyle,s.strokeStyle=e.strokeStyle)):(s.lineCap=e.lineCap,s.setLineDash(e.lineDash),s.lineDashOffset=e.lineDashOffset,s.lineJoin=e.lineJoin,s.lineWidth=e.lineWidth,s.miterLimit=e.miterLimit,s.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const s=this.context_,a=this.contextTextState_,c=e.textAlign?e.textAlign:en;a?(a.font!=e.font&&(a.font=e.font,s.font=e.font),a.textAlign!=c&&(a.textAlign=c,s.textAlign=c),a.textBaseline!=e.textBaseline&&(a.textBaseline=e.textBaseline,s.textBaseline=e.textBaseline)):(s.font=e.font,s.textAlign=c,s.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:c,textBaseline:e.textBaseline})}setFillStrokeStyle(e,s){if(e){const a=e.getColor();this.fillState_={fillStyle:ti(a||gi)}}else this.fillState_=null;if(s){const a=s.getColor(),c=s.getLineCap(),d=s.getLineDash(),m=s.getLineDashOffset(),b=s.getLineJoin(),v=s.getWidth(),S=s.getMiterLimit(),A=d||qs;this.strokeState_={lineCap:void 0!==c?c:Qn,lineDash:1===this.pixelRatio_?A:A.map(R=>R*this.pixelRatio_),lineDashOffset:(m||0)*this.pixelRatio_,lineJoin:void 0!==b?b:Es,lineWidth:(void 0!==v?v:1)*this.pixelRatio_,miterLimit:void 0!==S?S:10,strokeStyle:ti(a||Qs)}}else this.strokeState_=null}setImageStyle(e){let s;if(!e||!(s=e.getSize()))return void(this.image_=null);const a=e.getPixelRatio(this.pixelRatio_),c=e.getAnchor(),d=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=c[0]*a,this.imageAnchorY_=c[1]*a,this.imageHeight_=s[1]*a,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=d[0],this.imageOriginY_=d[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const m=e.getScaleArray();this.imageScale_=[m[0]*this.pixelRatio_/a,m[1]*this.pixelRatio_/a],this.imageWidth_=s[0]*a}setTextStyle(e){if(e){const s=e.getFill();if(s){const N=s.getColor();this.textFillState_={fillStyle:ti(N||gi)}}else this.textFillState_=null;const a=e.getStroke();if(a){const N=a.getColor(),X=a.getLineCap(),B=a.getLineDash(),H=a.getLineDashOffset(),V=a.getLineJoin(),U=a.getWidth(),q=a.getMiterLimit();this.textStrokeState_={lineCap:void 0!==X?X:Qn,lineDash:B||qs,lineDashOffset:H||0,lineJoin:void 0!==V?V:Es,lineWidth:void 0!==U?U:1,miterLimit:void 0!==q?q:10,strokeStyle:ti(N||Qs)}}else this.textStrokeState_=null;const c=e.getFont(),d=e.getOffsetX(),m=e.getOffsetY(),b=e.getRotateWithView(),v=e.getRotation(),S=e.getScaleArray(),A=e.getText(),R=e.getTextAlign(),F=e.getTextBaseline();this.textState_={font:void 0!==c?c:sl,textAlign:void 0!==R?R:en,textBaseline:void 0!==F?F:ea},this.text_=void 0!==A?Array.isArray(A)?A.reduce((N,X,B)=>N+(B%2?" ":X),""):A:"",this.textOffsetX_=void 0!==d?this.pixelRatio_*d:0,this.textOffsetY_=void 0!==m?this.pixelRatio_*m:0,this.textRotateWithView_=void 0!==b&&b,this.textRotation_=void 0!==v?v:0,this.textScale_=[this.pixelRatio_*S[0],this.pixelRatio_*S[1]]}else this.text_=""}},ii=.5,dc={Point:function Kf(r,e,s,a,c){const d=s.getImage(),m=s.getText();let b;if(d){if(2!=d.getImageState())return;let v=r;if(c){const A=d.getDeclutterMode();if("none"!==A)if(v=c,"obstacle"===A){const R=r.getBuilder(s.getZIndex(),"Image");R.setImageStyle(d,b),R.drawPoint(e,a)}else m&&m.getText()&&(b={})}const S=v.getBuilder(s.getZIndex(),"Image");S.setImageStyle(d,b),S.drawPoint(e,a)}if(m&&m.getText()){let v=r;c&&(v=c);const S=v.getBuilder(s.getZIndex(),"Text");S.setTextStyle(m,b),S.drawText(e,a)}},LineString:function jf(r,e,s,a,c){const d=s.getStroke();if(d){const b=r.getBuilder(s.getZIndex(),"LineString");b.setFillStrokeStyle(null,d),b.drawLineString(e,a)}const m=s.getText();if(m&&m.getText()){const b=(c||r).getBuilder(s.getZIndex(),"Text");b.setTextStyle(m),b.drawText(e,a)}},Polygon:function Jf(r,e,s,a,c){const d=s.getFill(),m=s.getStroke();if(d||m){const v=r.getBuilder(s.getZIndex(),"Polygon");v.setFillStrokeStyle(d,m),v.drawPolygon(e,a)}const b=s.getText();if(b&&b.getText()){const v=(c||r).getBuilder(s.getZIndex(),"Text");v.setTextStyle(b),v.drawText(e,a)}},MultiPoint:function qf(r,e,s,a,c){const d=s.getImage(),m=s.getText();let b;if(d){if(2!=d.getImageState())return;let v=r;if(c){const A=d.getDeclutterMode();if("none"!==A)if(v=c,"obstacle"===A){const R=r.getBuilder(s.getZIndex(),"Image");R.setImageStyle(d,b),R.drawMultiPoint(e,a)}else m&&m.getText()&&(b={})}const S=v.getBuilder(s.getZIndex(),"Image");S.setImageStyle(d,b),S.drawMultiPoint(e,a)}if(m&&m.getText()){let v=r;c&&(v=c);const S=v.getBuilder(s.getZIndex(),"Text");S.setTextStyle(m,b),S.drawText(e,a)}},MultiLineString:function Uf(r,e,s,a,c){const d=s.getStroke();if(d){const b=r.getBuilder(s.getZIndex(),"LineString");b.setFillStrokeStyle(null,d),b.drawMultiLineString(e,a)}const m=s.getText();if(m&&m.getText()){const b=(c||r).getBuilder(s.getZIndex(),"Text");b.setTextStyle(m),b.drawText(e,a)}},MultiPolygon:function Zf(r,e,s,a,c){const d=s.getFill(),m=s.getStroke();if(m||d){const v=r.getBuilder(s.getZIndex(),"Polygon");v.setFillStrokeStyle(d,m),v.drawMultiPolygon(e,a)}const b=s.getText();if(b&&b.getText()){const v=(c||r).getBuilder(s.getZIndex(),"Text");v.setTextStyle(b),v.drawText(e,a)}},GeometryCollection:function Vf(r,e,s,a,c){const d=e.getGeometriesArray();let m,b;for(m=0,b=d.length;m<b;++m)(0,dc[d[m].getType()])(r,d[m],s,a,c)},Circle:function Hf(r,e,s,a,c){const d=s.getFill(),m=s.getStroke();if(d||m){const v=r.getBuilder(s.getZIndex(),"Circle");v.setFillStrokeStyle(d,m),v.drawCircle(e,a)}const b=s.getText();if(b&&b.getText()){const v=(c||r).getBuilder(s.getZIndex(),"Text");v.setTextStyle(b),v.drawText(e,a)}}};function Wf(r,e){return parseInt(Me(r),10)-parseInt(Me(e),10)}function Br(r,e){return.5*r/e}function gc(r,e,s,a,c,d,m){let b=!1;const v=s.getImage();if(v){const S=v.getImageState();2==S||3==S?v.unlistenImageChange(c):(0==S&&v.load(),v.listenImageChange(c),b=!0)}return function Gf(r,e,s,a,c,d){const m=s.getGeometryFunction()(e);if(!m)return;const b=m.simplifyTransformed(a,c);s.getRenderer()?fc(r,b,s,e):(0,dc[b.getType()])(r,b,s,e,d)}(r,e,s,a,d,m),b}function fc(r,e,s,a){if("GeometryCollection"!=e.getType())r.getBuilder(s.getZIndex(),"Default").drawCustom(e,a,s.getRenderer(),s.getHitDetectionRenderer());else{const d=e.getGeometries();for(let m=0,b=d.length;m<b;++m)fc(r,d[m],s,a)}}const Qf=class $f extends oo{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,s,a){const c=s.extent,d=s.viewState,m=d.center,b=d.resolution,v=d.projection,S=d.rotation,A=v.getExtent(),R=this.getLayer().getSource(),F=s.pixelRatio,N=s.viewHints,X=!(N[0]||N[1]),B=this.compositionContext_,H=Math.round(s.size[0]*F),V=Math.round(s.size[1]*F),U=R.getWrapX()&&v.canWrapX(),q=U?Ze(A):null,$=U?Math.ceil((c[2]-A[2])/q)+1:1;let te=U?Math.floor((c[0]-A[0])/q):0;do{const ce=this.getRenderTransform(m,b,S,F,H,V,te*q);e.execute(B,1,ce,S,X,void 0,a)}while(++te<$)}setupCompositionContext_(){if(1!==this.opacity_){const e=k(this.context.canvas.width,this.context.canvas.height,ro);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,I(this.compositionContext_),ro.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,s){const a=e.pixelRatio,c=e.layerStatesArray[e.layerIndex];(function Mn(r,e,s){(function Li(r,e,s,a,c,d,m){return r[0]=e,r[1]=s,r[2]=a,r[3]=c,r[4]=d,r[5]=m,r})(r,e,0,0,s,0,0)})(this.pixelTransform,1/a,1/a),t(this.inversePixelTransform,this.pixelTransform);const d=o(this.pixelTransform);this.useContainer(s,d,this.getBackground(e));const m=this.context,b=m.canvas,v=this.replayGroup_,S=this.declutterExecutorGroup;if((!v||v.isEmpty())&&(!S||S.isEmpty()))return null;const A=Math.round(e.size[0]*a),R=Math.round(e.size[1]*a);b.width!=A||b.height!=R?(b.width=A,b.height=R,b.style.transform!==d&&(b.style.transform=d)):this.containerReused||m.clearRect(0,0,A,R),this.preRender(m,e);const F=e.viewState;this.opacity_=c.opacity,this.setupCompositionContext_();let X=!1,B=!0;if(c.extent&&this.clipping){const H=es(c.extent);B=St(H,e.extent),X=B&&!he(H,e.extent),X&&this.clipUnrotated(this.compositionContext_,e,H)}return B&&this.renderWorlds(v,e),X&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(m,e),this.renderedRotation_!==F.rotation&&(this.renderedRotation_=F.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(function(s){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const a=[this.context.canvas.width,this.context.canvas.height];nt(this.pixelTransform,a);const c=this.renderedCenter_,d=this.renderedResolution_,m=this.renderedRotation_,b=this.renderedProjection_,v=this.wrappedRenderedExtent_,S=this.getLayer(),A=[],R=a[0]*ii,F=a[1]*ii;A.push(this.getRenderTransform(c,d,m,ii,R,F,0).slice());const N=S.getSource(),X=b.getExtent();if(N.getWrapX()&&b.canWrapX()&&!he(X,v)){let B=v[0];const H=Ze(X);let U,V=0;for(;B<X[0];)--V,U=H*V,A.push(this.getRenderTransform(c,d,m,ii,R,F,U).slice()),B+=H;for(V=0,B=v[2];B>X[2];)++V,U=H*V,A.push(this.getRenderTransform(c,d,m,ii,R,F,U).slice()),B-=H}this.hitDetectionImageData_=function zf(r,e,s,a,c,d,m){const S=k(r[0]*ii,r[1]*ii);S.imageSmoothingEnabled=!1;const A=S.canvas,R=new Nf(S,ii,c,null,m),F=s.length,N=Math.floor(16777215/F),X={};for(let H=1;H<=F;++H){const V=s[H-1],U=V.getStyleFunction()||a;if(!a)continue;let q=U(V,d);if(!q)continue;Array.isArray(q)||(q=[q]);const te="#"+("000000"+(H*N).toString(16)).slice(-6);for(let ce=0,ue=q.length;ce<ue;++ce){const xe=q[ce],Ae=xe.getGeometryFunction()(V);if(!Ae||!St(c,Ae.getExtent()))continue;const ke=xe.clone(),Ne=ke.getFill();Ne&&Ne.setColor(te);const Oe=ke.getStroke();Oe&&(Oe.setColor(te),Oe.setLineDash(null)),ke.setText(void 0);const Te=xe.getImage();if(Te&&0!==Te.getOpacity()){const de=Te.getImageSize();if(!de)continue;const ge=k(de[0],de[1],void 0,{alpha:!1}),be=ge.canvas;ge.fillStyle=te,ge.fillRect(0,0,be.width,be.height),ke.setImage(new zr({img:be,imgSize:de,anchor:Te.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Te.getOrigin(),opacity:1,size:Te.getSize(),scale:Te.getScale(),rotation:Te.getRotation(),rotateWithView:Te.getRotateWithView()}))}const at=ke.getZIndex()||0;let Re=X[at];Re||(Re={},X[at]=Re,Re.Polygon=[],Re.Circle=[],Re.LineString=[],Re.Point=[]),Re[Ae.getType().replace("Multi","")].push(Ae,ke)}}const B=Object.keys(X).map(Number).sort(_t);for(let H=0,V=B.length;H<V;++H){const U=X[B[H]];for(const q in U){const $=U[q];for(let te=0,ce=$.length;te<ce;te+=2){R.setStyle($[te+1]);for(let ue=0,xe=e.length;ue<xe;++ue)R.setTransform(e[ue]),R.drawGeometry($[te])}}}return S.getImageData(0,0,A.width,A.height)}(a,A,this.renderedFeatures_,S.getStyleFunction(),v,d,m)}s(function Xf(r,e,s){const a=[];if(s){const c=Math.floor(Math.round(r[0])*ii),d=Math.floor(Math.round(r[1])*ii),m=4*(Ve(c,0,s.width-1)+Ve(d,0,s.height-1)*s.width),A=s.data[m+2]+256*(s.data[m+1]+256*s.data[m]),R=Math.floor(16777215/e.length);A&&A%R==0&&a.push(e[A/R-1])}return a}(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(e,s,a,c,d){if(!this.replayGroup_)return;const m=s.viewState.resolution,b=s.viewState.rotation,v=this.getLayer(),S={},A=function(N,X,B){const H=Me(N),V=S[H];if(V){if(!0!==V&&B<V.distanceSq){if(0===B)return S[H]=!0,d.splice(d.lastIndexOf(V),1),c(N,v,X);V.geometry=X,V.distanceSq=B}}else{if(0===B)return S[H]=!0,c(N,v,X);d.push(S[H]={feature:N,layer:v,geometry:X,distanceSq:B,callback:c})}};let R;const F=[this.replayGroup_];return this.declutterExecutorGroup&&F.push(this.declutterExecutorGroup),F.some(N=>R=N.forEachFeatureAtCoordinate(e,m,b,a,A,N===this.declutterExecutorGroup&&s.declutterTree?s.declutterTree.all().map(X=>X.value):null)),R}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const s=this.getLayer(),a=s.getSource();if(!a)return!1;const c=e.viewHints[0],d=e.viewHints[1],m=s.getUpdateWhileAnimating(),b=s.getUpdateWhileInteracting();if(this.ready&&!m&&c||!b&&d)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const v=e.extent,S=e.viewState,A=S.projection,R=S.resolution,F=e.pixelRatio,N=s.getRevision(),X=s.getRenderBuffer();let B=s.getRenderOrder();void 0===B&&(B=Wf);const H=S.center.slice(),V=W(v,X*R),U=V.slice(),q=[V.slice()],$=A.getExtent();if(a.getWrapX()&&A.canWrapX()&&!he($,e.extent)){const de=Ze($),ge=Math.max(Ze(V)/2,de);V[0]=$[0]-ge,V[2]=$[2]+ge,yo(H,A);const be=ao(q[0],A);be[0]<$[0]&&be[2]<$[2]?q.push([be[0]+de,be[1],be[2]+de,be[3]]):be[0]>$[0]&&be[2]>$[2]&&q.push([be[0]-de,be[1],be[2]-de,be[3]])}if(this.ready&&this.renderedResolution_==R&&this.renderedRevision_==N&&this.renderedRenderOrder_==B&&he(this.wrappedRenderedExtent_,V))return J(this.renderedExtent_,U)||(this.hitDetectionImageData_=null,this.renderedExtent_=U),this.renderedCenter_=H,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const te=new oc(Br(R,F),V,R,F);let ce;this.getLayer().getDeclutter()&&(ce=new oc(Br(R,F),V,R,F));const ue=Va();let xe;if(ue){for(let de=0,ge=q.length;de<ge;++de){const Ke=Ua(q[de]);a.loadFeatures(Ke,R,ue)}xe=Qi(ue,A)}else for(let de=0,ge=q.length;de<ge;++de)a.loadFeatures(q[de],R,A);const Ae=function Bf(r,e){const s=Br(r,e);return s*s}(R,F);let ke=!0;const Ne=function(de){let ge;const be=de.getStyleFunction()||s.getStyleFunction();if(be&&(ge=be(de,R)),ge){const Ke=this.renderFeature(de,Ae,ge,te,xe,ce);ke=ke&&!Ke}}.bind(this),Oe=Ua(V),Te=a.getFeaturesInExtent(Oe);B&&Te.sort(B);for(let de=0,ge=Te.length;de<ge;++de)Ne(Te[de]);this.renderedFeatures_=Te,this.ready=ke;const at=te.finish(),Re=new uc(V,R,F,a.getOverlaps(),at,s.getRenderBuffer());return ce&&(this.declutterExecutorGroup=new uc(V,R,F,a.getOverlaps(),ce.finish(),s.getRenderBuffer())),this.renderedResolution_=R,this.renderedRevision_=N,this.renderedRenderOrder_=B,this.renderedExtent_=U,this.wrappedRenderedExtent_=V,this.renderedCenter_=H,this.renderedProjection_=A,this.replayGroup_=Re,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,s,a,c,d,m){if(!a)return!1;let b=!1;if(Array.isArray(a))for(let v=0,S=a.length;v<S;++v)b=gc(c,e,a[v],s,this.boundHandleStyleImageChange_,d,m)||b;else b=gc(c,e,a,s,this.boundHandleStyleImageChange_,d,m);return b}},pc=class ep extends xf{constructor(e){super(e)}createRenderer(){return new Qf(this)}};class Hr extends ut{constructor(e){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?this.setGeometry(e):this.setProperties(e))}clone(){const e=new Hr(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const s=this.getGeometry();s&&e.setGeometry(s.clone());const a=this.getStyle();return a&&e.setStyle(a),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ie(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=we(e,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function tp(r){if("function"==typeof r)return r;{let e;return Array.isArray(r)?e=r:(Ee("function"==typeof r.getZIndex,41),e=[r]),function(){return e}}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const Gr=Hr,ip=["*"],ap=[.5,1],cp=["*"],hp=[Rs,Xl,(()=>{class r{constructor(s){this.olMap=s,this.lat=-16.6958288,this.lon=-16.6958288,this.anchor=ap,this.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAyVBMVEUAAADnTDznTDvnTDvnTDvAOCrnTDznSzvnTDvAOCvnTDznTDznTDvnTDzAOCrnTDvnTDvnTDvnTDznTDvAOSrnTDznTDzTQjLSQjPnTDzpTDvnSzvAOCrnTDvAOSvAOCvnSzvnTDzAOCvnSzznTDznTDvnTDy/OCvnTDznTDvnTDznSzvmSzvAOCvnTDzAOCvnTDvmTDvAOCq+OCrpTDzkSzrbRjbWRDTMPi+8NinrTT3EOy3gSDjTQjPPQDLHPS/DOiu5NCjHPC5jSfbDAAAAMHRSTlMAKPgE4hr8CfPy4NzUt7SxlnpaVlRPIhYPLgLt6ebOysXAwLmej4iGgGtpYkpAPCBw95QiAAAB50lEQVQ4y42T13aDMAxAbVb2TrO6927lwQhktf//UZWVQ1sIJLnwwBEXWZYwy1Lh/buG5TXu+rzC9nByDQCCbrg+KdUmLUsgW08IqzUp9rgDf5Ds8CJv1KS3mNL3fbGlOdr1Kh1AtFgs15vke7kQGpDO7pYGtJgfbRSxiXxaf7AjgsFfy1/WPu0r73WpwGiu1Fn78bF9JpWKUBTQzYlNQIK5lDcuQ9wbKeeBiTWz3vgUv44TpS4njJhcKpXEuMzpOCN+VE2FmPA9jbxjSrOf6kdG7FvYmkBJ6aYRV0oVYIusfkZ8xeHpUMna+LeYmlShxkG+Zv8GyohLf6aRzzRj9t+YVgWaX1IO08hQyi9tapxmB3huxJUp8q/EVYzB89wQr0y/FwqrHLqoDWsoLsxQr1iWNxp1iCnlRbt9IdELwfDGcrSMKJbGxLx4LenTFsszFSYehwl6aCZhTNPnO6LdBYOGYBVFqwAfDF27+CQIvLUGrTU9lpyFBw9yeA+sCNsRkJ5WQjg2K+QFcrywEjoCBHVpe3VYGZyk9NQCLxXte/jHvc1K4XXKSNQ520PPtIhcr8f2MXPShNiavTyn4jM7wK0g75YdYgTE6KA465nN9GbsILwhoMHZETx53hM7Brtet9lRDAYFwR80rG+sfAnbpQAAAABJRU5ErkJggg==",this.text=""}ngOnInit(){const s=new Gr({geometry:new ra(Vn([this.lon,this.lat]))}),a=new Gr({geometry:new ra(Vn([this.lon,this.lat]))}),c=new cs({image:new zr({anchor:this.anchor,src:this.icon})}),d=new cs({text:new tc({text:this.text,font:"normal 12px Montserrat",offsetY:20,fill:new Ms({color:"rgb(0,0,0)"}),stroke:new ua({color:"rgb(255,255,255)",width:1})})});s.setStyle(c),a.setStyle(d);const m=new Jl({features:[s,a]}),b=new pc({properties:{key:"points",type:"vetorial"},source:m});b.setZIndex(10),this.olMap.map?this.olMap.setMarker(b):setTimeout(()=>{this.ngOnInit()},10)}}return r.\u0275fac=function(s){return new(s||r)(G.Y36(Rs))},r.\u0275cmp=G.Xpm({type:r,selectors:[["ol-map-marker"]],inputs:{lat:"lat",lon:"lon",anchor:"anchor",icon:"icon",text:"text"},ngContentSelectors:ip,decls:1,vars:0,template:function(s,a){1&s&&(G.F$t(),G.Hsn(0))}}),r})(),jl,(()=>{class r{constructor(s){this.olMap=s}ngOnInit(){const s=[new cs({stroke:new ua({color:"blue",width:3}),fill:new Ms({color:"rgba(0, 0, 255, 0.1)"})}),new cs({image:new Pr({radius:5,fill:new Ms({color:"#2196f3"})})})],a=this.features.map(m=>new Gr({geometry:new ra(Vn([m.lon,m.lat])),properties:m})),c=new Jl({features:a}),d=new pc({source:c,style:s});d.setZIndex(10),this.olMap.map?this.olMap.setFeatures(d):setTimeout(()=>{this.ngOnInit()},10)}}return r.\u0275fac=function(s){return new(s||r)(G.Y36(Rs))},r.\u0275cmp=G.Xpm({type:r,selectors:[["ol-map-features"]],inputs:{features:"features"},ngContentSelectors:cp,decls:1,vars:0,template:function(s,a){1&s&&(G.F$t(),G.Hsn(0))}}),r})()];let up=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=G.oAB({type:r}),r.\u0275inj=G.cJS({providers:hp,imports:[bt.ez]}),r})();var dp=_e(5707);_e(8288);let mc=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=G.oAB({type:r}),r.\u0275inj=G.cJS({imports:[bt.ez]}),r})();var fp=_e(2120),Vr=_e(7392),pp=_e(8255),mp=_e(266),jr=_e(4859);let xc=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=G.oAB({type:r}),r.\u0275inj=G.cJS({imports:[bt.ez,jr.ot,Vr.Ps]}),r})();var bi=_e(9521),vi=_e(3238);_e(1281),_e(3353),_e(6451),_e(5698),_e(2722),_e(8675),_e(7725),_e(445),_e(4006),_e(9549);const wc=new G.OlP("mat-chips-default-options");let jp=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=G.oAB({type:r}),r.\u0275inj=G.cJS({providers:[vi.rD,{provide:wc,useValue:{separatorKeyCodes:[bi.K5]}}],imports:[vi.BQ]}),r})(),Up=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=G.oAB({type:r}),r.\u0275inj=G.cJS({imports:[bt.ez,nr.JF,mc,Vr.Ps,jr.ot,xc,jp]}),r})();_e(3101);var Cc=_e(3597);window.ApexCharts=Cc;let qp=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=G.oAB({type:r}),r.\u0275inj=G.cJS({imports:[[]]}),r})();const Jp=[{path:"",component:sf,resolve:{capabilities:(()=>{class r{constructor(s){this.wmsService=s}resolve(s,a){return this.wmsService.get()}}return r.\u0275fac=function(s){return new(s||r)(G.LFG(Jo))},r.\u0275prov=G.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}];let $p=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=G.oAB({type:r}),r.\u0275inj=G.cJS({imports:[bt.ez,Ye.Bz.forChild(Jp),up,dp.y4,mc,fp.k,Vr.Ps,pp.Tx,mp.AV,jr.ot,Up,Bo.Is,xc,qp]}),r})()},3597:(ds,Ai,_e)=>{"use strict";var bt;function Ye(M,t){var i=Object.keys(M);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(M);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(M,o).enumerable})),i.push.apply(i,n)}return i}function Ce(M){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(i),!0).forEach(function(n){ki(M,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(i)):Ye(Object(i)).forEach(function(n){Object.defineProperty(M,n,Object.getOwnPropertyDescriptor(i,n))})}return M}function Je(M){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(M)}function re(M,t){if(!(M instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(M,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(M,n.key,n)}}function ne(M,t,i){return t&&rt(M.prototype,t),i&&rt(M,i),M}function ki(M,t,i){return t in M?Object.defineProperty(M,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):M[t]=i,M}function Tt(M,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(t&&t.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),t&&_t(M,t)}function ai(M){return(ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(M)}function _t(M,t){return(_t=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i})(M,t)}function jt(M,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(M)}function Ct(M){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var i,n=ai(M);if(t){var o=ai(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return jt(this,i)}}function Z(M){return function(t){if(Array.isArray(t))return ae(t)}(M)||function(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(M)||J(M)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(M,t){if(M){if("string"==typeof M)return ae(M,t);var i=Object.prototype.toString.call(M).slice(8,-1);return"Object"===i&&M.constructor&&(i=M.constructor.name),"Map"===i||"Set"===i?Array.from(M):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ae(M,t):void 0}}function ae(M,t){(null==t||t>M.length)&&(t=M.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=M[i];return n}var Y=function(){function M(){re(this,M)}return ne(M,[{key:"shadeRGBColor",value:function(t,i){var n=i.split(","),o=t<0?0:255,l=t<0?-1*t:t,u=parseInt(n[0].slice(4),10),h=parseInt(n[1],10),g=parseInt(n[2],10);return"rgb("+(Math.round((o-u)*l)+u)+","+(Math.round((o-h)*l)+h)+","+(Math.round((o-g)*l)+g)+")"}},{key:"shadeHexColor",value:function(t,i){var n=parseInt(i.slice(1),16),o=t<0?0:255,l=t<0?-1*t:t,u=n>>16,h=n>>8&255,g=255&n;return"#"+(16777216+65536*(Math.round((o-u)*l)+u)+256*(Math.round((o-h)*l)+h)+(Math.round((o-g)*l)+g)).toString(16).slice(1)}},{key:"shadeColor",value:function(t,i){return M.isColorHex(i)?this.shadeHexColor(t,i):this.shadeRGBColor(t,i)}}],[{key:"bind",value:function(t,i){return function(){return t.apply(i,arguments)}}},{key:"isObject",value:function(t){return t&&"object"===Je(t)&&!Array.isArray(t)&&null!=t}},{key:"is",value:function(t,i){return Object.prototype.toString.call(i)==="[object "+t+"]"}},{key:"listToArray",value:function(t){var i,n=[];for(i=0;i<t.length;i++)n[i]=t[i];return n}},{key:"extend",value:function(t,i){var n=this;"function"!=typeof Object.assign&&(Object.assign=function(l){if(null==l)throw new TypeError("Cannot convert undefined or null to object");for(var u=Object(l),h=1;h<arguments.length;h++){var g=arguments[h];if(null!=g)for(var f in g)g.hasOwnProperty(f)&&(u[f]=g[f])}return u});var o=Object.assign({},t);return this.isObject(t)&&this.isObject(i)&&Object.keys(i).forEach(function(l){n.isObject(i[l])&&l in t?o[l]=n.extend(t[l],i[l]):Object.assign(o,ki({},l,i[l]))}),o}},{key:"extendArray",value:function(t,i){var n=[];return t.map(function(o){n.push(M.extend(i,o))}),n}},{key:"monthMod",value:function(t){return t%12}},{key:"clone",value:function(t){if(M.is("Array",t)){for(var i=[],n=0;n<t.length;n++)i[n]=this.clone(t[n]);return i}if(M.is("Null",t))return null;if(M.is("Date",t))return t;if("object"===Je(t)){var o={};for(var l in t)t.hasOwnProperty(l)&&(o[l]=this.clone(t[l]));return o}return t}},{key:"log10",value:function(t){return Math.log(t)/Math.LN10}},{key:"roundToBase10",value:function(t){return Math.pow(10,Math.floor(Math.log10(t)))}},{key:"roundToBase",value:function(t,i){return Math.pow(i,Math.floor(Math.log(t)/Math.log(i)))}},{key:"parseNumber",value:function(t){return null===t?t:parseFloat(t)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(t){var i=String(t).split(/[eE]/);if(1===i.length)return i[0];var n="",o=t<0?"-":"",l=i[0].replace(".",""),u=Number(i[1])+1;if(u<0){for(n=o+"0.";u++;)n+="0";return n+l.replace(/^-/,"")}for(u-=l.length;u--;)n+="0";return l+n}},{key:"getDimensions",value:function(t){var i=getComputedStyle(t,null),n=t.clientHeight,o=t.clientWidth;return n-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),[o-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),n]}},{key:"getBoundingClientRect",value:function(t){var i=t.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:t.clientWidth,height:t.clientHeight,x:i.left,y:i.top}}},{key:"getLargestStringFromArr",value:function(t){return t.reduce(function(i,n){return Array.isArray(n)&&(n=n.reduce(function(o,l){return o.length>l.length?o:l})),i.length>n.length?i:n},0)}},{key:"hexToRgba",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==t.substring(0,1)&&(t="#999999");var n=t.replace("#","");n=n.match(new RegExp("(.{"+n.length/3+"})","g"));for(var o=0;o<n.length;o++)n[o]=parseInt(1===n[o].length?n[o]+n[o]:n[o],16);return void 0!==i&&n.push(i),"rgba("+n.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(t){return parseFloat(t.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(t)}},{key:"getPolygonPos",value:function(t,i){for(var n=[],o=2*Math.PI/i,l=0;l<i;l++){var u={};u.x=t*Math.sin(l*o),u.y=-t*Math.cos(l*o),n.push(u)}return n}},{key:"polarToCartesian",value:function(t,i,n,o){var l=(o-90)*Math.PI/180;return{x:t+n*Math.cos(l),y:i+n*Math.sin(l)}}},{key:"escapeString",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",n=t.toString().slice();return n.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,i)}},{key:"negToZero",value:function(t){return t<0?0:t}},{key:"moveIndexInArray",value:function(t,i,n){if(n>=t.length)for(var o=n-t.length+1;o--;)t.push(void 0);return t.splice(n,0,t.splice(i,1)[0]),t}},{key:"extractNumber",value:function(t){return parseFloat(t.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(t,i){for(;(t=t.parentElement)&&!t.classList.contains(i););return t}},{key:"setELstyles",value:function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t.style.key=i[n])}},{key:"isNumber",value:function(t){return!isNaN(t)&&parseFloat(Number(t))===t&&!isNaN(parseInt(t,10))}},{key:"isFloat",value:function(t){return Number(t)===t&&t%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var t=window.navigator.userAgent,i=t.indexOf("MSIE ");if(i>0)return parseInt(t.substring(i+5,t.indexOf(".",i)),10);if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var o=t.indexOf("Edge/");return o>0&&parseInt(t.substring(o+5,t.indexOf(".",o)),10)}}]),M}(),le=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w,this.setEasingFunctions()}return ne(M,[{key:"setEasingFunctions",value:function(){var t;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":t="-";break;case"easein":t="<";break;case"easeout":t=">";break;case"easeinout":default:t="<>";break;case"swing":t=function(i){var n=1.70158;return(i-=1)*i*((n+1)*i+n)+1};break;case"bounce":t=function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375};break;case"elastic":t=function(i){return i===!!i?i:Math.pow(2,-10*i)*Math.sin((i-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=t}}},{key:"animateLine",value:function(t,i,n,o){t.attr(i).animate(o).attr(n)}},{key:"animateMarker",value:function(t,i,n,o,l,u){i||(i=0),t.attr({r:i,width:i,height:i}).animate(o,l).attr({r:n,width:n.width,height:n.height}).afterAll(function(){u()})}},{key:"animateCircle",value:function(t,i,n,o,l){t.attr({r:i.r,cx:i.cx,cy:i.cy}).animate(o,l).attr({r:n.r,cx:n.cx,cy:n.cy})}},{key:"animateRect",value:function(t,i,n,o,l){t.attr(i).animate(o).attr(n).afterAll(function(){return l()})}},{key:"animatePathsGradually",value:function(t){var x=this.w,y=0;x.config.chart.animations.animateGradually.enabled&&(y=x.config.chart.animations.animateGradually.delay),x.config.chart.animations.dynamicAnimation.enabled&&x.globals.dataChanged&&"bar"!==x.config.chart.type&&(y=0),this.morphSVG(t.el,t.realIndex,t.j,"line"!==x.config.chart.type||x.globals.comboCharts?t.fill:"stroke",t.pathFrom,t.pathTo,t.speed,t.delay*y)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(t){t.el.classList.remove("apexcharts-element-hidden")})}},{key:"animationCompleted",value:function(t){var i=this.w;i.globals.animationEnded||(i.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof i.config.chart.events.animationEnd&&i.config.chart.events.animationEnd(this.ctx,{el:t,w:i}))}},{key:"morphSVG",value:function(t,i,n,o,l,u,h,g){var f=this,x=this.w;l||(l=t.attr("pathFrom")),u||(u=t.attr("pathTo"));var y=function(w){return"radar"===x.config.chart.type&&(h=1),"M 0 ".concat(x.globals.gridHeight)};(!l||l.indexOf("undefined")>-1||l.indexOf("NaN")>-1)&&(l=y()),(!u||u.indexOf("undefined")>-1||u.indexOf("NaN")>-1)&&(u=y()),x.globals.shouldAnimate||(h=1),t.plot(l).animate(1,x.globals.easing,g).plot(l).animate(h,x.globals.easing,g).plot(u).afterAll(function(){Y.isNumber(n)?n===x.globals.series[x.globals.maxValsInArrayIndex].length-2&&x.globals.shouldAnimate&&f.animationCompleted(t):"none"!==o&&x.globals.shouldAnimate&&(!x.globals.comboCharts&&i===x.globals.series.length-1||x.globals.comboCharts)&&f.animationCompleted(t),f.showDelayedElements()})}}]),M}(),oe=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"getDefaultFilter",value:function(t,i){var n=this.w;t.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==n.config.states.normal.filter?this.applyFilter(t,i,n.config.states.normal.filter.type,n.config.states.normal.filter.value):n.config.chart.dropShadow.enabled&&this.dropShadow(t,n.config.chart.dropShadow,i)}},{key:"addNormalFilter",value:function(t,i){var n=this.w;n.config.chart.dropShadow.enabled&&!t.node.classList.contains("apexcharts-marker")&&this.dropShadow(t,n.config.chart.dropShadow,i)}},{key:"addLightenFilter",value:function(t,i,n){var o=this,l=this.w,u=n.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter(function(h){var g=l.config.chart.dropShadow;(g.enabled?o.addShadow(h,i,g):h).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:u}})}),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"addDarkenFilter",value:function(t,i,n){var o=this,l=this.w,u=n.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter(function(h){var g=l.config.chart.dropShadow;(g.enabled?o.addShadow(h,i,g):h).componentTransfer({rgb:{type:"linear",slope:u}})}),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"applyFilter",value:function(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(n){case"none":this.addNormalFilter(t,i);break;case"lighten":this.addLightenFilter(t,i,{intensity:o});break;case"darken":this.addDarkenFilter(t,i,{intensity:o})}}},{key:"addShadow",value:function(t,i,n){var o=n.blur,l=n.top,u=n.left,h=n.color,g=n.opacity,f=t.flood(Array.isArray(h)?h[i]:h,g).composite(t.sourceAlpha,"in").offset(u,l).gaussianBlur(o).merge(t.source);return t.blend(t.source,f)}},{key:"dropShadow",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=i.top,l=i.left,u=i.blur,h=i.color,g=i.opacity,f=i.noUserSpaceOnUse,x=this.w;return t.unfilter(!0),Y.isIE()&&"radialBar"===x.config.chart.type||(h=Array.isArray(h)?h[n]:h,t.filter(function(y){var w;w=Y.isSafari()||Y.isFirefox()||Y.isIE()?y.flood(h,g).composite(y.sourceAlpha,"in").offset(l,o).gaussianBlur(u):y.flood(h,g).composite(y.sourceAlpha,"in").offset(l,o).gaussianBlur(u).merge(y.source),y.blend(y.source,w)}),f||t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)),t}},{key:"setSelectionFilter",value:function(t,i,n){var o=this.w;if(void 0!==o.globals.selectedDataPoints[i]&&o.globals.selectedDataPoints[i].indexOf(n)>-1){t.node.setAttribute("selected",!0);var l=o.config.states.active.filter;"none"!==l&&this.applyFilter(t,i,l.type,l.value)}}},{key:"_scaleFilterSize",value:function(t){!function(i){for(var n in i)i.hasOwnProperty(n)&&t.setAttribute(n,i[n])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),M}(),j=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"drawLine",value:function(t,i,n,o){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt",f=this.w,x=f.globals.dom.Paper.line().attr({x1:t,y1:i,x2:n,y2:o,stroke:l,"stroke-dasharray":u,"stroke-width":h,"stroke-linecap":g});return x}},{key:"drawRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,x=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,y=this.w,w=y.globals.dom.Paper.rect();return w.attr({x:t,y:i,width:n>0?n:0,height:o>0?o:0,rx:l,ry:l,opacity:h,"stroke-width":null!==g?g:0,stroke:null!==f?f:"none","stroke-dasharray":x}),w.node.setAttribute("fill",u),w}},{key:"drawPolygon",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",l=this.w,u=l.globals.dom.Paper.polygon(t).attr({fill:o,stroke:i,"stroke-width":n});return u}},{key:"drawCircle",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.w;t<0&&(t=0);var o=n.globals.dom.Paper.circle(2*t);return null!==i&&o.attr(i),o}},{key:"drawPath",value:function(t){var i=t.d,n=void 0===i?"":i,o=t.stroke,l=void 0===o?"#a8a8a8":o,u=t.strokeWidth,h=void 0===u?1:u,g=t.fill,f=t.fillOpacity,x=void 0===f?1:f,y=t.strokeOpacity,w=void 0===y?1:y,C=t.classes,E=t.strokeLinecap,k=void 0===E?null:E,I=t.strokeDashArray,P=void 0===I?0:I,O=this.w;return null===k&&(k=O.config.stroke.lineCap),(n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n="M 0 ".concat(O.globals.gridHeight)),O.globals.dom.Paper.path(n).attr({fill:g,"fill-opacity":x,stroke:l,"stroke-opacity":w,"stroke-linecap":k,"stroke-width":h,"stroke-dasharray":P,class:C})}},{key:"group",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this.w,n=i.globals.dom.Paper.group();return null!==t&&n.attr(t),n}},{key:"move",value:function(t,i){return["M",t,i].join(" ")}},{key:"line",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=null;return null===n?o=["L",t,i].join(" "):"H"===n?o=["H",t].join(" "):"V"===n&&(o=["V",i].join(" ")),o}},{key:"curve",value:function(t,i,n,o,l,u){return["C",t,i,n,o,l,u].join(" ")}},{key:"quadraticCurve",value:function(t,i,n,o){return["Q",t,i,n,o].join(" ")}},{key:"arc",value:function(t,i,n,o,l,u,h){var g=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f="A";g&&(f="a");var x=[f,t,i,n,o,l,u,h].join(" ");return x}},{key:"renderPaths",value:function(t){var i,n=t.j,o=t.realIndex,l=t.pathFrom,u=t.pathTo,h=t.stroke,g=t.strokeWidth,f=t.strokeLinecap,x=t.fill,y=t.animationDelay,w=t.initialSpeed,C=t.dataChangeSpeed,E=t.className,k=t.shouldClipToGrid,I=void 0===k||k,P=t.bindEventsOnPaths,O=void 0===P||P,D=t.drawShadow,p=void 0===D||D,_=this.w,T=new oe(this.ctx),L=new le(this.ctx),z=this.w.config.chart.animations.enabled,K=z&&this.w.config.chart.animations.dynamicAnimation.enabled,W=!!(z&&!_.globals.resized||K&&_.globals.dataChanged&&_.globals.shouldAnimate);W?i=l:(i=u,_.globals.animationEnded=!0);var Q,ee=_.config.stroke.dashArray;Q=Array.isArray(ee)?ee[o]:_.config.stroke.dashArray;var ie=this.drawPath({d:i,stroke:h,strokeWidth:g,fill:x,fillOpacity:1,classes:E,strokeLinecap:f,strokeDashArray:Q});ie.attr("index",o),I&&ie.attr({"clip-path":"url(#gridRectMask".concat(_.globals.cuid,")")}),"none"!==_.config.states.normal.filter.type?T.getDefaultFilter(ie,o):_.config.chart.dropShadow.enabled&&p&&(!_.config.chart.dropShadow.enabledOnSeries||_.config.chart.dropShadow.enabledOnSeries&&-1!==_.config.chart.dropShadow.enabledOnSeries.indexOf(o))&&T.dropShadow(ie,_.config.chart.dropShadow,o),O&&(ie.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,ie)),ie.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,ie)),ie.node.addEventListener("mousedown",this.pathMouseDown.bind(this,ie))),ie.attr({pathTo:u,pathFrom:l});var He={el:ie,j:n,realIndex:o,pathFrom:l,pathTo:u,fill:x,strokeWidth:g,delay:y};return!z||_.globals.resized||_.globals.dataChanged?!_.globals.resized&&_.globals.dataChanged||L.showDelayedElements():L.animatePathsGradually(Ce(Ce({},He),{},{speed:w})),_.globals.dataChanged&&K&&W&&L.animatePathsGradually(Ce(Ce({},He),{},{speed:C})),ie}},{key:"drawPattern",value:function(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=this.w,h=u.globals.dom.Paper.pattern(i,n,function(g){"horizontalLines"===t?g.line(0,0,n,0).stroke({color:o,width:l+1}):"verticalLines"===t?g.line(0,0,0,i).stroke({color:o,width:l+1}):"slantedLines"===t?g.line(0,0,i,n).stroke({color:o,width:l}):"squares"===t?g.rect(i,n).fill("none").stroke({color:o,width:l}):"circles"===t&&g.circle(i).fill("none").stroke({color:o,width:l})});return h}},{key:"drawGradient",value:function(t,i,n,o,l){var u,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,x=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,y=this.w;i.length<9&&0===i.indexOf("#")&&(i=Y.hexToRgba(i,o)),n.length<9&&0===n.indexOf("#")&&(n=Y.hexToRgba(n,l));var w=0,C=1,E=1,k=null;null!==g&&(w=void 0!==g[0]?g[0]/100:0,C=void 0!==g[1]?g[1]/100:1,E=void 0!==g[2]?g[2]/100:1,k=void 0!==g[3]?g[3]/100:null);var I=!("donut"!==y.config.chart.type&&"pie"!==y.config.chart.type&&"polarArea"!==y.config.chart.type&&"bubble"!==y.config.chart.type);if(u=y.globals.dom.Paper.gradient(I?"radial":"linear",null===f||0===f.length?function(D){D.at(w,i,o),D.at(C,n,l),D.at(E,n,l),null!==k&&D.at(k,i,o)}:function(D){(Array.isArray(f[x])?f[x]:f).forEach(function(p){D.at(p.offset/100,p.color,p.opacity)})}),I){var P=y.globals.gridWidth/2,O=y.globals.gridHeight/2;u.attr("bubble"!==y.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:P,cy:O,r:h}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===t?u.from(0,0).to(0,1):"diagonal"===t?u.from(0,0).to(1,1):"horizontal"===t?u.from(0,1).to(1,1):"diagonal2"===t&&u.from(1,0).to(0,1);return u}},{key:"getTextBasedOnMaxWidth",value:function(t){var i=t.text,n=t.maxWidth,u=this.getTextRects(i,t.fontSize,t.fontFamily),g=Math.floor(n/(u.width/i.length));return n<u.width?i.slice(0,g-3)+"...":i}},{key:"drawText",value:function(t){var i=this,n=t.x,o=t.y,l=t.text,u=t.textAnchor,h=t.fontSize,g=t.fontFamily,f=t.fontWeight,x=t.foreColor,y=t.opacity,w=t.maxWidth,C=t.cssClass,E=void 0===C?"":C,k=t.isPlainText,I=void 0===k||k,P=this.w;void 0===l&&(l="");var O=l;u||(u="start"),x&&x.length||(x=P.config.chart.foreColor),f=f||"regular";var D,p={maxWidth:w,fontSize:h=h||"11px",fontFamily:g=g||P.config.chart.fontFamily};return Array.isArray(l)?D=P.globals.dom.Paper.text(function(_){for(var T=0;T<l.length;T++)O=l[T],w&&(O=i.getTextBasedOnMaxWidth(Ce({text:l[T]},p))),0===T?_.tspan(O):_.tspan(O).newLine()}):(w&&(O=this.getTextBasedOnMaxWidth(Ce({text:l},p))),D=I?P.globals.dom.Paper.plain(l):P.globals.dom.Paper.text(function(_){return _.tspan(O)})),D.attr({x:n,y:o,"text-anchor":u,"dominant-baseline":"auto","font-size":h,"font-family":g,"font-weight":f,fill:x,class:"apexcharts-text "+E}),D.node.style.fontFamily=g,D.node.style.opacity=y,D}},{key:"drawMarker",value:function(t,i,n){t=t||0;var o=n.pSize||0,l=null;if("square"===n.shape||"rect"===n.shape){var u=void 0===n.pRadius?o/2:n.pRadius;null!==i&&o||(o=0,u=0);var h=1.2*o+u,g=this.drawRect(h,h,h,h,u);g.attr({x:t-h/2,y:i-h/2,cx:t,cy:i,class:n.class?n.class:"",fill:n.pointFillColor,"fill-opacity":n.pointFillOpacity?n.pointFillOpacity:1,stroke:n.pointStrokeColor,"stroke-width":n.pointStrokeWidth?n.pointStrokeWidth:0,"stroke-opacity":n.pointStrokeOpacity?n.pointStrokeOpacity:1}),l=g}else"circle"!==n.shape&&n.shape||(Y.isNumber(i)||(o=0,i=0),l=this.drawCircle(o,{cx:t,cy:i,class:n.class?n.class:"",stroke:n.pointStrokeColor,fill:n.pointFillColor,"fill-opacity":n.pointFillOpacity?n.pointFillOpacity:1,"stroke-width":n.pointStrokeWidth?n.pointStrokeWidth:0,"stroke-opacity":n.pointStrokeOpacity?n.pointStrokeOpacity:1}));return l}},{key:"pathMouseEnter",value:function(t,i){var n=this.w,o=new oe(this.ctx),l=parseInt(t.node.getAttribute("index"),10),u=parseInt(t.node.getAttribute("j"),10);if("function"==typeof n.config.chart.events.dataPointMouseEnter&&n.config.chart.events.dataPointMouseEnter(i,this.ctx,{seriesIndex:l,dataPointIndex:u,w:n}),this.ctx.events.fireEvent("dataPointMouseEnter",[i,this.ctx,{seriesIndex:l,dataPointIndex:u,w:n}]),("none"===n.config.states.active.filter.type||"true"!==t.node.getAttribute("selected"))&&"none"!==n.config.states.hover.filter.type&&!n.globals.isTouchDevice){var h=n.config.states.hover.filter;o.applyFilter(t,l,h.type,h.value)}}},{key:"pathMouseLeave",value:function(t,i){var n=this.w,o=new oe(this.ctx),l=parseInt(t.node.getAttribute("index"),10),u=parseInt(t.node.getAttribute("j"),10);"function"==typeof n.config.chart.events.dataPointMouseLeave&&n.config.chart.events.dataPointMouseLeave(i,this.ctx,{seriesIndex:l,dataPointIndex:u,w:n}),this.ctx.events.fireEvent("dataPointMouseLeave",[i,this.ctx,{seriesIndex:l,dataPointIndex:u,w:n}]),"none"!==n.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"!==n.config.states.hover.filter.type&&o.getDefaultFilter(t,l)}},{key:"pathMouseDown",value:function(t,i){var n=this.w,o=new oe(this.ctx),l=parseInt(t.node.getAttribute("index"),10),u=parseInt(t.node.getAttribute("j"),10),h="false";if("true"===t.node.getAttribute("selected")){if(t.node.setAttribute("selected","false"),n.globals.selectedDataPoints[l].indexOf(u)>-1){var g=n.globals.selectedDataPoints[l].indexOf(u);n.globals.selectedDataPoints[l].splice(g,1)}}else{if(!n.config.states.active.allowMultipleDataPointsSelection&&n.globals.selectedDataPoints.length>0){n.globals.selectedDataPoints=[];var f=n.globals.dom.Paper.select(".apexcharts-series path").members,x=n.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,y=function(E){Array.prototype.forEach.call(E,function(k){k.node.setAttribute("selected","false"),o.getDefaultFilter(k,l)})};y(f),y(x)}t.node.setAttribute("selected","true"),h="true",void 0===n.globals.selectedDataPoints[l]&&(n.globals.selectedDataPoints[l]=[]),n.globals.selectedDataPoints[l].push(u)}if("true"===h){var w=n.config.states.active.filter;if("none"!==w)o.applyFilter(t,l,w.type,w.value);else if("none"!==n.config.states.hover.filter&&!n.globals.isTouchDevice){var C=n.config.states.hover.filter;o.applyFilter(t,l,C.type,C.value)}}else"none"!==n.config.states.active.filter.type&&("none"===n.config.states.hover.filter.type||n.globals.isTouchDevice?o.getDefaultFilter(t,l):o.applyFilter(t,l,(C=n.config.states.hover.filter).type,C.value));"function"==typeof n.config.chart.events.dataPointSelection&&n.config.chart.events.dataPointSelection(i,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:l,dataPointIndex:u,w:n}),i&&this.ctx.events.fireEvent("dataPointSelection",[i,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:l,dataPointIndex:u,w:n}])}},{key:"rotateAroundCenter",value:function(t){var i={};return t&&"function"==typeof t.getBBox&&(i=t.getBBox()),{x:i.x+i.width/2,y:i.y+i.height/2}}},{key:"getTextRects",value:function(t,i,n,o){var l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=this.w,h=this.drawText({x:-200,y:-200,text:t,textAnchor:"start",fontSize:i,fontFamily:n,foreColor:"#fff",opacity:0});o&&h.attr("transform",o),u.globals.dom.Paper.add(h);var g=h.bbox();return l||(g=h.node.getBoundingClientRect()),h.remove(),{width:g.width,height:g.height}}},{key:"placeTextWithEllipsis",value:function(t,i,n){if("function"==typeof t.getComputedTextLength&&(t.textContent=i,i.length>0&&t.getComputedTextLength()>=n/1.1)){for(var o=i.length-3;o>0;o-=3)if(t.getSubStringLength(0,o)<=n/1.1)return void(t.textContent=i.substring(0,o)+"...");t.textContent="."}}}],[{key:"setAttrs",value:function(t,i){for(var n in i)i.hasOwnProperty(n)&&t.setAttribute(n,i[n])}}]),M}(),ye=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"getStackedSeriesTotals",value:function(){var t=this.w,i=[];if(0===t.globals.series.length)return i;for(var n=0;n<t.globals.series[t.globals.maxValsInArrayIndex].length;n++){for(var o=0,l=0;l<t.globals.series.length;l++)void 0!==t.globals.series[l][n]&&(o+=t.globals.series[l][n]);i.push(o)}return t.globals.stackedSeriesTotals=i,i}},{key:"getSeriesTotalByIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.w.config.series.reduce(function(i,n){return i+n},0):this.w.globals.series[t].reduce(function(i,n){return i+n},0)}},{key:"isSeriesNull",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===t?this.w.config.series.filter(function(i){return null!==i}):this.w.config.series[t].data.filter(function(i){return null!==i})).length}},{key:"seriesHaveSameValues",value:function(t){return this.w.globals.series[t].every(function(i,n,o){return i===o[0]})}},{key:"getCategoryLabels",value:function(t){var i=this.w,n=t.slice();return i.config.xaxis.convertedCatToNumeric&&(n=t.map(function(o,l){return i.config.xaxis.labels.formatter(o-i.globals.minX+1)})),n}},{key:"getLargestSeries",value:function(){var t=this.w;t.globals.maxValsInArrayIndex=t.globals.series.map(function(i){return i.length}).indexOf(Math.max.apply(Math,t.globals.series.map(function(i){return i.length})))}},{key:"getLargestMarkerSize",value:function(){var t=this.w,i=0;return t.globals.markers.size.forEach(function(n){i=Math.max(i,n)}),t.config.markers.discrete&&t.config.markers.discrete.length&&t.config.markers.discrete.forEach(function(n){i=Math.max(i,n.size)}),i>0&&(i+=t.config.markers.hover.sizeOffset+1),t.globals.markers.largestSize=i,i}},{key:"getSeriesTotals",value:function(){var t=this.w;t.globals.seriesTotals=t.globals.series.map(function(i,n){var o=0;if(Array.isArray(i))for(var l=0;l<i.length;l++)o+=i[l];else o+=i;return o})}},{key:"getSeriesTotalsXRange",value:function(t,i){var n=this.w;return n.globals.series.map(function(o,l){for(var u=0,h=0;h<o.length;h++)n.globals.seriesX[l][h]>t&&n.globals.seriesX[l][h]<i&&(u+=o[h]);return u})}},{key:"getPercentSeries",value:function(){var t=this.w;t.globals.seriesPercent=t.globals.series.map(function(i,n){var o=[];if(Array.isArray(i))for(var l=0;l<i.length;l++){var u=t.globals.stackedSeriesTotals[l],h=0;u&&(h=100*i[l]/u),o.push(h)}else{var g=100*i/t.globals.seriesTotals.reduce(function(f,x){return f+x},0);o.push(g)}return o})}},{key:"getCalculatedRatios",value:function(){var t,i,n,o,l=this.w.globals,u=[],h=0,g=[],f=.1,x=0;if(l.yRange=[],l.isMultipleYAxis)for(var y=0;y<l.minYArr.length;y++)l.yRange.push(Math.abs(l.minYArr[y]-l.maxYArr[y])),g.push(0);else l.yRange.push(Math.abs(l.minY-l.maxY));l.xRange=Math.abs(l.maxX-l.minX),l.zRange=Math.abs(l.maxZ-l.minZ);for(var w=0;w<l.yRange.length;w++)u.push(l.yRange[w]/l.gridHeight);if(i=l.xRange/l.gridWidth,n=Math.abs(l.initialMaxX-l.initialMinX)/l.gridWidth,t=l.yRange/l.gridWidth,o=l.xRange/l.gridHeight,(h=l.zRange/l.gridHeight*16)||(h=1),l.minY!==Number.MIN_VALUE&&0!==Math.abs(l.minY)&&(l.hasNegs=!0),l.isMultipleYAxis){g=[];for(var C=0;C<u.length;C++)g.push(-l.minYArr[C]/u[C])}else g.push(-l.minY/u[0]),l.minY!==Number.MIN_VALUE&&0!==Math.abs(l.minY)&&(f=-l.minY/t,x=l.minX/i);return{yRatio:u,invertedYRatio:t,zRatio:h,xRatio:i,initialXRatio:n,invertedXRatio:o,baseLineInvertedY:f,baseLineY:g,baseLineX:x}}},{key:"getLogSeries",value:function(t){var i=this,n=this.w;return n.globals.seriesLog=t.map(function(o,l){return n.config.yaxis[l]&&n.config.yaxis[l].logarithmic?o.map(function(u){return null===u?null:i.getLogVal(n.config.yaxis[l].logBase,u,l)}):o}),n.globals.invalidLogScale?t:n.globals.seriesLog}},{key:"getBaseLog",value:function(t,i){return Math.log(i)/Math.log(t)}},{key:"getLogVal",value:function(t,i,n){if(0===i)return 0;var o=this.w,l=0===o.globals.minYArr[n]?-1:this.getBaseLog(t,o.globals.minYArr[n]),u=(0===o.globals.maxYArr[n]?0:this.getBaseLog(t,o.globals.maxYArr[n]))-l;return i<1?i/u:(this.getBaseLog(t,i)-l)/u}},{key:"getLogYRatios",value:function(t){var i=this,n=this.w,o=this.w.globals;return o.yLogRatio=t.slice(),o.logYRange=o.yRange.map(function(l,u){if(n.config.yaxis[u]&&i.w.config.yaxis[u].logarithmic){var h,g=-Number.MAX_VALUE,f=Number.MIN_VALUE;return o.seriesLog.forEach(function(x,y){x.forEach(function(w){n.config.yaxis[y]&&n.config.yaxis[y].logarithmic&&(g=Math.max(w,g),f=Math.min(w,f))})}),h=Math.pow(o.yRange[u],Math.abs(f-g)/o.yRange[u]),o.yLogRatio[u]=h/o.gridHeight,h}}),o.invalidLogScale?t.slice():o.yLogRatio}}],[{key:"checkComboSeries",value:function(t){var i=!1,n=0,o=0;return t.length&&void 0!==t[0].type&&t.forEach(function(l){"bar"!==l.type&&"column"!==l.type&&"candlestick"!==l.type&&"boxPlot"!==l.type||n++,void 0!==l.type&&o++}),o>0&&(i=!0),{comboBarCount:n,comboCharts:i}}},{key:"extendArrayProps",value:function(t,i,n){return i.yaxis&&(i=t.extendYAxis(i,n)),i.annotations&&(i.annotations.yaxis&&(i=t.extendYAxisAnnotations(i)),i.annotations.xaxis&&(i=t.extendXAxisAnnotations(i)),i.annotations.points&&(i=t.extendPointAnnotations(i))),i}}]),M}(),Pe=function(){function M(t){re(this,M),this.w=t.w,this.annoCtx=t}return ne(M,[{key:"setOrientations",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.w;if("vertical"===t.label.orientation){var o=null!==i?i:0,l=n.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(o,"']"));if(null!==l){var u=l.getBoundingClientRect();l.setAttribute("x",parseFloat(l.getAttribute("x"))-u.height+4),l.setAttribute("y","top"===t.label.position?parseFloat(l.getAttribute("y"))+u.width:parseFloat(l.getAttribute("y"))-u.width);var h=this.annoCtx.graphics.rotateAroundCenter(l),g=h.x,f=h.y;l.setAttribute("transform","rotate(-90 ".concat(g," ").concat(f,")"))}}}},{key:"addBackgroundToAnno",value:function(t,i){var n=this.w;if(!t||void 0===i.label.text||void 0!==i.label.text&&!String(i.label.text).trim())return null;var o=n.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),l=t.getBoundingClientRect(),u=i.label.style.padding.left,h=i.label.style.padding.right,g=i.label.style.padding.top,f=i.label.style.padding.bottom;"vertical"===i.label.orientation&&(g=i.label.style.padding.left,f=i.label.style.padding.right,u=i.label.style.padding.top,h=i.label.style.padding.bottom);var w=this.annoCtx.graphics.drawRect(l.left-o.left-u-n.globals.barPadForNumericAxis,l.top-o.top-g,l.width+u+h,l.height+g+f,i.label.borderRadius,i.label.style.background,1,i.label.borderWidth,i.label.borderColor,0);return i.id&&w.node.classList.add(i.id),w}},{key:"annotationsBackground",value:function(){var t=this,i=this.w,n=function(o,l,u){var h=i.globals.dom.baseEl.querySelector(".apexcharts-".concat(u,"-annotations .apexcharts-").concat(u,"-annotation-label[rel='").concat(l,"']"));if(h){var g=h.parentNode,f=t.addBackgroundToAnno(h,o);f&&(g.insertBefore(f.node,h),o.label.mouseEnter&&f.node.addEventListener("mouseenter",o.label.mouseEnter.bind(t,o)),o.label.mouseLeave&&f.node.addEventListener("mouseleave",o.label.mouseLeave.bind(t,o)),o.label.click&&f.node.addEventListener("click",o.label.click.bind(t,o)))}};i.config.annotations.xaxis.map(function(o,l){n(o,l,"xaxis")}),i.config.annotations.yaxis.map(function(o,l){n(o,l,"yaxis")}),i.config.annotations.points.map(function(o,l){n(o,l,"point")})}},{key:"getY1Y2",value:function(t,i){var n,o="y1"===t?i.y:i.y2,l=this.w;if(this.annoCtx.invertAxis){var u=l.globals.labels.indexOf(o);l.config.xaxis.convertedCatToNumeric&&(u=l.globals.categoryLabels.indexOf(o));var h=l.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(u+1)+")");h&&(n=parseFloat(h.getAttribute("y")))}else{var g;g=l.config.yaxis[i.yAxisIndex].logarithmic?(o=new ye(this.annoCtx.ctx).getLogVal(o,i.yAxisIndex))/l.globals.yLogRatio[i.yAxisIndex]:(o-l.globals.minYArr[i.yAxisIndex])/(l.globals.yRange[i.yAxisIndex]/l.globals.gridHeight),n=l.globals.gridHeight-g,!i.marker||null!=i.y||(n=0),l.config.yaxis[i.yAxisIndex]&&l.config.yaxis[i.yAxisIndex].reversed&&(n=g)}return n}},{key:"getX1X2",value:function(t,i){var n=this.w,o=this.annoCtx.invertAxis?n.globals.minY:n.globals.minX,l=this.annoCtx.invertAxis?n.globals.maxY:n.globals.maxX,u=this.annoCtx.invertAxis?n.globals.yRange[0]:n.globals.xRange,h=(i.x-o)/(u/n.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(h=(l-i.x)/(u/n.globals.gridWidth)),"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||n.globals.dataFormatXNumeric||(h=this.getStringX(i.x));var g=(i.x2-o)/(u/n.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(g=(l-i.x2)/(u/n.globals.gridWidth)),"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||n.globals.dataFormatXNumeric||(g=this.getStringX(i.x2)),null!=i.x||!i.marker||(h=n.globals.gridWidth),"x1"===t?h:g}},{key:"getStringX",value:function(t){var i=this.w,n=t;i.config.xaxis.convertedCatToNumeric&&i.globals.categoryLabels.length&&(t=i.globals.categoryLabels.indexOf(t)+1);var o=i.globals.labels.indexOf(t),l=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(o+1)+")");return l&&(n=parseFloat(l.getAttribute("x"))),n}}]),M}(),Le=function(){function M(t){re(this,M),this.w=t.w,this.annoCtx=t,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new Pe(this.annoCtx)}return ne(M,[{key:"addXaxisAnnotation",value:function(t,i,n){var o,l=this.w,u=this.helpers.getX1X2("x1",t),h=t.label.text,g=t.strokeDashArray;if(Y.isNumber(u)){if(null==t.x2){var f=this.annoCtx.graphics.drawLine(u+t.offsetX,0+t.offsetY,u+t.offsetX,l.globals.gridHeight+t.offsetY,t.borderColor,g,t.borderWidth);i.appendChild(f.node),t.id&&f.node.classList.add(t.id)}else{if((o=this.helpers.getX1X2("x2",t))<u){var x=u;u=o,o=x}var y=this.annoCtx.graphics.drawRect(u+t.offsetX,0+t.offsetY,o-u,l.globals.gridHeight+t.offsetY,0,t.fillColor,t.opacity,1,t.borderColor,g);y.node.classList.add("apexcharts-annotation-rect"),y.attr("clip-path","url(#gridRectMask".concat(l.globals.cuid,")")),i.appendChild(y.node),t.id&&y.node.classList.add(t.id)}var w="top"===t.label.position?4:l.globals.gridHeight,C=this.annoCtx.graphics.getTextRects(h,parseFloat(t.label.style.fontSize)),E=this.annoCtx.graphics.drawText({x:u+t.label.offsetX,y:w+t.label.offsetY-("vertical"===t.label.orientation?"top"===t.label.position?C.width/2-12:-C.width/2:0),text:h,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});E.attr({rel:n}),i.appendChild(E.node),this.annoCtx.helpers.setOrientations(t,n)}}},{key:"drawXAxisAnnotations",value:function(){var t=this,i=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return i.config.annotations.xaxis.map(function(o,l){t.addXaxisAnnotation(o,n.node,l)}),n}}]),M}(),Be=function(){function M(t){re(this,M),this.w=t.w,this.annoCtx=t,this.helpers=new Pe(this.annoCtx)}return ne(M,[{key:"addYaxisAnnotation",value:function(t,i,n){var o,l=this.w,u=t.strokeDashArray,h=this.helpers.getY1Y2("y1",t),g=t.label.text;if(null==t.y2){var f=this.annoCtx.graphics.drawLine(0+t.offsetX,h+t.offsetY,this._getYAxisAnnotationWidth(t),h+t.offsetY,t.borderColor,u,t.borderWidth);i.appendChild(f.node),t.id&&f.node.classList.add(t.id)}else{if((o=this.helpers.getY1Y2("y2",t))>h){var x=h;h=o,o=x}var y=this.annoCtx.graphics.drawRect(0+t.offsetX,o+t.offsetY,this._getYAxisAnnotationWidth(t),h-o,0,t.fillColor,t.opacity,1,t.borderColor,u);y.node.classList.add("apexcharts-annotation-rect"),y.attr("clip-path","url(#gridRectMask".concat(l.globals.cuid,")")),i.appendChild(y.node),t.id&&y.node.classList.add(t.id)}var C=this.annoCtx.graphics.drawText({x:("right"===t.label.position?l.globals.gridWidth:0)+t.label.offsetX,y:(o??h)+t.label.offsetY-3,text:g,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});C.attr({rel:n}),i.appendChild(C.node)}},{key:"_getYAxisAnnotationWidth",value:function(t){var i=this.w;return(t.width.indexOf("%")>-1?i.globals.gridWidth*parseInt(t.width,10)/100:parseInt(t.width,10))+t.offsetX}},{key:"drawYAxisAnnotations",value:function(){var t=this,i=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return i.config.annotations.yaxis.map(function(o,l){t.addYaxisAnnotation(o,n.node,l)}),n}}]),M}(),ze=function(){function M(t){re(this,M),this.w=t.w,this.annoCtx=t,this.helpers=new Pe(this.annoCtx)}return ne(M,[{key:"addPointAnnotation",value:function(t,i,n){var o=this.helpers.getX1X2("x1",t),l=this.helpers.getY1Y2("y1",t);if(Y.isNumber(o)){var u={pSize:t.marker.size,pointStrokeWidth:t.marker.strokeWidth,pointFillColor:t.marker.fillColor,pointStrokeColor:t.marker.strokeColor,shape:t.marker.shape,pRadius:t.marker.radius,class:"apexcharts-point-annotation-marker ".concat(t.marker.cssClass," ").concat(t.id?t.id:"")},h=this.annoCtx.graphics.drawMarker(o+t.marker.offsetX,l+t.marker.offsetY,u);i.appendChild(h.node);var g=t.label.text?t.label.text:"",f=this.annoCtx.graphics.drawText({x:o+t.label.offsetX,y:l+t.label.offsetY-t.marker.size-parseFloat(t.label.style.fontSize)/1.6,text:g,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});if(f.attr({rel:n}),i.appendChild(f.node),t.customSVG.SVG){var x=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+t.customSVG.cssClass});x.attr({transform:"translate(".concat(o+t.customSVG.offsetX,", ").concat(l+t.customSVG.offsetY,")")}),x.node.innerHTML=t.customSVG.SVG,i.appendChild(x.node)}if(t.image.path){var y=t.image.width?t.image.width:20,w=t.image.height?t.image.height:20;h=this.annoCtx.addImage({x:o+t.image.offsetX-y/2,y:l+t.image.offsetY-w/2,width:y,height:w,path:t.image.path,appendTo:".apexcharts-point-annotations"})}t.mouseEnter&&h.node.addEventListener("mouseenter",t.mouseEnter.bind(this,t)),t.mouseLeave&&h.node.addEventListener("mouseleave",t.mouseLeave.bind(this,t)),t.click&&h.node.addEventListener("click",t.click.bind(this,t))}}},{key:"drawPointAnnotations",value:function(){var t=this,i=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return i.config.annotations.points.map(function(o,l){t.addPointAnnotation(o,n.node,l)}),n}}]),M}(),Ue={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},fe=function(){function M(){re(this,M),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return ne(M,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[Ue],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(t){return new Date(t).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(t){return t}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(t){return t+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(i,n){return i+n},0)/t.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(t){return t}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(t){return t}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(i,n){return i+n},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(t){return null!==t?t:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(t){return t?t+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),M}(),we=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w,this.graphics=new j(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Pe(this),this.xAxisAnnotations=new Le(this),this.yAxisAnnotations=new Be(this),this.pointsAnnotations=new ze(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return ne(M,[{key:"drawAxesAnnotations",value:function(){var t=this.w;if(t.globals.axisCharts){for(var i=this.yAxisAnnotations.drawYAxisAnnotations(),n=this.xAxisAnnotations.drawXAxisAnnotations(),o=this.pointsAnnotations.drawPointAnnotations(),l=t.config.chart.animations.enabled,u=[i,n,o],h=[n.node,i.node,o.node],g=0;g<3;g++)t.globals.dom.elGraphical.add(u[g]),!l||t.globals.resized||t.globals.dataChanged||"scatter"!==t.config.chart.type&&"bubble"!==t.config.chart.type&&t.globals.dataPoints>1&&h[g].classList.add("apexcharts-element-hidden"),t.globals.delayedElements.push({el:h[g],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var t=this;this.w.config.annotations.images.map(function(i,n){t.addImage(i,n)})}},{key:"drawTextAnnos",value:function(){var t=this;this.w.config.annotations.texts.map(function(i,n){t.addText(i,n)})}},{key:"addXaxisAnnotation",value:function(t,i,n){this.xAxisAnnotations.addXaxisAnnotation(t,i,n)}},{key:"addYaxisAnnotation",value:function(t,i,n){this.yAxisAnnotations.addYaxisAnnotation(t,i,n)}},{key:"addPointAnnotation",value:function(t,i,n){this.pointsAnnotations.addPointAnnotation(t,i,n)}},{key:"addText",value:function(t,i){var l=t.text,w=t.backgroundColor,C=t.borderWidth,E=t.strokeDashArray,k=t.borderRadius,I=t.borderColor,P=t.appendTo,O=void 0===P?".apexcharts-annotations":P,D=t.paddingLeft,p=void 0===D?4:D,_=t.paddingRight,T=void 0===_?4:_,L=t.paddingBottom,z=void 0===L?2:L,K=t.paddingTop,W=void 0===K?2:K,ee=this.w,Q=this.graphics.drawText({x:t.x,y:t.y,text:l,textAnchor:t.textAnchor||"start",fontSize:t.fontSize||"12px",fontWeight:t.fontWeight||"regular",fontFamily:t.fontFamily||ee.config.chart.fontFamily,foreColor:t.foreColor||ee.config.chart.foreColor,cssClass:t.cssClass}),ie=ee.globals.dom.baseEl.querySelector(O);ie&&ie.appendChild(Q.node);var he=Q.bbox();if(l){var He=this.graphics.drawRect(he.x-p,he.y-W,he.width+p+T,he.height+z+W,k,w||"transparent",1,C,I,E);ie.insertBefore(He.node,Q.node)}}},{key:"addImage",value:function(t,i){var n=this.w,l=t.x,u=void 0===l?0:l,h=t.y,g=void 0===h?0:h,f=t.width,x=void 0===f?20:f,y=t.height,w=void 0===y?20:y,C=t.appendTo,E=void 0===C?".apexcharts-annotations":C,k=n.globals.dom.Paper.image(t.path);k.size(x,w).move(u,g);var I=n.globals.dom.baseEl.querySelector(E);return I&&I.appendChild(k.node),k}},{key:"addXaxisAnnotationExternal",value:function(t,i,n){return this.addAnnotationExternal({params:t,pushToMemory:i,context:n,type:"xaxis",contextMethod:n.addXaxisAnnotation}),n}},{key:"addYaxisAnnotationExternal",value:function(t,i,n){return this.addAnnotationExternal({params:t,pushToMemory:i,context:n,type:"yaxis",contextMethod:n.addYaxisAnnotation}),n}},{key:"addPointAnnotationExternal",value:function(t,i,n){return void 0===this.invertAxis&&(this.invertAxis=n.w.globals.isBarHorizontal),this.addAnnotationExternal({params:t,pushToMemory:i,context:n,type:"point",contextMethod:n.addPointAnnotation}),n}},{key:"addAnnotationExternal",value:function(t){var i=t.params,n=t.pushToMemory,o=t.context,l=t.type,u=t.contextMethod,h=o,g=h.w,f=g.globals.dom.baseEl.querySelector(".apexcharts-".concat(l,"-annotations")),x=f.childNodes.length+1,y=new fe,w=Object.assign({},"xaxis"===l?y.xAxisAnnotation:"yaxis"===l?y.yAxisAnnotation:y.pointAnnotation),C=Y.extend(w,i);switch(l){case"xaxis":this.addXaxisAnnotation(C,f,x);break;case"yaxis":this.addYaxisAnnotation(C,f,x);break;case"point":this.addPointAnnotation(C,f,x)}var E=g.globals.dom.baseEl.querySelector(".apexcharts-".concat(l,"-annotations .apexcharts-").concat(l,"-annotation-label[rel='").concat(x,"']")),k=this.helpers.addBackgroundToAnno(E,C);return k&&f.insertBefore(k.node,E),n&&g.globals.memory.methodsToExec.push({context:h,id:C.id?C.id:Y.randomId(),method:u,label:"addAnnotation",params:i}),o}},{key:"clearAnnotations",value:function(t){var i=t.w,n=i.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");i.globals.memory.methodsToExec.map(function(o,l){"addText"!==o.label&&"addAnnotation"!==o.label||i.globals.memory.methodsToExec.splice(l,1)}),n=Y.listToArray(n),Array.prototype.forEach.call(n,function(o){for(;o.firstChild;)o.removeChild(o.firstChild)})}},{key:"removeAnnotation",value:function(t,i){var n=t.w,o=n.globals.dom.baseEl.querySelectorAll(".".concat(i));o&&(n.globals.memory.methodsToExec.map(function(l,u){l.id===i&&n.globals.memory.methodsToExec.splice(u,1)}),Array.prototype.forEach.call(o,function(l){l.parentElement.removeChild(l)}))}}]),M}(),Qe=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w,this.opts=null,this.seriesIndex=0}return ne(M,[{key:"clippedImgArea",value:function(t){var i=this.w,n=i.config,o=parseInt(i.globals.gridWidth,10),l=parseInt(i.globals.gridHeight,10),u=o>l?o:l,h=t.image,g=0,f=0;void 0===t.width&&void 0===t.height?void 0!==n.fill.image.width&&void 0!==n.fill.image.height?(g=n.fill.image.width+1,f=n.fill.image.height):(g=u+1,f=u):(g=t.width,f=t.height);var x=document.createElementNS(i.globals.SVGNS,"pattern");j.setAttrs(x,{id:t.patternID,patternUnits:t.patternUnits?t.patternUnits:"userSpaceOnUse",width:g+"px",height:f+"px"});var y=document.createElementNS(i.globals.SVGNS,"image");x.appendChild(y),y.setAttributeNS(window.SVG.xlink,"href",h),j.setAttrs(y,{x:0,y:0,preserveAspectRatio:"none",width:g+"px",height:f+"px"}),y.style.opacity=t.opacity,i.globals.dom.elDefs.node.appendChild(x)}},{key:"getSeriesIndex",value:function(t){var i=this.w;return this.seriesIndex=("bar"===i.config.chart.type||"rangeBar"===i.config.chart.type)&&i.config.plotOptions.bar.distributed||"heatmap"===i.config.chart.type||"treemap"===i.config.chart.type?t.seriesNumber:t.seriesNumber%i.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(t){var i=this.w;this.opts=t;var n,o,l,u=this.w.config;this.seriesIndex=this.getSeriesIndex(t);var h=this.getFillColors()[this.seriesIndex];void 0!==i.globals.seriesColors[this.seriesIndex]&&(h=i.globals.seriesColors[this.seriesIndex]),"function"==typeof h&&(h=h({seriesIndex:this.seriesIndex,dataPointIndex:t.dataPointIndex,value:t.value,w:i}));var g=this.getFillType(this.seriesIndex),f=Array.isArray(u.fill.opacity)?u.fill.opacity[this.seriesIndex]:u.fill.opacity;t.color&&(h=t.color);var x=h;if(-1===h.indexOf("rgb")?h.length<9&&(x=Y.hexToRgba(h,f)):h.indexOf("rgba")>-1&&(f=Y.getOpacityFromRGBA(h)),t.opacity&&(f=t.opacity),"pattern"===g&&(o=this.handlePatternFill(o,h,f,x)),"gradient"===g&&(l=this.handleGradientFill(h,f,this.seriesIndex)),"image"===g){var y=u.fill.image.src,w=t.patternID?t.patternID:"";this.clippedImgArea({opacity:f,image:Array.isArray(y)?t.seriesNumber<y.length?y[t.seriesNumber]:y[0]:y,width:t.width?t.width:void 0,height:t.height?t.height:void 0,patternUnits:t.patternUnits,patternID:"pattern".concat(i.globals.cuid).concat(t.seriesNumber+1).concat(w)}),n="url(#pattern".concat(i.globals.cuid).concat(t.seriesNumber+1).concat(w,")")}else n="gradient"===g?l:"pattern"===g?o:x;return t.solid&&(n=x),n}},{key:"getFillType",value:function(t){var i=this.w;return Array.isArray(i.config.fill.type)?i.config.fill.type[t]:i.config.fill.type}},{key:"getFillColors",value:function(){var t=this.w,i=t.config,n=this.opts,o=[];return t.globals.comboCharts?"line"===t.config.series[this.seriesIndex].type?Array.isArray(t.globals.stroke.colors)?o=t.globals.stroke.colors:o.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?o=t.globals.fill.colors:o.push(t.globals.fill.colors):"line"===i.chart.type?Array.isArray(t.globals.stroke.colors)?o=t.globals.stroke.colors:o.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?o=t.globals.fill.colors:o.push(t.globals.fill.colors),void 0!==n.fillColors&&(o=[],Array.isArray(n.fillColors)?o=n.fillColors.slice():o.push(n.fillColors)),o}},{key:"handlePatternFill",value:function(t,i,n,o){var l=this.w.config,u=this.opts,h=new j(this.ctx),g=void 0===l.fill.pattern.strokeWidth?Array.isArray(l.stroke.width)?l.stroke.width[this.seriesIndex]:l.stroke.width:Array.isArray(l.fill.pattern.strokeWidth)?l.fill.pattern.strokeWidth[this.seriesIndex]:l.fill.pattern.strokeWidth,f=i;return Array.isArray(l.fill.pattern.style)?void 0!==l.fill.pattern.style[u.seriesNumber]?h.drawPattern(l.fill.pattern.style[u.seriesNumber],l.fill.pattern.width,l.fill.pattern.height,f,g,n):o:h.drawPattern(l.fill.pattern.style,l.fill.pattern.width,l.fill.pattern.height,f,g,n)}},{key:"handleGradientFill",value:function(t,i,n){var o,l=this.w.config,u=this.opts,h=new j(this.ctx),g=new Y,f=l.fill.gradient.type,x=t,y=void 0===l.fill.gradient.opacityFrom?i:Array.isArray(l.fill.gradient.opacityFrom)?l.fill.gradient.opacityFrom[n]:l.fill.gradient.opacityFrom;x.indexOf("rgba")>-1&&(y=Y.getOpacityFromRGBA(x));var w=void 0===l.fill.gradient.opacityTo?i:Array.isArray(l.fill.gradient.opacityTo)?l.fill.gradient.opacityTo[n]:l.fill.gradient.opacityTo;if(void 0===l.fill.gradient.gradientToColors||0===l.fill.gradient.gradientToColors.length)o=g.shadeColor("dark"===l.fill.gradient.shade?-1*parseFloat(l.fill.gradient.shadeIntensity):parseFloat(l.fill.gradient.shadeIntensity),t.indexOf("rgb")>-1?Y.rgb2hex(t):t);else if(l.fill.gradient.gradientToColors[u.seriesNumber]){var C=l.fill.gradient.gradientToColors[u.seriesNumber];o=C,C.indexOf("rgba")>-1&&(w=Y.getOpacityFromRGBA(C))}else o=t;if(l.fill.gradient.inverseColors){var E=x;x=o,o=E}return x.indexOf("rgb")>-1&&(x=Y.rgb2hex(x)),o.indexOf("rgb")>-1&&(o=Y.rgb2hex(o)),h.drawGradient(f,x,o,y,w,u.size,l.fill.gradient.stops,l.fill.gradient.colorStops,n)}}]),M}(),Ie=function(){function M(t,i){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"setGlobalMarkerSize",value:function(){var t=this.w;if(t.globals.markers.size=Array.isArray(t.config.markers.size)?t.config.markers.size:[t.config.markers.size],t.globals.markers.size.length>0){if(t.globals.markers.size.length<t.globals.series.length+1)for(var i=0;i<=t.globals.series.length;i++)void 0===t.globals.markers.size[i]&&t.globals.markers.size.push(t.globals.markers.size[0])}else t.globals.markers.size=t.config.series.map(function(n){return t.config.markers.size})}},{key:"plotChartMarkers",value:function(t,i,n,o){var l,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],h=this.w,g=i,f=t,x=null,y=new j(this.ctx),w=h.config.markers.discrete&&h.config.markers.discrete.length;if((h.globals.markers.size[i]>0||u||w)&&(x=y.group({class:u||w?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(h.globals.cuid,")")),Array.isArray(f.x))for(var C=0;C<f.x.length;C++){var E=n;1===n&&0===C&&(E=0),1===n&&1===C&&(E=1);var k="apexcharts-marker";"line"!==h.config.chart.type&&"area"!==h.config.chart.type||h.globals.comboCharts||h.config.tooltip.intersect||(k+=" no-pointer-events");var I=Array.isArray(h.config.markers.size)?h.globals.markers.size[i]>0:h.config.markers.size>0;if(I||u||w){Y.isNumber(f.y[C])?k+=" w".concat(Y.randomId()):k="apexcharts-nullpoint";var P=this.getMarkerConfig({cssClass:k,seriesIndex:i,dataPointIndex:E});h.config.series[g].data[E]&&(h.config.series[g].data[E].fillColor&&(P.pointFillColor=h.config.series[g].data[E].fillColor),h.config.series[g].data[E].strokeColor&&(P.pointStrokeColor=h.config.series[g].data[E].strokeColor)),o&&(P.pSize=o),(l=y.drawMarker(f.x[C],f.y[C],P)).attr("rel",E),l.attr("j",E),l.attr("index",i),l.node.setAttribute("default-marker-size",P.pSize);var O=new oe(this.ctx);O.setSelectionFilter(l,i,E),this.addEvents(l),x&&x.add(l)}else void 0===h.globals.pointsArray[i]&&(h.globals.pointsArray[i]=[]),h.globals.pointsArray[i].push([f.x[C],f.y[C]])}return x}},{key:"getMarkerConfig",value:function(t){var i=t.cssClass,n=t.seriesIndex,o=t.dataPointIndex,l=void 0===o?null:o,u=t.finishRadius,h=void 0===u?null:u,g=this.w,f=this.getMarkerStyle(n),x=g.globals.markers.size[n],y=g.config.markers;return null!==l&&y.discrete.length&&y.discrete.map(function(w){w.seriesIndex===n&&w.dataPointIndex===l&&(f.pointStrokeColor=w.strokeColor,f.pointFillColor=w.fillColor,x=w.size,f.pointShape=w.shape)}),{pSize:null===h?x:h,pRadius:y.radius,width:Array.isArray(y.width)?y.width[n]:y.width,height:Array.isArray(y.height)?y.height[n]:y.height,pointStrokeWidth:Array.isArray(y.strokeWidth)?y.strokeWidth[n]:y.strokeWidth,pointStrokeColor:f.pointStrokeColor,pointFillColor:f.pointFillColor,shape:f.pointShape||(Array.isArray(y.shape)?y.shape[n]:y.shape),class:i,pointStrokeOpacity:Array.isArray(y.strokeOpacity)?y.strokeOpacity[n]:y.strokeOpacity,pointStrokeDashArray:Array.isArray(y.strokeDashArray)?y.strokeDashArray[n]:y.strokeDashArray,pointFillOpacity:Array.isArray(y.fillOpacity)?y.fillOpacity[n]:y.fillOpacity,seriesIndex:n}}},{key:"addEvents",value:function(t){var i=this.w,n=new j(this.ctx);t.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this.ctx,t)),t.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this.ctx,t)),t.node.addEventListener("mousedown",n.pathMouseDown.bind(this.ctx,t)),t.node.addEventListener("click",i.config.markers.onClick),t.node.addEventListener("dblclick",i.config.markers.onDblClick),t.node.addEventListener("touchstart",n.pathMouseDown.bind(this.ctx,t),{passive:!0})}},{key:"getMarkerStyle",value:function(t){var i=this.w,n=i.globals.markers.colors,o=i.config.markers.strokeColor||i.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(o)?o[t]:o,pointFillColor:Array.isArray(n)?n[t]:n}}}]),M}(),ri=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return ne(M,[{key:"draw",value:function(t,i,n){var o=this.w,l=new j(this.ctx),u=n.realIndex,h=n.pointsPos,g=n.zRatio,f=n.elParent,x=l.group({class:"apexcharts-series-markers apexcharts-series-".concat(o.config.chart.type)});if(x.attr("clip-path","url(#gridRectMarkerMask".concat(o.globals.cuid,")")),Array.isArray(h.x))for(var y=0;y<h.x.length;y++){var w=i+1,C=!0;0===i&&0===y&&(w=0),0===i&&1===y&&(w=1);var E=0,k=o.globals.markers.size[u];if(g!==1/0){k=o.globals.seriesZ[u][w]/g;var I=o.config.plotOptions.bubble;I.minBubbleRadius&&k<I.minBubbleRadius&&(k=I.minBubbleRadius),I.maxBubbleRadius&&k>I.maxBubbleRadius&&(k=I.maxBubbleRadius)}o.config.chart.animations.enabled||(E=k);var O=h.y[y];if(E=E||0,null!==O&&void 0!==o.globals.series[u][w]||(C=!1),C){var D=this.drawPoint(h.x[y],O,E,k,u,w,i);x.add(D)}f.add(x)}}},{key:"drawPoint",value:function(t,i,n,o,l,u,h){var g=this.w,f=l,x=new le(this.ctx),y=new oe(this.ctx),w=new Qe(this.ctx),C=new Ie(this.ctx),E=new j(this.ctx),k=C.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:f,dataPointIndex:u,finishRadius:"bubble"===g.config.chart.type||g.globals.comboCharts&&g.config.series[l]&&"bubble"===g.config.series[l].type?o:null});o=k.pSize;var I,P=w.fillPath({seriesNumber:l,dataPointIndex:u,color:k.pointFillColor,patternUnits:"objectBoundingBox",value:g.globals.series[l][h]});if("circle"===k.shape?I=E.drawCircle(n):"square"!==k.shape&&"rect"!==k.shape||(I=E.drawRect(0,0,k.width-k.pointStrokeWidth/2,k.height-k.pointStrokeWidth/2,k.pRadius)),g.config.series[f].data[u]&&g.config.series[f].data[u].fillColor&&(P=g.config.series[f].data[u].fillColor),I.attr({x:t-k.width/2-k.pointStrokeWidth/2,y:i-k.height/2-k.pointStrokeWidth/2,cx:t,cy:i,fill:P,"fill-opacity":k.pointFillOpacity,stroke:k.pointStrokeColor,r:o,"stroke-width":k.pointStrokeWidth,"stroke-dasharray":k.pointStrokeDashArray,"stroke-opacity":k.pointStrokeOpacity}),g.config.chart.dropShadow.enabled&&y.dropShadow(I,g.config.chart.dropShadow,l),!this.initialAnim||g.globals.dataChanged||g.globals.resized?g.globals.animationEnded=!0:x.animateMarker(I,0,"circle"===k.shape?o:{width:k.width,height:k.height},g.config.chart.animations.speed,g.globals.easing,function(){window.setTimeout(function(){x.animationCompleted(I)},100)}),g.globals.dataChanged&&"circle"===k.shape)if(this.dynamicAnim){var p,_,T,L,z=g.config.chart.animations.dynamicAnimation.speed;null!=(L=g.globals.previousPaths[l]&&g.globals.previousPaths[l][h])&&(p=L.x,_=L.y,T=void 0!==L.r?L.r:o);for(var K=0;K<g.globals.collapsedSeries.length;K++)g.globals.collapsedSeries[K].index===l&&(z=1,o=0);0===t&&0===i&&(o=0),x.animateCircle(I,{cx:p,cy:_,r:T},{cx:t,cy:i,r:o},z,g.globals.easing)}else I.attr({r:o});return I.attr({rel:u,j:u,index:l,"default-marker-size":o}),y.setSelectionFilter(I,l,u),C.addEvents(I),I.node.classList.add("apexcharts-marker"),I}},{key:"centerTextInBubble",value:function(t){return{y:t+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),M}(),It=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"dataLabelsCorrection",value:function(t,i,n,o,l,u,h){var g=this.w,f=!1,x=new j(this.ctx).getTextRects(n,h),y=x.width,w=x.height;if(i<0&&(i=0),i>g.globals.gridHeight+w&&(i=g.globals.gridHeight+w/2),void 0===g.globals.dataLabelsRects[o]&&(g.globals.dataLabelsRects[o]=[]),g.globals.dataLabelsRects[o].push({x:t,y:i,width:y,height:w}),void 0!==g.globals.dataLabelsRects[o][g.globals.dataLabelsRects[o].length-2]){var k=g.globals.dataLabelsRects[o][void 0!==g.globals.lastDrawnDataLabelsIndexes[o]?g.globals.lastDrawnDataLabelsIndexes[o][g.globals.lastDrawnDataLabelsIndexes[o].length-1]:0];(t>k.x+k.width+2||i>k.y+k.height+2||t+y<k.x)&&(f=!0)}return(0===l||u)&&(f=!0),{x:t,y:i,textRects:x,drawnextLabel:f}}},{key:"drawDataLabel",value:function(t,i,n){var o=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,u=this.w,h=new j(this.ctx),g=u.config.dataLabels,f=0,x=0,y=n,w=null;if(!g.enabled||!Array.isArray(t.x))return w;w=h.group({class:"apexcharts-data-labels"});for(var C=0;C<t.x.length;C++)if(f=t.x[C]+g.offsetX,x=t.y[C]+g.offsetY+l,!isNaN(f)){1===n&&0===C&&(y=0),1===n&&1===C&&(y=1);var E=u.globals.series[i][y],k="",I=function(D){return u.config.dataLabels.formatter(D,{ctx:o.ctx,seriesIndex:i,dataPointIndex:y,w:u})};if("bubble"===u.config.chart.type){k=I(E=u.globals.seriesZ[i][y]),x=t.y[C];var P=new ri(this.ctx),O=P.centerTextInBubble(x,i,y);x=O.y}else void 0!==E&&(k=I(E));this.plotDataLabelsText({x:f,y:x,text:k,i,j:y,parent:w,offsetCorrection:!0,dataLabelsConfig:u.config.dataLabels})}return w}},{key:"plotDataLabelsText",value:function(t){var i=this.w,n=new j(this.ctx),o=t.x,l=t.y,u=t.i,h=t.j,g=t.text,f=t.textAnchor,x=t.fontSize,y=t.parent,w=t.dataLabelsConfig,C=t.color,E=t.alwaysDrawDataLabel,k=t.offsetCorrection;if(!(Array.isArray(i.config.dataLabels.enabledOnSeries)&&i.config.dataLabels.enabledOnSeries.indexOf(u)<0)){var I={x:o,y:l,drawnextLabel:!0,textRects:null};k&&(I=this.dataLabelsCorrection(o,l,g,u,h,E,parseInt(w.style.fontSize,10))),i.globals.zoomed||(o=I.x,l=I.y),I.textRects&&(o<-10-I.textRects.width||o>i.globals.gridWidth+I.textRects.width+10)&&(g="");var P=i.globals.dataLabels.style.colors[u];(("bar"===i.config.chart.type||"rangeBar"===i.config.chart.type)&&i.config.plotOptions.bar.distributed||i.config.dataLabels.distributed)&&(P=i.globals.dataLabels.style.colors[h]),"function"==typeof P&&(P=P({series:i.globals.series,seriesIndex:u,dataPointIndex:h,w:i})),C&&(P=C);var O=w.offsetX,D=w.offsetY;if("bar"!==i.config.chart.type&&"rangeBar"!==i.config.chart.type||(O=0,D=0),I.drawnextLabel){var p=n.drawText({width:100,height:parseInt(w.style.fontSize,10),x:o+O,y:l+D,foreColor:P,textAnchor:f||w.textAnchor,text:g,fontSize:x||w.style.fontSize,fontFamily:w.style.fontFamily,fontWeight:w.style.fontWeight||"normal"});if(p.attr({class:"apexcharts-datalabel",cx:o,cy:l}),w.dropShadow.enabled){var _=w.dropShadow;new oe(this.ctx).dropShadow(p,_)}y.add(p),void 0===i.globals.lastDrawnDataLabelsIndexes[u]&&(i.globals.lastDrawnDataLabelsIndexes[u]=[]),i.globals.lastDrawnDataLabelsIndexes[u].push(h)}}}},{key:"addBackgroundToDataLabel",value:function(t,i){var n=this.w,o=n.config.dataLabels.background,l=o.padding,u=o.padding/2,h=i.width,g=i.height,f=new j(this.ctx).drawRect(i.x-l,i.y-u/2,h+2*l,g+u,o.borderRadius,"transparent"===n.config.chart.background?"#fff":n.config.chart.background,o.opacity,o.borderWidth,o.borderColor);return o.dropShadow.enabled&&new oe(this.ctx).dropShadow(f,o.dropShadow),f}},{key:"dataLabelsBackground",value:function(){var t=this.w;if("bubble"!==t.config.chart.type)for(var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),n=0;n<i.length;n++){var o=i[n],l=o.getBBox(),u=null;if(l.width&&l.height&&(u=this.addBackgroundToDataLabel(o,l)),u){o.parentNode.insertBefore(u.node,o);var h=o.getAttribute("fill");!t.config.chart.animations.enabled||t.globals.resized||t.globals.dataChanged?u.attr({fill:h}):u.animate().attr({fill:h}),o.setAttribute("fill",t.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var t=this.w,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),n=t.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),o=0;o<i.length;o++)n&&n.insertBefore(i[o],n.nextSibling)}}]),M}(),Ut=function(){function M(t){re(this,M),this.w=t.w,this.barCtx=t}return ne(M,[{key:"handleBarDataLabels",value:function(t){var i=t.x,n=t.y,o=t.y1,l=t.y2,u=t.i,h=t.j,g=t.realIndex,f=t.series,x=t.barHeight,y=t.barWidth,w=t.barYPosition,C=t.visibleSeries,E=t.renderedPath,k=this.w,I=new j(this.barCtx.ctx),P=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[g]:this.barCtx.strokeWidth,O=i+parseFloat(y*C),D=n+parseFloat(x*C);k.globals.isXNumeric&&!k.globals.isBarHorizontal&&(O=i+parseFloat(y*(C+1)),D=n+parseFloat(x*(C+1))-P);var T,p=i,_=n,L=k.config.dataLabels,z=this.barCtx.barOptions.dataLabels;void 0!==w&&this.barCtx.isRangeBar&&(D=w,_=w);var K=L.offsetX,W=L.offsetY,ee={width:0,height:0};k.config.dataLabels.enabled&&(ee=I.getTextRects(k.globals.yLabelFormatters[0](this.barCtx.series[u][h]),parseFloat(L.style.fontSize)));var ie={x:i,y:n,i:u,j:h,renderedPath:E,bcx:O,bcy:D,barHeight:x,barWidth:y,textRects:ee,strokeWidth:P,dataLabelsX:p,dataLabelsY:_,barDataLabelsConfig:z,offX:K,offY:W};return T=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(ie):this.calculateColumnsDataLabelsPosition(ie),E.attr({cy:T.bcy,cx:T.bcx,j:h,val:f[u][h],barHeight:x,barWidth:y}),this.drawCalculatedDataLabels({x:T.dataLabelsX,y:T.dataLabelsY,val:this.barCtx.isRangeBar?[o,l]:f[u][h],i:g,j:h,barWidth:y,barHeight:x,textRects:ee,dataLabelsConfig:L})}},{key:"calculateColumnsDataLabelsPosition",value:function(t){var i,n=this.w,o=t.i,l=t.j,u=t.y,h=t.bcx,g=t.barWidth,f=t.barHeight,x=t.textRects,y=t.dataLabelsY,w=t.barDataLabelsConfig,C=t.strokeWidth,E=t.offX,k=t.offY;f=Math.abs(f);var I="vertical"===n.config.plotOptions.bar.dataLabels.orientation;h-=C/2,i=n.globals.isXNumeric?h-g/2+E:h-n.globals.gridWidth/n.globals.dataPoints+g/2+E,I&&(i=i+x.height/2-C/2-2);var O=this.barCtx.series[o][l]<0,D=u;switch(this.barCtx.isReversed&&(D=u-f+(O?2*f:0),u-=f),w.position){case"center":y=I?O?D+f/2+k:D+f/2-k:O?D-f/2+x.height/2+k:D+f/2+x.height/2-k;break;case"bottom":y=I?O?D+f+k:D+f-k:O?D-f+x.height+C+k:D+f-x.height/2+C-k;break;case"top":y=I?O?D+k:D-k:O?D-x.height/2-k:D+x.height+k}return n.config.chart.stacked||(y<0?y=0+C:y+x.height/3>n.globals.gridHeight&&(y=n.globals.gridHeight-C)),{bcx:h,bcy:u,dataLabelsX:i,dataLabelsY:y}}},{key:"calculateBarsDataLabelsPosition",value:function(t){var i=this.w,n=t.x,o=t.i,l=t.j,u=t.bcy,h=t.barHeight,g=t.barWidth,f=t.textRects,x=t.dataLabelsX,y=t.strokeWidth,w=t.barDataLabelsConfig,C=t.offX,E=t.offY,k=i.globals.gridHeight/i.globals.dataPoints;g=Math.abs(g);var I=u-(this.barCtx.isRangeBar?0:k)+h/2+f.height/2+E-3,P=this.barCtx.series[o][l]<0,O=n;switch(this.barCtx.isReversed&&(O=n+g-(P?2*g:0),n=i.globals.gridWidth-g),w.position){case"center":x=P?O+g/2-C:Math.max(f.width/2,O-g/2)+C;break;case"bottom":x=P?O+g-y-Math.round(f.width/2)-C:O-g+y+Math.round(f.width/2)+C;break;case"top":x=P?O-y+Math.round(f.width/2)-C:O-y-Math.round(f.width/2)+C}return i.config.chart.stacked||(x<0?x=x+f.width+y:x+f.width/2>i.globals.gridWidth&&(x=i.globals.gridWidth-f.width-y)),{bcx:n,bcy:u,dataLabelsX:x,dataLabelsY:I}}},{key:"drawCalculatedDataLabels",value:function(t){var i=t.x,n=t.y,o=t.val,l=t.i,u=t.j,h=t.textRects,g=t.barHeight,f=t.barWidth,x=t.dataLabelsConfig,y=this.w,w="rotate(0)";"vertical"===y.config.plotOptions.bar.dataLabels.orientation&&(w="rotate(-90, ".concat(i,", ").concat(n,")"));var C=new It(this.barCtx.ctx),E=new j(this.barCtx.ctx),k=x.formatter,I=null,P=y.globals.collapsedSeriesIndices.indexOf(l)>-1;if(x.enabled&&!P){I=E.group({class:"apexcharts-data-labels",transform:w});var O="";void 0!==o&&(O=k(o,{seriesIndex:l,dataPointIndex:u,w:y}));var D=y.globals.series[l][u]<0,p=y.config.plotOptions.bar.dataLabels.position;"vertical"===y.config.plotOptions.bar.dataLabels.orientation&&("top"===p&&(x.textAnchor=D?"end":"start"),"center"===p&&(x.textAnchor="middle"),"bottom"===p&&(x.textAnchor=D?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&f<E.getTextRects(O,parseFloat(x.style.fontSize)).width&&(O=""),y.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?h.width/1.6>Math.abs(f)&&(O=""):h.height/1.6>Math.abs(g)&&(O=""));var _=Ce({},x);this.barCtx.isHorizontal&&o<0&&("start"===x.textAnchor?_.textAnchor="end":"end"===x.textAnchor&&(_.textAnchor="start")),C.plotDataLabelsText({x:i,y:n,text:O,i:l,j:u,parent:I,dataLabelsConfig:_,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return I}}]),M}(),pe=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w,this.legendInactiveClass="legend-mouseover-inactive"}return ne(M,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(t){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(Y.escapeString(t),"']"))}},{key:"isSeriesHidden",value:function(t){var i=this.getSeriesByName(t),n=parseInt(i.getAttribute("data:realIndex"),10);return{isHidden:i.classList.contains("apexcharts-series-collapsed"),realIndex:n}}},{key:"addCollapsedClassToSeries",value:function(t,i){var n=this.w;function o(l){for(var u=0;u<l.length;u++)l[u].index===i&&t.node.classList.add("apexcharts-series-collapsed")}o(n.globals.collapsedSeries),o(n.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(t){var i=this.isSeriesHidden(t);return this.ctx.legend.legendHelpers.toggleDataSeries(i.realIndex,i.isHidden),i.isHidden}},{key:"showSeries",value:function(t){var i=this.isSeriesHidden(t);i.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(i.realIndex,!0)}},{key:"hideSeries",value:function(t){var i=this.isSeriesHidden(t);i.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(i.realIndex,!1)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.w,l=Y.clone(o.globals.initialSeries);o.globals.previousPaths=[],n?(o.globals.collapsedSeries=[],o.globals.ancillaryCollapsedSeries=[],o.globals.collapsedSeriesIndices=[],o.globals.ancillaryCollapsedSeriesIndices=[]):l=this.emptyCollapsedSeries(l),o.config.series=l,t&&(i&&(o.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(l,o.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(t){for(var i=this.w,n=0;n<t.length;n++)i.globals.collapsedSeriesIndices.indexOf(n)>-1&&(t[n].data=[]);return t}},{key:"toggleSeriesOnHover",value:function(t,i){var n=this.w;i||(i=t.target);var o=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===t.type){var l=parseInt(i.getAttribute("rel"),10)-1,u=null,h=null;n.globals.axisCharts||"radialBar"===n.config.chart.type?n.globals.axisCharts?(u=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(l,"']")),h=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(l,"']"))):u=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(l+1,"']")):u=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(l+1,"'] path"));for(var g=0;g<o.length;g++)o[g].classList.add(this.legendInactiveClass);null!==u&&(n.globals.axisCharts||u.parentNode.classList.remove(this.legendInactiveClass),u.classList.remove(this.legendInactiveClass),null!==h&&h.classList.remove(this.legendInactiveClass))}else if("mouseout"===t.type)for(var f=0;f<o.length;f++)o[f].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(t,i){var n=this,o=this.w,l=o.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),u=function(g){for(var f=0;f<l.length;f++)l[f].classList[g](n.legendInactiveClass)};if("mousemove"===t.type){var h=parseInt(i.getAttribute("rel"),10)-1;u("add"),function(g){for(var f=0;f<l.length;f++){var x=parseInt(l[f].getAttribute("val"),10);x>=g.from&&x<=g.to&&l[f].classList.remove(n.legendInactiveClass)}}(o.config.plotOptions.heatmap.colorScale.ranges[h])}else"mouseout"===t.type&&u("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=this.w,o=0;if(n.config.series.length>1)for(var l=n.config.series.map(function(h,g){var f=!1;return t&&(f="bar"===n.config.series[g].type||"column"===n.config.series[g].type),h.data&&h.data.length>0&&!f?g:-1}),u="asc"===i?0:l.length-1;"asc"===i?u<l.length:u>=0;"asc"===i?u++:u--)if(-1!==l[u]){o=l[u];break}return o}},{key:"getPreviousPaths",value:function(){var t=this.w;function i(u,h,g){for(var f=u[h].childNodes,x={type:g,paths:[],realIndex:u[h].getAttribute("data:realIndex")},y=0;y<f.length;y++)if(f[y].hasAttribute("pathTo")){var w=f[y].getAttribute("pathTo");x.paths.push({d:w})}t.globals.previousPaths.push(x)}t.globals.previousPaths=[],["line","area","bar","rangebar","candlestick","radar"].forEach(function(u){for(var g=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(u,"-series .apexcharts-series")),f=0;f<g.length;f++)i(g,f,u)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series"));if(n.length>0)for(var o=function(u){for(var h=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(u,"'] rect")),g=[],f=function(y){var w=function(E){return h[y].getAttribute(E)},C={x:parseFloat(w("x")),y:parseFloat(w("y")),width:parseFloat(w("width")),height:parseFloat(w("height"))};g.push({rect:C,color:h[y].getAttribute("color")})},x=0;x<h.length;x++)f(x);t.globals.previousPaths.push(g)},l=0;l<n.length;l++)o(l);t.globals.axisCharts||(t.globals.previousPaths=t.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(t){var i=this.w,n=i.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series"));if(n.length>0)for(var o=0;o<n.length;o++){for(var l=i.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series[data\\:realIndex='").concat(o,"'] circle")),u=[],h=0;h<l.length;h++)u.push({x:l[h].getAttribute("cx"),y:l[h].getAttribute("cy"),r:l[h].getAttribute("r")});i.globals.previousPaths.push(u)}}},{key:"clearPreviousPaths",value:function(){var t=this.w;t.globals.previousPaths=[],t.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var t=this.w,i=t.config.noData,n=new j(this.ctx),o=t.globals.svgWidth/2,l=t.globals.svgHeight/2,u="middle";if(t.globals.noData=!0,t.globals.animationEnded=!0,"left"===i.align?(o=10,u="start"):"right"===i.align&&(o=t.globals.svgWidth-10,u="end"),"top"===i.verticalAlign?l=50:"bottom"===i.verticalAlign&&(l=t.globals.svgHeight-50),o+=i.offsetX,l=l+parseInt(i.style.fontSize,10)+2+i.offsetY,void 0!==i.text&&""!==i.text){var h=n.drawText({x:o,y:l,text:i.text,textAnchor:u,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,foreColor:i.style.color,opacity:1,class:"apexcharts-text-nodata"});t.globals.dom.Paper.add(h)}}},{key:"setNullSeriesToZeroValues",value:function(t){for(var i=this.w,n=0;n<t.length;n++)if(0===t[n].length)for(var o=0;o<t[i.globals.maxValsInArrayIndex].length;o++)t[n].push(0);return t}},{key:"hasAllSeriesEqualX",value:function(){for(var t=!0,i=this.w,n=this.filteredSeriesX(),o=0;o<n.length-1;o++)if(n[o][0]!==n[o+1][0]){t=!1;break}return i.globals.allSeriesHasEqualX=t,t}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(i){return i.length>0?i:[]})}}]),M}(),Ca=function(){function M(t){re(this,M),this.w=t.w,this.barCtx=t}return ne(M,[{key:"initVariables",value:function(t){var i=this.w;this.barCtx.series=t,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var n=0;n<t.length;n++)if(t[n].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=t[n].length),i.globals.isXNumeric)for(var o=0;o<t[n].length;o++)i.globals.seriesX[n][o]>i.globals.minX&&i.globals.seriesX[n][o]<i.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=i.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=t.length-1,i.globals.comboCharts||this.checkZeroSeries({series:t})}},{key:"initialPositions",value:function(){var t,i,n,o,l,u,h,g,f=this.w,x=f.globals.dataPoints;this.barCtx.isRangeBar&&(x=f.globals.labels.length);var y=this.barCtx.seriesLen;if(f.config.plotOptions.bar.rangeBarGroupRows&&(y=1),this.barCtx.isHorizontal)l=(n=f.globals.gridHeight/x)/y,f.globals.isXNumeric&&(l=(n=f.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),l=l*parseInt(this.barCtx.barOptions.barHeight,10)/100,g=this.barCtx.baseLineInvertedY+f.globals.padHorizontal+(this.barCtx.isReversed?f.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),i=(n-l*this.barCtx.seriesLen)/2;else{if(o=f.globals.gridWidth/this.barCtx.visibleItems,f.config.xaxis.convertedCatToNumeric&&(o=f.globals.gridWidth/f.globals.dataPoints),u=o/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,f.globals.isXNumeric){var w=this.barCtx.xRatio;f.config.xaxis.convertedCatToNumeric&&(w=this.barCtx.initialXRatio),f.globals.minXDiff&&.5!==f.globals.minXDiff&&f.globals.minXDiff/w>0&&(o=f.globals.minXDiff/w),(u=o/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(u=1)}h=f.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?f.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),t=f.globals.padHorizontal+(o-u*this.barCtx.seriesLen)/2}return{x:t,y:i,yDivision:n,xDivision:o,barHeight:l,barWidth:u,zeroH:h,zeroW:g}}},{key:"getPathFillColor",value:function(t,i,n,o){var l=this.w,u=new Qe(this.barCtx.ctx),h=null,g=this.barCtx.barOptions.distributed?n:i;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(f){t[i][n]>=f.from&&t[i][n]<=f.to&&(h=f.color)}),l.config.series[i].data[n]&&l.config.series[i].data[n].fillColor&&(h=l.config.series[i].data[n].fillColor),u.fillPath({seriesNumber:this.barCtx.barOptions.distributed?g:o,dataPointIndex:n,color:h,value:t[i][n]})}},{key:"getStrokeWidth",value:function(t,i,n){var o=0,l=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[t][i],l.config.stroke.show&&(this.barCtx.isNullValue||(o=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[n]:this.barCtx.strokeWidth)),o}},{key:"barBackground",value:function(t){var i=t.j,n=t.i,o=t.x1,l=t.x2,u=t.y1,h=t.y2,g=t.elSeries,f=this.w,x=new j(this.barCtx.ctx),y=new pe(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&y===n){i>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(i%=this.barCtx.barOptions.colors.backgroundBarColors.length);var C=x.drawRect(void 0!==o?o:0,void 0!==u?u:0,void 0!==l?l:f.globals.gridWidth,void 0!==h?h:f.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[i],this.barCtx.barOptions.colors.backgroundBarOpacity);g.add(C),C.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(t){var i=t.barWidth,n=t.barXPosition,o=t.yRatio,l=t.y1,u=t.y2,h=t.strokeWidth,g=t.series,f=t.realIndex,x=t.i,y=t.j,w=t.w,C=new j(this.barCtx.ctx);(h=Array.isArray(h)?h[f]:h)||(h=0);var k=this.getRoundedBars(w,{barWidth:i,strokeWidth:h,yRatio:o,barXPosition:n,y1:l,y2:u},g,x,y),I=n,P=n+i,O=C.move(I,l),D=C.move(I,l),p=C.line(P-h,l);return w.globals.previousPaths.length>0&&(D=this.barCtx.getPreviousPath(f,y,!1)),O=O+C.line(I,k.y2)+k.pathWithRadius+C.line(P-h,k.y2)+p+p+"z",D=D+C.line(I,l)+p+p+p+p+p+C.line(I,l),w.config.chart.stacked&&(this.barCtx.yArrj.push(k.y2WithRadius),this.barCtx.yArrjF.push(Math.abs(l-k.y2WithRadius)),this.barCtx.yArrjVal.push(this.barCtx.series[x][y])),{pathTo:O,pathFrom:D}}},{key:"getBarpaths",value:function(t){var i=t.barYPosition,n=t.barHeight,o=t.x1,l=t.x2,u=t.strokeWidth,h=t.series,g=t.realIndex,f=t.i,x=t.j,y=t.w,w=new j(this.barCtx.ctx);(u=Array.isArray(u)?u[g]:u)||(u=0);var E=this.getRoundedBars(y,{barHeight:n,strokeWidth:u,barYPosition:i,x2:l,x1:o},h,f,x),k=w.move(o,i),I=w.move(o,i);y.globals.previousPaths.length>0&&(I=this.barCtx.getPreviousPath(g,x,!1));var P=i,O=i+n,D=w.line(o,O-u);return k=k+w.line(E.x2,P)+E.pathWithRadius+w.line(E.x2,O-u)+D+D+"z",I=I+w.line(o,P)+D+D+D+D+D+w.line(o,P),y.config.chart.stacked&&(this.barCtx.xArrj.push(E.x2WithRadius),this.barCtx.xArrjF.push(Math.abs(o-E.x2WithRadius)),this.barCtx.xArrjVal.push(this.barCtx.series[f][x])),{pathTo:k,pathFrom:I}}},{key:"getRoundedBars",value:function(t,i,n,o,l){var u=new j(this.barCtx.ctx),h=0,g=t.config.plotOptions.bar.borderRadius,f=Array.isArray(g);if(h=f?g[o>g.length-1?g.length-1:o]:g,t.config.chart.stacked&&n.length>1&&o!==this.barCtx.radiusOnSeriesNumber&&!f&&(h=0),this.barCtx.isHorizontal){var x="",y=i.x2;if(Math.abs(i.x1-i.x2)<h&&(h=Math.abs(i.x1-i.x2)),void 0!==n[o][l]||null!==n[o][l]){var w=this.barCtx.isReversed?n[o][l]>0:n[o][l]<0;w&&(h*=-1),x=u.quadraticCurve((y-=h)+h,i.barYPosition,y+h,i.barYPosition+(w?-1*h:h))+u.line(y+h,i.barYPosition+i.barHeight-i.strokeWidth-(w?-1*h:h))+u.quadraticCurve(y+h,i.barYPosition+i.barHeight-i.strokeWidth,y,i.barYPosition+i.barHeight-i.strokeWidth)}return{pathWithRadius:x,x2WithRadius:y+h,x2:y}}var C="",E=i.y2;if(Math.abs(i.y1-i.y2)<h&&(h=Math.abs(i.y1-i.y2)),void 0!==n[o][l]||null!==n[o][l]){var k=n[o][l]<0;k&&(h*=-1),C=u.quadraticCurve(i.barXPosition,(E+=h)-h,i.barXPosition+(k?-1*h:h),E-h)+u.line(i.barXPosition+i.barWidth-i.strokeWidth-(k?-1*h:h),E-h)+u.quadraticCurve(i.barXPosition+i.barWidth-i.strokeWidth,E-h,i.barXPosition+i.barWidth-i.strokeWidth,E)}return{pathWithRadius:C,y2WithRadius:E-h,y2:E}}},{key:"checkZeroSeries",value:function(t){for(var i=t.series,n=this.w,o=0;o<i.length;o++){for(var l=0,u=0;u<i[n.globals.maxValsInArrayIndex].length;u++)l+=i[o][u];0===l&&this.barCtx.zeroSerieses.push(o)}for(var h=i.length-1;h>=0;h--)this.barCtx.zeroSerieses.indexOf(h)>-1&&h===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var g=i.length-1;g>=0;g--)n.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}},{key:"getXForValue",value:function(t,i){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=n?i:null;return null!=t&&(o=i+t/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?t/this.barCtx.invertedYRatio:0)),o}},{key:"getYForValue",value:function(t,i){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=n?i:null;return null!=t&&(o=i-t/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?t/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),o}},{key:"getGoalValues",value:function(t,i,n,o,l){var u=this,h=this.w,g=[];return h.globals.seriesGoals[o]&&h.globals.seriesGoals[o][l]&&Array.isArray(h.globals.seriesGoals[o][l])&&h.globals.seriesGoals[o][l].forEach(function(f){var x;g.push((ki(x={},t,"x"===t?u.getXForValue(f.value,i,!1):u.getYForValue(f.value,n,!1)),ki(x,"attrs",f),x))}),g}},{key:"drawGoalLine",value:function(t){var i=t.barXPosition,n=t.barYPosition,o=t.goalX,l=t.goalY,u=t.barWidth,h=t.barHeight,g=new j(this.barCtx.ctx),f=g.group({className:"apexcharts-bar-goals-groups"}),x=null;return this.barCtx.isHorizontal?Array.isArray(o)&&o.forEach(function(y){var w=void 0!==y.attrs.strokeHeight?y.attrs.strokeHeight:h/2,C=n+w+h/2;x=g.drawLine(y.x,C-2*w,y.x,C,y.attrs.strokeColor?y.attrs.strokeColor:void 0,y.attrs.strokeDashArray,y.attrs.strokeWidth?y.attrs.strokeWidth:2,y.attrs.strokeLineCap),f.add(x)}):Array.isArray(l)&&l.forEach(function(y){var w=void 0!==y.attrs.strokeWidth?y.attrs.strokeWidth:u/2,C=i+w+u/2;x=g.drawLine(C-2*w,y.y,C,y.y,y.attrs.strokeColor?y.attrs.strokeColor:void 0,y.attrs.strokeDashArray,y.attrs.strokeHeight?y.attrs.strokeHeight:2,y.attrs.strokeLineCap),f.add(x)}),f}}]),M}(),Me=function(){function M(t,i){re(this,M),this.ctx=t,this.w=t.w;var n=this.w;this.barOptions=n.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=n.config.stroke.width,this.isNullValue=!1,this.isRangeBar=n.globals.seriesRangeBar.length&&this.isHorizontal,this.xyRatios=i,null!==this.xyRatios&&(this.xRatio=i.xRatio,this.initialXRatio=i.initialXRatio,this.yRatio=i.yRatio,this.invertedXRatio=i.invertedXRatio,this.invertedYRatio=i.invertedYRatio,this.baseLineY=i.baseLineY,this.baseLineInvertedY=i.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new Ca(this)}return ne(M,[{key:"draw",value:function(t,i){var n=this.w,o=new j(this.ctx),l=new ye(this.ctx,n);t=l.getLogSeries(t),this.series=t,this.yRatio=l.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);var u=o.group({class:"apexcharts-bar-series apexcharts-plot-series"});n.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var h=0,g=0;h<t.length;h++,g++){var f,x,y,w,C=void 0,E=void 0,k=[],I=[],P=n.globals.comboCharts?i[h]:h,O=o.group({class:"apexcharts-series",rel:h+1,seriesName:Y.escapeString(n.globals.seriesNames[P]),"data:realIndex":P});this.ctx.series.addCollapsedClassToSeries(O,P),t[h].length>0&&(this.visibleI=this.visibleI+1);var D=0,p=0;this.yRatio.length>1&&(this.yaxisIndex=P),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed;var _=this.barHelpers.initialPositions();E=_.y,D=_.barHeight,x=_.yDivision,w=_.zeroW,C=_.x,p=_.barWidth,f=_.xDivision,y=_.zeroH,this.horizontal||I.push(C+p/2);for(var T=o.group({class:"apexcharts-datalabels","data:realIndex":P}),L=o.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),z=0;z<n.globals.dataPoints;z++){var K=this.barHelpers.getStrokeWidth(h,z,P),W=null,ee={indexes:{i:h,j:z,realIndex:P,bc:g},x:C,y:E,strokeWidth:K,elSeries:O};this.isHorizontal?(W=this.drawBarPaths(Ce(Ce({},ee),{},{barHeight:D,zeroW:w,yDivision:x})),p=this.series[h][z]/this.invertedYRatio):(W=this.drawColumnPaths(Ce(Ce({},ee),{},{xDivision:f,barWidth:p,zeroH:y})),D=this.series[h][z]/this.yRatio[this.yaxisIndex]);var Q=this.barHelpers.drawGoalLine({barXPosition:W.barXPosition,barYPosition:W.barYPosition,goalX:W.goalX,goalY:W.goalY,barHeight:D,barWidth:p});Q&&L.add(Q),E=W.y,C=W.x,z>0&&I.push(C+p/2),k.push(E);var ie=this.barHelpers.getPathFillColor(t,h,z,P);this.renderSeries({realIndex:P,pathFill:ie,j:z,i:h,pathFrom:W.pathFrom,pathTo:W.pathTo,strokeWidth:K,elSeries:O,x:C,y:E,series:t,barHeight:D,barWidth:p,elDataLabelsWrap:T,elGoalsMarkers:L,visibleSeries:this.visibleI,type:"bar"})}n.globals.seriesXvalues[P]=I,n.globals.seriesYvalues[P]=k,u.add(O)}return u}},{key:"renderSeries",value:function(t){var i=t.realIndex,n=t.pathFill,o=t.lineFill,l=t.j,u=t.i,h=t.pathFrom,g=t.pathTo,f=t.strokeWidth,x=t.elSeries,y=t.x,w=t.y,C=t.y1,E=t.y2,k=t.series,I=t.barHeight,P=t.barWidth,O=t.barYPosition,D=t.elDataLabelsWrap,p=t.elGoalsMarkers,_=t.visibleSeries,T=t.type,L=this.w,z=new j(this.ctx);o||(o=this.barOptions.distributed?L.globals.stroke.colors[l]:L.globals.stroke.colors[i]),L.config.series[u].data[l]&&L.config.series[u].data[l].strokeColor&&(o=L.config.series[u].data[l].strokeColor),this.isNullValue&&(n="none");var W=z.renderPaths({i:u,j:l,realIndex:i,pathFrom:h,pathTo:g,stroke:o,strokeWidth:f,strokeLineCap:L.config.stroke.lineCap,fill:n,animationDelay:l/L.config.chart.animations.animateGradually.delay*(L.config.chart.animations.speed/L.globals.dataPoints)/2.4,initialSpeed:L.config.chart.animations.speed,dataChangeSpeed:L.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(T,"-area")});W.attr("clip-path","url(#gridRectMask".concat(L.globals.cuid,")"));var ee=L.config.forecastDataPoints;ee.count>0&&l>=L.globals.dataPoints-ee.count&&(W.node.setAttribute("stroke-dasharray",ee.dashArray),W.node.setAttribute("stroke-width",ee.strokeWidth),W.node.setAttribute("fill-opacity",ee.fillOpacity)),void 0!==C&&void 0!==E&&(W.attr("data-range-y1",C),W.attr("data-range-y2",E)),new oe(this.ctx).setSelectionFilter(W,i,l),x.add(W);var Q=new Ut(this).handleBarDataLabels({x:y,y:w,y1:C,y2:E,i:u,j:l,series:k,realIndex:i,barHeight:I,barWidth:P,barYPosition:O,renderedPath:W,visibleSeries:_});return null!==Q&&D.add(Q),x.add(D),p&&x.add(p),x}},{key:"drawBarPaths",value:function(t){var u,i=t.indexes,n=t.barHeight,o=t.strokeWidth,l=t.zeroW,h=t.y,g=t.yDivision,f=t.elSeries,x=this.w,y=i.i,w=i.j;x.globals.isXNumeric&&(h=(x.globals.seriesX[y][w]-x.globals.minX)/this.invertedXRatio-n);var C=h+n*this.visibleI;u=this.barHelpers.getXForValue(this.series[y][w],l);var E=this.barHelpers.getBarpaths({barYPosition:C,barHeight:n,x1:l,x2:u,strokeWidth:o,series:this.series,realIndex:i.realIndex,i:y,j:w,w:x});return x.globals.isXNumeric||(h+=g),this.barHelpers.barBackground({j:w,i:y,y1:C-n*this.visibleI,y2:n*this.seriesLen,elSeries:f}),{pathTo:E.pathTo,pathFrom:E.pathFrom,x:u,y:h,goalX:this.barHelpers.getGoalValues("x",l,null,y,w),barYPosition:C}}},{key:"drawColumnPaths",value:function(t){var o,i=t.indexes,n=t.x,l=t.xDivision,u=t.barWidth,h=t.zeroH,g=t.strokeWidth,f=t.elSeries,x=this.w,y=i.realIndex,w=i.i,C=i.j,E=i.bc;if(x.globals.isXNumeric){var k=y;x.globals.seriesX[y].length||(k=x.globals.maxValsInArrayIndex),n=(x.globals.seriesX[k][C]-x.globals.minX)/this.xRatio-u*this.seriesLen/2}var I=n+u*this.visibleI;o=this.barHelpers.getYForValue(this.series[w][C],h);var P=this.barHelpers.getColumnPaths({barXPosition:I,barWidth:u,y1:h,y2:o,strokeWidth:g,series:this.series,realIndex:i.realIndex,i:w,j:C,w:x});return x.globals.isXNumeric||(n+=l),this.barHelpers.barBackground({bc:E,j:C,i:w,x1:I-g/2-u*this.visibleI,x2:u*this.seriesLen+g/2,elSeries:f}),{pathTo:P.pathTo,pathFrom:P.pathFrom,x:n,y:o,goalY:this.barHelpers.getGoalValues("y",null,h,w,C),barXPosition:I}}},{key:"getPreviousPath",value:function(t,i){for(var n,o=this.w,l=0;l<o.globals.previousPaths.length;l++){var u=o.globals.previousPaths[l];u.paths&&u.paths.length>0&&parseInt(u.realIndex,10)===parseInt(t,10)&&void 0!==o.globals.previousPaths[l].paths[i]&&(n=o.globals.previousPaths[l].paths[i].d)}return n}}]),M}(),ht=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return ne(M,[{key:"isValidDate",value:function(t){return!isNaN(this.parseDate(t))}},{key:"getTimeStamp",value:function(t){return Date.parse(t)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toISOString().substr(0,25)).getTime():new Date(t).getTime():t}},{key:"getDate",value:function(t){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toUTCString()):new Date(t)}},{key:"parseDate",value:function(t){var i=Date.parse(t);if(!isNaN(i))return this.getTimeStamp(t);var n=Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(n)}},{key:"parseDateWithTimezone",value:function(t){return Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(t,i){var n=this.w.globals.locale,o=this.w.config.xaxis.labels.datetimeUTC,l=["\0"].concat(Z(n.months)),u=["\x01"].concat(Z(n.shortMonths)),h=["\x02"].concat(Z(n.days)),g=["\x03"].concat(Z(n.shortDays));function f(z,K){var W=z+"";for(K=K||2;W.length<K;)W="0"+W;return W}var x=o?t.getUTCFullYear():t.getFullYear();i=(i=(i=i.replace(/(^|[^\\])yyyy+/g,"$1"+x)).replace(/(^|[^\\])yy/g,"$1"+x.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+x);var y=(o?t.getUTCMonth():t.getMonth())+1;i=(i=(i=(i=i.replace(/(^|[^\\])MMMM+/g,"$1"+l[0])).replace(/(^|[^\\])MMM/g,"$1"+u[0])).replace(/(^|[^\\])MM/g,"$1"+f(y))).replace(/(^|[^\\])M/g,"$1"+y);var w=o?t.getUTCDate():t.getDate();i=(i=(i=(i=i.replace(/(^|[^\\])dddd+/g,"$1"+h[0])).replace(/(^|[^\\])ddd/g,"$1"+g[0])).replace(/(^|[^\\])dd/g,"$1"+f(w))).replace(/(^|[^\\])d/g,"$1"+w);var C=o?t.getUTCHours():t.getHours(),E=C>12?C-12:0===C?12:C;i=(i=(i=(i=i.replace(/(^|[^\\])HH+/g,"$1"+f(C))).replace(/(^|[^\\])H/g,"$1"+C)).replace(/(^|[^\\])hh+/g,"$1"+f(E))).replace(/(^|[^\\])h/g,"$1"+E);var k=o?t.getUTCMinutes():t.getMinutes();i=(i=i.replace(/(^|[^\\])mm+/g,"$1"+f(k))).replace(/(^|[^\\])m/g,"$1"+k);var I=o?t.getUTCSeconds():t.getSeconds();i=(i=i.replace(/(^|[^\\])ss+/g,"$1"+f(I))).replace(/(^|[^\\])s/g,"$1"+I);var P=o?t.getUTCMilliseconds():t.getMilliseconds();i=i.replace(/(^|[^\\])fff+/g,"$1"+f(P,3)),P=Math.round(P/10),i=i.replace(/(^|[^\\])ff/g,"$1"+f(P)),P=Math.round(P/10);var O=C<12?"AM":"PM";i=(i=(i=i.replace(/(^|[^\\])f/g,"$1"+P)).replace(/(^|[^\\])TT+/g,"$1"+O)).replace(/(^|[^\\])T/g,"$1"+O.charAt(0));var D=O.toLowerCase();i=(i=i.replace(/(^|[^\\])tt+/g,"$1"+D)).replace(/(^|[^\\])t/g,"$1"+D.charAt(0));var p=-t.getTimezoneOffset(),_=o||!p?"Z":p>0?"+":"-";if(!o){var T=(p=Math.abs(p))%60;_+=f(Math.floor(p/60))+":"+f(T)}i=i.replace(/(^|[^\\])K/g,"$1"+_);var L=(o?t.getUTCDay():t.getDay())+1;return(i=(i=(i=(i=i.replace(new RegExp(h[0],"g"),h[L])).replace(new RegExp(g[0],"g"),g[L])).replace(new RegExp(l[0],"g"),l[y])).replace(new RegExp(u[0],"g"),u[y])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(t,i,n){var o=this.w;void 0!==o.config.xaxis.min&&(t=o.config.xaxis.min),void 0!==o.config.xaxis.max&&(i=o.config.xaxis.max);var l=this.getDate(t),u=this.getDate(i),h=this.formatDate(l,"yyyy MM dd HH mm ss fff").split(" "),g=this.formatDate(u,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(h[6],10),maxMillisecond:parseInt(g[6],10),minSecond:parseInt(h[5],10),maxSecond:parseInt(g[5],10),minMinute:parseInt(h[4],10),maxMinute:parseInt(g[4],10),minHour:parseInt(h[3],10),maxHour:parseInt(g[3],10),minDate:parseInt(h[2],10),maxDate:parseInt(g[2],10),minMonth:parseInt(h[1],10)-1,maxMonth:parseInt(g[1],10)-1,minYear:parseInt(h[0],10),maxYear:parseInt(g[0],10)}}},{key:"isLeapYear",value:function(t){return t%4==0&&t%100!=0||t%400==0}},{key:"calculcateLastDaysOfMonth",value:function(t,i,n){return this.determineDaysOfMonths(t,i)-n}},{key:"determineDaysOfYear",value:function(t){var i=365;return this.isLeapYear(t)&&(i=366),i}},{key:"determineRemainingDaysOfYear",value:function(t,i,n){var o=this.daysCntOfYear[i]+n;return i>1&&this.isLeapYear()&&o++,o}},{key:"determineDaysOfMonths",value:function(t,i){var n=30;switch(t=Y.monthMod(t),!0){case this.months30.indexOf(t)>-1:2===t&&(n=this.isLeapYear(i)?29:28);break;case this.months31.indexOf(t)>-1:default:n=31}return n}}]),M}(),gs=function(M){Tt(i,Me);var t=Ct(i);function i(){return re(this,i),t.apply(this,arguments)}return ne(i,[{key:"draw",value:function(n,o){var l=this.w,u=new j(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=n,this.seriesRangeStart=l.globals.seriesRangeStart,this.seriesRangeEnd=l.globals.seriesRangeEnd,this.barHelpers.initVariables(n);for(var h=u.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),g=0;g<n.length;g++){var f,x,y,w=void 0,C=void 0,E=void 0,k=l.globals.comboCharts?o[g]:g,I=u.group({class:"apexcharts-series",seriesName:Y.escapeString(l.globals.seriesNames[k]),rel:g+1,"data:realIndex":k});this.ctx.series.addCollapsedClassToSeries(I,k),n[g].length>0&&(this.visibleI=this.visibleI+1);var P=0,O=0;this.yRatio.length>1&&(this.yaxisIndex=k);var D=this.barHelpers.initialPositions();C=D.y,y=D.zeroW,w=D.x,O=D.barWidth,f=D.xDivision,x=D.zeroH;for(var p=u.group({class:"apexcharts-datalabels","data:realIndex":k}),_=u.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),T=0;T<l.globals.dataPoints;T++){var L=this.barHelpers.getStrokeWidth(g,T,k),z=this.seriesRangeStart[g][T],K=this.seriesRangeEnd[g][T],W=null,ee=null,Q={x:w,y:C,strokeWidth:L,elSeries:I};if(E=D.yDivision,P=D.barHeight,this.isHorizontal){ee=C+P*this.visibleI;var ie=this.seriesLen;l.config.plotOptions.bar.rangeBarGroupRows&&(ie=1);var he=(E-P*ie)/2;if(void 0===l.config.series[g].data[T])break;if(l.config.series[g].data[T].x){var He=this.detectOverlappingBars({i:g,j:T,barYPosition:ee,srty:he,barHeight:P,yDivision:E,initPositions:D});P=He.barHeight,ee=He.barYPosition}O=(W=this.drawRangeBarPaths(Ce({indexes:{i:g,j:T,realIndex:k},barHeight:P,barYPosition:ee,zeroW:y,yDivision:E,y1:z,y2:K},Q))).barWidth}else P=(W=this.drawRangeColumnPaths(Ce({indexes:{i:g,j:T,realIndex:k},zeroH:x,barWidth:O,xDivision:f},Q))).barHeight;var Fe=this.barHelpers.drawGoalLine({barXPosition:W.barXPosition,barYPosition:ee,goalX:W.goalX,goalY:W.goalY,barHeight:P,barWidth:O});Fe&&_.add(Fe),C=W.y,w=W.x;var Ge=this.barHelpers.getPathFillColor(n,g,T,k);this.renderSeries({realIndex:k,pathFill:Ge,lineFill:l.globals.stroke.colors[k],j:T,i:g,x:w,y:C,y1:z,y2:K,pathFrom:W.pathFrom,pathTo:W.pathTo,strokeWidth:L,elSeries:I,series:n,barHeight:P,barYPosition:ee,barWidth:O,elDataLabelsWrap:p,elGoalsMarkers:_,visibleSeries:this.visibleI,type:"rangebar"})}h.add(I)}return h}},{key:"detectOverlappingBars",value:function(n){var o=n.i,l=n.j,u=n.barYPosition,h=n.srty,g=n.barHeight,f=n.yDivision,x=n.initPositions,y=this.w,w=[],C=y.config.series[o].data[l].rangeName,E=y.config.series[o].data[l].x,k=y.globals.labels.indexOf(E),I=y.globals.seriesRangeBar[o].findIndex(function(P){return P.x===E&&P.overlaps.length>0});return u=y.config.plotOptions.bar.rangeBarGroupRows?h+f*k:h+g*this.visibleI+f*k,I>-1&&!y.config.plotOptions.bar.rangeBarOverlap&&(w=y.globals.seriesRangeBar[o][I].overlaps).indexOf(C)>-1&&(u=(g=x.barHeight/w.length)*this.visibleI+f*(100-parseInt(this.barOptions.barHeight,10))/100/2+g*(this.visibleI+w.indexOf(C))+f*k),{barYPosition:u,barHeight:g}}},{key:"drawRangeColumnPaths",value:function(n){var o=n.indexes,l=n.x,u=n.xDivision,h=n.barWidth,g=n.zeroH,f=this.w,x=o.i,y=o.j,w=this.yRatio[this.yaxisIndex],C=o.realIndex,E=this.getRangeValue(C,y),k=Math.min(E.start,E.end),I=Math.max(E.start,E.end);f.globals.isXNumeric&&(l=(f.globals.seriesX[x][y]-f.globals.minX)/this.xRatio-h/2);var P=l+h*this.visibleI;null==this.series[x][y]?k=g:(k=g-k/w,I=g-I/w);var O=Math.abs(I-k),D=this.barHelpers.getColumnPaths({barXPosition:P,barWidth:h,y1:k,y2:I,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:o.realIndex,i:C,j:y,w:f});return f.globals.isXNumeric||(l+=u),{pathTo:D.pathTo,pathFrom:D.pathFrom,barHeight:O,x:l,y:I,goalY:this.barHelpers.getGoalValues("y",null,g,x,y),barXPosition:P}}},{key:"drawRangeBarPaths",value:function(n){var o=n.indexes,l=n.y,g=n.yDivision,f=n.barHeight,x=n.barYPosition,y=n.zeroW,w=this.w,C=y+n.y1/this.invertedYRatio,E=y+n.y2/this.invertedYRatio,k=Math.abs(E-C),I=this.barHelpers.getBarpaths({barYPosition:x,barHeight:f,x1:C,x2:E,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:o.realIndex,realIndex:o.realIndex,j:o.j,w});return w.globals.isXNumeric||(l+=g),{pathTo:I.pathTo,pathFrom:I.pathFrom,barWidth:k,x:E,goalX:this.barHelpers.getGoalValues("x",y,null,o.realIndex,o.j),y:l}}},{key:"getRangeValue",value:function(n,o){var l=this.w;return{start:l.globals.seriesRangeStart[n][o],end:l.globals.seriesRangeEnd[n][o]}}},{key:"getTooltipValues",value:function(n){var o=n.ctx,l=n.seriesIndex,u=n.dataPointIndex,h=n.y1,g=n.y2,f=n.w,x=f.globals.seriesRangeStart[l][u],y=f.globals.seriesRangeEnd[l][u],w=f.globals.labels[u],C=f.config.series[l].name?f.config.series[l].name:"",E=f.config.tooltip.y.formatter,k=f.config.tooltip.y.title.formatter,I={w:f,seriesIndex:l,dataPointIndex:u,start:x,end:y};"function"==typeof k&&(C=k(C,I)),Number.isFinite(h)&&Number.isFinite(g)&&(x=h,y=g,f.config.series[l].data[u].x&&(w=f.config.series[l].data[u].x+":"),"function"==typeof E&&(w=E(w,I)));var P="",O="",D=f.globals.colors[l];if(void 0===f.config.tooltip.x.formatter)if("datetime"===f.config.xaxis.type){var p=new ht(o);P=p.formatDate(p.getDate(x),f.config.tooltip.x.format),O=p.formatDate(p.getDate(y),f.config.tooltip.x.format)}else P=x,O=y;else P=f.config.tooltip.x.formatter(x),O=f.config.tooltip.x.formatter(y);return{start:x,end:y,startVal:P,endVal:O,ylabel:w,color:D,seriesName:C}}},{key:"buildCustomTooltipHTML",value:function(n){return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+n.color+'">'+(n.seriesName||"")+'</span></div><div> <span class="category">'+n.ylabel+' </span> <span class="value start-value">'+n.start+'</span> <span class="separator">-</span> <span class="value end-value">'+n.end+"</span></div></div>"}}]),i}(),Ui=function(){function M(t){re(this,M),this.opts=t}return ne(M,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(t){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,Y.extend(t,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var t=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(i){return t._getBoxTooltip(i.w,i.seriesIndex,i.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var t=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(i){return t._getBoxTooltip(i.w,i.seriesIndex,i.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(t,i){var n=i.seriesIndex,o=i.dataPointIndex,l=i.w;return l.globals.seriesRangeEnd[n][o]-l.globals.seriesRangeStart[n][o]},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(t){return t.w.config.plotOptions&&t.w.config.plotOptions.bar&&t.w.config.plotOptions.bar.horizontal?(o=(n=new gs((i=t).ctx,null)).getTooltipValues(i),n.buildCustomTooltipHTML({color:o.color,seriesName:o.seriesName,ylabel:o.ylabel,start:o.startVal,end:o.endVal})):function(i){var n=new gs(i.ctx,null),o=n.getTooltipValues(i);return n.buildCustomTooltipHTML({color:o.color,seriesName:o.seriesName,ylabel:o.ylabel,start:o.start,end:o.end})}(t);var i,n,o}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(t){return Y.extend(t,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(t){t.dataLabels=t.dataLabels||{},t.dataLabels.formatter=t.dataLabels.formatter||void 0;var i=t.dataLabels.formatter;return t.yaxis.forEach(function(n,o){t.yaxis[o].min=0,t.yaxis[o].max=100}),"bar"===t.chart.type&&(t.dataLabels.formatter=i||function(n){return"number"==typeof n&&n?n.toFixed(0)+"%":n}),t}},{key:"convertCatToNumeric",value:function(t){return t.xaxis.convertedCatToNumeric=!0,t}},{key:"convertCatToNumericXaxis",value:function(t,i,n){t.xaxis.type="numeric",t.xaxis.labels=t.xaxis.labels||{},t.xaxis.labels.formatter=t.xaxis.labels.formatter||function(u){return Y.isNumber(u)?Math.floor(u):u};var o=t.xaxis.labels.formatter,l=t.xaxis.categories&&t.xaxis.categories.length?t.xaxis.categories:t.labels;return n&&n.length&&(l=n.map(function(u){return Array.isArray(u)?u:String(u)})),l&&l.length&&(t.xaxis.labels.formatter=function(u){return Y.isNumber(u)?o(l[Math.floor(u)-1]):o(u)}),t.xaxis.categories=[],t.labels=[],t.xaxis.tickAmount=t.xaxis.tickAmount||"dataPoints",t}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(t){return t},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(t,i,n,o,l){var u=t.globals.seriesCandleO[i][n],h=t.globals.seriesCandleH[i][n],g=t.globals.seriesCandleM[i][n],f=t.globals.seriesCandleL[i][n],x=t.globals.seriesCandleC[i][n];return t.config.series[i].type&&t.config.series[i].type!==l?'<div class="apexcharts-custom-tooltip">\n          '.concat(t.config.series[i].name?t.config.series[i].name:"series-"+(i+1),": <strong>").concat(t.globals.series[i][n],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(t.config.chart.type,'">')+"<div>".concat(o[0],': <span class="value">')+u+"</span></div>"+"<div>".concat(o[1],': <span class="value">')+h+"</span></div>"+(g?"<div>".concat(o[2],': <span class="value">')+g+"</span></div>":"")+"<div>".concat(o[3],': <span class="value">')+f+"</span></div>"+"<div>".concat(o[4],': <span class="value">')+x+"</span></div></div>"}}]),M}(),ut=function(){function M(t){re(this,M),this.opts=t}return ne(M,[{key:"init",value:function(t){var i=t.responsiveOverride,n=this.opts,o=new fe,l=new Ui(n);this.chartType=n.chart.type,"histogram"===this.chartType&&(n.chart.type="bar",n=Y.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},n)),n=this.extendYAxis(n),n=this.extendAnnotations(n);var u=o.init(),h={};if(n&&"object"===Je(n)){var g={};g=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(n.chart.type)?l[n.chart.type]():l.line(),n.chart.brush&&n.chart.brush.enabled&&(g=l.brush(g)),n.chart.stacked&&"100%"===n.chart.stackType&&(n=l.stacked100(n)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(n),n.xaxis=n.xaxis||window.Apex.xaxis||{},i||(n.xaxis.convertedCatToNumeric=!1),((n=this.checkForCatToNumericXAxis(this.chartType,g,n)).chart.sparkline&&n.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(g=l.sparkline(g)),h=Y.extend(u,g)}var f=Y.extend(h,window.Apex);return u=Y.extend(f,n),this.handleUserInputErrors(u)}},{key:"checkForCatToNumericXAxis",value:function(t,i,n){var o=new Ui(n);return("bar"===t||"boxPlot"===t)&&n.plotOptions&&n.plotOptions.bar&&n.plotOptions.bar.horizontal||"pie"===t||"polarArea"===t||"donut"===t||"radar"===t||"radialBar"===t||"heatmap"===t||!("datetime"!==n.xaxis.type&&"numeric"!==n.xaxis.type)||"between"===(n.xaxis.tickPlacement?n.xaxis.tickPlacement:i.xaxis&&i.xaxis.tickPlacement)||(n=o.convertCatToNumeric(n)),n}},{key:"extendYAxis",value:function(t,i){var n=new fe;(void 0===t.yaxis||!t.yaxis||Array.isArray(t.yaxis)&&0===t.yaxis.length)&&(t.yaxis={}),t.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(t.yaxis=Y.extend(t.yaxis,window.Apex.yaxis)),t.yaxis=t.yaxis.constructor!==Array?[Y.extend(n.yAxis,t.yaxis)]:Y.extendArray(t.yaxis,n.yAxis);var o=!1;t.yaxis.forEach(function(u){u.logarithmic&&(o=!0)});var l=t.series;return i&&!l&&(l=i.config.series),o&&l.length!==t.yaxis.length&&l.length&&(t.yaxis=l.map(function(u,h){if(u.name||(l[h].name="series-".concat(h+1)),t.yaxis[h])return t.yaxis[h].seriesName=l[h].name,t.yaxis[h];var g=Y.extend(n.yAxis,t.yaxis[0]);return g.show=!1,g})),o&&l.length>1&&l.length!==t.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),t}},{key:"extendAnnotations",value:function(t){return void 0===t.annotations&&(t.annotations={},t.annotations.yaxis=[],t.annotations.xaxis=[],t.annotations.points=[]),t=this.extendYAxisAnnotations(t),t=this.extendXAxisAnnotations(t),this.extendPointAnnotations(t)}},{key:"extendYAxisAnnotations",value:function(t){var i=new fe;return t.annotations.yaxis=Y.extendArray(void 0!==t.annotations.yaxis?t.annotations.yaxis:[],i.yAxisAnnotation),t}},{key:"extendXAxisAnnotations",value:function(t){var i=new fe;return t.annotations.xaxis=Y.extendArray(void 0!==t.annotations.xaxis?t.annotations.xaxis:[],i.xAxisAnnotation),t}},{key:"extendPointAnnotations",value:function(t){var i=new fe;return t.annotations.points=Y.extendArray(void 0!==t.annotations.points?t.annotations.points:[],i.pointAnnotation),t}},{key:"checkForDarkTheme",value:function(t){t.theme&&"dark"===t.theme.mode&&(t.tooltip||(t.tooltip={}),"light"!==t.tooltip.theme&&(t.tooltip.theme="dark"),t.chart.foreColor||(t.chart.foreColor="#f6f7f8"),t.chart.background||(t.chart.background="#424242"),t.theme.palette||(t.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(t){var i=t;if(i.tooltip.shared&&i.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===i.chart.type&&i.plotOptions.bar.horizontal){if(i.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");i.yaxis[0].reversed&&(i.yaxis[0].opposite=!0),i.xaxis.tooltip.enabled=!1,i.yaxis[0].tooltip.enabled=!1,i.chart.zoom.enabled=!1}return"bar"!==i.chart.type&&"rangeBar"!==i.chart.type||i.tooltip.shared&&"barWidth"===i.xaxis.crosshairs.width&&i.series.length>1&&(i.xaxis.crosshairs.width="tickWidth"),"candlestick"!==i.chart.type&&"boxPlot"!==i.chart.type||i.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(i.chart.type," chart is not supported.")),i.yaxis[0].reversed=!1),i}}]),M}(),De=function(){function M(){re(this,M)}return ne(M,[{key:"initGlobalVars",value:function(t){t.series=[],t.seriesCandleO=[],t.seriesCandleH=[],t.seriesCandleM=[],t.seriesCandleL=[],t.seriesCandleC=[],t.seriesRangeStart=[],t.seriesRangeEnd=[],t.seriesRangeBar=[],t.seriesPercent=[],t.seriesGoals=[],t.seriesX=[],t.seriesZ=[],t.seriesNames=[],t.seriesTotals=[],t.seriesLog=[],t.seriesColors=[],t.stackedSeriesTotals=[],t.seriesXvalues=[],t.seriesYvalues=[],t.labels=[],t.hasGroups=!1,t.groups=[],t.categoryLabels=[],t.timescaleLabels=[],t.noLabelsProvided=!1,t.resizeTimer=null,t.selectionResizeTimer=null,t.delayedElements=[],t.pointsArray=[],t.dataLabelsRects=[],t.isXNumeric=!1,t.xaxisLabelsCount=0,t.skipLastTimelinelabel=!1,t.skipFirstTimelinelabel=!1,t.isDataXYZ=!1,t.isMultiLineX=!1,t.isMultipleYAxis=!1,t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE,t.minYArr=[],t.maxYArr=[],t.maxX=-Number.MAX_VALUE,t.minX=Number.MAX_VALUE,t.initialMaxX=-Number.MAX_VALUE,t.initialMinX=Number.MAX_VALUE,t.maxDate=0,t.minDate=Number.MAX_VALUE,t.minZ=Number.MAX_VALUE,t.maxZ=-Number.MAX_VALUE,t.minXDiff=Number.MAX_VALUE,t.yAxisScale=[],t.xAxisScale=null,t.xAxisTicksPositions=[],t.yLabelsCoords=[],t.yTitleCoords=[],t.barPadForNumericAxis=0,t.padHorizontal=0,t.xRange=0,t.yRange=[],t.zRange=0,t.dataPoints=0,t.xTickAmount=0}},{key:"globalVars",value:function(t){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:t.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.zoom&&t.chart.zoom.enabled,panEnabled:"pan"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.pan,selectionEnabled:"selection"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(t){var i=this.globalVars(t);return this.initGlobalVars(i),i.initialConfig=Y.extend({},t),i.initialSeries=Y.clone(t.series),i.lastXAxis=Y.clone(i.initialConfig.xaxis),i.lastYAxis=Y.clone(i.initialConfig.yaxis),i}}]),M}(),Sa=function(){function M(t){re(this,M),this.opts=t}return ne(M,[{key:"init",value:function(){var t=new ut(this.opts).init({responsiveOverride:!1});return{config:t,globals:(new De).init(t)}}}]),M}(),yn=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new ye(this.ctx)}return ne(M,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var t=this.w.config.series.slice(),i=new pe(this.ctx);if(this.activeSeriesIndex=i.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!==t[this.activeSeriesIndex].data[0]&&void 0!==t[this.activeSeriesIndex].data[0].x&&null!==t[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var t=this.w.config.series.slice(),i=new pe(this.ctx);if(this.activeSeriesIndex=i.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!=t[this.activeSeriesIndex].data[0]&&t[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(t,i){for(var n=this.w.config,o=this.w.globals,l="boxPlot"===n.chart.type||"boxPlot"===n.series[i].type,u=0;u<t[i].data.length;u++)if(void 0!==t[i].data[u][1]&&(Array.isArray(t[i].data[u][1])&&4===t[i].data[u][1].length&&!l?this.twoDSeries.push(Y.parseNumber(t[i].data[u][1][3])):this.twoDSeries.push(Y.parseNumber(t[i].data[u].length>=5?t[i].data[u][4]:t[i].data[u][1])),o.dataFormatXNumeric=!0),"datetime"===n.xaxis.type){var h=new Date(t[i].data[u][0]);h=new Date(h).getTime(),this.twoDSeriesX.push(h)}else this.twoDSeriesX.push(t[i].data[u][0]);for(var g=0;g<t[i].data.length;g++)void 0!==t[i].data[g][2]&&(this.threeDSeries.push(t[i].data[g][2]),o.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(t,i){var n=this.w.config,o=this.w.globals,l=new ht(this.ctx),u=i;o.collapsedSeriesIndices.indexOf(i)>-1&&(u=this.activeSeriesIndex);for(var h=0;h<t[i].data.length;h++)void 0!==t[i].data[h].y&&(Array.isArray(t[i].data[h].y)?this.twoDSeries.push(Y.parseNumber(t[i].data[h].y[t[i].data[h].y.length-1])):this.twoDSeries.push(Y.parseNumber(t[i].data[h].y))),void 0!==t[i].data[h].goals&&Array.isArray(t[i].data[h].goals)?(void 0===this.seriesGoals[i]&&(this.seriesGoals[i]=[]),this.seriesGoals[i].push(t[i].data[h].goals)):(void 0===this.seriesGoals[i]&&(this.seriesGoals[i]=[]),this.seriesGoals[i].push(null));for(var g=0;g<t[u].data.length;g++){var f="string"==typeof t[u].data[g].x,x=Array.isArray(t[u].data[g].x),y=!x&&!!l.isValidDate(t[u].data[g].x.toString());f||y?f||n.xaxis.convertedCatToNumeric?"datetime"!==n.xaxis.type||o.isBarHorizontal&&o.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[u].data[g].x)):this.twoDSeriesX.push(l.parseDate(t[u].data[g].x)):"datetime"===n.xaxis.type?this.twoDSeriesX.push(l.parseDate(t[u].data[g].x.toString())):(o.dataFormatXNumeric=!0,o.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(t[u].data[g].x))):x?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[u].data[g].x)):(o.isXNumeric=!0,o.dataFormatXNumeric=!0,this.twoDSeriesX.push(t[u].data[g].x))}if(t[i].data[0]&&void 0!==t[i].data[0].z){for(var C=0;C<t[i].data.length;C++)this.threeDSeries.push(t[i].data[C].z);o.isDataXYZ=!0}}},{key:"handleRangeData",value:function(t,i){var n=this.w.globals,o={};return this.isFormat2DArray()?o=this.handleRangeDataFormat("array",t,i):this.isFormatXY()&&(o=this.handleRangeDataFormat("xy",t,i)),n.seriesRangeStart.push(o.start),n.seriesRangeEnd.push(o.end),n.seriesRangeBar.push(o.rangeUniques),n.seriesRangeBar.forEach(function(l,u){l&&l.forEach(function(h,g){h.y.forEach(function(f,x){for(var y=0;y<h.y.length;y++)x!==y&&f.y1<=h.y[y].y2&&h.y[y].y1<=f.y2&&(h.overlaps.indexOf(f.rangeName)<0&&h.overlaps.push(f.rangeName),h.overlaps.indexOf(h.y[y].rangeName)<0&&h.overlaps.push(h.y[y].rangeName))})})}),o}},{key:"handleCandleStickBoxData",value:function(t,i){var n=this.w.globals,o={};return this.isFormat2DArray()?o=this.handleCandleStickBoxDataFormat("array",t,i):this.isFormatXY()&&(o=this.handleCandleStickBoxDataFormat("xy",t,i)),n.seriesCandleO[i]=o.o,n.seriesCandleH[i]=o.h,n.seriesCandleM[i]=o.m,n.seriesCandleL[i]=o.l,n.seriesCandleC[i]=o.c,o}},{key:"handleRangeDataFormat",value:function(t,i,n){var o=[],l=[],u=i[n].data.filter(function(w,C,E){return C===E.findIndex(function(k){return k.x===w.x})}).map(function(w,C){return{x:w.x,overlaps:[],y:[]}}),h="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",g=new pe(this.ctx).getActiveConfigSeriesIndex();if("array"===t){if(2!==i[g].data[0][1].length)throw new Error(h);for(var f=0;f<i[n].data.length;f++)o.push(i[n].data[f][1][0]),l.push(i[n].data[f][1][1])}else if("xy"===t){if(2!==i[g].data[0].y.length)throw new Error(h);for(var x=function(w){var C=Y.randomId(),E=i[n].data[w].x,k={y1:i[n].data[w].y[0],y2:i[n].data[w].y[1],rangeName:C};i[n].data[w].rangeName=C;var I=u.findIndex(function(P){return P.x===E});u[I].y.push(k),o.push(k.y1),l.push(k.y2)},y=0;y<i[n].data.length;y++)x(y)}return{start:o,end:l,rangeUniques:u}}},{key:"handleCandleStickBoxDataFormat",value:function(t,i,n){var o=this.w,l="boxPlot"===o.config.chart.type||"boxPlot"===o.config.series[n].type,u=[],h=[],g=[],f=[],x=[];if("array"===t)if(l&&6===i[n].data[0].length||!l&&5===i[n].data[0].length)for(var y=0;y<i[n].data.length;y++)u.push(i[n].data[y][1]),h.push(i[n].data[y][2]),l?(g.push(i[n].data[y][3]),f.push(i[n].data[y][4]),x.push(i[n].data[y][5])):(f.push(i[n].data[y][3]),x.push(i[n].data[y][4]));else for(var w=0;w<i[n].data.length;w++)Array.isArray(i[n].data[w][1])&&(u.push(i[n].data[w][1][0]),h.push(i[n].data[w][1][1]),l?(g.push(i[n].data[w][1][2]),f.push(i[n].data[w][1][3]),x.push(i[n].data[w][1][4])):(f.push(i[n].data[w][1][2]),x.push(i[n].data[w][1][3])));else if("xy"===t)for(var C=0;C<i[n].data.length;C++)Array.isArray(i[n].data[C].y)&&(u.push(i[n].data[C].y[0]),h.push(i[n].data[C].y[1]),l?(g.push(i[n].data[C].y[2]),f.push(i[n].data[C].y[3]),x.push(i[n].data[C].y[4])):(f.push(i[n].data[C].y[2]),x.push(i[n].data[C].y[3])));return{o:u,h,m:g,l:f,c:x}}},{key:"parseDataAxisCharts",value:function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,o=this.w.config,l=this.w.globals,u=new ht(n),h=o.labels.length>0?o.labels.slice():o.xaxis.categories.slice();l.isRangeBar="rangeBar"===o.chart.type&&l.isBarHorizontal,l.hasGroups="category"===o.xaxis.type&&o.xaxis.group.groups.length>0,l.hasGroups&&(l.groups=o.xaxis.group.groups);for(var g=function(){for(var y=0;y<h.length;y++)if("string"==typeof h[y]){if(!u.isValidDate(h[y]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");i.twoDSeriesX.push(u.parseDate(h[y]))}else i.twoDSeriesX.push(h[y])},f=0;f<t.length;f++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===t[f].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==o.chart.type&&"rangeArea"!==o.chart.type&&"rangeBar"!==t[f].type&&"rangeArea"!==t[f].type||(l.isRangeData=!0,this.handleRangeData(t,f)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(t,f):this.isFormatXY()&&this.handleFormatXY(t,f),"candlestick"!==o.chart.type&&"candlestick"!==t[f].type&&"boxPlot"!==o.chart.type&&"boxPlot"!==t[f].type||this.handleCandleStickBoxData(t,f),l.series.push(this.twoDSeries),l.labels.push(this.twoDSeriesX),l.seriesX.push(this.twoDSeriesX),l.seriesGoals=this.seriesGoals,f!==this.activeSeriesIndex||this.fallbackToCategory||(l.isXNumeric=!0);else{"datetime"===o.xaxis.type?(l.isXNumeric=!0,g(),l.seriesX.push(this.twoDSeriesX)):"numeric"===o.xaxis.type&&(l.isXNumeric=!0,h.length>0&&(this.twoDSeriesX=h,l.seriesX.push(this.twoDSeriesX))),l.labels.push(this.twoDSeriesX);var x=t[f].data.map(function(y){return Y.parseNumber(y)});l.series.push(x)}l.seriesZ.push(this.threeDSeries),l.seriesNames.push(void 0!==t[f].name?t[f].name:"series-"+parseInt(f+1,10)),l.seriesColors.push(void 0!==t[f].color?t[f].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(t){var i=this.w.globals,n=this.w.config;i.series=t.slice(),i.seriesNames=n.labels.slice();for(var o=0;o<i.series.length;o++)void 0===i.seriesNames[o]&&i.seriesNames.push("series-"+(o+1));return this.w}},{key:"handleExternalLabelsData",value:function(t){var i=this.w.config,n=this.w.globals;i.xaxis.categories.length>0?n.labels=i.xaxis.categories:i.labels.length>0?n.labels=i.labels.slice():this.fallbackToCategory?(n.labels=n.labels[0],n.seriesRangeBar.length&&(n.seriesRangeBar.map(function(o){o.forEach(function(l){n.labels.indexOf(l.x)<0&&l.x&&n.labels.push(l.x)})}),n.labels=n.labels.filter(function(o,l,u){return u.indexOf(o)===l})),i.xaxis.convertedCatToNumeric&&(new Ui(i).convertCatToNumericXaxis(i,this.ctx,n.seriesX[0]),this._generateExternalLabels(t))):this._generateExternalLabels(t)}},{key:"_generateExternalLabels",value:function(t){var i=this.w.globals,n=this.w.config,o=[];if(i.axisCharts){if(i.series.length>0)if(this.isFormatXY())for(var l=n.series.map(function(y,w){return y.data.filter(function(C,E,k){return k.findIndex(function(I){return I.x===C.x})===E})}),u=l.reduce(function(y,w,C,E){return E[y].length>w.length?y:C},0),h=0;h<l[u].length;h++)o.push(h+1);else for(var g=0;g<i.series[i.maxValsInArrayIndex].length;g++)o.push(g+1);i.seriesX=[];for(var f=0;f<t.length;f++)i.seriesX.push(o);i.isXNumeric=!0}if(0===o.length){o=i.axisCharts?[]:i.series.map(function(y,w){return w+1});for(var x=0;x<t.length;x++)i.seriesX.push(o)}i.labels=o,n.xaxis.convertedCatToNumeric&&(i.categoryLabels=o.map(function(y){return n.xaxis.labels.formatter(y)})),i.noLabelsProvided=!0}},{key:"parseData",value:function(t){var i=this.w,n=i.config,o=i.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),o.axisCharts?this.parseDataAxisCharts(t):this.parseDataNonAxisCharts(t),this.coreUtils.getLargestSeries(),"bar"===n.chart.type&&n.chart.stacked){var l=new pe(this.ctx);o.series=l.setNullSeriesToZeroValues(o.series)}this.coreUtils.getSeriesTotals(),o.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),o.dataFormatXNumeric||o.isXNumeric&&("numeric"!==n.xaxis.type||0!==n.labels.length||0!==n.xaxis.categories.length)||this.handleExternalLabelsData(t);for(var u=this.coreUtils.getCategoryLabels(o.labels),h=0;h<u.length;h++)if(Array.isArray(u[h])){o.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var t=this,i=this.w;i.globals.ignoreYAxisIndexes=i.globals.collapsedSeries.map(function(n,o){if(t.w.globals.isMultipleYAxis&&!i.config.chart.stacked)return n.index})}}]),M}(),Zi=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w,this.tooltipKeyFormat="dd MMM"}return ne(M,[{key:"xLabelFormat",value:function(t,i,n,o){var l=this.w;if("datetime"===l.config.xaxis.type&&void 0===l.config.xaxis.labels.formatter&&void 0===l.config.tooltip.x.formatter){var u=new ht(this.ctx);return u.formatDate(u.getDate(i),l.config.tooltip.x.format)}return t(i,n,o)}},{key:"defaultGeneralFormatter",value:function(t){return Array.isArray(t)?t.map(function(i){return i}):t}},{key:"defaultYFormatter",value:function(t,i,n){var o=this.w;return Y.isNumber(t)&&(t=t.toFixed(0!==o.globals.yValueDecimal?void 0!==i.decimalsInFloat?i.decimalsInFloat:o.globals.yValueDecimal:o.globals.maxYArr[n]-o.globals.minYArr[n]<5?1:0)),t}},{key:"setLabelFormatters",value:function(){var t=this,i=this.w;return i.globals.xaxisTooltipFormatter=function(n){return t.defaultGeneralFormatter(n)},i.globals.ttKeyFormatter=function(n){return t.defaultGeneralFormatter(n)},i.globals.ttZFormatter=function(n){return n},i.globals.legendFormatter=function(n){return t.defaultGeneralFormatter(n)},i.globals.xLabelFormatter=void 0!==i.config.xaxis.labels.formatter?i.config.xaxis.labels.formatter:function(n){if(Y.isNumber(n)){if(!i.config.xaxis.convertedCatToNumeric&&"numeric"===i.config.xaxis.type){if(Y.isNumber(i.config.xaxis.decimalsInFloat))return n.toFixed(i.config.xaxis.decimalsInFloat);var o=i.globals.maxX-i.globals.minX;return n.toFixed(o>0&&o<100?1:0)}return n.toFixed(i.globals.isBarHorizontal&&i.globals.maxY-i.globals.minYArr<4?1:0)}return n},i.globals.ttKeyFormatter="function"==typeof i.config.tooltip.x.formatter?i.config.tooltip.x.formatter:i.globals.xLabelFormatter,"function"==typeof i.config.xaxis.tooltip.formatter&&(i.globals.xaxisTooltipFormatter=i.config.xaxis.tooltip.formatter),(Array.isArray(i.config.tooltip.y)||void 0!==i.config.tooltip.y.formatter)&&(i.globals.ttVal=i.config.tooltip.y),void 0!==i.config.tooltip.z.formatter&&(i.globals.ttZFormatter=i.config.tooltip.z.formatter),void 0!==i.config.legend.formatter&&(i.globals.legendFormatter=i.config.legend.formatter),i.config.yaxis.forEach(function(n,o){i.globals.yLabelFormatters[o]=void 0!==n.labels.formatter?n.labels.formatter:function(l){return i.globals.xyCharts?Array.isArray(l)?l.map(function(u){return t.defaultYFormatter(u,n,o)}):t.defaultYFormatter(l,n,o):l}}),i.globals}},{key:"heatmapLabelFormatters",value:function(){var t=this.w;if("heatmap"===t.config.chart.type){t.globals.yAxisScale[0].result=t.globals.seriesNames.slice();var i=t.globals.seriesNames.reduce(function(n,o){return n.length>o.length?n:o},0);t.globals.yAxisScale[0].niceMax=i,t.globals.yAxisScale[0].niceMin=i}}}]),M}(),Ee=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"getLabel",value:function(t,i,n,o){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",h=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],g=this.w,f=void 0===t[o]?"":t[o],x=f,y=g.globals.xLabelFormatter,w=g.config.xaxis.labels.formatter,C=!1,E=new Zi(this.ctx),k=f;h&&(x=E.xLabelFormat(y,f,k,{i:o,dateFormatter:new ht(this.ctx).formatDate,w:g}),void 0!==w&&(x=w(f,t[o],{i:o,dateFormatter:new ht(this.ctx).formatDate,w:g})));var I=function(p){var _=null;return i.forEach(function(T){"month"===T.unit?_="year":"day"===T.unit?_="month":"hour"===T.unit?_="day":"minute"===T.unit&&(_="hour")}),_===p};i.length>0?(C=I(i[o].unit),n=i[o].position,x=i[o].value):"datetime"===g.config.xaxis.type&&void 0===w&&(x=""),void 0===x&&(x=""),x=Array.isArray(x)?x:x.toString();var P=new j(this.ctx),O={};O=g.globals.rotateXLabels&&h?P.getTextRects(x,parseInt(u,10),null,"rotate(".concat(g.config.xaxis.labels.rotate," 0 0)"),!1):P.getTextRects(x,parseInt(u,10));var D=!g.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(x)&&(0===x.indexOf("NaN")||0===x.toLowerCase().indexOf("invalid")||x.toLowerCase().indexOf("infinity")>=0||l.indexOf(x)>=0&&D)&&(x=""),{x:n,text:x,textRect:O,isBold:C}}},{key:"checkLabelBasedOnTickamount",value:function(t,i,n){var o=this.w,l=o.config.xaxis.tickAmount;return"dataPoints"===l&&(l=Math.round(o.globals.gridWidth/120)),l>n||t%Math.round(n/(l+1))==0||(i.text=""),i}},{key:"checkForOverflowingLabels",value:function(t,i,n,o,l){var u=this.w;if(0===t&&u.globals.skipFirstTimelinelabel&&(i.text=""),t===n-1&&u.globals.skipLastTimelinelabel&&(i.text=""),u.config.xaxis.labels.hideOverlappingLabels&&o.length>0){var h=l[l.length-1];i.x<h.textRect.width/(u.globals.rotateXLabels?Math.abs(u.config.xaxis.labels.rotate)/12:1.01)+h.x&&(i.text="")}return i}},{key:"checkForReversedLabels",value:function(t,i){var n=this.w;return n.config.yaxis[t]&&n.config.yaxis[t].reversed&&i.reverse(),i}},{key:"isYAxisHidden",value:function(t){var i=this.w,n=new ye(this.ctx);return!i.config.yaxis[t].show||!i.config.yaxis[t].showForNullSeries&&n.isSeriesNull(t)&&-1===i.globals.collapsedSeriesIndices.indexOf(t)}},{key:"getYAxisForeColor",value:function(t,i){var n=this.w;return Array.isArray(t)&&n.globals.yAxisScale[i]&&this.ctx.theme.pushExtraColors(t,n.globals.yAxisScale[i].result.length,!1),t}},{key:"drawYAxisTicks",value:function(t,i,n,o,l,u,h){var g=this.w,f=new j(this.ctx),x=g.globals.translateY;if(o.show&&i>0){!0===g.config.yaxis[l].opposite&&(t+=o.width);for(var y=i;y>=0;y--){var w=x+i/10+g.config.yaxis[l].labels.offsetY-1;g.globals.isBarHorizontal&&(w=u*y),"heatmap"===g.config.chart.type&&(w+=u/2);var C=f.drawLine(t+n.offsetX-o.width+o.offsetX,w+o.offsetY,t+n.offsetX+o.offsetX,w+o.offsetY,o.color);h.add(C),x+=u}}}}]),M}(),Ve=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"scaleSvgNode",value:function(t,i){var n=parseFloat(t.getAttributeNS(null,"width")),o=parseFloat(t.getAttributeNS(null,"height"));t.setAttributeNS(null,"width",n*i),t.setAttributeNS(null,"height",o*i),t.setAttributeNS(null,"viewBox","0 0 "+n+" "+o)}},{key:"fixSvgStringForIe11",value:function(t){if(!Y.isIE11())return t.replace(/&nbsp;/g,"&#160;");var i=0,n=t.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(o){return 2==++i?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':o});return(n=n.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(t){null==t&&(t=1);var i=this.w.globals.dom.Paper.svg();if(1!==t){var n=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(n,t),i=(new XMLSerializer).serializeToString(n)}return this.fixSvgStringForIe11(i)}},{key:"cleanup",value:function(){var t=this.w,i=t.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),n=t.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(o,function(l){l.setAttribute("width",0)}),i&&i[0]&&(i[0].setAttribute("x",-500),i[0].setAttribute("x1",-500),i[0].setAttribute("x2",-500)),n&&n[0]&&(n[0].setAttribute("y",-100),n[0].setAttribute("y1",-100),n[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var t=this.getSvgString(),i=new Blob([t],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(i)}},{key:"dataURI",value:function(t){var i=this;return new Promise(function(n){var o=i.w,l=t?t.scale||t.width/o.globals.svgWidth:1;i.cleanup();var u=document.createElement("canvas");u.width=o.globals.svgWidth*l,u.height=parseInt(o.globals.dom.elWrap.style.height,10)*l;var h="transparent"===o.config.chart.background?"#fff":o.config.chart.background,g=u.getContext("2d");g.fillStyle=h,g.fillRect(0,0,u.width*l,u.height*l);var f=i.getSvgString(l);if(window.canvg&&Y.isIE11()){var x=window.canvg.Canvg.fromString(g,f,{ignoreClear:!0,ignoreDimensions:!0});x.start();var y=u.msToBlob();x.stop(),n({blob:y})}else{var w="data:image/svg+xml,"+encodeURIComponent(f),C=new Image;C.crossOrigin="anonymous",C.onload=function(){if(g.drawImage(C,0,0),u.msToBlob){var E=u.msToBlob();n({blob:E})}else{var k=u.toDataURL("image/png");n({imgURI:k})}},C.src=w}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var t=this;this.dataURI().then(function(i){var n=i.imgURI,o=i.blob;o?navigator.msSaveOrOpenBlob(o,t.w.globals.chartID+".png"):t.triggerDownload(n,t.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(t){var i=this,n=t.series,o=t.fileName,l=t.columnDelimiter,u=void 0===l?",":l,h=t.lineDelimiter,g=void 0===h?"\n":h,f=this.w;n||(n=f.config.series);var x=[],y=[],w="",C=new yn(this.ctx),E=new Ee(this.ctx),k=function(I){var P="";if(f.globals.axisCharts){if("category"===f.config.xaxis.type||f.config.xaxis.convertedCatToNumeric)if(f.globals.isBarHorizontal){var O=f.globals.yLabelFormatters[0],D=new pe(i.ctx).getActiveConfigSeriesIndex();P=O(f.globals.labels[I],{seriesIndex:D,dataPointIndex:I,w:f})}else P=E.getLabel(f.globals.labels,f.globals.timescaleLabels,0,I).text;"datetime"===f.config.xaxis.type&&(f.config.xaxis.categories.length?P=f.config.xaxis.categories[I]:f.config.labels.length&&(P=f.config.labels[I]))}else P=f.config.labels[I];return Array.isArray(P)&&(P=P.join(" ")),Y.isNumber(P)?P:P.split(u).join("")};x.push(f.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===f.config.chart.type?(x.push("minimum"),x.push("q1"),x.push("median"),x.push("q3"),x.push("maximum")):"candlestick"===f.config.chart.type?(x.push("open"),x.push("high"),x.push("low"),x.push("close")):"rangeBar"===f.config.chart.type?(x.push("minimum"),x.push("maximum")):n.map(function(I,P){var O=I.name?I.name:"series-".concat(P);f.globals.axisCharts&&x.push(O.split(u).join("")?O.split(u).join(""):"series-".concat(P))}),f.globals.axisCharts||(x.push(f.config.chart.toolbar.export.csv.headerValue),y.push(x.join(u))),n.map(function(I,P){f.globals.axisCharts?function(O,D){if(x.length&&0===D&&y.push(x.join(u)),O.data&&O.data.length)for(var p=0;p<O.data.length;p++){x=[];var _=k(p);if(_||(C.isFormatXY()?_=n[D].data[p].x:C.isFormat2DArray()&&(_=n[D].data[p]?n[D].data[p][0]:"")),0===D){x.push("datetime"===f.config.xaxis.type&&String(_).length>=10?f.config.chart.toolbar.export.csv.dateFormatter(_):Y.isNumber(_)?_:_.split(u).join(""));for(var T=0;T<f.globals.series.length;T++)C.isFormatXY()?x.push(n[T].data[p].y):x.push(f.globals.series[T][p])}("candlestick"===f.config.chart.type||O.type&&"candlestick"===O.type)&&(x.pop(),x.push(f.globals.seriesCandleO[D][p]),x.push(f.globals.seriesCandleH[D][p]),x.push(f.globals.seriesCandleL[D][p]),x.push(f.globals.seriesCandleC[D][p])),("boxPlot"===f.config.chart.type||O.type&&"boxPlot"===O.type)&&(x.pop(),x.push(f.globals.seriesCandleO[D][p]),x.push(f.globals.seriesCandleH[D][p]),x.push(f.globals.seriesCandleM[D][p]),x.push(f.globals.seriesCandleL[D][p]),x.push(f.globals.seriesCandleC[D][p])),"rangeBar"===f.config.chart.type&&(x.pop(),x.push(f.globals.seriesRangeStart[D][p]),x.push(f.globals.seriesRangeEnd[D][p])),x.length&&y.push(x.join(u))}}(I,P):((x=[]).push(f.globals.labels[P].split(u).join("")),x.push(f.globals.series[P]),y.push(x.join(u)))}),w+=y.join(g),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+w),o||f.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(t,i,n){var o=document.createElement("a");o.href=t,o.download=(i||this.w.globals.chartID)+n,document.body.appendChild(o),o.click(),document.body.removeChild(o)}}]),M}(),Ki=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w;var i=this.w;this.axesUtils=new Ee(t),this.xaxisLabels=i.globals.labels.slice(),i.globals.timescaleLabels.length>0&&!i.globals.isBarHorizontal&&(this.xaxisLabels=i.globals.timescaleLabels.slice()),i.config.xaxis.overwriteCategories&&(this.xaxisLabels=i.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===i.config.xaxis.position?0:i.globals.gridHeight+1,this.offY=this.offY+i.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.xaxisBorderWidth=i.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=i.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?i.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=i.config.xaxis.axisBorder.height,this.yaxis=i.config.yaxis[0]}return ne(M,[{key:"drawXaxis",value:function(){var t=this.w,i=new j(this.ctx),n=i.group({class:"apexcharts-xaxis",transform:"translate(".concat(t.config.xaxis.offsetX,", ").concat(t.config.xaxis.offsetY,")")}),o=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});n.add(o);for(var l=[],u=0;u<this.xaxisLabels.length;u++)l.push(this.xaxisLabels[u]);if(this.drawXAxisLabelAndGroup(!0,i,o,l,t.globals.isXNumeric,function(E,k){return k}),t.globals.hasGroups){var h=t.globals.groups;l=[];for(var g=0;g<h.length;g++)l.push(h[g].title);var f={};t.config.xaxis.group.style&&(f.xaxisFontSize=t.config.xaxis.group.style.fontSize,f.xaxisFontFamily=t.config.xaxis.group.style.fontFamily,f.xaxisForeColors=t.config.xaxis.group.style.colors,f.fontWeight=t.config.xaxis.group.style.fontWeight,f.cssClass=t.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,i,o,l,!1,function(E,k){return h[E].cols*k},f)}if(void 0!==t.config.xaxis.title.text){var x=i.group({class:"apexcharts-xaxis-title"}),y=i.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+t.globals.xAxisLabelsHeight+t.config.xaxis.title.offsetY,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});x.add(y),n.add(x)}if(t.config.xaxis.axisBorder.show){var w=t.globals.barPadForNumericAxis,C=i.drawLine(t.globals.padHorizontal+t.config.xaxis.axisBorder.offsetX-w,this.offY,this.xaxisBorderWidth+w,this.offY,t.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);n.add(C)}return n}},{key:"drawXAxisLabelAndGroup",value:function(t,i,n,o,l,u){var h,g=this,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},x=[],y=[],w=this.w,C=f.xaxisFontSize||this.xaxisFontSize,E=f.xaxisFontFamily||this.xaxisFontFamily,k=f.xaxisForeColors||this.xaxisForeColors,I=f.fontWeight||w.config.xaxis.labels.style.fontWeight,P=f.cssClass||w.config.xaxis.labels.style.cssClass,O=w.globals.padHorizontal,D=o.length,p="category"===w.config.xaxis.type?w.globals.dataPoints:D;if(l){var _=p>1?p-1:p;O=O+u(0,h=w.globals.gridWidth/_)/2+w.config.xaxis.labels.offsetX}else O=O+u(0,h=w.globals.gridWidth/p)+w.config.xaxis.labels.offsetX;for(var T=function(z){var K=O-u(z,h)/2+w.config.xaxis.labels.offsetX;0===z&&1===D&&h/2===O&&1===p&&(K=w.globals.gridWidth/2);var W=g.axesUtils.getLabel(o,w.globals.timescaleLabels,K,z,x,C,t),ee=28;if(w.globals.rotateXLabels&&t&&(ee=22),t||(ee=ee+parseFloat(C)+(w.globals.xAxisLabelsHeight-w.globals.xAxisGroupLabelsHeight)+(w.globals.rotateXLabels?10:0)),W=void 0!==w.config.xaxis.tickAmount&&"dataPoints"!==w.config.xaxis.tickAmount&&"datetime"!==w.config.xaxis.type?g.axesUtils.checkLabelBasedOnTickamount(z,W,D):g.axesUtils.checkForOverflowingLabels(z,W,D,x,y),t&&W.text&&w.globals.xaxisLabelsCount++,w.config.xaxis.labels.show){var Q=i.drawText({x:W.x,y:g.offY+w.config.xaxis.labels.offsetY+ee-("top"===w.config.xaxis.position?w.globals.xAxisHeight+w.config.xaxis.axisTicks.height-2:0),text:W.text,textAnchor:"middle",fontWeight:W.isBold?600:I,fontSize:C,fontFamily:E,foreColor:Array.isArray(k)?t&&w.config.xaxis.convertedCatToNumeric?k[w.globals.minX+z-1]:k[z]:k,isPlainText:!1,cssClass:(t?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+P});if(n.add(Q),t){var ie=document.createElementNS(w.globals.SVGNS,"title");ie.textContent=Array.isArray(W.text)?W.text.join(" "):W.text,Q.node.appendChild(ie),""!==W.text&&(x.push(W.text),y.push(W))}}z<D-1&&(O+=u(z+1,h))},L=0;L<=D-1;L++)T(L)}},{key:"drawXaxisInversed",value:function(t){var i,n,o=this,l=this.w,u=new j(this.ctx),h=l.config.yaxis[0].opposite?l.globals.translateYAxisX[t]:0,g=u.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:t}),f=u.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+h+", 0)"});g.add(f);var x=[];if(l.config.yaxis[t].show)for(var y=0;y<this.xaxisLabels.length;y++)x.push(this.xaxisLabels[y]);n=-(i=l.globals.gridHeight/x.length)/2.2;var w=l.globals.yLabelFormatters[0],C=l.config.yaxis[0].labels;if(C.show)for(var E=function(_){var T=void 0===x[_]?"":x[_];T=w(T,{seriesIndex:t,dataPointIndex:_,w:l});var L=o.axesUtils.getYAxisForeColor(C.style.colors,t),z=0;Array.isArray(T)&&(z=T.length/2*parseInt(C.style.fontSize,10));var K=u.drawText({x:C.offsetX-15,y:n+i+C.offsetY-z,text:T,textAnchor:o.yaxis.opposite?"start":"end",foreColor:Array.isArray(L)?L[_]:L,fontSize:C.style.fontSize,fontFamily:C.style.fontFamily,fontWeight:C.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+C.style.cssClass,maxWidth:C.maxWidth});f.add(K);var W=document.createElementNS(l.globals.SVGNS,"title");if(W.textContent=Array.isArray(T)?T.join(" "):T,K.node.appendChild(W),0!==l.config.yaxis[t].labels.rotate){var ee=u.rotateAroundCenter(K.node);K.node.setAttribute("transform","rotate(".concat(l.config.yaxis[t].labels.rotate," 0 ").concat(ee.y,")"))}n+=i},k=0;k<=x.length-1;k++)E(k);if(void 0!==l.config.yaxis[0].title.text){var I=u.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+h+", 0)"}),P=u.drawText({x:0,y:l.globals.gridHeight/2,text:l.config.yaxis[0].title.text,textAnchor:"middle",foreColor:l.config.yaxis[0].title.style.color,fontSize:l.config.yaxis[0].title.style.fontSize,fontWeight:l.config.yaxis[0].title.style.fontWeight,fontFamily:l.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+l.config.yaxis[0].title.style.cssClass});I.add(P),g.add(I)}var O=0;this.isCategoryBarHorizontal&&l.config.yaxis[0].opposite&&(O=l.globals.gridWidth);var D=l.config.xaxis.axisBorder;if(D.show){var p=u.drawLine(l.globals.padHorizontal+D.offsetX+O,1+D.offsetY,l.globals.padHorizontal+D.offsetX+O,l.globals.gridHeight+D.offsetY,D.color,0);g.add(p)}return l.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(O,x.length,l.config.yaxis[0].axisBorder,l.config.yaxis[0].axisTicks,0,i,g),g}},{key:"drawXaxisTicks",value:function(t,i,n){var o=this.w,l=t;if(!(t<0||t-2>o.globals.gridWidth)){var u=this.offY+o.config.xaxis.axisTicks.offsetY;if(i=i+u+o.config.xaxis.axisTicks.height,"top"===o.config.xaxis.position&&(i=u-o.config.xaxis.axisTicks.height),o.config.xaxis.axisTicks.show){var h=new j(this.ctx).drawLine(t+o.config.xaxis.axisTicks.offsetX,u+o.config.xaxis.offsetY,l+o.config.xaxis.axisTicks.offsetX,i+o.config.xaxis.offsetY,o.config.xaxis.axisTicks.color);n.add(h),h.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var t=this.w,i=[],n=this.xaxisLabels.length,o=t.globals.padHorizontal;if(t.globals.timescaleLabels.length>0)for(var l=0;l<n;l++)i.push(o=this.xaxisLabels[l].position);else for(var u=n,h=0;h<u;h++){var g=u;t.globals.isXNumeric&&"bar"!==t.config.chart.type&&(g-=1),i.push(o+=t.globals.gridWidth/g)}return i}},{key:"xAxisLabelCorrections",value:function(){var t=this.w,i=new j(this.ctx),n=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),l=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),u=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(t.globals.rotateXLabels||t.config.xaxis.labels.rotateAlways)for(var h=0;h<o.length;h++){var g=i.rotateAroundCenter(o[h]);g.y=g.y-1,g.x=g.x+1,o[h].setAttribute("transform","rotate(".concat(t.config.xaxis.labels.rotate," ").concat(g.x," ").concat(g.y,")")),o[h].setAttribute("text-anchor","end"),n.setAttribute("transform","translate(0, ".concat(-10,")")),t.config.xaxis.labels.trim&&Array.prototype.forEach.call(o[h].childNodes,function(C){i.placeTextWithEllipsis(C,C.textContent,t.globals.xAxisLabelsHeight-("bottom"===t.config.legend.position?20:10))})}else!function(){for(var C=t.globals.gridWidth/(t.globals.labels.length+1),E=0;E<o.length;E++)t.config.xaxis.labels.trim&&"datetime"!==t.config.xaxis.type&&Array.prototype.forEach.call(o[E].childNodes,function(I){i.placeTextWithEllipsis(I,I.textContent,C)})}();if(l.length>0){var x=l[l.length-1].getBBox(),y=l[0].getBBox();x.x<-20&&l[l.length-1].parentNode.removeChild(l[l.length-1]),y.x+y.width>t.globals.gridWidth&&!t.globals.isBarHorizontal&&l[0].parentNode.removeChild(l[0]);for(var w=0;w<u.length;w++)i.placeTextWithEllipsis(u[w],u[w].textContent,t.config.yaxis[0].labels.maxWidth-(t.config.yaxis[0].title.text?2*parseFloat(t.config.yaxis[0].title.style.fontSize):0)-15)}}}]),M}(),oi=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w;var i=this.w;this.xaxisLabels=i.globals.labels.slice(),this.axesUtils=new Ee(t),this.isRangeBar=i.globals.seriesRangeBar.length,i.globals.timescaleLabels.length>0&&(this.xaxisLabels=i.globals.timescaleLabels.slice())}return ne(M,[{key:"drawGridArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this.w,n=new j(this.ctx);null===t&&(t=n.group({class:"apexcharts-grid"}));var o=n.drawLine(i.globals.padHorizontal,1,i.globals.padHorizontal,i.globals.gridHeight,"transparent"),l=n.drawLine(i.globals.padHorizontal,i.globals.gridHeight,i.globals.gridWidth,i.globals.gridHeight,"transparent");return t.add(l),t.add(o),t}},{key:"drawGrid",value:function(){var t=null;return this.w.globals.axisCharts&&(t=this.renderGrid(),this.drawGridArea(t.el)),t}},{key:"createGridMask",value:function(){var t=this.w,i=t.globals,n=new j(this.ctx),o=Array.isArray(t.config.stroke.width)?0:t.config.stroke.width;if(Array.isArray(t.config.stroke.width)){var l=0;t.config.stroke.width.forEach(function(y){l=Math.max(l,y)}),o=l}i.dom.elGridRectMask=document.createElementNS(i.SVGNS,"clipPath"),i.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(i.cuid)),i.dom.elGridRectMarkerMask=document.createElementNS(i.SVGNS,"clipPath"),i.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(i.cuid)),i.dom.elForecastMask=document.createElementNS(i.SVGNS,"clipPath"),i.dom.elForecastMask.setAttribute("id","forecastMask".concat(i.cuid)),i.dom.elNonForecastMask=document.createElementNS(i.SVGNS,"clipPath"),i.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(i.cuid));var u=t.config.chart.type,h=0,g=0;("bar"===u||"rangeBar"===u||"candlestick"===u||"boxPlot"===u||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&(g=t.config.grid.padding.right,i.barPadForNumericAxis>(h=t.config.grid.padding.left)&&(h=i.barPadForNumericAxis,g=i.barPadForNumericAxis)),i.dom.elGridRect=n.drawRect(-o/2-h-2,-o/2,i.gridWidth+o+g+h+4,i.gridHeight+o,0,"#fff");var f=t.globals.markers.largestSize+1;i.dom.elGridRectMarker=n.drawRect(2*-f,2*-f,i.gridWidth+4*f,i.gridHeight+4*f,0,"#fff"),i.dom.elGridRectMask.appendChild(i.dom.elGridRect.node),i.dom.elGridRectMarkerMask.appendChild(i.dom.elGridRectMarker.node);var x=i.dom.baseEl.querySelector("defs");x.appendChild(i.dom.elGridRectMask),x.appendChild(i.dom.elForecastMask),x.appendChild(i.dom.elNonForecastMask),x.appendChild(i.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(t){var i=t.i,n=t.x1,f=this.w;if(!(0===i&&f.globals.skipFirstTimelinelabel||i===t.xCount-1&&f.globals.skipLastTimelinelabel&&!f.config.xaxis.labels.formatter||"radar"===f.config.chart.type)){f.config.grid.xaxis.lines.show&&this._drawGridLine({x1:n,y1:t.y1,x2:t.x2,y2:t.y2,parent:t.parent});var x=0;if(f.globals.hasGroups&&"between"===f.config.xaxis.tickPlacement){var y=f.globals.groups;if(y){for(var w=0,C=0;w<i&&C<y.length;C++)w+=y[C].cols;w===i&&(x=.6*f.globals.xAxisLabelsHeight)}}new Ki(this.ctx).drawXaxisTicks(n,x,this.elg)}}},{key:"_drawGridLine",value:function(t){var i=t.x1,n=t.y1,o=t.x2,l=t.y2,u=t.parent,h=this.w,g=u.node.classList.contains("apexcharts-gridlines-horizontal"),f=h.config.grid.strokeDashArray,x=h.globals.barPadForNumericAxis,y=new j(this).drawLine(i-(g?x:0),n,o+(g?x:0),l,h.config.grid.borderColor,f);y.node.classList.add("apexcharts-gridline"),u.add(y)}},{key:"_drawGridBandRect",value:function(t){var i=t.c,n=t.x1,o=t.y1,l=t.x2,u=t.y2,h=t.type,g=this.w,f=new j(this.ctx),x=g.globals.barPadForNumericAxis;if("column"!==h||"datetime"!==g.config.xaxis.type){var w=f.drawRect(n-("row"===h?x:0),o,l+("row"===h?2*x:0),u,0,g.config.grid[h].colors[i],g.config.grid[h].opacity);this.elg.add(w),w.attr("clip-path","url(#gridRectMask".concat(g.globals.cuid,")")),w.node.classList.add("apexcharts-grid-".concat(h))}}},{key:"_drawXYLines",value:function(t){var i=this,n=t.xCount,o=t.tickAmount,l=this.w;if(l.config.grid.xaxis.lines.show||l.config.xaxis.axisTicks.show){var u,h=l.globals.padHorizontal,g=l.globals.gridHeight;l.globals.timescaleLabels.length?function(E){for(var k=E.xC,P=E.y1,D=E.y2,p=0;p<k;p++)i._drawGridLines({i:p,x1:i.xaxisLabels[p].position,y1:P,x2:i.xaxisLabels[p].position,y2:D,xCount:n,parent:i.elgridLinesV})}({xC:n,x1:h,y1:0,x2:u,y2:g}):(l.globals.isXNumeric&&(n=l.globals.xAxisScale.result.length),l.config.xaxis.convertedCatToNumeric&&(n=l.globals.xaxisLabelsCount),function(E){var k=E.xC,I=E.x1,P=E.y1,O=E.x2,D=E.y2;if(void 0!==l.config.xaxis.tickAmount&&"dataPoints"!==l.config.xaxis.tickAmount&&"on"===l.config.xaxis.tickPlacement)l.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach(function(_,T){var L=_.getBBox();i._drawGridLines({i:T,x1:L.x+L.width/2,y1:P,x2:L.x+L.width/2,y2:D,xCount:n,parent:i.elgridLinesV})});else for(var p=0;p<k+(l.globals.isXNumeric?0:1);p++)0===p&&1===k&&1===l.globals.dataPoints&&(O=I=l.globals.gridWidth/2),i._drawGridLines({i:p,x1:I,y1:P,x2:O,y2:D,xCount:n,parent:i.elgridLinesV}),O=I+=l.globals.gridWidth/(l.globals.isXNumeric?k-1:k)}({xC:n,x1:h,y1:0,x2:u,y2:g}))}if(l.config.grid.yaxis.lines.show){var f=0,x=0,y=l.globals.gridWidth,w=o+1;this.isRangeBar&&(w=l.globals.labels.length);for(var C=0;C<w+(this.isRangeBar?1:0);C++)this._drawGridLine({x1:0,y1:f,x2:y,y2:x,parent:this.elgridLinesH}),x=f+=l.globals.gridHeight/(this.isRangeBar?w:o)}}},{key:"_drawInvertedXYLines",value:function(t){var i=t.xCount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show)for(var o,l=n.globals.padHorizontal,u=n.globals.gridHeight,h=0;h<i+1;h++)n.config.grid.xaxis.lines.show&&this._drawGridLine({x1:l,y1:0,x2:o,y2:u,parent:this.elgridLinesV}),new Ki(this.ctx).drawXaxisTicks(l,0,this.elg),o=l=l+n.globals.gridWidth/i+.3;if(n.config.grid.yaxis.lines.show)for(var g=0,f=0,x=n.globals.gridWidth,y=0;y<n.globals.dataPoints+1;y++)this._drawGridLine({x1:0,y1:g,x2:x,y2:f,parent:this.elgridLinesH}),f=g+=n.globals.gridHeight/n.globals.dataPoints}},{key:"renderGrid",value:function(){var t=this.w,i=new j(this.ctx);this.elg=i.group({class:"apexcharts-grid"}),this.elgridLinesH=i.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=i.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),t.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var n,o=t.globals.yAxisScale.length?t.globals.yAxisScale[0].result.length-1:5,l=0;l<t.globals.series.length&&(void 0!==t.globals.yAxisScale[l]&&(o=t.globals.yAxisScale[l].result.length-1),!(o>2));l++);return!t.globals.isBarHorizontal||this.isRangeBar?(n=this.xaxisLabels.length,this.isRangeBar&&(o=t.globals.labels.length,t.config.xaxis.tickAmount&&t.config.xaxis.labels.formatter&&(n=t.config.xaxis.tickAmount)),this._drawXYLines({xCount:n,tickAmount:o})):this._drawInvertedXYLines({xCount:n=o,tickAmount:o=t.globals.xTickAmount}),this.drawGridBands(n,o),{el:this.elg,xAxisTickWidth:t.globals.gridWidth/n}}},{key:"drawGridBands",value:function(t,i){var n=this.w;if(void 0!==n.config.grid.row.colors&&n.config.grid.row.colors.length>0)for(var o=0,l=n.globals.gridHeight/i,u=n.globals.gridWidth,h=0,g=0;h<i;h++,g++)g>=n.config.grid.row.colors.length&&(g=0),this._drawGridBandRect({c:g,x1:0,y1:o,x2:u,y2:l,type:"row"}),o+=n.globals.gridHeight/i;if(void 0!==n.config.grid.column.colors&&n.config.grid.column.colors.length>0)for(var f=n.globals.isBarHorizontal||"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric?t:t-1,x=n.globals.padHorizontal,y=n.globals.padHorizontal+n.globals.gridWidth/f,w=n.globals.gridHeight,C=0,E=0;C<t;C++,E++)E>=n.config.grid.column.colors.length&&(E=0),this._drawGridBandRect({c:E,x1:x,y1:0,x2:y,y2:w,type:"column"}),x+=n.globals.gridWidth/f}}]),M}(),Ei=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"niceScale",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4?arguments[4]:void 0,u=this.w,h=Math.abs(i-t);if("dataPoints"===(n=this._adjustTicksForSmallRange(n,o,h))&&(n=u.globals.dataPoints-1),t===Number.MIN_VALUE&&0===i||!Y.isNumber(t)&&!Y.isNumber(i)||t===Number.MIN_VALUE&&i===-Number.MAX_VALUE){var g=this.linearScale(t=0,i=n,n);return g}t>i?(console.warn("axis.min cannot be greater than axis.max"),i=t+.1):t===i&&(t=0===t?0:t-.5,i=0===i?2:i+.5);var f=[];h<1&&l&&("candlestick"===u.config.chart.type||"candlestick"===u.config.series[o].type||"boxPlot"===u.config.chart.type||"boxPlot"===u.config.series[o].type||u.globals.isRangeData)&&(i*=1.01);var x=n+1;x<2?x=2:x>2&&(x-=2);var y=h/x,w=Math.floor(Y.log10(y)),C=Math.pow(10,w),E=Math.round(y/C);E<1&&(E=1);var k=E*C,I=k*Math.floor(t/k),P=k*Math.ceil(i/k),O=I;if(l&&h>2){for(;f.push(O),!((O+=k)>P););return{result:f,niceMin:f[0],niceMax:f[f.length-1]}}var D=t;(f=[]).push(D);for(var p=Math.abs(i-t)/n,_=0;_<=n;_++)f.push(D+=p);return f[f.length-2]>=i&&f.pop(),{result:f,niceMin:f[0],niceMax:f[f.length-1]}}},{key:"linearScale",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3?arguments[3]:void 0,l=Math.abs(i-t);"dataPoints"===(n=this._adjustTicksForSmallRange(n,o,l))&&(n=this.w.globals.dataPoints-1);var u=l/n;n===Number.MAX_VALUE&&(n=10,u=1);for(var h=[],g=t;n>=0;)h.push(g),g+=u,n-=1;return{result:h,niceMin:h[0],niceMax:h[h.length-1]}}},{key:"logarithmicScaleNice",value:function(t,i,n){i<=0&&(i=Math.max(t,n)),t<=0&&(t=Math.min(i,n));for(var o=[],l=Math.ceil(Math.log(i)/Math.log(n)+1),u=Math.floor(Math.log(t)/Math.log(n));u<l;u++)o.push(Math.pow(n,u));return{result:o,niceMin:o[0],niceMax:o[o.length-1]}}},{key:"logarithmicScale",value:function(t,i,n){i<=0&&(i=Math.max(t,n)),t<=0&&(t=Math.min(i,n));for(var o=[],l=Math.log(i)/Math.log(n),u=Math.log(t)/Math.log(n),h=l-u,g=Math.round(h),f=h/g,x=0,y=u;x<g;x++,y+=f)o.push(Math.pow(n,y));return o.push(Math.pow(n,l)),{result:o,niceMin:t,niceMax:i}}},{key:"_adjustTicksForSmallRange",value:function(t,i,n){var o=t;if(void 0!==i&&this.w.config.yaxis[i].labels.formatter&&void 0===this.w.config.yaxis[i].tickAmount){var l=this.w.config.yaxis[i].labels.formatter(1);Y.isNumber(Number(l))&&!Y.isFloat(l)&&(o=Math.ceil(n))}return o<t?o:t}},{key:"setYScaleForIndex",value:function(t,i,n){var o=this.w.globals,l=this.w.config,u=o.isBarHorizontal?l.xaxis:l.yaxis[t];void 0===o.yAxisScale[t]&&(o.yAxisScale[t]=[]);var h=Math.abs(n-i);u.logarithmic&&h<=5&&(o.invalidLogScale=!0),u.logarithmic&&h>5?(o.allSeriesCollapsed=!1,o.yAxisScale[t]=this.logarithmicScale(i,n,u.logBase),o.yAxisScale[t]=u.forceNiceScale?this.logarithmicScaleNice(i,n,u.logBase):this.logarithmicScale(i,n,u.logBase)):n!==-Number.MAX_VALUE&&Y.isNumber(n)?(o.allSeriesCollapsed=!1,o.yAxisScale[t]=void 0===u.min&&void 0===u.max||u.forceNiceScale?this.niceScale(i,n,u.tickAmount?u.tickAmount:h<5&&h>1?h+1:5,t,void 0===l.yaxis[t].max&&void 0===l.yaxis[t].min||l.yaxis[t].forceNiceScale):this.linearScale(i,n,u.tickAmount,t)):o.yAxisScale[t]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(t,i){var n=this.w,o=n.globals,l=n.config.xaxis,u=Math.abs(i-t);return o.xAxisScale=i!==-Number.MAX_VALUE&&Y.isNumber(i)?this.linearScale(t,i,l.tickAmount?l.tickAmount:u<5&&u>1?u+1:5,0):this.linearScale(0,5,5),o.xAxisScale}},{key:"setMultipleYScales",value:function(){var t=this,i=this.w.globals,n=this.w.config,o=i.minYArr.concat([]),l=i.maxYArr.concat([]),u=[];n.yaxis.forEach(function(h,g){var f=g;n.series.forEach(function(w,C){w.name===h.seriesName&&(f=C,u.push(g!==C?{index:C,similarIndex:g,alreadyExists:!0}:{index:C}))}),t.setYScaleForIndex(g,o[f],l[f])}),this.sameScaleInMultipleAxes(o,l,u)}},{key:"sameScaleInMultipleAxes",value:function(t,i,n){var o=this,l=this.w.config,u=this.w.globals,h=[];n.forEach(function(k){k.alreadyExists&&(void 0===h[k.index]&&(h[k.index]=[]),h[k.index].push(k.index),h[k.index].push(k.similarIndex))}),u.yAxisSameScaleIndices=h,h.forEach(function(k,I){h.forEach(function(P,O){var D,p;I!==O&&(D=k,p=P,D.filter(function(_){return-1!==p.indexOf(_)})).length>0&&(h[I]=h[I].concat(h[O]))})});var g=h.map(function(k){return k.filter(function(I,P){return k.indexOf(I)===P})}).map(function(k){return k.sort()});h=h.filter(function(k){return!!k});var f=g.slice(),x=f.map(function(k){return JSON.stringify(k)});f=f.filter(function(k,I){return x.indexOf(JSON.stringify(k))===I});var y=[],w=[];t.forEach(function(k,I){f.forEach(function(P,O){P.indexOf(I)>-1&&(void 0===y[O]&&(y[O]=[],w[O]=[]),y[O].push({key:I,value:k}),w[O].push({key:I,value:i[I]}))})});var C=Array.apply(null,Array(f.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),E=Array.apply(null,Array(f.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);y.forEach(function(k,I){k.forEach(function(P,O){C[I]=Math.min(P.value,C[I])})}),w.forEach(function(k,I){k.forEach(function(P,O){E[I]=Math.max(P.value,E[I])})}),t.forEach(function(k,I){w.forEach(function(P,O){var D=C[O],p=E[O];l.chart.stacked&&(p=0,P.forEach(function(_,T){_.value!==-Number.MAX_VALUE&&(p+=_.value),D!==Number.MIN_VALUE&&(D+=y[O][T].value)})),P.forEach(function(_,T){P[T].key===I&&(void 0!==l.yaxis[I].min&&(D="function"==typeof l.yaxis[I].min?l.yaxis[I].min(u.minY):l.yaxis[I].min),void 0!==l.yaxis[I].max&&(p="function"==typeof l.yaxis[I].max?l.yaxis[I].max(u.maxY):l.yaxis[I].max),o.setYScaleForIndex(I,D,p))})})})}},{key:"autoScaleY",value:function(t,i,n){t||(t=this);var o=t.w;if(o.globals.isMultipleYAxis||o.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),i;var l=o.globals.seriesX[0],u=o.config.chart.stacked;return i.forEach(function(h,g){for(var f=0,x=0;x<l.length;x++)if(l[x]>=n.xaxis.min){f=x;break}var y,w,C=o.globals.minYArr[g],E=o.globals.maxYArr[g],k=o.globals.stackedSeriesTotals;o.globals.series.forEach(function(I,P){var O=I[f];u?(y=w=O=k[f],k.forEach(function(D,p){l[p]<=n.xaxis.max&&l[p]>=n.xaxis.min&&(D>w&&null!==D&&(w=D),I[p]<y&&null!==I[p]&&(y=I[p]))})):(y=w=O,I.forEach(function(D,p){if(l[p]<=n.xaxis.max&&l[p]>=n.xaxis.min){var _=D,T=D;o.globals.series.forEach(function(L,z){null!==D&&(_=Math.min(L[p],_),T=Math.max(L[p],T))}),T>w&&null!==T&&(w=T),_<y&&null!==_&&(y=_)}})),void 0===y&&void 0===w&&(y=C,w=E),w*=w<0?.9:1.1,0==(y*=y<0?1.1:.9)&&0===w&&(y=-1,w=1),w<0&&w<E&&(w=E),y<0&&y>C&&(y=C),i.length>1?(i[P].min=void 0===h.min?y:h.min,i[P].max=void 0===h.max?w:h.max):(i[0].min=void 0===h.min?y:h.min,i[0].max=void 0===h.max?w:h.max)})}),i}}]),M}(),bn=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w,this.scales=new Ei(t)}return ne(M,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=this.w.config,u=this.w.globals,h=-Number.MAX_VALUE,g=Number.MIN_VALUE;null===o&&(o=t+1);var f=u.series,x=f,y=f;"candlestick"===l.chart.type?(x=u.seriesCandleL,y=u.seriesCandleH):"boxPlot"===l.chart.type?(x=u.seriesCandleO,y=u.seriesCandleC):u.isRangeData&&(x=u.seriesRangeStart,y=u.seriesRangeEnd);for(var w=t;w<o;w++){u.dataPoints=Math.max(u.dataPoints,f[w].length),u.categoryLabels.length&&(u.dataPoints=u.categoryLabels.filter(function(k){return void 0!==k}).length);for(var C=0;C<u.series[w].length;C++){var E=f[w][C];null!==E&&Y.isNumber(E)?(void 0!==y[w][C]&&(h=Math.max(h,y[w][C]),i=Math.min(i,y[w][C])),void 0!==x[w][C]&&(i=Math.min(i,x[w][C]),n=Math.max(n,x[w][C])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||(void 0!==u.seriesCandleC[w][C]&&(h=Math.max(h,u.seriesCandleO[w][C]),h=Math.max(h,u.seriesCandleH[w][C]),h=Math.max(h,u.seriesCandleL[w][C]),h=Math.max(h,u.seriesCandleC[w][C]),"boxPlot"===this.w.config.chart.type&&(h=Math.max(h,u.seriesCandleM[w][C]))),!l.series[w].type||"candlestick"===l.series[w].type&&"boxPlot"===l.series[w].type||(h=Math.max(h,u.series[w][C]),i=Math.min(i,u.series[w][C])),n=h),u.seriesGoals[w]&&u.seriesGoals[w][C]&&Array.isArray(u.seriesGoals[w][C])&&u.seriesGoals[w][C].forEach(function(k){g!==Number.MIN_VALUE&&(g=Math.min(g,k.value),i=g),h=Math.max(h,k.value),n=h}),Y.isFloat(E)&&(E=Y.noExponents(E),u.yValueDecimal=Math.max(u.yValueDecimal,E.toString().split(".")[1].length)),g>x[w][C]&&x[w][C]<0&&(g=x[w][C])):u.hasNullValues=!0}}return"rangeBar"===l.chart.type&&u.seriesRangeStart.length&&u.isBarHorizontal&&(g=i),"bar"===l.chart.type&&(g<0&&h<0&&(h=0),g===Number.MIN_VALUE&&(g=0)),{minY:g,maxY:h,lowestY:i,highestY:n}}},{key:"setYRange",value:function(){var t=this.w.globals,i=this.w.config;t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE;var n=Number.MAX_VALUE;if(t.isMultipleYAxis)for(var o=0;o<t.series.length;o++){var l=this.getMinYMaxY(o,n,null,o+1);t.minYArr.push(l.minY),t.maxYArr.push(l.maxY),n=l.lowestY}var u=this.getMinYMaxY(0,n,null,t.series.length);if(t.minY=u.minY,t.maxY=u.maxY,n=u.lowestY,i.chart.stacked&&this._setStackedMinMax(),("line"===i.chart.type||"area"===i.chart.type||"candlestick"===i.chart.type||"boxPlot"===i.chart.type||"rangeBar"===i.chart.type&&!t.isBarHorizontal)&&t.minY===Number.MIN_VALUE&&n!==-Number.MAX_VALUE&&n!==t.maxY){var h=t.maxY-n;(n>=0&&n<=10||void 0!==i.yaxis[0].min||void 0!==i.yaxis[0].max)&&(h=0),t.minY=n-5*h/100,n>0&&t.minY<0&&(t.minY=0),t.maxY=t.maxY+5*h/100}return i.yaxis.forEach(function(g,f){void 0!==g.max&&("number"==typeof g.max?t.maxYArr[f]=g.max:"function"==typeof g.max&&(t.maxYArr[f]=g.max(t.isMultipleYAxis?t.maxYArr[f]:t.maxY)),t.maxY=t.maxYArr[f]),void 0!==g.min&&("number"==typeof g.min?t.minYArr[f]=g.min:"function"==typeof g.min&&(t.minYArr[f]=g.min(t.isMultipleYAxis?t.minYArr[f]===Number.MIN_VALUE?0:t.minYArr[f]:t.minY)),t.minY=t.minYArr[f])}),t.isBarHorizontal&&["min","max"].forEach(function(g){void 0!==i.xaxis[g]&&"number"==typeof i.xaxis[g]&&("min"===g?t.minY=i.xaxis[g]:t.maxY=i.xaxis[g])}),t.isMultipleYAxis?(this.scales.setMultipleYScales(),t.minY=n,t.yAxisScale.forEach(function(g,f){t.minYArr[f]=g.niceMin,t.maxYArr[f]=g.niceMax})):(this.scales.setYScaleForIndex(0,t.minY,t.maxY),t.minY=t.yAxisScale[0].niceMin,t.maxY=t.yAxisScale[0].niceMax,t.minYArr[0]=t.yAxisScale[0].niceMin,t.maxYArr[0]=t.yAxisScale[0].niceMax),{minY:t.minY,maxY:t.maxY,minYArr:t.minYArr,maxYArr:t.maxYArr,yAxisScale:t.yAxisScale}}},{key:"setXRange",value:function(){var t=this.w.globals,i=this.w.config,n="numeric"===i.xaxis.type||"datetime"===i.xaxis.type||"category"===i.xaxis.type&&!t.noLabelsProvided||t.noLabelsProvided||t.isXNumeric;if(t.isXNumeric&&function(){for(var h=0;h<t.series.length;h++)if(t.labels[h])for(var g=0;g<t.labels[h].length;g++)null!==t.labels[h][g]&&Y.isNumber(t.labels[h][g])&&(t.maxX=Math.max(t.maxX,t.labels[h][g]),t.initialMaxX=Math.max(t.maxX,t.labels[h][g]),t.minX=Math.min(t.minX,t.labels[h][g]),t.initialMinX=Math.min(t.minX,t.labels[h][g]))}(),t.noLabelsProvided&&0===i.xaxis.categories.length&&(t.maxX=t.labels[t.labels.length-1],t.initialMaxX=t.labels[t.labels.length-1],t.minX=1,t.initialMinX=1),t.isXNumeric||t.noLabelsProvided||t.dataFormatXNumeric){var o;if(void 0===i.xaxis.tickAmount?(o=Math.round(t.svgWidth/150),"numeric"===i.xaxis.type&&t.dataPoints<30&&(o=t.dataPoints-1),o>t.dataPoints&&0!==t.dataPoints&&(o=t.dataPoints-1)):"dataPoints"===i.xaxis.tickAmount?(t.series.length>1&&(o=t.series[t.maxValsInArrayIndex].length-1),t.isXNumeric&&(o=t.maxX-t.minX-1)):o=i.xaxis.tickAmount,t.xTickAmount=o,void 0!==i.xaxis.max&&"number"==typeof i.xaxis.max&&(t.maxX=i.xaxis.max),void 0!==i.xaxis.min&&"number"==typeof i.xaxis.min&&(t.minX=i.xaxis.min),void 0!==i.xaxis.range&&(t.minX=t.maxX-i.xaxis.range),t.minX!==Number.MAX_VALUE&&t.maxX!==-Number.MAX_VALUE)if(i.xaxis.convertedCatToNumeric&&!t.dataFormatXNumeric){for(var l=[],u=t.minX-1;u<t.maxX;u++)l.push(u+1);t.xAxisScale={result:l,niceMin:l[0],niceMax:l[l.length-1]}}else t.xAxisScale=this.scales.setXScale(t.minX,t.maxX);else t.xAxisScale=this.scales.linearScale(1,o,o),t.noLabelsProvided&&t.labels.length>0&&(t.xAxisScale=this.scales.linearScale(1,t.labels.length,o-1),t.seriesX=t.labels.slice());n&&(t.labels=t.xAxisScale.result.slice())}return t.isBarHorizontal&&t.labels.length&&(t.xTickAmount=t.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:t.minX,maxX:t.maxX}}},{key:"setZRange",value:function(){var t=this.w.globals;if(t.isDataXYZ)for(var i=0;i<t.series.length;i++)if(void 0!==t.seriesZ[i])for(var n=0;n<t.seriesZ[i].length;n++)null!==t.seriesZ[i][n]&&Y.isNumber(t.seriesZ[i][n])&&(t.maxZ=Math.max(t.maxZ,t.seriesZ[i][n]),t.minZ=Math.min(t.minZ,t.seriesZ[i][n]))}},{key:"_handleSingleDataPoint",value:function(){var t=this.w.globals,i=this.w.config;if(t.minX===t.maxX){var n=new ht(this.ctx);if("datetime"===i.xaxis.type){var o=n.getDate(t.minX);i.xaxis.labels.datetimeUTC?o.setUTCDate(o.getUTCDate()-2):o.setDate(o.getDate()-2),t.minX=new Date(o).getTime();var l=n.getDate(t.maxX);i.xaxis.labels.datetimeUTC?l.setUTCDate(l.getUTCDate()+2):l.setDate(l.getDate()+2),t.maxX=new Date(l).getTime()}else("numeric"===i.xaxis.type||"category"===i.xaxis.type&&!t.noLabelsProvided)&&(t.minX=t.minX-2,t.initialMinX=t.minX,t.maxX=t.maxX+2,t.initialMaxX=t.maxX)}}},{key:"_getMinXDiff",value:function(){var t=this.w.globals;t.isXNumeric&&t.seriesX.forEach(function(i,n){1===i.length&&i.push(t.seriesX[t.maxValsInArrayIndex][t.seriesX[t.maxValsInArrayIndex].length-1]);var o=i.slice();o.sort(function(l,u){return l-u}),o.forEach(function(l,u){if(u>0){var h=l-o[u-1];h>0&&(t.minXDiff=Math.min(h,t.minXDiff))}}),1!==t.dataPoints&&t.minXDiff!==Number.MAX_VALUE||(t.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var t=this.w.globals,i=[],n=[];if(t.series.length)for(var o=0;o<t.series[t.maxValsInArrayIndex].length;o++)for(var l=0,u=0,h=0;h<t.series.length;h++)null!==t.series[h][o]&&Y.isNumber(t.series[h][o])&&(t.series[h][o]>0?l=l+parseFloat(t.series[h][o])+1e-4:u+=parseFloat(t.series[h][o])),h===t.series.length-1&&(i.push(l),n.push(u));for(var g=0;g<i.length;g++)t.maxY=Math.max(t.maxY,i[g]),t.minY=Math.min(t.minY,n[g])}}]),M}(),Ti=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w;var i=this.w;this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.axisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===i.config.xaxis.position&&(this.xAxisoffX=i.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Ee(t)}return ne(M,[{key:"drawYaxis",value:function(t){var i=this,n=this.w,o=new j(this.ctx),l=n.config.yaxis[t].labels.style,u=l.fontSize,h=l.fontFamily,g=l.fontWeight,f=o.group({class:"apexcharts-yaxis",rel:t,transform:"translate("+n.globals.translateYAxisX[t]+", 0)"});if(this.axesUtils.isYAxisHidden(t))return f;var x=o.group({class:"apexcharts-yaxis-texts-g"});f.add(x);var y=n.globals.yAxisScale[t].result.length-1,w=n.globals.gridHeight/y,C=n.globals.translateY,E=n.globals.yLabelFormatters[t],k=n.globals.yAxisScale[t].result.slice();k=this.axesUtils.checkForReversedLabels(t,k);var I="";if(n.config.yaxis[t].labels.show)for(var P=function(K){var W=k[K];W=E(W,K,n);var ee=n.config.yaxis[t].labels.padding;n.config.yaxis[t].opposite&&0!==n.config.yaxis.length&&(ee*=-1);var Q=i.axesUtils.getYAxisForeColor(l.colors,t),ie=o.drawText({x:ee,y:C+y/10+n.config.yaxis[t].labels.offsetY+1,text:W,textAnchor:n.config.yaxis[t].opposite?"start":"end",fontSize:u,fontFamily:h,fontWeight:g,maxWidth:n.config.yaxis[t].labels.maxWidth,foreColor:Array.isArray(Q)?Q[K]:Q,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+l.cssClass});K===y&&(I=ie),x.add(ie);var he=document.createElementNS(n.globals.SVGNS,"title");if(he.textContent=Array.isArray(W)?W.join(" "):W,ie.node.appendChild(he),0!==n.config.yaxis[t].labels.rotate){var He=o.rotateAroundCenter(I.node),Fe=o.rotateAroundCenter(ie.node);ie.node.setAttribute("transform","rotate(".concat(n.config.yaxis[t].labels.rotate," ").concat(He.x," ").concat(Fe.y,")"))}C+=w},O=y;O>=0;O--)P(O);if(void 0!==n.config.yaxis[t].title.text){var D=o.group({class:"apexcharts-yaxis-title"}),p=0;n.config.yaxis[t].opposite&&(p=n.globals.translateYAxisX[t]);var _=o.drawText({x:p,y:n.globals.gridHeight/2+n.globals.translateY+n.config.yaxis[t].title.offsetY,text:n.config.yaxis[t].title.text,textAnchor:"end",foreColor:n.config.yaxis[t].title.style.color,fontSize:n.config.yaxis[t].title.style.fontSize,fontWeight:n.config.yaxis[t].title.style.fontWeight,fontFamily:n.config.yaxis[t].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+n.config.yaxis[t].title.style.cssClass});D.add(_),f.add(D)}var T=n.config.yaxis[t].axisBorder,L=31+T.offsetX;if(n.config.yaxis[t].opposite&&(L=-31-T.offsetX),T.show){var z=o.drawLine(L,n.globals.translateY+T.offsetY-2,L,n.globals.gridHeight+n.globals.translateY+T.offsetY+2,T.color,0,T.width);f.add(z)}return n.config.yaxis[t].axisTicks.show&&this.axesUtils.drawYAxisTicks(L,y,T,n.config.yaxis[t].axisTicks,t,w,f),f}},{key:"drawYaxisInversed",value:function(t){var i=this.w,n=new j(this.ctx),o=n.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),l=n.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(i.globals.translateXAxisX,", ").concat(i.globals.translateXAxisY,")")});o.add(l);var u=i.globals.yAxisScale[t].result.length-1,h=i.globals.gridWidth/u+.1,g=h+i.config.xaxis.labels.offsetX,f=i.globals.xLabelFormatter,x=i.globals.yAxisScale[t].result.slice(),y=i.globals.timescaleLabels;y.length>0&&(this.xaxisLabels=y.slice(),u=(x=y.slice()).length),x=this.axesUtils.checkForReversedLabels(t,x);var w=y.length;if(i.config.xaxis.labels.show)for(var C=w?0:u;w?C<w:C>=0;w?C++:C--){var E=x[C];E=f(E,C,i);var k=i.globals.gridWidth+i.globals.padHorizontal-(g-h+i.config.xaxis.labels.offsetX);if(y.length){var I=this.axesUtils.getLabel(x,y,k,C,this.drawnLabels,this.xaxisFontSize);k=I.x,E=I.text,this.drawnLabels.push(I.text),0===C&&i.globals.skipFirstTimelinelabel&&(E=""),C===x.length-1&&i.globals.skipLastTimelinelabel&&(E="")}var P=n.drawText({x:k,y:this.xAxisoffX+i.config.xaxis.labels.offsetY+30-("top"===i.config.xaxis.position?i.globals.xAxisHeight+i.config.xaxis.axisTicks.height-2:0),text:E,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[t]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:i.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+i.config.xaxis.labels.style.cssClass});l.add(P),P.tspan(E);var O=document.createElementNS(i.globals.SVGNS,"title");O.textContent=E,P.node.appendChild(O),g+=h}return this.inversedYAxisTitleText(o),this.inversedYAxisBorder(o),o}},{key:"inversedYAxisBorder",value:function(t){var i=this.w,n=new j(this.ctx),o=i.config.xaxis.axisBorder;if(o.show){var l=0;"bar"===i.config.chart.type&&i.globals.isXNumeric&&(l-=15);var u=n.drawLine(i.globals.padHorizontal+l+o.offsetX,this.xAxisoffX,i.globals.gridWidth,this.xAxisoffX,o.color,0,o.height);t.add(u)}}},{key:"inversedYAxisTitleText",value:function(t){var i=this.w,n=new j(this.ctx);if(void 0!==i.config.xaxis.title.text){var o=n.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),l=n.drawText({x:i.globals.gridWidth/2+i.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(i.config.xaxis.title.style.fontSize)+i.config.xaxis.title.offsetY+20,text:i.config.xaxis.title.text,textAnchor:"middle",fontSize:i.config.xaxis.title.style.fontSize,fontFamily:i.config.xaxis.title.style.fontFamily,fontWeight:i.config.xaxis.title.style.fontWeight,foreColor:i.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+i.config.xaxis.title.style.cssClass});o.add(l),t.add(o)}}},{key:"yAxisTitleRotate",value:function(t,i){var n=this.w,o=new j(this.ctx),l={width:0,height:0},u={width:0,height:0},h=n.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-texts-g"));null!==h&&(l=h.getBoundingClientRect());var g=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-title text"));if(null!==g&&(u=g.getBoundingClientRect()),null!==g){var f=this.xPaddingForYAxisTitle(t,l,u,i);g.setAttribute("x",f.xPos-(i?10:0))}if(null!==g){var x=o.rotateAroundCenter(g);g.setAttribute("transform","rotate(".concat(i?-1*n.config.yaxis[t].title.rotate:n.config.yaxis[t].title.rotate," ").concat(x.x," ").concat(x.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(t,i,n,o){var l=this.w,u=0,h=0,g=10;return void 0===l.config.yaxis[t].title.text||t<0?{xPos:h,padd:0}:(o?(h=i.width+l.config.yaxis[t].title.offsetX+n.width/2+g/2,0===(u+=1)&&(h-=g/2)):(h=-1*i.width+l.config.yaxis[t].title.offsetX+g/2+n.width/2,l.globals.isBarHorizontal&&(h=-1*i.width-l.config.yaxis[t].title.offsetX-(g=25))),{xPos:h,padd:g})}},{key:"setYAxisXPosition",value:function(t,i){var n=this.w,o=0,l=0,u=18,h=1;n.config.yaxis.length>1&&(this.multipleYs=!0),n.config.yaxis.map(function(g,f){var x=n.globals.ignoreYAxisIndexes.indexOf(f)>-1||!g.show||g.floating||0===t[f].width,y=t[f].width+i[f].width;g.opposite?n.globals.isBarHorizontal?n.globals.translateYAxisX[f]=(l=n.globals.gridWidth+n.globals.translateX-1)-g.labels.offsetX:(l=n.globals.gridWidth+n.globals.translateX+h,x||(h=h+y+20),n.globals.translateYAxisX[f]=l-g.labels.offsetX+20):(o=n.globals.translateX-u,x||(u=u+y+20),n.globals.translateYAxisX[f]=o+g.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var t=this.w,i=t.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(i=Y.listToArray(i)).forEach(function(n,o){var l=t.config.yaxis[o];if(l&&void 0!==l.labels.align){var u=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(o,"'] .apexcharts-yaxis-texts-g")),h=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(o,"'] .apexcharts-yaxis-label"));h=Y.listToArray(h);var g=u.getBoundingClientRect();"left"===l.labels.align?(h.forEach(function(f,x){f.setAttribute("text-anchor","start")}),l.opposite||u.setAttribute("transform","translate(-".concat(g.width,", 0)"))):"center"===l.labels.align?(h.forEach(function(f,x){f.setAttribute("text-anchor","middle")}),u.setAttribute("transform","translate(".concat(g.width/2*(l.opposite?1:-1),", 0)"))):"right"===l.labels.align&&(h.forEach(function(f,x){f.setAttribute("text-anchor","end")}),l.opposite&&u.setAttribute("transform","translate(".concat(g.width,", 0)")))}})}}]),M}(),Ii=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w,this.documentEvent=Y.bind(this.documentEvent,this)}return ne(M,[{key:"addEventListener",value:function(t,i){var n=this.w;n.globals.events.hasOwnProperty(t)?n.globals.events[t].push(i):n.globals.events[t]=[i]}},{key:"removeEventListener",value:function(t,i){var n=this.w;if(n.globals.events.hasOwnProperty(t)){var o=n.globals.events[t].indexOf(i);-1!==o&&n.globals.events[t].splice(o,1)}}},{key:"fireEvent",value:function(t,i){var n=this.w;if(n.globals.events.hasOwnProperty(t)){i&&i.length||(i=[]);for(var o=n.globals.events[t],l=o.length,u=0;u<l;u++)o[u].apply(null,i)}}},{key:"setupEventHandlers",value:function(){var t=this,i=this.w,n=this.ctx,o=i.globals.dom.baseEl.querySelector(i.globals.chartClass);this.ctx.eventList.forEach(function(l){o.addEventListener(l,function(u){var h=Object.assign({},i,{seriesIndex:i.globals.capturedSeriesIndex,dataPointIndex:i.globals.capturedDataPointIndex});"mousemove"===u.type||"touchmove"===u.type?"function"==typeof i.config.chart.events.mouseMove&&i.config.chart.events.mouseMove(u,n,h):"mouseleave"===u.type||"touchleave"===u.type?"function"==typeof i.config.chart.events.mouseLeave&&i.config.chart.events.mouseLeave(u,n,h):("mouseup"===u.type&&1===u.which||"touchend"===u.type)&&("function"==typeof i.config.chart.events.click&&i.config.chart.events.click(u,n,h),n.ctx.events.fireEvent("click",[u,n,h]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(l){i.globals.dom.baseEl.addEventListener(l,t.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(t){var i=this.w,n=t.target.className;if("click"===t.type){var o=i.globals.dom.baseEl.querySelector(".apexcharts-menu");o&&o.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==n&&o.classList.remove("apexcharts-menu-open")}i.globals.clientX="touchmove"===t.type?t.touches[0].clientX:t.clientX,i.globals.clientY="touchmove"===t.type?t.touches[0].clientY:t.clientY}}]),M}(),li=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"setCurrentLocaleValues",value:function(t){var i=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(i=this.w.config.chart.locales.concat(window.Apex.chart.locales));var n=i.filter(function(l){return l.name===t})[0];if(!n)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var o=Y.extend(Ue,n);this.w.globals.locale=o.options}}]),M}(),Ys=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"drawAxis",value:function(t,i){var n,o,l=this.w.globals,u=this.w.config,h=new Ki(this.ctx),g=new Ti(this.ctx);l.axisCharts&&"radar"!==t&&(l.isBarHorizontal?(o=g.drawYaxisInversed(0),n=h.drawXaxisInversed(0),l.dom.elGraphical.add(n),l.dom.elGraphical.add(o)):(n=h.drawXaxis(),l.dom.elGraphical.add(n),u.yaxis.map(function(f,x){-1===l.ignoreYAxisIndexes.indexOf(x)&&(o=g.drawYaxis(x),l.dom.Paper.add(o))})))}}]),M}(),vn=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"drawXCrosshairs",value:function(){var t=this.w,i=new j(this.ctx),n=new oe(this.ctx),o=t.config.xaxis.crosshairs.fill.gradient,l=t.config.xaxis.crosshairs.dropShadow,w=l.enabled,C=l.left,E=l.top,k=l.blur,I=l.color,P=l.opacity,O=t.config.xaxis.crosshairs.fill.color;if(t.config.xaxis.crosshairs.show){"gradient"===t.config.xaxis.crosshairs.fill.type&&(O=i.drawGradient("vertical",o.colorFrom,o.colorTo,o.opacityFrom,o.opacityTo,null,o.stops,null));var D=i.drawRect();1===t.config.xaxis.crosshairs.width&&(D=i.drawLine());var p=t.globals.gridHeight;(!Y.isNumber(p)||p<0)&&(p=0);var _=t.config.xaxis.crosshairs.width;(!Y.isNumber(_)||_<0)&&(_=0),D.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:p,width:_,height:p,fill:O,filter:"none","fill-opacity":t.config.xaxis.crosshairs.opacity,stroke:t.config.xaxis.crosshairs.stroke.color,"stroke-width":t.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":t.config.xaxis.crosshairs.stroke.dashArray}),w&&(D=n.dropShadow(D,{left:C,top:E,blur:k,color:I,opacity:P})),t.globals.dom.elGraphical.add(D)}}},{key:"drawYCrosshairs",value:function(){var t=this.w,i=new j(this.ctx),n=t.config.yaxis[0].crosshairs,o=t.globals.barPadForNumericAxis;if(t.config.yaxis[0].crosshairs.show){var l=i.drawLine(-o,0,t.globals.gridWidth+o,0,n.stroke.color,n.stroke.dashArray,n.stroke.width);l.attr({class:"apexcharts-ycrosshairs"}),t.globals.dom.elGraphical.add(l)}var u=i.drawLine(-o,0,t.globals.gridWidth+o,0,n.stroke.color,0,0);u.attr({class:"apexcharts-ycrosshairs-hidden"}),t.globals.dom.elGraphical.add(u)}}]),M}(),fs=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"checkResponsiveConfig",value:function(t){var i=this,n=this.w,o=n.config;if(0!==o.responsive.length){var l=o.responsive.slice();l.sort(function(f,x){return f.breakpoint>x.breakpoint?1:x.breakpoint>f.breakpoint?-1:0}).reverse();var u=new ut({}),h=function(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},x=l[0].breakpoint,y=window.innerWidth>0?window.innerWidth:screen.width;if(y>x){var w=ye.extendArrayProps(u,n.globals.initialConfig,n);f=Y.extend(w,f),f=Y.extend(n.config,f),i.overrideResponsiveOptions(f)}else for(var C=0;C<l.length;C++)y<l[C].breakpoint&&(f=ye.extendArrayProps(u,l[C].options,n),f=Y.extend(n.config,f),i.overrideResponsiveOptions(f))};if(t){var g=ye.extendArrayProps(u,t,n);g=Y.extend(n.config,g),h(g=Y.extend(g,t))}else h({})}}},{key:"overrideResponsiveOptions",value:function(t){var i=new ut(t).init({responsiveOverride:!0});this.w.config=i}}]),M}(),ps=function(){function M(t){re(this,M),this.ctx=t,this.colors=[],this.w=t.w;var i=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===i.config.chart.type&&i.config.plotOptions.treemap.distributed||"heatmap"===i.config.chart.type&&i.config.plotOptions.heatmap.distributed,this.isBarDistributed=i.config.plotOptions.bar.distributed&&("bar"===i.config.chart.type||"rangeBar"===i.config.chart.type)}return ne(M,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var t=this,i=this.w,n=new Y;if(i.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(i.config.theme.mode)),void 0===i.config.colors?i.globals.colors=this.predefined():(i.globals.colors=i.config.colors,Array.isArray(i.config.colors)&&i.config.colors.length>0&&"function"==typeof i.config.colors[0]&&(i.globals.colors=i.config.series.map(function(C,E){var k=i.config.colors[E];return k||(k=i.config.colors[0]),"function"==typeof k?(t.isColorFn=!0,k({value:i.globals.axisCharts?i.globals.series[E][0]?i.globals.series[E][0]:0:i.globals.series[E],seriesIndex:E,dataPointIndex:E,w:i})):k}))),i.globals.seriesColors.map(function(C,E){C&&(i.globals.colors[E]=C)}),i.config.theme.monochrome.enabled){var o=[],l=i.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(l=i.globals.series[0].length*i.globals.series.length);for(var u=i.config.theme.monochrome.color,h=1/(l/i.config.theme.monochrome.shadeIntensity),g=i.config.theme.monochrome.shadeTo,f=0,x=0;x<l;x++){var y=void 0;"dark"===g?(y=n.shadeColor(-1*f,u),f+=h):(y=n.shadeColor(f,u),f+=h),o.push(y)}i.globals.colors=o.slice()}var w=i.globals.colors.slice();this.pushExtraColors(i.globals.colors),["fill","stroke"].forEach(function(C){i.globals[C].colors=void 0===i.config[C].colors?t.isColorFn?i.config.colors:w:i.config[C].colors.slice(),t.pushExtraColors(i.globals[C].colors)}),i.globals.dataLabels.style.colors=void 0===i.config.dataLabels.style.colors?w:i.config.dataLabels.style.colors.slice(),this.pushExtraColors(i.globals.dataLabels.style.colors,50),i.globals.radarPolygons.fill.colors=void 0===i.config.plotOptions.radar.polygons.fill.colors?["dark"===i.config.theme.mode?"#424242":"none"]:i.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(i.globals.radarPolygons.fill.colors,20),i.globals.markers.colors=void 0===i.config.markers.colors?w:i.config.markers.colors.slice(),this.pushExtraColors(i.globals.markers.colors)}},{key:"pushExtraColors",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.w,l=i||o.globals.series.length;if(null===n&&(n=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===o.config.chart.type&&o.config.plotOptions.heatmap.colorScale.inverse),n&&o.globals.series.length&&(l=o.globals.series[o.globals.maxValsInArrayIndex].length*o.globals.series.length),t.length<l)for(var u=l-t.length,h=0;h<u;h++)t.push(t[h])}},{key:"updateThemeOptions",value:function(t){t.chart=t.chart||{},t.tooltip=t.tooltip||{};var i=t.theme.mode||"light",n=t.theme.palette?t.theme.palette:"dark"===i?"palette4":"palette1",o=t.chart.foreColor?t.chart.foreColor:"dark"===i?"#f6f7f8":"#373d3f";return t.tooltip.theme=i,t.chart.foreColor=o,t.theme.palette=n,t}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),M}(),Aa=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(t){var i=this.w,n="title"===t?i.config.title:i.config.subtitle,o=i.globals.svgWidth/2,l=n.offsetY,u="middle";if("left"===n.align?(o=10,u="start"):"right"===n.align&&(o=i.globals.svgWidth-10,u="end"),o+=n.offsetX,l=l+parseInt(n.style.fontSize,10)+n.margin/2,void 0!==n.text){var h=new j(this.ctx).drawText({x:o,y:l,text:n.text,textAnchor:u,fontSize:n.style.fontSize,fontFamily:n.style.fontFamily,fontWeight:n.style.fontWeight,foreColor:n.style.color,opacity:1});h.node.setAttribute("class","apexcharts-".concat(t,"-text")),i.globals.dom.Paper.add(h)}}}]),M}(),wn=function(){function M(t){re(this,M),this.w=t.w,this.dCtx=t}return ne(M,[{key:"getTitleSubtitleCoords",value:function(t){var i=this.w,n=0,o=0,l="title"===t?i.config.title.floating:i.config.subtitle.floating,u=i.globals.dom.baseEl.querySelector(".apexcharts-".concat(t,"-text"));if(null!==u&&!l){var h=u.getBoundingClientRect();n=h.width,o=i.globals.axisCharts?h.height+5:h.height}return{width:n,height:o}}},{key:"getLegendsRect",value:function(){var t=this.w,i=t.globals.dom.baseEl.querySelector(".apexcharts-legend");t.config.legend.height||"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||(i.style.maxHeight=t.globals.svgHeight/2+"px");var n=Object.assign({},Y.getBoundingClientRect(i));return this.dCtx.lgRect=null!==i&&!t.config.legend.floating&&t.config.legend.show?{x:n.x,y:n.y,height:n.height,width:0===n.height?0:n.width}:{x:0,y:0,height:0,width:0},"left"!==t.config.legend.position&&"right"!==t.config.legend.position||1.5*this.dCtx.lgRect.width>t.globals.svgWidth&&(this.dCtx.lgRect.width=t.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(t,i){var n=t;if(this.w.globals.isMultiLineX){var o=i.map(function(u,h){return Array.isArray(u)?u.length:1}),l=Math.max.apply(Math,Z(o));n=i[o.indexOf(l)]}return n}}]),M}(),Zt=function(){function M(t){re(this,M),this.w=t.w,this.dCtx=t}return ne(M,[{key:"getxAxisLabelsCoords",value:function(){var t,i=this.w,n=i.globals.labels.slice();if(i.config.xaxis.convertedCatToNumeric&&0===n.length&&(n=i.globals.categoryLabels),i.globals.timescaleLabels.length>0){var o=this.getxAxisTimeScaleLabelsCoords();t={width:o.width,height:o.height},i.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==i.config.legend.position&&"right"!==i.config.legend.position||i.config.legend.floating?0:this.dCtx.lgRect.width;var l=i.globals.xLabelFormatter,u=Y.getLargestStringFromArr(n),h=this.dCtx.dimHelpers.getLargestStringFromMultiArr(u,n);i.globals.isBarHorizontal&&(h=u=i.globals.yAxisScale[0].result.reduce(function(E,k){return E.length>k.length?E:k},0));var g=new Zi(this.dCtx.ctx),f=u;u=g.xLabelFormat(l,u,f,{i:void 0,dateFormatter:new ht(this.dCtx.ctx).formatDate,w:i}),h=g.xLabelFormat(l,h,f,{i:void 0,dateFormatter:new ht(this.dCtx.ctx).formatDate,w:i}),(i.config.xaxis.convertedCatToNumeric&&void 0===u||""===String(u).trim())&&(h=u="1");var x=new j(this.dCtx.ctx),y=x.getTextRects(u,i.config.xaxis.labels.style.fontSize),w=y;if(u!==h&&(w=x.getTextRects(h,i.config.xaxis.labels.style.fontSize)),(t={width:y.width>=w.width?y.width:w.width,height:y.height>=w.height?y.height:w.height}).width*n.length>i.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==i.config.xaxis.labels.rotate||i.config.xaxis.labels.rotateAlways){if(!i.globals.isBarHorizontal){i.globals.rotateXLabels=!0;var C=function(E){return x.getTextRects(E,i.config.xaxis.labels.style.fontSize,i.config.xaxis.labels.style.fontFamily,"rotate(".concat(i.config.xaxis.labels.rotate," 0 0)"),!1)};y=C(u),u!==h&&(w=C(h)),t.height=(y.height>w.height?y.height:w.height)/1.5,t.width=y.width>w.width?y.width:w.width}}else i.globals.rotateXLabels=!1}return i.config.xaxis.labels.show||(t={width:0,height:0}),{width:t.width,height:t.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var t,i=this.w;if(!i.globals.hasGroups)return{width:0,height:0};var n,o=(null===(t=i.config.xaxis.group.style)||void 0===t?void 0:t.fontSize)||i.config.xaxis.labels.style.fontSize,l=i.globals.groups.map(function(y){return y.title}),u=Y.getLargestStringFromArr(l),h=this.dCtx.dimHelpers.getLargestStringFromMultiArr(u,l),g=new j(this.dCtx.ctx),f=g.getTextRects(u,o),x=f;return u!==h&&(x=g.getTextRects(h,o)),n={width:f.width>=x.width?f.width:x.width,height:f.height>=x.height?f.height:x.height},i.config.xaxis.labels.show||(n={width:0,height:0}),{width:n.width,height:n.height}}},{key:"getxAxisTitleCoords",value:function(){var t=this.w,i=0,n=0;if(void 0!==t.config.xaxis.title.text){var o=new j(this.dCtx.ctx).getTextRects(t.config.xaxis.title.text,t.config.xaxis.title.style.fontSize);i=o.width,n=o.height}return{width:i,height:n}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var t,i=this.w;this.dCtx.timescaleLabels=i.globals.timescaleLabels.slice();var n=this.dCtx.timescaleLabels.map(function(l){return l.value}),o=n.reduce(function(l,u){return void 0===l?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):l.length>u.length?l:u},0);return 1.05*(t=new j(this.dCtx.ctx).getTextRects(o,i.config.xaxis.labels.style.fontSize)).width*n.length>i.globals.gridWidth&&0!==i.config.xaxis.labels.rotate&&(i.globals.overlappingXLabels=!0),t}},{key:"additionalPaddingXLabels",value:function(t){var i=this,n=this.w,o=n.globals,l=n.config,u=l.xaxis.type,h=t.width;o.skipLastTimelinelabel=!1,o.skipFirstTimelinelabel=!1;var g=n.config.yaxis[0].opposite&&n.globals.isBarHorizontal;l.yaxis.forEach(function(x,y){g?(i.dCtx.gridPad.left<h&&(i.dCtx.xPadLeft=h/2+1),i.dCtx.xPadRight=h/2+1):function(x,y){-1!==o.collapsedSeriesIndices.indexOf(y)||function(w){if(i.dCtx.timescaleLabels&&i.dCtx.timescaleLabels.length){var k=i.dCtx.timescaleLabels[0].position-h/1.75+i.dCtx.yAxisWidthLeft;i.dCtx.timescaleLabels[i.dCtx.timescaleLabels.length-1].position+h/1.75-i.dCtx.yAxisWidthRight>o.svgWidth-o.translateX-("right"===n.config.legend.position&&i.dCtx.lgRect.width>0?i.dCtx.lgRect.width:0)&&(o.skipLastTimelinelabel=!0),k<-(w.show&&!w.floating||"bar"!==l.chart.type&&"candlestick"!==l.chart.type&&"rangeBar"!==l.chart.type&&"boxPlot"!==l.chart.type?10:h/1.75)&&(o.skipFirstTimelinelabel=!0)}else"datetime"===u?i.dCtx.gridPad.right<h&&!o.rotateXLabels&&(o.skipLastTimelinelabel=!0):"datetime"!==u&&i.dCtx.gridPad.right<h/2-i.dCtx.yAxisWidthRight&&!o.rotateXLabels&&!n.config.xaxis.labels.trim&&("between"!==n.config.xaxis.tickPlacement||n.globals.isBarHorizontal)&&(i.dCtx.xPadRight=h/2+1)}(x)}(x,y)})}}]),M}(),ka=function(){function M(t){re(this,M),this.w=t.w,this.dCtx=t}return ne(M,[{key:"getyAxisLabelsCoords",value:function(){var t=this,i=this.w,n=[],o=10,l=new Ee(this.dCtx.ctx);return i.config.yaxis.map(function(u,h){var g=i.globals.yAxisScale[h],f=0;if(!l.isYAxisHidden(h)&&u.labels.show&&void 0!==u.labels.minWidth&&(f=u.labels.minWidth),!l.isYAxisHidden(h)&&u.labels.show&&g.result.length){var x=i.globals.yLabelFormatters[h],y=g.niceMin===Number.MIN_VALUE?0:g.niceMin,w=String(y).length>String(g.niceMax).length?y:g.niceMax,C=x(w,{seriesIndex:h,dataPointIndex:-1,w:i}),E=C;if(void 0!==C&&0!==C.length||(C=w),i.globals.isBarHorizontal){o=0;var k=i.globals.labels.slice();C=x(C=Y.getLargestStringFromArr(k),{seriesIndex:h,dataPointIndex:-1,w:i}),E=t.dCtx.dimHelpers.getLargestStringFromMultiArr(C,k)}var I=new j(t.dCtx.ctx),P="rotate(".concat(u.labels.rotate," 0 0)"),O=I.getTextRects(C,u.labels.style.fontSize,u.labels.style.fontFamily,P,!1),D=O;C!==E&&(D=I.getTextRects(E,u.labels.style.fontSize,u.labels.style.fontFamily,P,!1)),n.push({width:(f>D.width||f>O.width?f:D.width>O.width?D.width:O.width)+o,height:D.height>O.height?D.height:O.height})}else n.push({width:0,height:0})}),n}},{key:"getyAxisTitleCoords",value:function(){var t=this,n=[];return this.w.config.yaxis.map(function(o,l){if(o.show&&void 0!==o.title.text){var u=new j(t.dCtx.ctx),h="rotate(".concat(o.title.rotate," 0 0)"),g=u.getTextRects(o.title.text,o.title.style.fontSize,o.title.style.fontFamily,h,!1);n.push({width:g.width,height:g.height})}else n.push({width:0,height:0})}),n}},{key:"getTotalYAxisWidth",value:function(){var t=this.w,i=0,n=0,o=0,l=t.globals.yAxisScale.length>1?10:0,u=new Ee(this.dCtx.ctx),h=function(g,f){var x=t.config.yaxis[f].floating,y=0;g.width>0&&!x?(y=g.width+l,t.globals.ignoreYAxisIndexes.indexOf(f)>-1&&(y=y-g.width-l)):y=x||u.isYAxisHidden(f)?0:5,t.config.yaxis[f].opposite?o+=y:n+=y,i+=y};return t.globals.yLabelsCoords.map(function(g,f){h(g,f)}),t.globals.yTitleCoords.map(function(g,f){h(g,f)}),t.globals.isBarHorizontal&&!t.config.yaxis[0].floating&&(i=t.globals.yLabelsCoords[0].width+t.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=n,this.dCtx.yAxisWidthRight=o,i}}]),M}(),Ws=function(){function M(t){re(this,M),this.w=t.w,this.dCtx=t}return ne(M,[{key:"gridPadForColumnsInNumericAxis",value:function(t){var i=this.w;if(i.globals.noData||i.globals.allSeriesCollapsed)return 0;var n=function(x){return"bar"===x||"rangeBar"===x||"candlestick"===x||"boxPlot"===x},o=i.config.chart.type,l=0,u=n(o)?i.config.series.length:1;if(i.globals.comboBarCount>0&&(u=i.globals.comboBarCount),i.globals.collapsedSeries.forEach(function(x){n(x.type)&&(u-=1)}),i.config.chart.stacked&&(u=1),(n(o)||i.globals.comboBarCount>0)&&i.globals.isXNumeric&&!i.globals.isBarHorizontal&&u>0){var h,g,f=Math.abs(i.globals.initialMaxX-i.globals.initialMinX);f<=3&&(f=i.globals.dataPoints),h=f/t,i.globals.minXDiff&&i.globals.minXDiff/h>0&&(g=i.globals.minXDiff/h),g>t/2&&(g/=2),(l=g/u*parseInt(i.config.plotOptions.bar.columnWidth,10)/100)<1&&(l=1),i.globals.barPadForNumericAxis=l=l/(u>1?1:1.5)+5}return l}},{key:"gridPadFortitleSubtitle",value:function(){var t=this,i=this.w,n=i.globals,o=this.dCtx.isSparkline||!i.globals.axisCharts?0:10;["title","subtitle"].forEach(function(h){o+=void 0!==i.config[h].text?i.config[h].margin:t.dCtx.isSparkline||!i.globals.axisCharts?0:5}),!i.config.legend.show||"bottom"!==i.config.legend.position||i.config.legend.floating||i.globals.axisCharts||(o+=10);var l=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),u=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");n.gridHeight=n.gridHeight-l.height-u.height-o,n.translateY=n.translateY+l.height+u.height+o}},{key:"setGridXPosForDualYAxis",value:function(t,i){var n=this.w,o=new Ee(this.dCtx.ctx);n.config.yaxis.map(function(l,u){-1!==n.globals.ignoreYAxisIndexes.indexOf(u)||l.floating||o.isYAxisHidden(u)||(l.opposite&&(n.globals.translateX=n.globals.translateX-(i[u].width+t[u].width)-parseInt(n.config.yaxis[u].labels.style.fontSize,10)/1.2-12),n.globals.translateX<2&&(n.globals.translateX=2))})}}]),M}(),ci=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new wn(this),this.dimYAxis=new ka(this),this.dimXAxis=new Zt(this),this.dimGrid=new Ws(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return ne(M,[{key:"plotCoords",value:function(){var t=this,i=this.w,n=i.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&(i.config.markers.discrete.length>0||i.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(l){var u=function ji(M,t){return function(i){if(Array.isArray(i))return i}(M)||function(i,n){var o=null==i?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(null!=o){var l,u,h=[],g=!0,f=!1;try{for(o=o.call(i);!(g=(l=o.next()).done)&&(h.push(l.value),!n||h.length!==n);g=!0);}catch(x){f=!0,u=x}finally{try{g||null==o.return||o.return()}finally{if(f)throw u}}return h}}(M,t)||J(M,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(l,2);t.gridPad[u[0]]=Math.max(u[1],t.w.globals.markers.largestSize/1.5)}),n.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),n.gridHeight=n.gridHeight-this.gridPad.top-this.gridPad.bottom,n.gridWidth=n.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var o=this.dimGrid.gridPadForColumnsInNumericAxis(n.gridWidth);n.gridWidth=n.gridWidth-2*o,n.translateX=n.translateX+this.gridPad.left+this.xPadLeft+(o>0?o+4:0),n.translateY=n.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var t=this,i=this.w,n=i.globals,o=this.dimYAxis.getyAxisLabelsCoords(),l=this.dimYAxis.getyAxisTitleCoords();i.globals.yLabelsCoords=[],i.globals.yTitleCoords=[],i.config.yaxis.map(function(C,E){i.globals.yLabelsCoords.push({width:o[E].width,index:E}),i.globals.yTitleCoords.push({width:l[E].width,index:E})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var u=this.dimXAxis.getxAxisLabelsCoords(),h=this.dimXAxis.getxAxisGroupLabelsCoords(),g=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(u,g,h),n.translateXAxisY=i.globals.rotateXLabels?this.xAxisHeight/8:-4,n.translateXAxisX=i.globals.rotateXLabels&&i.globals.isXNumeric&&i.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,i.globals.isBarHorizontal&&(n.rotateXLabels=!1,n.translateXAxisY=parseInt(i.config.xaxis.labels.style.fontSize,10)/1.5*-1),n.translateXAxisY=n.translateXAxisY+i.config.xaxis.labels.offsetY,n.translateXAxisX=n.translateXAxisX+i.config.xaxis.labels.offsetX;var f=this.yAxisWidth,x=this.xAxisHeight;n.xAxisLabelsHeight=this.xAxisHeight-g.height,n.xAxisGroupLabelsHeight=n.xAxisLabelsHeight-u.height,n.xAxisLabelsWidth=this.xAxisWidth,n.xAxisHeight=this.xAxisHeight;var y=10;("radar"===i.config.chart.type||this.isSparkline)&&(f=0,x=n.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===i.config.chart.type)&&(f=0,x=0,y=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(u);var w=function(){n.translateX=f,n.gridHeight=n.svgHeight-t.lgRect.height-x-(t.isSparkline||"treemap"===i.config.chart.type?0:i.globals.rotateXLabels?10:15),n.gridWidth=n.svgWidth-f};switch("top"===i.config.xaxis.position&&(y=n.xAxisHeight-i.config.xaxis.axisTicks.height-5),i.config.legend.position){case"bottom":n.translateY=y,w();break;case"top":n.translateY=this.lgRect.height+y,w();break;case"left":n.translateY=y,n.translateX=this.lgRect.width+f,n.gridHeight=n.svgHeight-x-12,n.gridWidth=n.svgWidth-this.lgRect.width-f;break;case"right":n.translateY=y,n.translateX=f,n.gridHeight=n.svgHeight-x-12,n.gridWidth=n.svgWidth-this.lgRect.width-f-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(l,o),new Ti(this.ctx).setYAxisXPosition(o,l)}},{key:"setDimensionsForNonAxisCharts",value:function(){var t=this.w,i=t.globals,n=t.config,o=0;t.config.legend.show&&!t.config.legend.floating&&(o=20);var l="pie"===n.chart.type||"polarArea"===n.chart.type||"donut"===n.chart.type?"pie":"radialBar",u=n.plotOptions[l].offsetY,h=n.plotOptions[l].offsetX;if(!n.legend.show||n.legend.floating)return i.gridHeight=i.svgHeight-n.grid.padding.left+n.grid.padding.right,i.gridWidth=i.gridHeight,i.translateY=u,void(i.translateX=h+(i.svgWidth-i.gridWidth)/2);switch(n.legend.position){case"bottom":i.gridHeight=i.svgHeight-this.lgRect.height-i.goldenPadding,i.gridWidth=i.svgWidth,i.translateY=u-10,i.translateX=h+(i.svgWidth-i.gridWidth)/2;break;case"top":i.gridHeight=i.svgHeight-this.lgRect.height-i.goldenPadding,i.gridWidth=i.svgWidth,i.translateY=this.lgRect.height+u+10,i.translateX=h+(i.svgWidth-i.gridWidth)/2;break;case"left":i.gridWidth=i.svgWidth-this.lgRect.width-o,i.gridHeight="auto"!==n.chart.height?i.svgHeight:i.gridWidth,i.translateY=u,i.translateX=h+this.lgRect.width+o;break;case"right":i.gridWidth=i.svgWidth-this.lgRect.width-o-5,i.gridHeight="auto"!==n.chart.height?i.svgHeight:i.gridWidth,i.translateY=u,i.translateX=h+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(t,i,n){var o=this.w;this.xAxisHeight=(n.height+t.height+i.height)*(o.globals.isMultiLineX?1.2:o.globals.LINE_HEIGHT_RATIO)+(o.globals.hasGroups?2:1)*(o.globals.rotateXLabels?22:10)+(o.globals.rotateXLabels&&"bottom"===o.config.legend.position?10:0),this.xAxisWidth=t.width,this.xAxisHeight-i.height>o.config.xaxis.labels.maxHeight&&(this.xAxisHeight=o.config.xaxis.labels.maxHeight),o.config.xaxis.labels.minHeight&&this.xAxisHeight<o.config.xaxis.labels.minHeight&&(this.xAxisHeight=o.config.xaxis.labels.minHeight),o.config.xaxis.floating&&(this.xAxisHeight=0);var x=0,y=0;o.config.yaxis.forEach(function(w){x+=w.labels.minWidth,y+=w.labels.maxWidth}),this.yAxisWidth<x&&(this.yAxisWidth=x),this.yAxisWidth>y&&(this.yAxisWidth=y)}}]),M}(),ms=function(){function M(t){re(this,M),this.w=t.w,this.lgCtx=t}return ne(M,[{key:"getLegendStyles",value:function(){var t=document.createElement("style");t.setAttribute("type","text/css");var i=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return t.appendChild(i),t}},{key:"getLegendBBox",value:function(){var t=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:t.height,clww:t.width}}},{key:"appendToForeignObject",value:function(){var t=this.w.globals;t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject");var i=t.dom.elLegendForeign;i.setAttribute("x",0),i.setAttribute("y",0),i.setAttribute("width",t.svgWidth),i.setAttribute("height",t.svgHeight),t.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),i.appendChild(t.dom.elLegendWrap),i.appendChild(this.getLegendStyles()),t.dom.Paper.node.insertBefore(i,t.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(t,i){var n=this,o=this.w;if(o.globals.axisCharts||"radialBar"===o.config.chart.type){o.globals.resized=!0;var l=null,u=null;o.globals.risingSeries=[],o.globals.axisCharts?(l=o.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"']")),u=parseInt(l.getAttribute("data:realIndex"),10)):(l=o.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(t+1,"']")),u=parseInt(l.getAttribute("rel"),10)-1),i?[{cs:o.globals.collapsedSeries,csi:o.globals.collapsedSeriesIndices},{cs:o.globals.ancillaryCollapsedSeries,csi:o.globals.ancillaryCollapsedSeriesIndices}].forEach(function(x){n.riseCollapsedSeries(x.cs,x.csi,u)}):this.hideSeries({seriesEl:l,realIndex:u})}else{var h=o.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(t+1,"'] path")),g=o.config.chart.type;if("pie"===g||"polarArea"===g||"donut"===g){var f=o.config.plotOptions.pie.donut.labels;new j(this.lgCtx.ctx).pathMouseDown(h.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(h.members[0].node,f)}h.fire("click")}}},{key:"hideSeries",value:function(t){var i=t.seriesEl,n=t.realIndex,o=this.w,l=Y.clone(o.config.series);if(o.globals.axisCharts){var u=!1;if(o.config.yaxis[n]&&o.config.yaxis[n].show&&o.config.yaxis[n].showAlways&&(u=!0,o.globals.ancillaryCollapsedSeriesIndices.indexOf(n)<0&&(o.globals.ancillaryCollapsedSeries.push({index:n,data:l[n].data.slice(),type:i.parentNode.className.baseVal.split("-")[1]}),o.globals.ancillaryCollapsedSeriesIndices.push(n))),!u){o.globals.collapsedSeries.push({index:n,data:l[n].data.slice(),type:i.parentNode.className.baseVal.split("-")[1]}),o.globals.collapsedSeriesIndices.push(n);var h=o.globals.risingSeries.indexOf(n);o.globals.risingSeries.splice(h,1)}}else o.globals.collapsedSeries.push({index:n,data:l[n]}),o.globals.collapsedSeriesIndices.push(n);for(var g=i.childNodes,f=0;f<g.length;f++)g[f].classList.contains("apexcharts-series-markers-wrap")&&(g[f].classList.contains("apexcharts-hide")?g[f].classList.remove("apexcharts-hide"):g[f].classList.add("apexcharts-hide"));o.globals.allSeriesCollapsed=o.globals.collapsedSeries.length===o.config.series.length,l=this._getSeriesBasedOnCollapsedState(l),this.lgCtx.ctx.updateHelpers._updateSeries(l,o.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(t,i,n){var o=this.w,l=Y.clone(o.config.series);if(t.length>0){for(var u=0;u<t.length;u++)t[u].index===n&&(o.globals.axisCharts?(l[n].data=t[u].data.slice(),t.splice(u,1),i.splice(u,1),o.globals.risingSeries.push(n)):(l[n]=t[u].data,t.splice(u,1),i.splice(u,1),o.globals.risingSeries.push(n)));l=this._getSeriesBasedOnCollapsedState(l),this.lgCtx.ctx.updateHelpers._updateSeries(l,o.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(t){var i=this.w;return t.forEach(i.globals.axisCharts?function(n,o){i.globals.collapsedSeriesIndices.indexOf(o)>-1&&(t[o].data=[])}:function(n,o){i.globals.collapsedSeriesIndices.indexOf(o)>-1&&(t[o]=0)}),t}}]),M}(),_n=function(){function M(t,i){re(this,M),this.ctx=t,this.w=t.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new ms(this)}return ne(M,[{key:"init",value:function(){var t=this.w,i=t.globals,n=t.config;if((n.legend.showForSingleSeries&&1===i.series.length||this.isBarsDistributed||i.series.length>1||!i.axisCharts)&&n.legend.show){for(;i.dom.elLegendWrap.firstChild;)i.dom.elLegendWrap.removeChild(i.dom.elLegendWrap.firstChild);this.drawLegends(),Y.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===n.legend.position||"top"===n.legend.position?this.legendAlignHorizontal():"right"!==n.legend.position&&"left"!==n.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var t=this,i=this.w,n=i.config.legend.fontFamily,o=i.globals.seriesNames,l=i.globals.colors.slice();if("heatmap"===i.config.chart.type){var u=i.config.plotOptions.heatmap.colorScale.ranges;o=u.map(function(Q){return Q.name?Q.name:Q.from+" - "+Q.to}),l=u.map(function(Q){return Q.color})}else this.isBarsDistributed&&(o=i.globals.labels.slice());i.config.legend.customLegendItems.length&&(o=i.config.legend.customLegendItems);for(var h=i.globals.legendFormatter,g=i.config.legend.inverseOrder,f=g?o.length-1:0;g?f>=0:f<=o.length-1;g?f--:f++){var x=h(o[f],{seriesIndex:f,w:i}),y=!1,w=!1;if(i.globals.collapsedSeries.length>0)for(var C=0;C<i.globals.collapsedSeries.length;C++)i.globals.collapsedSeries[C].index===f&&(y=!0);if(i.globals.ancillaryCollapsedSeriesIndices.length>0)for(var E=0;E<i.globals.ancillaryCollapsedSeriesIndices.length;E++)i.globals.ancillaryCollapsedSeriesIndices[E]===f&&(w=!0);var k=document.createElement("span");k.classList.add("apexcharts-legend-marker");var I=i.config.legend.markers.offsetX,P=i.config.legend.markers.offsetY,O=i.config.legend.markers.height,D=i.config.legend.markers.width,p=i.config.legend.markers.strokeWidth,_=i.config.legend.markers.strokeColor,T=i.config.legend.markers.radius,L=k.style;L.background=l[f],L.color=l[f],L.setProperty("background",l[f],"important"),i.config.legend.markers.fillColors&&i.config.legend.markers.fillColors[f]&&(L.background=i.config.legend.markers.fillColors[f]),void 0!==i.globals.seriesColors[f]&&(L.background=i.globals.seriesColors[f],L.color=i.globals.seriesColors[f]),L.height=Array.isArray(O)?parseFloat(O[f])+"px":parseFloat(O)+"px",L.width=Array.isArray(D)?parseFloat(D[f])+"px":parseFloat(D)+"px",L.left=(Array.isArray(I)?parseFloat(I[f]):parseFloat(I))+"px",L.top=(Array.isArray(P)?parseFloat(P[f]):parseFloat(P))+"px",L.borderWidth=Array.isArray(p)?p[f]:p,L.borderColor=Array.isArray(_)?_[f]:_,L.borderRadius=Array.isArray(T)?parseFloat(T[f])+"px":parseFloat(T)+"px",i.config.legend.markers.customHTML&&(Array.isArray(i.config.legend.markers.customHTML)?i.config.legend.markers.customHTML[f]&&(k.innerHTML=i.config.legend.markers.customHTML[f]()):k.innerHTML=i.config.legend.markers.customHTML()),j.setAttrs(k,{rel:f+1,"data:collapsed":y||w}),(y||w)&&k.classList.add("apexcharts-inactive-legend");var z=document.createElement("div"),K=document.createElement("span");K.classList.add("apexcharts-legend-text"),K.innerHTML=Array.isArray(x)?x.join(" "):x;var W=i.config.legend.labels.useSeriesColors?i.globals.colors[f]:i.config.legend.labels.colors;W||(W=i.config.chart.foreColor),K.style.color=W,K.style.fontSize=parseFloat(i.config.legend.fontSize)+"px",K.style.fontWeight=i.config.legend.fontWeight,K.style.fontFamily=n||i.config.chart.fontFamily,j.setAttrs(K,{rel:f+1,i:f,"data:default-text":encodeURIComponent(x),"data:collapsed":y||w}),z.appendChild(k),z.appendChild(K);var ee=new ye(this.ctx);i.config.legend.showForZeroSeries||0===ee.getSeriesTotalByIndex(f)&&ee.seriesHaveSameValues(f)&&!ee.isSeriesNull(f)&&-1===i.globals.collapsedSeriesIndices.indexOf(f)&&-1===i.globals.ancillaryCollapsedSeriesIndices.indexOf(f)&&z.classList.add("apexcharts-hidden-zero-series"),i.config.legend.showForNullSeries||ee.isSeriesNull(f)&&-1===i.globals.collapsedSeriesIndices.indexOf(f)&&-1===i.globals.ancillaryCollapsedSeriesIndices.indexOf(f)&&z.classList.add("apexcharts-hidden-null-series"),i.globals.dom.elLegendWrap.appendChild(z),i.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(i.config.legend.horizontalAlign)),i.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+i.config.legend.position),z.classList.add("apexcharts-legend-series"),z.style.margin="".concat(i.config.legend.itemMargin.vertical,"px ").concat(i.config.legend.itemMargin.horizontal,"px"),i.globals.dom.elLegendWrap.style.width=i.config.legend.width?i.config.legend.width+"px":"",i.globals.dom.elLegendWrap.style.height=i.config.legend.height?i.config.legend.height+"px":"",j.setAttrs(z,{rel:f+1,seriesName:Y.escapeString(o[f]),"data:collapsed":y||w}),(y||w)&&z.classList.add("apexcharts-inactive-legend"),i.config.legend.onItemClick.toggleDataSeries||z.classList.add("apexcharts-no-click")}i.globals.dom.elWrap.addEventListener("click",t.onLegendClick,!0),i.config.legend.onItemHover.highlightDataSeries&&0===i.config.legend.customLegendItems.length&&(i.globals.dom.elWrap.addEventListener("mousemove",t.onLegendHovered,!0),i.globals.dom.elWrap.addEventListener("mouseout",t.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(t,i){var n=this.w,o=n.globals.dom.baseEl.querySelector(".apexcharts-legend"),l=o.getBoundingClientRect(),u=0,h=0;if("bottom"===n.config.legend.position)h+=n.globals.svgHeight-l.height/2;else if("top"===n.config.legend.position){var g=new ci(this.ctx),f=g.dimHelpers.getTitleSubtitleCoords("title").height,x=g.dimHelpers.getTitleSubtitleCoords("subtitle").height;h=h+(f>0?f-10:0)+(x>0?x-10:0)}o.style.position="absolute",h=h+i+n.config.legend.offsetY,o.style.left=(u=u+t+n.config.legend.offsetX)+"px",o.style.top=h+"px","bottom"===n.config.legend.position?(o.style.top="auto",o.style.bottom=5-n.config.legend.offsetY+"px"):"right"===n.config.legend.position&&(o.style.left="auto",o.style.right=25+n.config.legend.offsetX+"px"),["width","height"].forEach(function(y){o.style[y]&&(o.style[y]=parseInt(n.config.legend[y],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var t=this.w;t.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var i=this.legendHelpers.getLegendBBox(),n=new ci(this.ctx),o=n.dimHelpers.getTitleSubtitleCoords("title"),l=n.dimHelpers.getTitleSubtitleCoords("subtitle"),u=0;"bottom"===t.config.legend.position?u=-i.clwh/1.8:"top"===t.config.legend.position&&(u=o.height+l.height+t.config.title.margin+t.config.subtitle.margin-10),this.setLegendWrapXY(20,u)}},{key:"legendAlignVertical",value:function(){var t=this.w,i=this.legendHelpers.getLegendBBox(),n=0;"left"===t.config.legend.position&&(n=20),"right"===t.config.legend.position&&(n=t.globals.svgWidth-i.clww-10),this.setLegendWrapXY(n,20)}},{key:"onLegendHovered",value:function(t){var i=this.w,n=t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker");if("heatmap"===i.config.chart.type||this.isBarsDistributed){if(n){var o=parseInt(t.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,o,this.w]),new pe(this.ctx).highlightRangeInSeries(t,t.target)}}else!t.target.classList.contains("apexcharts-inactive-legend")&&n&&new pe(this.ctx).toggleSeriesOnHover(t,t.target)}},{key:"onLegendClick",value:function(t){var i=this.w;if(!i.config.legend.customLegendItems.length&&(t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker"))){var n=parseInt(t.target.getAttribute("rel"),10)-1,o="true"===t.target.getAttribute("data:collapsed"),l=this.w.config.chart.events.legendClick;"function"==typeof l&&l(this.ctx,n,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,n,this.w]);var u=this.w.config.legend.markers.onClick;"function"==typeof u&&t.target.classList.contains("apexcharts-legend-marker")&&(u(this.ctx,n,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,n,this.w])),"treemap"!==i.config.chart.type&&"heatmap"!==i.config.chart.type&&!this.isBarsDistributed&&i.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(n,o)}}}]),M}(),Cn=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w;var i=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=i.globals.minX,this.maxX=i.globals.maxX}return ne(M,[{key:"createToolbar",value:function(){var t=this,i=this.w,n=function(){return document.createElement("div")},o=n();if(o.setAttribute("class","apexcharts-toolbar"),o.style.top=i.config.chart.toolbar.offsetY+"px",o.style.right=3-i.config.chart.toolbar.offsetX+"px",i.globals.dom.elWrap.appendChild(o),this.elZoom=n(),this.elZoomIn=n(),this.elZoomOut=n(),this.elPan=n(),this.elSelection=n(),this.elZoomReset=n(),this.elMenuIcon=n(),this.elMenu=n(),this.elCustomIcons=[],this.t=i.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var l=0;l<this.t.customIcons.length;l++)this.elCustomIcons.push(n());var u=[],h=function(y,w,C){var E=y.toLowerCase();t.t[E]&&i.config.chart.zoom.enabled&&u.push({el:w,icon:"string"==typeof t.t[E]?t.t[E]:C,title:t.localeValues[y],class:"apexcharts-".concat(E,"-icon")})};h("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),h("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var g=function(y){t.t[y]&&i.config.chart[y].enabled&&u.push({el:"zoom"===y?t.elZoom:t.elSelection,icon:"string"==typeof t.t[y]?t.t[y]:"zoom"===y?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:t.localeValues["zoom"===y?"selectionZoom":"selection"],class:i.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(y,"-icon")})};g("zoom"),g("selection"),this.t.pan&&i.config.chart.zoom.enabled&&u.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:i.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),h("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&u.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var f=0;f<this.elCustomIcons.length;f++)u.push({el:this.elCustomIcons[f],icon:this.t.customIcons[f].icon,title:this.t.customIcons[f].title,index:this.t.customIcons[f].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[f].class});u.forEach(function(y,w){y.index&&Y.moveIndexInArray(u,w,y.index)});for(var x=0;x<u.length;x++)j.setAttrs(u[x].el,{class:u[x].class,title:u[x].title}),u[x].el.innerHTML=u[x].icon,o.appendChild(u[x].el);this._createHamburgerMenu(o),i.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):i.globals.panEnabled?this.elPan.classList.add(this.selectedClass):i.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(t){this.elMenuItems=[],t.appendChild(this.elMenu),j.setAttrs(this.elMenu,{class:"apexcharts-menu"});var i=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||i.splice(2,1);for(var n=0;n<i.length;n++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[n].innerHTML=i[n].title,j.setAttrs(this.elMenuItems[n],{class:"apexcharts-menu-item ".concat(i[n].name),title:i[n].title}),this.elMenu.appendChild(this.elMenuItems[n])}},{key:"addToolbarEventListeners",value:function(){var t=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(n){n.classList.contains("exportSVG")?n.addEventListener("click",t.handleDownload.bind(t,"svg")):n.classList.contains("exportPNG")?n.addEventListener("click",t.handleDownload.bind(t,"png")):n.classList.contains("exportCSV")&&n.addEventListener("click",t.handleDownload.bind(t,"csv"))});for(var i=0;i<this.t.customIcons.length;i++)this.elCustomIcons[i].addEventListener("click",this.t.customIcons[i].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(t){this.ctx.getSyncedCharts().forEach(function(i){i.ctx.toolbar.toggleOtherControls();var n="selection"===t?i.ctx.toolbar.elSelection:i.ctx.toolbar.elZoom,o="selection"===t?"selectionEnabled":"zoomEnabled";i.w.globals[o]=!i.w.globals[o],n.classList.contains(i.ctx.toolbar.selectedClass)?n.classList.remove(i.ctx.toolbar.selectedClass):n.classList.add(i.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var t=this.w;this.elZoom||(this.elZoom=t.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=t.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=t.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(t){this.toggleOtherControls(),"pan"===t?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var i="pan"===t?this.elPan:this.elZoom,n="pan"===t?this.elZoom:this.elPan;i&&i.classList.add(this.selectedClass),n&&n.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(t){t.ctx.toolbar.toggleOtherControls(),t.w.globals.panEnabled=!t.w.globals.panEnabled,t.ctx.toolbar.elPan.classList.contains(t.ctx.toolbar.selectedClass)?t.ctx.toolbar.elPan.classList.remove(t.ctx.toolbar.selectedClass):t.ctx.toolbar.elPan.classList.add(t.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var t=this,i=this.w;i.globals.panEnabled=!1,i.globals.zoomEnabled=!1,i.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(n){n&&n.classList.remove(t.selectedClass)})}},{key:"handleZoomIn",value:function(){var t=this.w;t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY);var i=(this.minX+this.maxX)/2,l=this._getNewMinXMaxX((this.minX+i)/2,(this.maxX+i)/2);t.globals.disableZoomIn||this.zoomUpdateOptions(l.minX,l.maxX)}},{key:"handleZoomOut",value:function(){var t=this.w;if(t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY),!("datetime"===t.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var i=(this.minX+this.maxX)/2,l=this._getNewMinXMaxX(this.minX-(i-this.minX),this.maxX-(i-this.maxX));t.globals.disableZoomOut||this.zoomUpdateOptions(l.minX,l.maxX)}}},{key:"_getNewMinXMaxX",value:function(t,i){var n=this.w.config.xaxis.convertedCatToNumeric;return{minX:n?Math.floor(t):t,maxX:n?Math.floor(i):i}}},{key:"zoomUpdateOptions",value:function(t,i){var n=this.w;if(void 0!==t||void 0!==i){if(!(n.config.xaxis.convertedCatToNumeric&&(t<1&&(t=1,i=n.globals.dataPoints),i-t<2))){var o={min:t,max:i},l=this.getBeforeZoomRange(o);l&&(o=l.xaxis);var u={xaxis:o},h=Y.clone(n.globals.initialConfig.yaxis);n.config.chart.zoom.autoScaleYaxis&&(h=new Ei(this.ctx).autoScaleY(this.ctx,h,{xaxis:o})),n.config.chart.group||(u.yaxis=h),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(u,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(o,h)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(t,i){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:t,yaxis:i})}},{key:"getBeforeZoomRange",value:function(t,i){var n=null;return"function"==typeof this.ev.beforeZoom&&(n=this.ev.beforeZoom(this,{xaxis:t,yaxis:i})),n}},{key:"toggleMenu",value:function(){var t=this;window.setTimeout(function(){t.elMenu.classList.contains("apexcharts-menu-open")?t.elMenu.classList.remove("apexcharts-menu-open"):t.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(t){var i=this.w,n=new Ve(this.ctx);switch(t){case"svg":n.exportToSVG(this.ctx);break;case"png":n.exportToPng(this.ctx);break;case"csv":n.exportToCSV({series:i.config.series,columnDelimiter:i.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(t){this.ctx.getSyncedCharts().forEach(function(i){var n=i.w;if(n.globals.lastXAxis.min=void 0,n.globals.lastXAxis.max=void 0,i.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof n.config.chart.events.beforeResetZoom){var o=n.config.chart.events.beforeResetZoom(i,n);o&&i.updateHelpers.revertDefaultAxisMinMax(o)}"function"==typeof n.config.chart.events.zoomed&&i.ctx.toolbar.zoomCallback({min:n.config.xaxis.min,max:n.config.xaxis.max}),n.globals.zoomed=!1;var l=i.ctx.series.emptyCollapsedSeries(Y.clone(n.globals.initialSeries));i.updateHelpers._updateSeries(l,n.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),M}(),it=function(M){Tt(i,Cn);var t=Ct(i);function i(n){var o;return re(this,i),(o=t.call(this,n)).ctx=n,o.w=n.w,o.dragged=!1,o.graphics=new j(o.ctx),o.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],o.clientX=0,o.clientY=0,o.startX=0,o.endX=0,o.dragX=0,o.startY=0,o.endY=0,o.dragY=0,o.moveDirection="none",o}return ne(i,[{key:"init",value:function(n){var o=this,l=n.xyRatios,u=this.w,h=this;this.xyRatios=l,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=u.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),u.globals.dom.elGraphical.add(this.zoomRect),u.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===u.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:u.globals.gridWidth,maxY:u.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===u.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:u.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=u.globals.dom.baseEl.querySelector("".concat(u.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(g){o.hoverArea.addEventListener(g,h.svgMouseEvents.bind(h,l),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(n,o){var l=this.w,u=this,h=this.ctx.toolbar,g=l.globals.zoomEnabled?l.config.chart.zoom.type:l.config.chart.selection.type,f=l.config.chart.toolbar.autoSelected;if(o.shiftKey?(this.shiftWasPressed=!0,h.enableZoomPanFromToolbar("pan"===f?"zoom":"pan")):this.shiftWasPressed&&(h.enableZoomPanFromToolbar(f),this.shiftWasPressed=!1),o.target){var x,y=o.target.classList;if(o.target.parentNode&&null!==o.target.parentNode&&(x=o.target.parentNode.classList),!(y.contains("apexcharts-selection-rect")||y.contains("apexcharts-legend-marker")||y.contains("apexcharts-legend-text")||x&&x.contains("apexcharts-toolbar"))){if(u.clientX="touchmove"===o.type||"touchstart"===o.type?o.touches[0].clientX:"touchend"===o.type?o.changedTouches[0].clientX:o.clientX,u.clientY="touchmove"===o.type||"touchstart"===o.type?o.touches[0].clientY:"touchend"===o.type?o.changedTouches[0].clientY:o.clientY,"mousedown"===o.type&&1===o.which){var w=u.gridRect.getBoundingClientRect();u.startX=u.clientX-w.left,u.startY=u.clientY-w.top,u.dragged=!1,u.w.globals.mousedown=!0}if(("mousemove"===o.type&&1===o.which||"touchmove"===o.type)&&(u.dragged=!0,l.globals.panEnabled?(l.globals.selection=null,u.w.globals.mousedown&&u.panDragging({context:u,zoomtype:g,xyRatios:n})):(u.w.globals.mousedown&&l.globals.zoomEnabled||u.w.globals.mousedown&&l.globals.selectionEnabled)&&(u.selection=u.selectionDrawing({context:u,zoomtype:g}))),"mouseup"===o.type||"touchend"===o.type||"mouseleave"===o.type){var C=u.gridRect.getBoundingClientRect();u.w.globals.mousedown&&(u.endX=u.clientX-C.left,u.endY=u.clientY-C.top,u.dragX=Math.abs(u.endX-u.startX),u.dragY=Math.abs(u.endY-u.startY),(l.globals.zoomEnabled||l.globals.selectionEnabled)&&u.selectionDrawn({context:u,zoomtype:g}),l.globals.panEnabled&&l.config.xaxis.convertedCatToNumeric&&u.delayedPanScrolled()),l.globals.zoomEnabled&&u.hideSelectionRect(this.selectionRect),u.dragged=!1,u.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var n=this.w;if(this.selectionRect){var o=this.selectionRect.node.getBoundingClientRect();o.width>0&&o.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:n.globals.gridWidth,maxY:n.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var n=this.w,o=this.xyRatios;if(!n.globals.zoomEnabled)if(null!=n.globals.selection)this.drawSelectionRect(n.globals.selection);else if(void 0!==n.config.chart.selection.xaxis.min&&void 0!==n.config.chart.selection.xaxis.max){var l=(n.config.chart.selection.xaxis.min-n.globals.minX)/o.xRatio;this.drawSelectionRect({x:l,y:0,width:n.globals.gridWidth-(n.globals.maxX-n.config.chart.selection.xaxis.max)/o.xRatio-l,height:n.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof n.config.chart.events.selection&&n.config.chart.events.selection(this.ctx,{xaxis:{min:n.config.chart.selection.xaxis.min,max:n.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(n){var o=n.x,l=n.y,u=n.width,h=n.height,g=n.translateX,x=n.translateY,w=this.w,C=this.zoomRect,E=this.selectionRect;if(this.dragged||null!==w.globals.selection){var k={transform:"translate("+(void 0===g?0:g)+", "+(void 0===x?0:x)+")"};w.globals.zoomEnabled&&this.dragged&&(u<0&&(u=1),C.attr({x:o,y:l,width:u,height:h,fill:w.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":w.config.chart.zoom.zoomedArea.fill.opacity,stroke:w.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":w.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":w.config.chart.zoom.zoomedArea.stroke.opacity}),j.setAttrs(C.node,k)),w.globals.selectionEnabled&&(E.attr({x:o,y:l,width:u>0?u:0,height:h>0?h:0,fill:w.config.chart.selection.fill.color,"fill-opacity":w.config.chart.selection.fill.opacity,stroke:w.config.chart.selection.stroke.color,"stroke-width":w.config.chart.selection.stroke.width,"stroke-dasharray":w.config.chart.selection.stroke.dashArray,"stroke-opacity":w.config.chart.selection.stroke.opacity}),j.setAttrs(E.node,k))}}},{key:"hideSelectionRect",value:function(n){n&&n.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(n){var k,l=n.zoomtype,u=this.w,h=n.context,g=this.gridRect.getBoundingClientRect(),f=h.startX-1,x=h.startY,y=!1,w=!1,C=h.clientX-g.left-f,E=h.clientY-g.top-x;return Math.abs(C+f)>u.globals.gridWidth?C=u.globals.gridWidth-f:h.clientX-g.left<0&&(C=f),f>h.clientX-g.left&&(y=!0,C=Math.abs(C)),x>h.clientY-g.top&&(w=!0,E=Math.abs(E)),h.drawSelectionRect(k="x"===l?{x:y?f-C:f,y:0,width:C,height:u.globals.gridHeight}:"y"===l?{x:0,y:w?x-E:x,width:u.globals.gridWidth,height:E}:{x:y?f-C:f,y:w?x-E:x,width:C,height:E}),h.selectionDragging("resizing"),k}},{key:"selectionDragging",value:function(n,o){var l=this,u=this.w,h=this.xyRatios,g=this.selectionRect,f=0;"resizing"===n&&(f=30);var x=function(w){return parseFloat(g.node.getAttribute(w))},y={x:x("x"),y:x("y"),width:x("width"),height:x("height")};u.globals.selection=y,"function"==typeof u.config.chart.events.selection&&u.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var w=l.gridRect.getBoundingClientRect(),C=g.node.getBoundingClientRect(),E={xaxis:{min:u.globals.xAxisScale.niceMin+(C.left-w.left)*h.xRatio,max:u.globals.xAxisScale.niceMin+(C.right-w.left)*h.xRatio},yaxis:{min:u.globals.yAxisScale[0].niceMin+(w.bottom-C.bottom)*h.yRatio[0],max:u.globals.yAxisScale[0].niceMax-(C.top-w.top)*h.yRatio[0]}};u.config.chart.events.selection(l.ctx,E),u.config.chart.brush.enabled&&void 0!==u.config.chart.events.brushScrolled&&u.config.chart.events.brushScrolled(l.ctx,E)},f))}},{key:"selectionDrawn",value:function(n){var l=n.zoomtype,u=this.w,h=n.context,g=this.xyRatios,f=this.ctx.toolbar;if(h.startX>h.endX){var x=h.startX;h.startX=h.endX,h.endX=x}if(h.startY>h.endY){var y=h.startY;h.startY=h.endY,h.endY=y}var w=void 0,C=void 0;u.globals.isRangeBar?(w=u.globals.yAxisScale[0].niceMin+h.startX*g.invertedYRatio,C=u.globals.yAxisScale[0].niceMin+h.endX*g.invertedYRatio):(w=u.globals.xAxisScale.niceMin+h.startX*g.xRatio,C=u.globals.xAxisScale.niceMin+h.endX*g.xRatio);var E=[],k=[];if(u.config.yaxis.forEach(function(L,z){E.push(u.globals.yAxisScale[z].niceMax-g.yRatio[z]*h.startY),k.push(u.globals.yAxisScale[z].niceMax-g.yRatio[z]*h.endY)}),h.dragged&&(h.dragX>10||h.dragY>10)&&w!==C)if(u.globals.zoomEnabled){var I=Y.clone(u.globals.initialConfig.yaxis),P=Y.clone(u.globals.initialConfig.xaxis);if(u.globals.zoomed=!0,u.config.xaxis.convertedCatToNumeric&&(w=Math.floor(w),C=Math.floor(C),w<1&&(w=1,C=u.globals.dataPoints),C-w<2&&(C=w+1)),"xy"!==l&&"x"!==l||(P={min:w,max:C}),"xy"!==l&&"y"!==l||I.forEach(function(L,z){I[z].min=k[z],I[z].max=E[z]}),u.config.chart.zoom.autoScaleYaxis){var O=new Ei(h.ctx);I=O.autoScaleY(h.ctx,I,{xaxis:P})}if(f){var D=f.getBeforeZoomRange(P,I);D&&(P=D.xaxis?D.xaxis:P,I=D.yaxis?D.yaxis:I)}var p={xaxis:P};u.config.chart.group||(p.yaxis=I),h.ctx.updateHelpers._updateOptions(p,!1,h.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof u.config.chart.events.zoomed&&f.zoomCallback(P,I)}else if(u.globals.selectionEnabled){var _,T=null;_={min:w,max:C},"xy"!==l&&"y"!==l||(T=Y.clone(u.config.yaxis)).forEach(function(L,z){T[z].min=k[z],T[z].max=E[z]}),u.globals.selection=h.selection,"function"==typeof u.config.chart.events.selection&&u.config.chart.events.selection(h.ctx,{xaxis:_,yaxis:T})}}},{key:"panDragging",value:function(n){var l=this.w,u=n.context;if(void 0!==l.globals.lastClientPosition.x){var h=l.globals.lastClientPosition.x-u.clientX,g=l.globals.lastClientPosition.y-u.clientY;Math.abs(h)>Math.abs(g)&&h>0?this.moveDirection="left":Math.abs(h)>Math.abs(g)&&h<0?this.moveDirection="right":Math.abs(g)>Math.abs(h)&&g>0?this.moveDirection="up":Math.abs(g)>Math.abs(h)&&g<0&&(this.moveDirection="down")}l.globals.lastClientPosition={x:u.clientX,y:u.clientY},l.config.xaxis.convertedCatToNumeric||u.panScrolled(l.globals.isRangeBar?l.globals.minY:l.globals.minX,l.globals.isRangeBar?l.globals.maxY:l.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var n=this.w,o=n.globals.minX,l=n.globals.maxX,u=(n.globals.maxX-n.globals.minX)/2;"left"===this.moveDirection?(o=n.globals.minX+u,l=n.globals.maxX+u):"right"===this.moveDirection&&(o=n.globals.minX-u,l=n.globals.maxX-u),o=Math.floor(o),l=Math.floor(l),this.updateScrolledChart({xaxis:{min:o,max:l}},o,l)}},{key:"panScrolled",value:function(n,o){var l=this.w,u=this.xyRatios,h=Y.clone(l.globals.initialConfig.yaxis),g=u.xRatio,f=l.globals.minX,x=l.globals.maxX;l.globals.isRangeBar&&(g=u.invertedYRatio,f=l.globals.minY,x=l.globals.maxY),"left"===this.moveDirection?(n=f+l.globals.gridWidth/15*g,o=x+l.globals.gridWidth/15*g):"right"===this.moveDirection&&(n=f-l.globals.gridWidth/15*g,o=x-l.globals.gridWidth/15*g),l.globals.isRangeBar||(n<l.globals.initialMinX||o>l.globals.initialMaxX)&&(n=f,o=x);var y={min:n,max:o};l.config.chart.zoom.autoScaleYaxis&&(h=new Ei(this.ctx).autoScaleY(this.ctx,h,{xaxis:y}));var w={xaxis:{min:n,max:o}};l.config.chart.group||(w.yaxis=h),this.updateScrolledChart(w,n,o)}},{key:"updateScrolledChart",value:function(n,o,l){var u=this.w;this.ctx.updateHelpers._updateOptions(n,!1,!1),"function"==typeof u.config.chart.events.scrolled&&u.config.chart.events.scrolled(this.ctx,{xaxis:{min:o,max:l}})}}]),i}(),Sn=function(){function M(t){re(this,M),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx}return ne(M,[{key:"getNearestValues",value:function(t){var i=t.hoverArea,o=t.clientX,l=t.clientY,u=this.w,h=t.elGrid.getBoundingClientRect(),g=h.width,f=h.height,x=g/(u.globals.dataPoints-1),y=f/u.globals.dataPoints,w=this.hasBars();!u.globals.comboCharts&&!w||u.config.xaxis.convertedCatToNumeric||(x=g/u.globals.dataPoints);var C=o-h.left-u.globals.barPadForNumericAxis,E=l-h.top;C<0||E<0||C>g||E>f?(i.classList.remove("hovering-zoom"),i.classList.remove("hovering-pan")):u.globals.zoomEnabled?(i.classList.remove("hovering-pan"),i.classList.add("hovering-zoom")):u.globals.panEnabled&&(i.classList.remove("hovering-zoom"),i.classList.add("hovering-pan"));var k=Math.round(C/x),I=Math.floor(E/y);w&&!u.config.xaxis.convertedCatToNumeric&&(k=Math.ceil(C/x),k-=1);var P=null,O=null,D=[],p=[];if(u.globals.seriesXvalues.forEach(function(z){D.push([z[0]+1e-6].concat(z))}),u.globals.seriesYvalues.forEach(function(z){p.push([z[0]+1e-6].concat(z))}),D=D.map(function(z){return z.filter(function(K){return Y.isNumber(K)})}),p=p.map(function(z){return z.filter(function(K){return Y.isNumber(K)})}),u.globals.isXNumeric){var _=this.ttCtx.getElGrid().getBoundingClientRect(),T=C*(_.width/g);P=(O=this.closestInMultiArray(T,E*(_.height/f),D,p)).index,k=O.j,null!==P&&(k=(O=this.closestInArray(T,D=u.globals.seriesXvalues[P])).index)}return u.globals.capturedSeriesIndex=null===P?-1:P,(!k||k<1)&&(k=0),u.globals.capturedDataPointIndex=u.globals.isBarHorizontal?I:k,{capturedSeries:P,j:u.globals.isBarHorizontal?I:k,hoverX:C,hoverY:E}}},{key:"closestInMultiArray",value:function(t,i,n,o){var u=0,h=null,g=-1;this.w.globals.series.length>1?u=this.getFirstActiveXArray(n):h=0;var x=Math.abs(t-n[u][0]);if(n.forEach(function(C){C.forEach(function(E,k){var I=Math.abs(t-E);I<x&&(x=I,g=k)})}),-1!==g){var w=Math.abs(i-o[u][g]);h=u,o.forEach(function(C,E){var k=Math.abs(i-C[g]);k<w&&(w=k,h=E)})}return{index:h,j:g}}},{key:"getFirstActiveXArray",value:function(t){for(var i=this.w,n=0,o=t.map(function(u,h){return u.length>0?h:-1}),l=0;l<o.length;l++)if(-1!==o[l]&&-1===i.globals.collapsedSeriesIndices.indexOf(l)&&-1===i.globals.ancillaryCollapsedSeriesIndices.indexOf(l)){n=o[l];break}return n}},{key:"closestInArray",value:function(t,i){for(var o=null,l=Math.abs(t-i[0]),u=0;u<i.length;u++){var h=Math.abs(t-i[u]);h<l&&(l=h,o=u)}return{index:o}}},{key:"isXoverlap",value:function(t){var i=[],n=this.w.globals.seriesX.filter(function(l){return void 0!==l[0]});if(n.length>0)for(var o=0;o<n.length-1;o++)void 0!==n[o][t]&&void 0!==n[o+1][t]&&n[o][t]!==n[o+1][t]&&i.push("unEqual");return 0===i.length}},{key:"isInitialSeriesSameLen",value:function(){for(var t=!0,i=this.w.globals.initialSeries,n=0;n<i.length-1;n++)if(i[n].data.length!==i[n+1].data.length){t=!1;break}return t}},{key:"getBarsHeight",value:function(t){return Z(t).reduce(function(i,n){return i+n.getBBox().height},0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(t=Z(t)).sort(function(n,o){var l=Number(n.getAttribute("data:realIndex")),u=Number(o.getAttribute("data:realIndex"));return u<l?1:u>l?-1:0});var i=[];return t.forEach(function(n){i.push(n.querySelector(".apexcharts-marker"))}),i}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(t){var i=this.w,n=i.config.markers.hover.size;return void 0===n&&(n=i.globals.markers.size[t]+i.config.markers.hover.sizeOffset),n}},{key:"toggleAllTooltipSeriesGroups",value:function(t){var i=this.w,n=this.ttCtx;0===n.allTooltipSeriesGroups.length&&(n.allTooltipSeriesGroups=i.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var o=n.allTooltipSeriesGroups,l=0;l<o.length;l++)"enable"===t?(o[l].classList.add("apexcharts-active"),o[l].style.display=i.config.tooltip.items.display):(o[l].classList.remove("apexcharts-active"),o[l].style.display="none")}}]),M}(),Ea=function(){function M(t){re(this,M),this.w=t.w,this.ctx=t.ctx,this.ttCtx=t,this.tooltipUtil=new Sn(t)}return ne(M,[{key:"drawSeriesTexts",value:function(t){var i=t.shared,n=void 0===i||i,o=t.ttItems,l=t.i,u=void 0===l?0:l,h=t.j,g=void 0===h?null:h,y=t.e,w=this.w;void 0!==w.config.tooltip.custom?this.handleCustomTooltip({i:u,j:g,y1:t.y1,y2:t.y2,w}):this.toggleActiveInactiveSeries(n);var C=this.getValuesToPrint({i:u,j:g});this.printLabels({i:u,j:g,values:C,ttItems:o,shared:n,e:y});var E=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=E.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=E.getBoundingClientRect().height}},{key:"printLabels",value:function(t){var i,n=this,o=t.i,l=t.j,u=t.values,h=t.ttItems,g=t.shared,f=t.e,x=this.w,y=[],w=function(_){return x.globals.seriesGoals[_]&&x.globals.seriesGoals[_][l]&&Array.isArray(x.globals.seriesGoals[_][l])},C=u.xVal,E=u.zVal,k=u.xAxisTTVal,I="",P=x.globals.colors[o];null!==l&&x.config.plotOptions.bar.distributed&&(P=x.globals.colors[l]);for(var O=function(_,T){var L=n.getFormatters(o);I=n.getSeriesName({fn:L.yLbTitleFormatter,index:o,seriesIndex:o,j:l}),"treemap"===x.config.chart.type&&(I=L.yLbTitleFormatter(String(x.config.series[o].data[l].x),{series:x.globals.series,seriesIndex:o,dataPointIndex:l,w:x}));var z=x.config.tooltip.inverseOrder?T:_;if(x.globals.axisCharts){var K=function(Q){return L.yLbFormatter(x.globals.series[Q][l],{series:x.globals.series,seriesIndex:Q,dataPointIndex:l,w:x})};if(g)L=n.getFormatters(z),I=n.getSeriesName({fn:L.yLbTitleFormatter,index:z,seriesIndex:o,j:l}),P=x.globals.colors[z],i=K(z),w(z)&&(y=x.globals.seriesGoals[z][l].map(function(Q){return{attrs:Q,val:L.yLbFormatter(Q.value,{seriesIndex:z,dataPointIndex:l,w:x})}}));else{var W,ee=null==f||null===(W=f.target)||void 0===W?void 0:W.getAttribute("fill");ee&&(P=-1!==ee.indexOf("url")?document.querySelector(ee.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):ee),i=K(o),w(o)&&Array.isArray(x.globals.seriesGoals[o][l])&&(y=x.globals.seriesGoals[o][l].map(function(Q){return{attrs:Q,val:L.yLbFormatter(Q.value,{seriesIndex:o,dataPointIndex:l,w:x})}}))}}null===l&&(i=L.yLbFormatter(x.globals.series[o],Ce(Ce({},x),{},{seriesIndex:o,dataPointIndex:o}))),n.DOMHandling({i:o,t:z,j:l,ttItems:h,values:{val:i,goalVals:y,xVal:C,xAxisTTVal:k,zVal:E},seriesName:I,shared:g,pColor:P})},D=0,p=x.globals.series.length-1;D<x.globals.series.length;D++,p--)O(D,p)}},{key:"getFormatters",value:function(t){var i,n=this.w,o=n.globals.yLabelFormatters[t];return void 0!==n.globals.ttVal?Array.isArray(n.globals.ttVal)?(o=n.globals.ttVal[t]&&n.globals.ttVal[t].formatter,i=n.globals.ttVal[t]&&n.globals.ttVal[t].title&&n.globals.ttVal[t].title.formatter):(o=n.globals.ttVal.formatter,"function"==typeof n.globals.ttVal.title.formatter&&(i=n.globals.ttVal.title.formatter)):i=n.config.tooltip.y.title.formatter,"function"!=typeof o&&(o=n.globals.yLabelFormatters[0]?n.globals.yLabelFormatters[0]:function(l){return l}),"function"!=typeof i&&(i=function(l){return l}),{yLbFormatter:o,yLbTitleFormatter:i}}},{key:"getSeriesName",value:function(t){var o=t.seriesIndex,l=t.j,u=this.w;return(0,t.fn)(String(u.globals.seriesNames[t.index]),{series:u.globals.series,seriesIndex:o,dataPointIndex:l,w:u})}},{key:"DOMHandling",value:function(t){var i=t.t,n=t.j,o=t.ttItems,l=t.values,u=t.seriesName,h=t.shared,g=t.pColor,f=this.w,x=this.ttCtx,y=l.val,w=l.goalVals,C=l.xVal,E=l.xAxisTTVal,k=l.zVal,I=null;I=o[i].children,f.config.tooltip.fillSeriesColor&&(o[i].style.backgroundColor=g,I[0].style.display="none"),x.showTooltipTitle&&(null===x.tooltipTitle&&(x.tooltipTitle=f.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),x.tooltipTitle.innerHTML=C),x.isXAxisTooltipEnabled&&(x.xaxisTooltipText.innerHTML=""!==E?E:C);var P=o[i].querySelector(".apexcharts-tooltip-text-y-label");P&&(P.innerHTML=u||"");var O=o[i].querySelector(".apexcharts-tooltip-text-y-value");O&&(O.innerHTML=void 0!==y?y:""),I[0]&&I[0].classList.contains("apexcharts-tooltip-marker")&&(f.config.tooltip.marker.fillColors&&Array.isArray(f.config.tooltip.marker.fillColors)&&(g=f.config.tooltip.marker.fillColors[i]),I[0].style.backgroundColor=g),f.config.tooltip.marker.show||(I[0].style.display="none");var D=o[i].querySelector(".apexcharts-tooltip-text-goals-label"),p=o[i].querySelector(".apexcharts-tooltip-text-goals-value");if(w.length&&f.globals.seriesGoals[i]){var _=function(){var T="<div >",L="<div>";w.forEach(function(z,K){T+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(z.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(z.attrs.name,"</div>"),L+="<div>".concat(z.val,"</div>")}),D.innerHTML=T+"</div>",p.innerHTML=L+"</div>"};h?f.globals.seriesGoals[i][n]&&Array.isArray(f.globals.seriesGoals[i][n])?_():(D.innerHTML="",p.innerHTML=""):_()}else D.innerHTML="",p.innerHTML="";null!==k&&(o[i].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=f.config.tooltip.z.title,o[i].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==k?k:""),h&&I[0]&&(I[0].parentNode.style.display=null==y||f.globals.ancillaryCollapsedSeriesIndices.indexOf(i)>-1||f.globals.collapsedSeriesIndices.indexOf(i)>-1?"none":f.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(t){var i=this.w;if(t)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var n=i.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");n&&(n.classList.add("apexcharts-active"),n.style.display=i.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(t){var i=t.i,n=t.j,o=this.w,l=this.ctx.series.filteredSeriesX(),u="",h="",g=null,f=null,x={series:o.globals.series,seriesIndex:i,dataPointIndex:n,w:o},y=o.globals.ttZFormatter;null===n?f=o.globals.series[i]:o.globals.isXNumeric&&"treemap"!==o.config.chart.type?(u=l[i][n],0===l[i].length&&(u=l[this.tooltipUtil.getFirstActiveXArray(l)][n])):u=void 0!==o.globals.labels[n]?o.globals.labels[n]:"";var w=u;return u=o.globals.isXNumeric&&"datetime"===o.config.xaxis.type?new Zi(this.ctx).xLabelFormat(o.globals.ttKeyFormatter,w,w,{i:void 0,dateFormatter:new ht(this.ctx).formatDate,w:this.w}):o.globals.isBarHorizontal?o.globals.yLabelFormatters[0](w,x):o.globals.xLabelFormatter(w,x),void 0!==o.config.tooltip.x.formatter&&(u=o.globals.ttKeyFormatter(w,x)),o.globals.seriesZ.length>0&&o.globals.seriesZ[i].length>0&&(g=y(o.globals.seriesZ[i][n],o)),h="function"==typeof o.config.xaxis.tooltip.formatter?o.globals.xaxisTooltipFormatter(w,x):u,{val:Array.isArray(f)?f.join(" "):f,xVal:Array.isArray(u)?u.join(" "):u,xAxisTTVal:Array.isArray(h)?h.join(" "):h,zVal:g}}},{key:"handleCustomTooltip",value:function(t){var i=t.i,n=t.j,o=t.y1,l=t.y2,u=t.w,h=this.ttCtx.getElTooltip(),g=u.config.tooltip.custom;Array.isArray(g)&&g[i]&&(g=g[i]),h.innerHTML=g({ctx:this.ctx,series:u.globals.series,seriesIndex:i,dataPointIndex:n,y1:o,y2:l,w:u})}}]),M}(),An=function(){function M(t){re(this,M),this.ttCtx=t,this.ctx=t.ctx,this.w=t.w}return ne(M,[{key:"moveXCrosshairs",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.ttCtx,o=this.w,l=n.getElXCrosshairs(),u=t-n.xcrosshairsWidth/2,h=o.globals.labels.slice().length;if(null!==i&&(u=o.globals.gridWidth/h*i),null===l||o.globals.isBarHorizontal||(l.setAttribute("x",u),l.setAttribute("x1",u),l.setAttribute("x2",u),l.setAttribute("y2",o.globals.gridHeight),l.classList.add("apexcharts-active")),u<0&&(u=0),u>o.globals.gridWidth&&(u=o.globals.gridWidth),n.isXAxisTooltipEnabled){var g=u;"tickWidth"!==o.config.xaxis.crosshairs.width&&"barWidth"!==o.config.xaxis.crosshairs.width||(g=u+n.xcrosshairsWidth/2),this.moveXAxisTooltip(g)}}},{key:"moveYCrosshairs",value:function(t){var i=this.ttCtx;null!==i.ycrosshairs&&j.setAttrs(i.ycrosshairs,{y1:t,y2:t}),null!==i.ycrosshairsHidden&&j.setAttrs(i.ycrosshairsHidden,{y1:t,y2:t})}},{key:"moveXAxisTooltip",value:function(t){var i=this.w,n=this.ttCtx;if(null!==n.xaxisTooltip&&0!==n.xcrosshairsWidth){n.xaxisTooltip.classList.add("apexcharts-active");var l,o=n.xaxisOffY+i.config.xaxis.tooltip.offsetY+i.globals.translateY+1+i.config.xaxis.offsetY;t-=n.xaxisTooltip.getBoundingClientRect().width/2,isNaN(t)||(t+=i.globals.translateX,l=new j(this.ctx).getTextRects(n.xaxisTooltipText.innerHTML),n.xaxisTooltipText.style.minWidth=l.width+"px",n.xaxisTooltip.style.left=t+"px",n.xaxisTooltip.style.top=o+"px")}}},{key:"moveYAxisTooltip",value:function(t){var i=this.w,n=this.ttCtx;null===n.yaxisTTEls&&(n.yaxisTTEls=i.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var o=parseInt(n.ycrosshairsHidden.getAttribute("y1"),10),l=i.globals.translateY+o,u=n.yaxisTTEls[t].getBoundingClientRect().height,h=i.globals.translateYAxisX[t]-2;i.config.yaxis[t].opposite&&(h-=26),l-=u/2,-1===i.globals.ignoreYAxisIndexes.indexOf(t)?(n.yaxisTTEls[t].classList.add("apexcharts-active"),n.yaxisTTEls[t].style.top=l+"px",n.yaxisTTEls[t].style.left=h+i.config.yaxis[t].tooltip.offsetX+"px"):n.yaxisTTEls[t].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.w,l=this.ttCtx,u=l.getElTooltip(),h=l.tooltipRect,g=null!==n?parseFloat(n):1,f=parseFloat(t)+g+5,x=parseFloat(i)+g/2;if(f>o.globals.gridWidth/2&&(f=f-h.ttWidth-g-10),f>o.globals.gridWidth-h.ttWidth-10&&(f=o.globals.gridWidth-h.ttWidth),f<-20&&(f=-20),o.config.tooltip.followCursor){var y=l.getElGrid(),w=y.getBoundingClientRect();x=l.e.clientY+o.globals.translateY-w.top-h.ttHeight/2}else o.globals.isBarHorizontal||(h.ttHeight/2+x>o.globals.gridHeight&&(x=o.globals.gridHeight-h.ttHeight+o.globals.translateY),x<0&&(x=0));isNaN(f)||(u.style.left=(f+=o.globals.translateX)+"px",u.style.top=x+"px")}},{key:"moveMarkers",value:function(t,i){var n=this.w,o=this.ttCtx;if(n.globals.markers.size[t]>0)for(var l=n.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-marker")),u=0;u<l.length;u++)parseInt(l[u].getAttribute("rel"),10)===i&&(o.marker.resetPointsSize(),o.marker.enlargeCurrentPoint(i,l[u]));else o.marker.resetPointsSize(),this.moveDynamicPointOnHover(i,t)}},{key:"moveDynamicPointOnHover",value:function(t,i){var n,o,l=this.w,u=this.ttCtx,h=l.globals.pointsArray,g=u.tooltipUtil.getHoverMarkerSize(i),f=l.config.series[i].type;if(!f||"column"!==f&&"candlestick"!==f&&"boxPlot"!==f){n=h[i][t][0],o=h[i][t][1]?h[i][t][1]:0;var x=l.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(i,"'] .apexcharts-series-markers circle"));x&&o<l.globals.gridHeight&&o>0&&(x.setAttribute("r",g),x.setAttribute("cx",n),x.setAttribute("cy",o)),this.moveXCrosshairs(n),u.fixedTooltip||this.moveTooltip(n,o,g)}}},{key:"moveDynamicPointsOnHover",value:function(t){var i,n=this.ttCtx,o=n.w,l=0,u=0,h=o.globals.pointsArray;i=new pe(this.ctx).getActiveConfigSeriesIndex(!0);var g=n.tooltipUtil.getHoverMarkerSize(i);h[i]&&(l=h[i][t][0],u=h[i][t][1]);var f=n.tooltipUtil.getAllMarkers();if(null!==f)for(var x=0;x<o.globals.series.length;x++){var y=h[x];if(o.globals.comboCharts&&void 0===y&&f.splice(x,0,null),y&&y.length){var w=h[x][t][1];f[x].setAttribute("cx",l),null!==w&&!isNaN(w)&&w<o.globals.gridHeight+g&&w+g>0?(f[x]&&f[x].setAttribute("r",g),f[x]&&f[x].setAttribute("cy",w)):f[x]&&f[x].setAttribute("r",0)}}this.moveXCrosshairs(l),n.fixedTooltip||this.moveTooltip(l,u||o.globals.gridHeight,g)}},{key:"moveStickyTooltipOverBars",value:function(t){var i=this.w,n=this.ttCtx,o=i.globals.columnSeries?i.globals.columnSeries.length:i.globals.series.length,l=o>=2&&o%2==0?Math.floor(o/2):Math.floor(o/2)+1;i.globals.isBarHorizontal&&(l=new pe(this.ctx).getActiveConfigSeriesIndex(!1,"desc")+1);var u=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(l,"'] path[j='").concat(t,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(l,"'] path[j='").concat(t,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(l,"'] path[j='").concat(t,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(l,"'] path[j='").concat(t,"']")),h=u?parseFloat(u.getAttribute("cx")):0,g=u?parseFloat(u.getAttribute("cy")):0,f=u?parseFloat(u.getAttribute("barWidth")):0,x=u?parseFloat(u.getAttribute("barHeight")):0,y=n.getElGrid().getBoundingClientRect(),w=u.classList.contains("apexcharts-candlestick-area")||u.classList.contains("apexcharts-boxPlot-area");i.globals.isXNumeric?(u&&!w&&(h-=o%2!=0?f/2:0),u&&w&&i.globals.comboCharts&&(h-=f/2)):i.globals.isBarHorizontal||(h=n.xAxisTicksPositions[t-1]+n.dataPointsDividedWidth/2,isNaN(h)&&(h=n.xAxisTicksPositions[t]-n.dataPointsDividedWidth/2)),i.globals.isBarHorizontal?(g>i.globals.gridHeight/2&&(g-=n.tooltipRect.ttHeight),(g=g+i.config.grid.padding.top+x/3)+x>i.globals.gridHeight&&(g=i.globals.gridHeight-x)):i.config.tooltip.followCursor?g=n.e.clientY-y.top-n.tooltipRect.ttHeight/2:g+n.tooltipRect.ttHeight+15>i.globals.gridHeight&&(g=i.globals.gridHeight),g<-10&&(g=-10),i.globals.isBarHorizontal||this.moveXCrosshairs(h),n.fixedTooltip||this.moveTooltip(h,g||i.globals.gridHeight)}}]),M}(),kn=function(){function M(t){re(this,M),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx,this.tooltipPosition=new An(t)}return ne(M,[{key:"drawDynamicPoints",value:function(){var t=this.w,i=new j(this.ctx),n=new Ie(this.ctx),o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");o=Z(o),t.config.chart.stacked&&o.sort(function(y,w){return parseFloat(y.getAttribute("data:realIndex"))-parseFloat(w.getAttribute("data:realIndex"))});for(var l=0;l<o.length;l++){var u=o[l].querySelector(".apexcharts-series-markers-wrap");if(null!==u){var h=void 0,g="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==t.config.chart.type&&"area"!==t.config.chart.type||t.globals.comboCharts||t.config.tooltip.intersect||(g+=" no-pointer-events");var f=n.getMarkerConfig({cssClass:g,seriesIndex:Number(u.getAttribute("data:realIndex"))});(h=i.drawMarker(0,0,f)).node.setAttribute("default-marker-size",0);var x=document.createElementNS(t.globals.SVGNS,"g");x.classList.add("apexcharts-series-markers"),x.appendChild(h.node),u.appendChild(x)}}}},{key:"enlargeCurrentPoint",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=this.w;"bubble"!==l.config.chart.type&&this.newPointSize(t,i);var u=i.getAttribute("cx"),h=i.getAttribute("cy");if(null!==n&&null!==o&&(u=n,h=o),this.tooltipPosition.moveXCrosshairs(u),!this.fixedTooltip){if("radar"===l.config.chart.type){var g=this.ttCtx.getElGrid(),f=g.getBoundingClientRect();u=this.ttCtx.e.clientX-f.left}this.tooltipPosition.moveTooltip(u,h,l.config.markers.hover.size)}}},{key:"enlargePoints",value:function(t){for(var i=this.w,n=this,o=this.ttCtx,l=t,u=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),h=i.config.markers.hover.size,g=0;g<u.length;g++){var f=u[g].getAttribute("rel"),x=u[g].getAttribute("index");if(void 0===h&&(h=i.globals.markers.size[x]+i.config.markers.hover.sizeOffset),l===parseInt(f,10)){n.newPointSize(l,u[g]);var y=u[g].getAttribute("cx"),w=u[g].getAttribute("cy");n.tooltipPosition.moveXCrosshairs(y),o.fixedTooltip||n.tooltipPosition.moveTooltip(y,w,h)}else n.oldPointSize(u[g])}}},{key:"newPointSize",value:function(t,i){var n=this.w,o=n.config.markers.hover.size,l=0===t?i.parentNode.firstChild:i.parentNode.lastChild;if("0"!==l.getAttribute("default-marker-size")){var u=parseInt(l.getAttribute("index"),10);void 0===o&&(o=n.globals.markers.size[u]+n.config.markers.hover.sizeOffset),o<0&&(o=0),l.setAttribute("r",o)}}},{key:"oldPointSize",value:function(t){var i=parseFloat(t.getAttribute("default-marker-size"));t.setAttribute("r",i)}},{key:"resetPointsSize",value:function(){for(var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),i=0;i<t.length;i++){var n=parseFloat(t[i].getAttribute("default-marker-size"));Y.isNumber(n)&&n>=0?t[i].setAttribute("r",n):t[i].setAttribute("r",0)}}}]),M}(),Kt=function(){function M(t){re(this,M),this.w=t.w,this.ttCtx=t}return ne(M,[{key:"getAttr",value:function(t,i){return parseFloat(t.target.getAttribute(i))}},{key:"handleHeatTreeTooltip",value:function(t){var i=t.e,n=t.opt,o=t.x,l=t.y,h=this.ttCtx,g=this.w;if(i.target.classList.contains("apexcharts-".concat(t.type,"-rect"))){var f=this.getAttr(i,"i"),x=this.getAttr(i,"j"),y=this.getAttr(i,"cx"),w=this.getAttr(i,"cy"),C=this.getAttr(i,"width"),E=this.getAttr(i,"height");if(h.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:f,j:x,shared:!1,e:i}),g.globals.capturedSeriesIndex=f,g.globals.capturedDataPointIndex=x,o=y+h.tooltipRect.ttWidth/2+C,l=w+h.tooltipRect.ttHeight/2-E/2,h.tooltipPosition.moveXCrosshairs(y+C/2),o>g.globals.gridWidth/2&&(o=y-h.tooltipRect.ttWidth/2+C),h.w.config.tooltip.followCursor){var k=g.globals.dom.elWrap.getBoundingClientRect();o=g.globals.clientX-k.left-(o>g.globals.gridWidth/2?h.tooltipRect.ttWidth:0),l=g.globals.clientY-k.top-(l>g.globals.gridHeight/2?h.tooltipRect.ttHeight:0)}}return{x:o,y:l}}},{key:"handleMarkerTooltip",value:function(t){var i,n,o=t.e,l=t.opt,u=t.x,h=t.y,g=this.w,f=this.ttCtx;if(o.target.classList.contains("apexcharts-marker")){var x=parseInt(l.paths.getAttribute("cx"),10),y=parseInt(l.paths.getAttribute("cy"),10),w=parseFloat(l.paths.getAttribute("val"));if(n=parseInt(l.paths.getAttribute("rel"),10),i=parseInt(l.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,f.intersect){var C=Y.findAncestor(l.paths,"apexcharts-series");C&&(i=parseInt(C.getAttribute("data:realIndex"),10))}if(f.tooltipLabels.drawSeriesTexts({ttItems:l.ttItems,i,j:n,shared:!f.showOnIntersect&&g.config.tooltip.shared,e:o}),"mouseup"===o.type&&f.markerClick(o,i,n),g.globals.capturedSeriesIndex=i,g.globals.capturedDataPointIndex=n,u=x,h=y+g.globals.translateY-1.4*f.tooltipRect.ttHeight,f.w.config.tooltip.followCursor){var E=f.getElGrid().getBoundingClientRect();h=f.e.clientY+g.globals.translateY-E.top}w<0&&(h=y),f.marker.enlargeCurrentPoint(n,l.paths,u,h)}return{x:u,y:h}}},{key:"handleBarTooltip",value:function(t){var i,n,o=t.e,l=t.opt,u=this.w,h=this.ttCtx,g=h.getElTooltip(),f=0,x=0,y=0,w=this.getBarTooltipXY({e:o,opt:l}),C=w.barHeight,E=w.j;u.globals.capturedSeriesIndex=i=w.i,u.globals.capturedDataPointIndex=E,u.globals.isBarHorizontal&&h.tooltipUtil.hasBars()||!u.config.tooltip.shared?(x=w.x,y=w.y,n=Array.isArray(u.config.stroke.width)?u.config.stroke.width[i]:u.config.stroke.width,f=x):u.globals.comboCharts||u.config.tooltip.shared||(f/=2),isNaN(y)?y=u.globals.svgHeight-h.tooltipRect.ttHeight:y<0&&(y=0);var k=parseInt(l.paths.parentNode.getAttribute("data:realIndex"),10),I=u.globals.isMultipleYAxis?u.config.yaxis[k]&&u.config.yaxis[k].reversed:u.config.yaxis[0].reversed;if(x+h.tooltipRect.ttWidth>u.globals.gridWidth&&!I?x-=h.tooltipRect.ttWidth:x<0&&(x=0),h.w.config.tooltip.followCursor){var P=h.getElGrid().getBoundingClientRect();y=h.e.clientY-P.top}null===h.tooltip&&(h.tooltip=u.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),u.config.tooltip.shared||h.tooltipPosition.moveXCrosshairs(u.globals.comboBarCount>0?f+n/2:f),!h.fixedTooltip&&(!u.config.tooltip.shared||u.globals.isBarHorizontal&&h.tooltipUtil.hasBars())&&(I&&(x-=h.tooltipRect.ttWidth)<0&&(x=0),!I||u.globals.isBarHorizontal&&h.tooltipUtil.hasBars()||(y=y+C-2*(u.globals.series[i][E]<0?C:0)),h.tooltipRect.ttHeight+y>u.globals.gridHeight?y=u.globals.gridHeight-h.tooltipRect.ttHeight+u.globals.translateY:(y=y+u.globals.translateY-h.tooltipRect.ttHeight/2)<0&&(y=0),g.style.left=x+u.globals.translateX+"px",g.style.top=y+"px")}},{key:"getBarTooltipXY",value:function(t){var i=t.e,n=t.opt,o=this.w,l=null,u=this.ttCtx,h=0,g=0,f=0,x=0,y=0,w=i.target.classList;if(w.contains("apexcharts-bar-area")||w.contains("apexcharts-candlestick-area")||w.contains("apexcharts-boxPlot-area")||w.contains("apexcharts-rangebar-area")){var C=i.target,E=C.getBoundingClientRect(),k=n.elGrid.getBoundingClientRect(),I=E.height;y=E.height;var P=E.width,O=parseInt(C.getAttribute("cx"),10),D=parseInt(C.getAttribute("cy"),10);x=parseFloat(C.getAttribute("barWidth"));var p="touchmove"===i.type?i.touches[0].clientX:i.clientX;l=parseInt(C.getAttribute("j"),10),h=parseInt(C.parentNode.getAttribute("rel"),10)-1;var _=C.getAttribute("data-range-y1"),T=C.getAttribute("data-range-y2");o.globals.comboCharts&&(h=parseInt(C.parentNode.getAttribute("data:realIndex"),10)),u.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:h,j:l,y1:_?parseInt(_,10):null,y2:T?parseInt(T,10):null,shared:!u.showOnIntersect&&o.config.tooltip.shared,e:i}),o.config.tooltip.followCursor?o.globals.isBarHorizontal?(g=p-k.left+15,f=D-u.dataPointsDividedHeight+I/2-u.tooltipRect.ttHeight/2):(g=o.globals.isXNumeric?O-P/2:O-u.dataPointsDividedWidth+P/2,f=i.clientY-k.top-u.tooltipRect.ttHeight/2-15):o.globals.isBarHorizontal?((g=O)<u.xyRatios.baseLineInvertedY&&(g=O-u.tooltipRect.ttWidth),f=D-u.dataPointsDividedHeight+I/2-u.tooltipRect.ttHeight/2):(g=o.globals.isXNumeric?O-P/2:O-u.dataPointsDividedWidth+P/2,f=D)}return{x:g,y:f,barHeight:y,barWidth:x,i:h,j:l}}}]),M}(),Ta=function(){function M(t){re(this,M),this.w=t.w,this.ttCtx=t}return ne(M,[{key:"drawXaxisTooltip",value:function(){var t=this.w,i=this.ttCtx,n="bottom"===t.config.xaxis.position;i.xaxisOffY=n?t.globals.gridHeight+1:-t.globals.xAxisHeight-t.config.xaxis.axisTicks.height+3;var o=n?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",l=t.globals.dom.elWrap;i.isXAxisTooltipEnabled&&null===t.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(i.xaxisTooltip=document.createElement("div"),i.xaxisTooltip.setAttribute("class",o+" apexcharts-theme-"+t.config.tooltip.theme),l.appendChild(i.xaxisTooltip),i.xaxisTooltipText=document.createElement("div"),i.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),i.xaxisTooltipText.style.fontFamily=t.config.xaxis.tooltip.style.fontFamily||t.config.chart.fontFamily,i.xaxisTooltipText.style.fontSize=t.config.xaxis.tooltip.style.fontSize,i.xaxisTooltip.appendChild(i.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var t=this.w,i=this.ttCtx,n=function(l){var u=t.config.yaxis[l].opposite||t.config.yaxis[l].crosshairs.opposite;i.yaxisOffX=u?t.globals.gridWidth+1:1;var h="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(l,u?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");t.globals.yAxisSameScaleIndices.map(function(f,x){f.map(function(y,w){w===l&&(h+=t.config.yaxis[w].show?" ":" apexcharts-yaxistooltip-hidden")})});var g=t.globals.dom.elWrap;null===t.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(l))&&(i.yaxisTooltip=document.createElement("div"),i.yaxisTooltip.setAttribute("class",h+" apexcharts-theme-"+t.config.tooltip.theme),g.appendChild(i.yaxisTooltip),0===l&&(i.yaxisTooltipText=[]),i.yaxisTooltipText[l]=document.createElement("div"),i.yaxisTooltipText[l].classList.add("apexcharts-yaxistooltip-text"),i.yaxisTooltip.appendChild(i.yaxisTooltipText[l]))},o=0;o<t.config.yaxis.length;o++)n(o)}},{key:"setXCrosshairWidth",value:function(){var t=this.w,i=this.ttCtx,n=i.getElXCrosshairs();if(i.xcrosshairsWidth=parseInt(t.config.xaxis.crosshairs.width,10),t.globals.comboCharts){var o=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==o&&"barWidth"===t.config.xaxis.crosshairs.width){var l=parseFloat(o.getAttribute("barWidth"));i.xcrosshairsWidth=l}else"tickWidth"===t.config.xaxis.crosshairs.width&&(i.xcrosshairsWidth=t.globals.gridWidth/t.globals.labels.length)}else if("tickWidth"===t.config.xaxis.crosshairs.width)i.xcrosshairsWidth=t.globals.gridWidth/t.globals.labels.length;else if("barWidth"===t.config.xaxis.crosshairs.width){var g=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==g){var f=parseFloat(g.getAttribute("barWidth"));i.xcrosshairsWidth=f}else i.xcrosshairsWidth=1}t.globals.isBarHorizontal&&(i.xcrosshairsWidth=0),null!==n&&i.xcrosshairsWidth>0&&n.setAttribute("width",i.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var t=this.w,i=this.ttCtx;i.ycrosshairs=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),i.ycrosshairsHidden=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(t,i,n){var o=this.ttCtx,l=this.w,u=l.globals.yLabelFormatters[t];if(o.yaxisTooltips[t]){var h=o.getElGrid().getBoundingClientRect(),x=l.globals.minYArr[t]+(l.globals.maxYArr[t]-l.globals.minYArr[t]-(i-h.top)*n.yRatio[t]);o.tooltipPosition.moveYCrosshairs(i-h.top),o.yaxisTooltipText[t].innerHTML=u(x),o.tooltipPosition.moveYAxisTooltip(t)}}}]),M}(),Qr=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w;var i=this.w;this.tConfig=i.config.tooltip,this.tooltipUtil=new Sn(this),this.tooltipLabels=new Ea(this),this.tooltipPosition=new An(this),this.marker=new kn(this),this.intersect=new Kt(this),this.axesTooltip=new Ta(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!i.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return ne(M,[{key:"getElTooltip",value:function(t){return t||(t=this),t.w.globals.dom.baseEl?t.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(t){var i=this.w;this.xyRatios=t,this.isXAxisTooltipEnabled=i.config.xaxis.tooltip.enabled&&i.globals.axisCharts,this.yaxisTooltips=i.config.yaxis.map(function(u,h){return!!(u.show&&u.tooltip.enabled&&i.globals.axisCharts)}),this.allTooltipSeriesGroups=[],i.globals.axisCharts||(this.showTooltipTitle=!1);var n=document.createElement("div");if(n.classList.add("apexcharts-tooltip"),i.config.tooltip.cssClass&&n.classList.add(i.config.tooltip.cssClass),n.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),i.globals.dom.elWrap.appendChild(n),i.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var o=new Ki(this.ctx);this.xAxisTicksPositions=o.getXAxisTicksPositions()}if(!i.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==i.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==i.config.markers.size&&0!==i.globals.markers.largestSize||this.marker.drawDynamicPoints(this),i.globals.collapsedSeries.length!==i.globals.series.length){this.dataPointsDividedHeight=i.globals.gridHeight/i.globals.dataPoints,this.dataPointsDividedWidth=i.globals.gridWidth/i.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||i.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,n.appendChild(this.tooltipTitle));var l=i.globals.series.length;(i.globals.xyCharts||i.globals.comboCharts)&&this.tConfig.shared&&(l=this.showOnIntersect?1:i.globals.series.length),this.legendLabels=i.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(l),this.addSVGEvents()}}},{key:"createTTElements",value:function(t){for(var i=this,n=this.w,o=[],l=this.getElTooltip(),u=function(g){var f=document.createElement("div");f.classList.add("apexcharts-tooltip-series-group"),f.style.order=n.config.tooltip.inverseOrder?t-g:g+1,i.tConfig.shared&&i.tConfig.enabledOnSeries&&Array.isArray(i.tConfig.enabledOnSeries)&&i.tConfig.enabledOnSeries.indexOf(g)<0&&f.classList.add("apexcharts-tooltip-series-group-hidden");var x=document.createElement("span");x.classList.add("apexcharts-tooltip-marker"),x.style.backgroundColor=n.globals.colors[g],f.appendChild(x);var y=document.createElement("div");y.classList.add("apexcharts-tooltip-text"),y.style.fontFamily=i.tConfig.style.fontFamily||n.config.chart.fontFamily,y.style.fontSize=i.tConfig.style.fontSize,["y","goals","z"].forEach(function(w){var C=document.createElement("div");C.classList.add("apexcharts-tooltip-".concat(w,"-group"));var E=document.createElement("span");E.classList.add("apexcharts-tooltip-text-".concat(w,"-label")),C.appendChild(E);var k=document.createElement("span");k.classList.add("apexcharts-tooltip-text-".concat(w,"-value")),C.appendChild(k),y.appendChild(C)}),f.appendChild(y),l.appendChild(f),o.push(f)},h=0;h<t;h++)u(h);return o}},{key:"addSVGEvents",value:function(){var t=this.w,i=t.config.chart.type,n=this.getElTooltip(),o=!("bar"!==i&&"candlestick"!==i&&"boxPlot"!==i&&"rangeBar"!==i),l="area"===i||"line"===i||"scatter"===i||"bubble"===i||"radar"===i,u=t.globals.dom.Paper.node,h=this.getElGrid();h&&(this.seriesBound=h.getBoundingClientRect());var g,f=[],x=[],y={hoverArea:u,elGrid:h,tooltipEl:n,tooltipY:f,tooltipX:x,ttItems:this.ttItems};if(t.globals.axisCharts&&(l?g=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):o?g=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==i&&"treemap"!==i||(g=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),g&&g.length))for(var w=0;w<g.length;w++)f.push(g[w].getAttribute("cy")),x.push(g[w].getAttribute("cx"));if(t.globals.xyCharts&&!this.showOnIntersect||t.globals.comboCharts&&!this.showOnIntersect||o&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([u],y);else if(o&&!t.globals.comboCharts||l&&this.showOnIntersect)this.addDatapointEventsListeners(y);else if(!t.globals.axisCharts||"heatmap"===i||"treemap"===i){var C=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(C,y)}if(this.showOnIntersect){var E=t.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");E.length>0&&this.addPathsEventListeners(E,y),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(y)}}},{key:"drawFixedTooltipRect",value:function(){var t=this.w,i=this.getElTooltip(),n=i.getBoundingClientRect(),o=n.width+10,l=n.height+10,u=this.tConfig.fixed.offsetX,h=this.tConfig.fixed.offsetY,g=this.tConfig.fixed.position.toLowerCase();return g.indexOf("right")>-1&&(u=u+t.globals.svgWidth-o+10),g.indexOf("bottom")>-1&&(h=h+t.globals.svgHeight-l-10),i.style.left=u+"px",i.style.top=h+"px",{x:u,y:h,ttWidth:o,ttHeight:l}}},{key:"addDatapointEventsListeners",value:function(t){var i=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(i,t)}},{key:"addPathsEventListeners",value:function(t,i){for(var n=this,o=function(u){var h={paths:t[u],tooltipEl:i.tooltipEl,tooltipY:i.tooltipY,tooltipX:i.tooltipX,elGrid:i.elGrid,hoverArea:i.hoverArea,ttItems:i.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(g){return t[u].addEventListener(g,n.onSeriesHover.bind(n,h),{capture:!1,passive:!0})})},l=0;l<t.length;l++)o(l)}},{key:"onSeriesHover",value:function(t,i){var n=this,o=Date.now()-this.lastHoverTime;o>=100?this.seriesHover(t,i):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){n.seriesHover(t,i)},100-o))}},{key:"seriesHover",value:function(t,i){var n=this;this.lastHoverTime=Date.now();var o=[],l=this.w;l.config.chart.group&&(o=this.ctx.getGroupedCharts()),l.globals.axisCharts&&(l.globals.minX===-1/0&&l.globals.maxX===1/0||0===l.globals.dataPoints)||(o.length?o.forEach(function(u){var h=n.getElTooltip(u);u.w.globals.minX===n.w.globals.minX&&u.w.globals.maxX===n.w.globals.maxX&&u.w.globals.tooltip.seriesHoverByContext({chartCtx:u,ttCtx:u.w.globals.tooltip,opt:{paths:t.paths,tooltipEl:h,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:u.w.globals.tooltip.ttItems},e:i})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:t,e:i}))}},{key:"seriesHoverByContext",value:function(t){var i=t.chartCtx,n=t.ttCtx,o=t.opt,l=t.e,u=i.w,h=this.getElTooltip();h&&(n.tooltipRect={x:0,y:0,ttWidth:h.getBoundingClientRect().width,ttHeight:h.getBoundingClientRect().height},n.e=l,n.tooltipUtil.hasBars()&&!u.globals.comboCharts&&!n.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new pe(i).toggleSeriesOnHover(l,l.target.parentNode),n.fixedTooltip&&n.drawFixedTooltipRect(),u.globals.axisCharts?n.axisChartsTooltips({e:l,opt:o,tooltipRect:n.tooltipRect}):n.nonAxisChartsTooltips({e:l,opt:o,tooltipRect:n.tooltipRect}))}},{key:"axisChartsTooltips",value:function(t){var i,n,o=t.e,l=t.opt,u=this.w,h=l.elGrid.getBoundingClientRect(),g="touchmove"===o.type?o.touches[0].clientX:o.clientX,f="touchmove"===o.type?o.touches[0].clientY:o.clientY;if(this.clientY=f,this.clientX=g,u.globals.capturedSeriesIndex=-1,u.globals.capturedDataPointIndex=-1,f<h.top||f>h.top+h.height)this.handleMouseOut(l);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!u.config.tooltip.shared){var x=parseInt(l.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(x)<0)return void this.handleMouseOut(l)}var y=this.getElTooltip(),w=this.getElXCrosshairs(),C=u.globals.xyCharts||"bar"===u.config.chart.type&&!u.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||u.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===o.type||"touchmove"===o.type||"mouseup"===o.type){if(u.globals.collapsedSeries.length+u.globals.ancillaryCollapsedSeries.length===u.globals.series.length)return;null!==w&&w.classList.add("apexcharts-active");var E=this.yaxisTooltips.filter(function(P){return!0===P});if(null!==this.ycrosshairs&&E.length&&this.ycrosshairs.classList.add("apexcharts-active"),C&&!this.showOnIntersect)this.handleStickyTooltip(o,g,f,l);else if("heatmap"===u.config.chart.type||"treemap"===u.config.chart.type){var k=this.intersect.handleHeatTreeTooltip({e:o,opt:l,x:i,y:n,type:u.config.chart.type});n=k.y,y.style.left=(i=k.x)+"px",y.style.top=n+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:o,opt:l}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:o,opt:l,x:i,y:n});if(this.yaxisTooltips.length)for(var I=0;I<u.config.yaxis.length;I++)this.axesTooltip.drawYaxisTooltipText(I,f,this.xyRatios);l.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==o.type&&"touchend"!==o.type||this.handleMouseOut(l)}}},{key:"nonAxisChartsTooltips",value:function(t){var i=t.e,n=t.opt,o=t.tooltipRect,l=this.w,u=n.paths.getAttribute("rel"),h=this.getElTooltip(),g=l.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===i.type||"touchmove"===i.type){h.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:parseInt(u,10)-1,shared:!1});var x=l.globals.clientY-g.top-o.ttHeight-10;if(h.style.left=l.globals.clientX-g.left-o.ttWidth/2+"px",h.style.top=x+"px",l.config.legend.tooltipHoverFormatter){var y=u-1,w=(0,l.config.legend.tooltipHoverFormatter)(this.legendLabels[y].getAttribute("data:default-text"),{seriesIndex:y,dataPointIndex:y,w:l});this.legendLabels[y].innerHTML=w}}else"mouseout"!==i.type&&"touchend"!==i.type||(h.classList.remove("apexcharts-active"),l.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(C){var E=C.getAttribute("data:default-text");C.innerHTML=decodeURIComponent(E)}))}},{key:"handleStickyTooltip",value:function(t,i,n,o){var l=this.w,u=this.tooltipUtil.getNearestValues({context:this,hoverArea:o.hoverArea,elGrid:o.elGrid,clientX:i,clientY:n}),h=u.j,g=u.capturedSeries,f=o.elGrid.getBoundingClientRect();u.hoverX<0||u.hoverX>f.width?this.handleMouseOut(o):null!==g?this.handleStickyCapturedSeries(t,g,o,h):(this.tooltipUtil.isXoverlap(h)||l.globals.isBarHorizontal)&&this.create(t,this,0,h,o.ttItems)}},{key:"handleStickyCapturedSeries",value:function(t,i,n,o){var l=this.w;this.tConfig.shared||null!==l.globals.series[i][o]?void 0!==l.globals.series[i][o]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(o)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(t,this,i,o,n.ttItems):this.create(t,this,i,o,n.ttItems,!1):this.tooltipUtil.isXoverlap(o)&&this.create(t,this,0,o,n.ttItems):this.handleMouseOut(n)}},{key:"deactivateHoverFilter",value:function(){for(var t=this.w,i=new j(this.ctx),n=t.globals.dom.Paper.select(".apexcharts-bar-area"),o=0;o<n.length;o++)i.pathMouseLeave(n[o])}},{key:"handleMouseOut",value:function(t){var i=this.w,n=this.getElXCrosshairs();if(t.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==i.config.chart.type&&this.marker.resetPointsSize(),null!==n&&n.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=i.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var o=0;o<this.yaxisTTEls.length;o++)this.yaxisTTEls[o].classList.remove("apexcharts-active")}i.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(l){var u=l.getAttribute("data:default-text");l.innerHTML=decodeURIComponent(u)})}},{key:"markerClick",value:function(t,i,n){var o=this.w;"function"==typeof o.config.chart.events.markerClick&&o.config.chart.events.markerClick(t,this.ctx,{seriesIndex:i,dataPointIndex:n,w:o}),this.ctx.events.fireEvent("markerClick",[t,this.ctx,{seriesIndex:i,dataPointIndex:n,w:o}])}},{key:"create",value:function(t,i,n,o,l){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h=this.w,g=i;"mouseup"===t.type&&this.markerClick(t,n,o),null===u&&(u=this.tConfig.shared);var f=this.tooltipUtil.hasMarkers(),x=this.tooltipUtil.getElBars();if(h.config.legend.tooltipHoverFormatter){var y=h.config.legend.tooltipHoverFormatter,w=Array.from(this.legendLabels);w.forEach(function(_){var T=_.getAttribute("data:default-text");_.innerHTML=decodeURIComponent(T)});for(var C=0;C<w.length;C++){var E=w[C],k=parseInt(E.getAttribute("i"),10),I=decodeURIComponent(E.getAttribute("data:default-text")),P=y(I,{seriesIndex:u?k:n,dataPointIndex:o,w:h});if(u)E.innerHTML=h.globals.collapsedSeriesIndices.indexOf(k)<0?P:I;else if(E.innerHTML=k===n?P:I,n===k)break}}if(u){if(g.tooltipLabels.drawSeriesTexts({ttItems:l,i:n,j:o,shared:!this.showOnIntersect&&this.tConfig.shared}),f&&(h.globals.markers.largestSize>0?g.marker.enlargePoints(o):g.tooltipPosition.moveDynamicPointsOnHover(o)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(x),this.barSeriesHeight>0)){var O=new j(this.ctx),D=h.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(o,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(o);for(var p=0;p<D.length;p++)O.pathMouseEnter(D[p])}}else g.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:l,i:n,j:o}),this.tooltipUtil.hasBars()&&g.tooltipPosition.moveStickyTooltipOverBars(o),f&&g.tooltipPosition.moveMarkers(n,o)}}]),M}(),Ia=function(M){Tt(i,Me);var t=Ct(i);function i(){return re(this,i),t.apply(this,arguments)}return ne(i,[{key:"draw",value:function(n,o){var l=this,u=this.w;this.graphics=new j(this.ctx),this.bar=new Me(this.ctx,this.xyRatios);var h=new ye(this.ctx,u);n=h.getLogSeries(n),this.yRatio=h.getLogYRatios(this.yRatio),this.barHelpers.initVariables(n),"100%"===u.config.chart.stackType&&(n=u.globals.seriesPercent.slice()),this.series=n,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var g=0;g<n.length;g++)n[g].length>0&&(this.totalItems+=n[g].length);for(var f=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),x=0,y=0,w=function(k,I){var P=void 0,O=void 0,D=void 0,p=void 0,_=[],T=[],L=u.globals.comboCharts?o[k]:k;l.yRatio.length>1&&(l.yaxisIndex=L),l.isReversed=u.config.yaxis[l.yaxisIndex]&&u.config.yaxis[l.yaxisIndex].reversed;var z=l.graphics.group({class:"apexcharts-series",seriesName:Y.escapeString(u.globals.seriesNames[L]),rel:k+1,"data:realIndex":L});l.ctx.series.addCollapsedClassToSeries(z,L);var K=l.graphics.group({class:"apexcharts-datalabels","data:realIndex":L}),W=0,ee=0,Q=l.initialPositions(x,y,P,O,D,p);y=Q.y,W=Q.barHeight,O=Q.yDivision,p=Q.zeroW,x=Q.x,ee=Q.barWidth,P=Q.xDivision,D=Q.zeroH,l.yArrj=[],l.yArrjF=[],l.yArrjVal=[],l.xArrj=[],l.xArrjF=[],l.xArrjVal=[],1===l.prevY.length&&l.prevY[0].every(function($e){return isNaN($e)})&&(l.prevY[0]=l.prevY[0].map(function($e){return D}),l.prevYF[0]=l.prevYF[0].map(function($e){return 0}));for(var ie=0;ie<u.globals.dataPoints;ie++){var he=l.barHelpers.getStrokeWidth(k,ie,L),He={indexes:{i:k,j:ie,realIndex:L,bc:I},strokeWidth:he,x,y,elSeries:z},Fe=null;l.isHorizontal?(Fe=l.drawStackedBarPaths(Ce(Ce({},He),{},{zeroW:p,barHeight:W,yDivision:O})),ee=l.series[k][ie]/l.invertedYRatio):(Fe=l.drawStackedColumnPaths(Ce(Ce({},He),{},{xDivision:P,barWidth:ee,zeroH:D})),W=l.series[k][ie]/l.yRatio[l.yaxisIndex]),y=Fe.y,_.push(x=Fe.x),T.push(y);var Ge=l.barHelpers.getPathFillColor(n,k,ie,L);z=l.renderSeries({realIndex:L,pathFill:Ge,j:ie,i:k,pathFrom:Fe.pathFrom,pathTo:Fe.pathTo,strokeWidth:he,elSeries:z,x,y,series:n,barHeight:W,barWidth:ee,elDataLabelsWrap:K,type:"bar",visibleSeries:0})}u.globals.seriesXvalues[L]=_,u.globals.seriesYvalues[L]=T,l.prevY.push(l.yArrj),l.prevYF.push(l.yArrjF),l.prevYVal.push(l.yArrjVal),l.prevX.push(l.xArrj),l.prevXF.push(l.xArrjF),l.prevXVal.push(l.xArrjVal),f.add(z)},C=0,E=0;C<n.length;C++,E++)w(C,E);return f}},{key:"initialPositions",value:function(n,o,l,u,h,g){var f,x,y=this.w;return this.isHorizontal?(f=(f=u=y.globals.gridHeight/y.globals.dataPoints)*parseInt(y.config.plotOptions.bar.barHeight,10)/100,g=this.baseLineInvertedY+y.globals.padHorizontal+(this.isReversed?y.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),o=(u-f)/2):(x=l=y.globals.gridWidth/y.globals.dataPoints,x=y.globals.isXNumeric&&y.globals.dataPoints>1?(l=y.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:x*parseInt(y.config.plotOptions.bar.columnWidth,10)/100,h=this.baseLineY[this.yaxisIndex]+(this.isReversed?y.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),n=y.globals.padHorizontal+(l-x)/2),{x:n,y:o,yDivision:u,xDivision:l,barHeight:f,barWidth:x,zeroH:h,zeroW:g}}},{key:"drawStackedBarPaths",value:function(n){for(var o,f,l=n.indexes,u=n.barHeight,h=n.strokeWidth,g=n.zeroW,x=n.y,y=n.yDivision,w=n.elSeries,C=this.w,E=x,k=l.i,I=l.j,P=0,O=0;O<this.prevXF.length;O++)P+=this.prevXF[O][I];if(k>0){var D=g;this.prevXVal[k-1][I]<0?D=this.series[k][I]>=0?this.prevX[k-1][I]+P-2*(this.isReversed?P:0):this.prevX[k-1][I]:this.prevXVal[k-1][I]>=0&&(D=this.series[k][I]>=0?this.prevX[k-1][I]:this.prevX[k-1][I]-P+2*(this.isReversed?P:0)),o=D}else o=g;var p=this.barHelpers.getBarpaths({barYPosition:E,barHeight:u,x1:o,x2:f=null===this.series[k][I]?o:o+this.series[k][I]/this.invertedYRatio-2*(this.isReversed?this.series[k][I]/this.invertedYRatio:0),strokeWidth:h,series:this.series,realIndex:l.realIndex,i:k,j:I,w:C});return this.barHelpers.barBackground({j:I,i:k,y1:E,y2:u,elSeries:w}),{pathTo:p.pathTo,pathFrom:p.pathFrom,x:f,y:x+=y}}},{key:"drawStackedColumnPaths",value:function(n){var u,o=n.indexes,l=n.x,h=n.xDivision,g=n.barWidth,f=n.zeroH,x=n.elSeries,y=this.w,w=o.i,C=o.j,E=o.bc;if(y.globals.isXNumeric){var k=y.globals.seriesX[w][C];k||(k=0),l=(k-y.globals.minX)/this.xRatio-g/2}for(var I,P=l,O=0,D=0;D<this.prevYF.length;D++)O+=isNaN(this.prevYF[D][C])?0:this.prevYF[D][C];if(w>0&&!y.globals.isXNumeric||w>0&&y.globals.isXNumeric&&y.globals.seriesX[w-1][C]===y.globals.seriesX[w][C]){var p,_,T=Math.min(this.yRatio.length+1,w+1);if(void 0!==this.prevY[w-1])for(var L=1;L<T;L++)if(!isNaN(this.prevY[w-L][C])){_=this.prevY[w-L][C];break}for(var z=1;z<T;z++){if(this.prevYVal[w-z][C]<0){p=this.series[w][C]>=0?_-O+2*(this.isReversed?O:0):_;break}if(this.prevYVal[w-z][C]>=0){p=this.series[w][C]>=0?_:_+O-2*(this.isReversed?O:0);break}}void 0===p&&(p=y.globals.gridHeight),I=this.prevYF[0].every(function(W){return 0===W})&&this.prevYF.slice(1,w).every(function(W){return W.every(function(ee){return isNaN(ee)})})?y.globals.gridHeight-f:p}else I=y.globals.gridHeight-f;var K=this.barHelpers.getColumnPaths({barXPosition:P,barWidth:g,y1:I,y2:u=I-this.series[w][C]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[w][C]/this.yRatio[this.yaxisIndex]:0),yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:o.realIndex,i:w,j:C,w:y});return this.barHelpers.barBackground({bc:E,j:C,i:w,x1:P,x2:g,elSeries:x}),l+=h,{pathTo:K.pathTo,pathFrom:K.pathFrom,x:y.globals.isXNumeric?l-h:l,y:u}}}]),i}(),Bs=function(M){Tt(i,Me);var t=Ct(i);function i(){return re(this,i),t.apply(this,arguments)}return ne(i,[{key:"draw",value:function(n,o){var l=this,u=this.w,h=new j(this.ctx),g=new Qe(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=u.config.plotOptions.bar.horizontal;var f=new ye(this.ctx,u);n=f.getLogSeries(n),this.series=n,this.yRatio=f.getLogYRatios(this.yRatio),this.barHelpers.initVariables(n);for(var x=h.group({class:"apexcharts-".concat(u.config.chart.type,"-series apexcharts-plot-series")}),y=function(C){l.isBoxPlot="boxPlot"===u.config.chart.type||"boxPlot"===u.config.series[C].type;var E,k,I,P,z,K,O=void 0,D=void 0,p=[],_=[],T=u.globals.comboCharts?o[C]:C,L=h.group({class:"apexcharts-series",seriesName:Y.escapeString(u.globals.seriesNames[T]),rel:C+1,"data:realIndex":T});l.ctx.series.addCollapsedClassToSeries(L,T),n[C].length>0&&(l.visibleI=l.visibleI+1),l.yRatio.length>1&&(l.yaxisIndex=T);var W=l.barHelpers.initialPositions();D=W.y,z=W.barHeight,k=W.yDivision,P=W.zeroW,E=W.xDivision,I=W.zeroH,_.push((O=W.x)+(K=W.barWidth)/2);for(var ee=h.group({class:"apexcharts-datalabels","data:realIndex":T}),Q=function(he){var He=l.barHelpers.getStrokeWidth(C,he,T),Fe=null,Ge={indexes:{i:C,j:he,realIndex:T},x:O,y:D,strokeWidth:He,elSeries:L};Fe=l.isHorizontal?l.drawHorizontalBoxPaths(Ce(Ce({},Ge),{},{yDivision:k,barHeight:z,zeroW:P})):l.drawVerticalBoxPaths(Ce(Ce({},Ge),{},{xDivision:E,barWidth:K,zeroH:I})),D=Fe.y,O=Fe.x,he>0&&_.push(O+K/2),p.push(D),Fe.pathTo.forEach(function($e,ot){var qt=!l.isBoxPlot&&l.candlestickOptions.wick.useFillColor?Fe.color[ot]:u.globals.stroke.colors[C],Ri=g.fillPath({seriesNumber:T,dataPointIndex:he,color:Fe.color[ot],value:n[C][he]});l.renderSeries({realIndex:T,pathFill:Ri,lineFill:qt,j:he,i:C,pathFrom:Fe.pathFrom,pathTo:$e,strokeWidth:He,elSeries:L,x:O,y:D,series:n,barHeight:z,barWidth:K,elDataLabelsWrap:ee,visibleSeries:l.visibleI,type:u.config.chart.type})})},ie=0;ie<u.globals.dataPoints;ie++)Q(ie);u.globals.seriesXvalues[T]=_,u.globals.seriesYvalues[T]=p,x.add(L)},w=0;w<n.length;w++)y(w);return x}},{key:"drawVerticalBoxPaths",value:function(n){var o=n.indexes,l=n.x,u=n.xDivision,h=n.barWidth,g=n.zeroH,f=n.strokeWidth,x=this.w,y=new j(this.ctx),w=o.i,C=o.j,E=!0,k=x.config.plotOptions.candlestick.colors.upward,I=x.config.plotOptions.candlestick.colors.downward,P="";this.isBoxPlot&&(P=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var O=this.yRatio[this.yaxisIndex],D=o.realIndex,p=this.getOHLCValue(D,C),_=g,T=g;p.o>p.c&&(E=!1);var L=Math.min(p.o,p.c),z=Math.max(p.o,p.c),K=p.m;x.globals.isXNumeric&&(l=(x.globals.seriesX[D][C]-x.globals.minX)/this.xRatio-h/2);var W=l+h*this.visibleI;null==this.series[w][C]?(L=g,z=g):(L=g-L/O,z=g-z/O,_=g-p.h/O,T=g-p.l/O,K=g-p.m/O);var ee=y.move(W,g),Q=y.move(W+h/2,L);return x.globals.previousPaths.length>0&&(Q=this.getPreviousPath(D,C,!0)),ee=this.isBoxPlot?[y.move(W,L)+y.line(W+h/2,L)+y.line(W+h/2,_)+y.line(W+h/4,_)+y.line(W+h-h/4,_)+y.line(W+h/2,_)+y.line(W+h/2,L)+y.line(W+h,L)+y.line(W+h,K)+y.line(W,K)+y.line(W,L+f/2),y.move(W,K)+y.line(W+h,K)+y.line(W+h,z)+y.line(W+h/2,z)+y.line(W+h/2,T)+y.line(W+h-h/4,T)+y.line(W+h/4,T)+y.line(W+h/2,T)+y.line(W+h/2,z)+y.line(W,z)+y.line(W,K)+"z"]:[y.move(W,z)+y.line(W+h/2,z)+y.line(W+h/2,_)+y.line(W+h/2,z)+y.line(W+h,z)+y.line(W+h,L)+y.line(W+h/2,L)+y.line(W+h/2,T)+y.line(W+h/2,L)+y.line(W,L)+y.line(W,z-f/2)],Q+=y.move(W,L),x.globals.isXNumeric||(l+=u),{pathTo:ee,pathFrom:Q,x:l,y:z,barXPosition:W,color:this.isBoxPlot?P:E?[k]:[I]}}},{key:"drawHorizontalBoxPaths",value:function(n){var o=n.indexes,l=n.y,u=n.yDivision,h=n.barHeight,g=n.zeroW,f=n.strokeWidth,x=this.w,y=new j(this.ctx),w=o.i,C=o.j,E=this.boxOptions.colors.lower;this.isBoxPlot&&(E=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var k=this.invertedYRatio,I=o.realIndex,P=this.getOHLCValue(I,C),O=g,D=g,p=Math.min(P.o,P.c),_=Math.max(P.o,P.c),T=P.m;x.globals.isXNumeric&&(l=(x.globals.seriesX[I][C]-x.globals.minX)/this.invertedXRatio-h/2);var L=l+h*this.visibleI;null==this.series[w][C]?(p=g,_=g):(p=g+p/k,_=g+_/k,O=g+P.h/k,D=g+P.l/k,T=g+P.m/k);var z=y.move(g,L),K=y.move(p,L+h/2);return x.globals.previousPaths.length>0&&(K=this.getPreviousPath(I,C,!0)),z=[y.move(p,L)+y.line(p,L+h/2)+y.line(O,L+h/2)+y.line(O,L+h/2-h/4)+y.line(O,L+h/2+h/4)+y.line(O,L+h/2)+y.line(p,L+h/2)+y.line(p,L+h)+y.line(T,L+h)+y.line(T,L)+y.line(p+f/2,L),y.move(T,L)+y.line(T,L+h)+y.line(_,L+h)+y.line(_,L+h/2)+y.line(D,L+h/2)+y.line(D,L+h-h/4)+y.line(D,L+h/4)+y.line(D,L+h/2)+y.line(_,L+h/2)+y.line(_,L)+y.line(T,L)+"z"],K+=y.move(p,L),x.globals.isXNumeric||(l+=u),{pathTo:z,pathFrom:K,x:_,y:l,barYPosition:L,color:E}}},{key:"getOHLCValue",value:function(n,o){var l=this.w;return{o:this.isBoxPlot?l.globals.seriesCandleH[n][o]:l.globals.seriesCandleO[n][o],h:this.isBoxPlot?l.globals.seriesCandleO[n][o]:l.globals.seriesCandleH[n][o],m:l.globals.seriesCandleM[n][o],l:this.isBoxPlot?l.globals.seriesCandleC[n][o]:l.globals.seriesCandleL[n][o],c:this.isBoxPlot?l.globals.seriesCandleL[n][o]:l.globals.seriesCandleC[n][o]}}}]),i}(),En=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"checkColorRange",value:function(){var t=this.w,i=!1,n=t.config.plotOptions[t.config.chart.type];return n.colorScale.ranges.length>0&&n.colorScale.ranges.map(function(o,l){o.from<=0&&(i=!0)}),i}},{key:"getShadeColor",value:function(t,i,n,o){var l=this.w,u=1,h=l.config.plotOptions[t].shadeIntensity,g=this.determineColor(t,i,n);l.globals.hasNegs||o?u=l.config.plotOptions[t].reverseNegativeShade?g.percent<0?g.percent/100*(1.25*h):1.25*h*(1-g.percent/100):g.percent<=0?1-(1+g.percent/100)*h:(1-g.percent/100)*h:(u=1-g.percent/100,"treemap"===t&&(u=1.25*h*(1-g.percent/100)));var f=g.color,x=new Y;return l.config.plotOptions[t].enableShades&&(f=Y.hexToRgba(x.shadeColor("dark"===this.w.config.theme.mode?-1*u:u,g.color),l.config.fill.opacity)),{color:f,colorProps:g}}},{key:"determineColor",value:function(t,i,n){var o=this.w,l=o.globals.series[i][n],u=o.config.plotOptions[t],h=u.colorScale.inverse?n:i;u.distributed&&"treemap"===o.config.chart.type&&(h=n);var g=o.globals.colors[h],f=null,x=Math.min.apply(Math,Z(o.globals.series[i])),y=Math.max.apply(Math,Z(o.globals.series[i]));u.distributed||"heatmap"!==t||(x=o.globals.minY,y=o.globals.maxY),void 0!==u.colorScale.min&&(x=u.colorScale.min<o.globals.minY?u.colorScale.min:o.globals.minY,y=u.colorScale.max>o.globals.maxY?u.colorScale.max:o.globals.maxY);var w=Math.abs(y)+Math.abs(x),C=100*l/(0===w?w-1e-6:w);return u.colorScale.ranges.length>0&&u.colorScale.ranges.map(function(E,k){if(l>=E.from&&l<=E.to){g=E.color,f=E.foreColor?E.foreColor:null,x=E.from,y=E.to;var I=Math.abs(y)+Math.abs(x);C=100*l/(0===I?I-1e-6:I)}}),{color:g,foreColor:f,percent:C}}},{key:"calculateDataLabels",value:function(t){var i=t.text,n=t.x,o=t.y,l=t.i,u=t.j,h=t.colorProps,g=t.fontSize,f=this.w.config.dataLabels,x=new j(this.ctx),y=new It(this.ctx),w=null;if(f.enabled){w=x.group({class:"apexcharts-data-labels"});var E=f.offsetY,k=n+f.offsetX,I=o+parseFloat(f.style.fontSize)/3+E;y.plotDataLabelsText({x:k,y:I,text:i,i:l,j:u,color:h.foreColor,parent:w,fontSize:g,dataLabelsConfig:f})}return w}},{key:"addListeners",value:function(t){var i=new j(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,t)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this,t))}}]),M}(),Tn=function(){function M(t,i){re(this,M),this.ctx=t,this.w=t.w,this.xRatio=i.xRatio,this.yRatio=i.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new En(t),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return ne(M,[{key:"draw",value:function(t){var i=this.w,n=new j(this.ctx),o=n.group({class:"apexcharts-heatmap"});o.attr("clip-path","url(#gridRectMask".concat(i.globals.cuid,")"));var l=i.globals.gridWidth/i.globals.dataPoints,u=i.globals.gridHeight/i.globals.series.length,h=0,g=!1;this.negRange=this.helpers.checkColorRange();var f=t.slice();i.config.yaxis[0].reversed&&(g=!0,f.reverse());for(var x=g?0:f.length-1;g?x<f.length:x>=0;g?x++:x--){var y=n.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:Y.escapeString(i.globals.seriesNames[x]),rel:x+1,"data:realIndex":x});if(this.ctx.series.addCollapsedClassToSeries(y,x),i.config.chart.dropShadow.enabled){var w=i.config.chart.dropShadow;new oe(this.ctx).dropShadow(y,w,x)}for(var C=0,E=i.config.plotOptions.heatmap.shadeIntensity,k=0;k<f[x].length;k++){var I=this.helpers.getShadeColor(i.config.chart.type,x,k,this.negRange),P=I.color,O=I.colorProps;"image"===i.config.fill.type&&(P=new Qe(this.ctx).fillPath({seriesNumber:x,dataPointIndex:k,opacity:i.globals.hasNegs?O.percent<0?1-(1+O.percent/100):E+O.percent/100:O.percent/100,patternID:Y.randomId(),width:i.config.fill.image.width?i.config.fill.image.width:l,height:i.config.fill.image.height?i.config.fill.image.height:u}));var p=n.drawRect(C,h,l,u,this.rectRadius);if(p.attr({cx:C,cy:h}),p.node.classList.add("apexcharts-heatmap-rect"),y.add(p),p.attr({fill:P,i:x,index:x,j:k,val:f[x][k],"stroke-width":this.strokeWidth,stroke:i.config.plotOptions.heatmap.useFillColorAsStroke?P:i.globals.stroke.colors[0],color:P}),this.helpers.addListeners(p),i.config.chart.animations.enabled&&!i.globals.dataChanged){var _=1;i.globals.resized||(_=i.config.chart.animations.speed),this.animateHeatMap(p,C,h,l,u,_)}if(i.globals.dataChanged){var T=1;if(this.dynamicAnim.enabled&&i.globals.shouldAnimate){T=this.dynamicAnim.speed;var L=i.globals.previousPaths[x]&&i.globals.previousPaths[x][k]&&i.globals.previousPaths[x][k].color;L||(L="rgba(255, 255, 255, 0)"),this.animateHeatColor(p,Y.isColorHex(L)?L:Y.rgb2hex(L),Y.isColorHex(P)?P:Y.rgb2hex(P),T)}}var z=(0,i.config.dataLabels.formatter)(i.globals.series[x][k],{value:i.globals.series[x][k],seriesIndex:x,dataPointIndex:k,w:i}),K=this.helpers.calculateDataLabels({text:z,x:C+l/2,y:h+u/2,i:x,j:k,colorProps:O,series:f});null!==K&&y.add(K),C+=l}h+=u,o.add(y)}var W=i.globals.yAxisScale[0].result.slice();return i.config.yaxis[0].reversed?W.unshift(""):W.push(""),i.globals.yAxisScale[0].result=W,i.config.yaxis[0].labels.offsetY=-i.globals.gridHeight/i.globals.series.length/2,o}},{key:"animateHeatMap",value:function(t,i,n,o,l,u){var h=new le(this.ctx);h.animateRect(t,{x:i+o/2,y:n+l/2,width:0,height:0},{x:i,y:n,width:o,height:l},u,function(){h.animationCompleted(t)})}},{key:"animateHeatColor",value:function(t,i,n,o){t.attr({fill:i}).animate(o).attr({fill:n})}}]),M}(),xs=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"drawYAxisTexts",value:function(t,i,n,o){var l=this.w,u=l.config.yaxis[0],h=l.globals.yLabelFormatters[0];return new j(this.ctx).drawText({x:t+u.labels.offsetX,y:i+u.labels.offsetY,text:h(o,n),textAnchor:"middle",fontSize:u.labels.style.fontSize,fontFamily:u.labels.style.fontFamily,foreColor:Array.isArray(u.labels.style.colors)?u.labels.style.colors[n]:u.labels.style.colors})}}]),M}(),In=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w;var i=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=Math.min(i.globals.gridWidth,i.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=i.globals.gridWidth/2,this.fullAngle="radialBar"===i.config.chart.type?360:Math.abs(i.config.plotOptions.pie.endAngle-i.config.plotOptions.pie.startAngle),this.initialAngle=i.config.plotOptions.pie.startAngle%this.fullAngle,i.globals.radialSize=this.defaultSize/2.05-i.config.stroke.width-(i.config.chart.sparkline.enabled?0:i.config.chart.dropShadow.blur),this.donutSize=i.globals.radialSize*parseInt(i.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return ne(M,[{key:"draw",value:function(t){var i=this,n=this.w,o=new j(this.ctx);if(this.ret=o.group({class:"apexcharts-pie"}),n.globals.noData)return this.ret;for(var l=0,u=0;u<t.length;u++)l+=Y.negToZero(t[u]);var h=[],g=o.group();0===l&&(l=1e-5),t.forEach(function(L){i.maxY=Math.max(i.maxY,L)}),n.config.yaxis[0].max&&(this.maxY=n.config.yaxis[0].max),"back"===n.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var f=0;f<t.length;f++){var x=this.fullAngle*Y.negToZero(t[f])/l;h.push(x),"polarArea"===this.chartType?(h[f]=this.fullAngle/t.length,this.sliceSizes.push(n.globals.radialSize*t[f]/this.maxY)):this.sliceSizes.push(n.globals.radialSize)}if(n.globals.dataChanged){for(var y,w=0,C=0;C<n.globals.previousPaths.length;C++)w+=Y.negToZero(n.globals.previousPaths[C]);for(var E=0;E<n.globals.previousPaths.length;E++)y=this.fullAngle*Y.negToZero(n.globals.previousPaths[E])/w,this.prevSectorAngleArr.push(y)}this.donutSize<0&&(this.donutSize=0);var k=n.config.plotOptions.pie.customScale,O=n.globals.gridWidth/2-n.globals.gridWidth/2*k,D=n.globals.gridHeight/2-n.globals.gridHeight/2*k;if("donut"===this.chartType){var p=o.drawCircle(this.donutSize);p.attr({cx:this.centerX,cy:this.centerY,fill:n.config.plotOptions.pie.donut.background?n.config.plotOptions.pie.donut.background:"transparent"}),g.add(p)}var _=this.drawArcs(h,t);if(this.sliceLabels.forEach(function(L){_.add(L)}),g.attr({transform:"translate(".concat(O,", ").concat(D,") scale(").concat(k,")")}),g.add(_),this.ret.add(g),this.donutDataLabels.show){var T=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:O,translateY:D});this.ret.add(T)}return"front"===n.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(t,i){var n=this.w,o=new oe(this.ctx),l=new j(this.ctx),u=new Qe(this.ctx),h=l.group({class:"apexcharts-slices"}),g=this.initialAngle,f=this.initialAngle,x=this.initialAngle,y=this.initialAngle;this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0;for(var w=0;w<t.length;w++){var C=l.group({class:"apexcharts-series apexcharts-pie-series",seriesName:Y.escapeString(n.globals.seriesNames[w]),rel:w+1,"data:realIndex":w});h.add(C),x=(g=x)+t[w],y=(f=y)+this.prevSectorAngleArr[w];var E=x<g?this.fullAngle+x-g:x-g,k=u.fillPath({seriesNumber:w,size:this.sliceSizes[w],value:i[w]}),I=this.getChangedPath(f,y),P=l.drawPath({d:I,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[w]:this.lineColorArr,strokeWidth:0,fill:k,fillOpacity:n.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(w)});P.attr({index:0,j:w}),o.setSelectionFilter(P,0,w),n.config.chart.dropShadow.enabled&&o.dropShadow(P,n.config.chart.dropShadow,w),this.addListeners(P,this.donutDataLabels),j.setAttrs(P.node,{"data:angle":E,"data:startAngle":g,"data:strokeWidth":this.strokeWidth,"data:value":i[w]});var D={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?D=Y.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize/1.25+n.config.plotOptions.pie.dataLabels.offset,(g+E/2)%this.fullAngle):"donut"===this.chartType&&(D=Y.polarToCartesian(this.centerX,this.centerY,(n.globals.radialSize+this.donutSize)/2+n.config.plotOptions.pie.dataLabels.offset,(g+E/2)%this.fullAngle)),C.add(P);var p=0;if(!this.initialAnim||n.globals.resized||n.globals.dataChanged?this.animBeginArr.push(0):(0==(p=E/this.fullAngle*n.config.chart.animations.speed)&&(p=1),this.animDur=p+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(P,this.dynamicAnim&&n.globals.dataChanged?{size:this.sliceSizes[w],endAngle:x,startAngle:g,prevStartAngle:f,prevEndAngle:y,animateStartingPos:!0,i:w,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:n.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[w],endAngle:x,startAngle:g,i:w,totalItems:t.length-1,animBeginArr:this.animBeginArr,dur:p}),n.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&P.click(this.pieClicked.bind(this,w)),void 0!==n.globals.selectedDataPoints[0]&&n.globals.selectedDataPoints[0].indexOf(w)>-1&&this.pieClicked(w),n.config.dataLabels.enabled){var _=D.x,T=D.y,L=100*E/this.fullAngle+"%";if(0!==E&&n.config.plotOptions.pie.dataLabels.minAngleToShowLabel<t[w]){var z=n.config.dataLabels.formatter;void 0!==z&&(L=z(n.globals.seriesPercent[w][0],{seriesIndex:w,w:n}));var K=n.globals.dataLabels.style.colors[w],W=l.group({class:"apexcharts-datalabels"}),ee=l.drawText({x:_,y:T,text:L,textAnchor:"middle",fontSize:n.config.dataLabels.style.fontSize,fontFamily:n.config.dataLabels.style.fontFamily,fontWeight:n.config.dataLabels.style.fontWeight,foreColor:K});W.add(ee),n.config.dataLabels.dropShadow.enabled&&o.dropShadow(ee,n.config.dataLabels.dropShadow),ee.node.classList.add("apexcharts-pie-label"),n.config.chart.animations.animate&&!1===n.globals.resized&&(ee.node.classList.add("apexcharts-pie-label-delay"),ee.node.style.animationDelay=n.config.chart.animations.speed/940+"s"),this.sliceLabels.push(W)}}}return h}},{key:"addListeners",value:function(t,i){var n=new j(this.ctx);t.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this,t)),t.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,t.node,i)),t.node.addEventListener("mousedown",n.pathMouseDown.bind(this,t)),this.donutDataLabels.total.showAlways||(t.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,t.node,i)),t.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,t.node,i)))}},{key:"animatePaths",value:function(t,i){var o=i.endAngle<i.startAngle?this.fullAngle+i.endAngle-i.startAngle:i.endAngle-i.startAngle,l=o,u=i.startAngle,h=i.startAngle;void 0!==i.prevStartAngle&&void 0!==i.prevEndAngle&&(u=i.prevEndAngle,l=i.prevEndAngle<i.prevStartAngle?this.fullAngle+i.prevEndAngle-i.prevStartAngle:i.prevEndAngle-i.prevStartAngle),i.i===this.w.config.series.length-1&&(o+h>this.fullAngle?i.endAngle=i.endAngle-(o+h):o+h<this.fullAngle&&(i.endAngle=i.endAngle+(this.fullAngle-(o+h)))),o===this.fullAngle&&(o=this.fullAngle-.01),this.animateArc(t,u,h,o,l,i)}},{key:"animateArc",value:function(t,i,n,o,l,u){var h,g=this,f=this.w,x=new le(this.ctx),y=u.size;(isNaN(i)||isNaN(l))&&(i=n,l=o,u.dur=0);var w=o,C=n,E=i<n?this.fullAngle+i-n:i-n;f.globals.dataChanged&&u.shouldSetPrevPaths&&u.prevEndAngle&&(h=g.getPiePath({me:g,startAngle:u.prevStartAngle,angle:u.prevEndAngle<u.prevStartAngle?this.fullAngle+u.prevEndAngle-u.prevStartAngle:u.prevEndAngle-u.prevStartAngle,size:y}),t.attr({d:h})),0!==u.dur?t.animate(u.dur,f.globals.easing,u.animBeginArr[u.i]).afterAll(function(){"pie"!==g.chartType&&"donut"!==g.chartType&&"polarArea"!==g.chartType||this.animate(f.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":g.strokeWidth}),u.i===f.config.series.length-1&&x.animationCompleted(t)}).during(function(k){w=E+(o-E)*k,u.animateStartingPos&&(w=l+(o-l)*k,C=i-l+(n-(i-l))*k),h=g.getPiePath({me:g,startAngle:C,angle:w,size:y}),t.node.setAttribute("data:pathOrig",h),t.attr({d:h})}):(h=g.getPiePath({me:g,startAngle:C,angle:o,size:y}),u.isTrack||(f.globals.animationEnded=!0),t.node.setAttribute("data:pathOrig",h),t.attr({d:h,"stroke-width":g.strokeWidth}))}},{key:"pieClicked",value:function(t){var i,n=this.w,o=this,l=o.sliceSizes[t]+(n.config.plotOptions.pie.expandOnClick?4:0),u=n.globals.dom.Paper.select(".apexcharts-".concat(o.chartType.toLowerCase(),"-slice-").concat(t)).members[0];if("true"!==u.attr("data:pieClicked")){var h=n.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(h,function(y){y.setAttribute("data:pieClicked","false");var w=y.getAttribute("data:pathOrig");y.setAttribute("d",w)}),u.attr("data:pieClicked","true");var g=parseInt(u.attr("data:startAngle"),10),f=parseInt(u.attr("data:angle"),10);i=o.getPiePath({me:o,startAngle:g,angle:f,size:l}),360!==f&&u.plot(i)}else{u.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(u.node,this.donutDataLabels);var x=u.attr("data:pathOrig");u.attr({d:x})}}},{key:"getChangedPath",value:function(t,i){var n="";return this.dynamicAnim&&this.w.globals.dataChanged&&(n=this.getPiePath({me:this,startAngle:t,angle:i-t,size:this.size})),n}},{key:"getPiePath",value:function(t){var i=t.me,n=t.startAngle,o=t.angle,l=t.size,u=n,h=Math.PI*(u-90)/180,g=o+n;Math.ceil(g)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(g=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(g)>this.fullAngle&&(g-=this.fullAngle);var f=Math.PI*(g-90)/180,x=i.centerX+l*Math.cos(h),y=i.centerY+l*Math.sin(h),w=i.centerX+l*Math.cos(f),C=i.centerY+l*Math.sin(f),E=Y.polarToCartesian(i.centerX,i.centerY,i.donutSize,g),k=Y.polarToCartesian(i.centerX,i.centerY,i.donutSize,u),I=o>180?1:0,P=["M",x,y,"A",l,l,0,I,1,w,C];return"donut"===i.chartType?[].concat(P,["L",E.x,E.y,"A",i.donutSize,i.donutSize,0,I,0,k.x,k.y,"L",x,y,"z"]).join(" "):"pie"===i.chartType||"polarArea"===i.chartType?[].concat(P,["L",i.centerX,i.centerY,"L",x,y]).join(" "):[].concat(P).join(" ")}},{key:"drawPolarElements",value:function(t){var i=this.w,n=new Ei(this.ctx),o=new j(this.ctx),l=new xs(this.ctx),u=o.group(),h=o.group(),g=n.niceScale(0,Math.ceil(this.maxY),i.config.yaxis[0].tickAmount,0,!0),f=g.result.reverse(),x=g.result.length;this.maxY=g.niceMax;for(var y=i.globals.radialSize,w=y/(x-1),C=0;C<x-1;C++){var E=o.drawCircle(y);if(E.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":i.config.plotOptions.polarArea.rings.strokeWidth,stroke:i.config.plotOptions.polarArea.rings.strokeColor}),i.config.yaxis[0].show){var k=l.drawYAxisTexts(this.centerX,this.centerY-y+parseInt(i.config.yaxis[0].labels.style.fontSize,10)/2,C,f[C]);h.add(k)}u.add(E),y-=w}this.drawSpokes(t),t.add(u),t.add(h)}},{key:"renderInnerDataLabels",value:function(t,i){var n=this.w,o=new j(this.ctx),l=o.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(i.translateX?i.translateX:0,", ").concat(i.translateY?i.translateY:0,") scale(").concat(n.config.plotOptions.pie.customScale,")")}),u=t.total.show;l.node.style.opacity=i.opacity;var h,g,f=i.centerX,x=i.centerY;h=void 0===t.name.color?n.globals.colors[0]:t.name.color;var y=t.name.fontSize,w=t.name.fontFamily,C=t.name.fontWeight;g=void 0===t.value.color?n.config.chart.foreColor:t.value.color;var E=t.value.formatter,k="",I="";if(u?(h=t.total.color,y=t.total.fontSize,w=t.total.fontFamily,C=t.total.fontWeight,I=t.total.label,k=t.total.formatter(n)):1===n.globals.series.length&&(k=E(n.globals.series[0],n),I=n.globals.seriesNames[0]),I&&(I=t.name.formatter(I,t.total.show,n)),t.name.show){var P=o.drawText({x:f,y:x+parseFloat(t.name.offsetY),text:I,textAnchor:"middle",foreColor:h,fontSize:y,fontWeight:C,fontFamily:w});P.node.classList.add("apexcharts-datalabel-label"),l.add(P)}if(t.value.show){var O=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,D=o.drawText({x:f,y:x+O,text:k,textAnchor:"middle",foreColor:g,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});D.node.classList.add("apexcharts-datalabel-value"),l.add(D)}return l}},{key:"printInnerLabels",value:function(t,i,n,o){var l,u=this.w;o?l=void 0===t.name.color?u.globals.colors[parseInt(o.parentNode.getAttribute("rel"),10)-1]:t.name.color:u.globals.series.length>1&&t.total.show&&(l=t.total.color);var h=u.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),g=u.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");n=(0,t.value.formatter)(n,u),o||"function"!=typeof t.total.formatter||(n=t.total.formatter(u)),i=t.name.formatter(i,i===t.total.label,u),null!==h&&(h.textContent=i),null!==g&&(g.textContent=n),null!==h&&(h.style.fill=l)}},{key:"printDataLabelsInner",value:function(t,i){var n=this.w,o=t.getAttribute("data:value"),l=n.globals.seriesNames[parseInt(t.parentNode.getAttribute("rel"),10)-1];n.globals.series.length>1&&this.printInnerLabels(i,l,o,t);var u=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==u&&(u.style.opacity=1)}},{key:"drawSpokes",value:function(t){var i=this,n=this.w,o=new j(this.ctx),l=n.config.plotOptions.polarArea.spokes;if(0!==l.strokeWidth){for(var u=[],h=360/n.globals.series.length,g=0;g<n.globals.series.length;g++)u.push(Y.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize,n.config.plotOptions.pie.startAngle+h*g));u.forEach(function(f,x){var y=o.drawLine(f.x,f.y,i.centerX,i.centerY,Array.isArray(l.connectorColors)?l.connectorColors[x]:l.connectorColors);t.add(y)})}}},{key:"revertDataLabelsInner",value:function(t,i,n){var o=this,l=this.w,u=l.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),h=!1,g=l.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),f=function(w){var C=w.makeSliceOut,E=w.printLabel;Array.prototype.forEach.call(g,function(k){"true"===k.getAttribute("data:pieClicked")&&(C&&(h=!0),E&&o.printDataLabelsInner(k,i))})};if(f({makeSliceOut:!0,printLabel:!1}),i.total.show&&l.globals.series.length>1)h&&!i.total.showAlways?f({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(i,i.total.label,i.total.formatter(l));else if(f({makeSliceOut:!1,printLabel:!0}),!h)if(l.globals.selectedDataPoints.length&&l.globals.series.length>1)if(l.globals.selectedDataPoints[0].length>0){var x=l.globals.selectedDataPoints[0],y=l.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(x));this.printDataLabelsInner(y,i)}else u&&l.globals.selectedDataPoints.length&&0===l.globals.selectedDataPoints[0].length&&(u.style.opacity=0);else u&&l.globals.series.length>1&&(u.style.opacity=0)}}]),M}(),Ln=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var i=this.w;this.graphics=new j(this.ctx),this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=i.globals.svgHeight<i.globals.svgWidth?i.globals.gridHeight+1.5*i.globals.goldenPadding:i.globals.gridWidth,this.isLog=i.config.yaxis[0].logarithmic,this.coreUtils=new ye(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(i.globals.maxY,0):i.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):i.globals.minY,this.polygons=i.config.plotOptions.radar.polygons,this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-i.config.chart.dropShadow.blur,i.config.xaxis.labels.show&&(this.size=this.size-i.globals.xAxisLabelsWidth/1.75),void 0!==i.config.plotOptions.radar.size&&(this.size=i.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return ne(M,[{key:"draw",value:function(t){var i=this,n=this.w,o=new Qe(this.ctx),l=[],u=new It(this.ctx);t.length&&(this.dataPointsLen=t[n.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var x=n.globals.gridHeight/2+n.config.plotOptions.radar.offsetY,y=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(n.globals.gridWidth/2+n.config.plotOptions.radar.offsetX||0,", ").concat(x||0,")")}),w=[],C=null,E=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),t.forEach(function(I,P){var O=I.length===n.globals.dataPoints,D=i.graphics.group().attr({class:"apexcharts-series","data:longestSeries":O,seriesName:Y.escapeString(n.globals.seriesNames[P]),rel:P+1,"data:realIndex":P});i.dataRadiusOfPercent[P]=[],i.dataRadius[P]=[],i.angleArr[P]=[],I.forEach(function(ie,he){var He=Math.abs(i.maxValue-i.minValue);ie+=Math.abs(i.minValue),i.isLog&&(ie=i.coreUtils.getLogVal(ie,0)),i.dataRadiusOfPercent[P][he]=ie/He,i.dataRadius[P][he]=i.dataRadiusOfPercent[P][he]*i.size,i.angleArr[P][he]=he*i.disAngle}),w=i.getDataPointsPos(i.dataRadius[P],i.angleArr[P]);var p=i.createPaths(w,{x:0,y:0});C=i.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),E=i.graphics.group({class:"apexcharts-datalabels","data:realIndex":P}),n.globals.delayedElements.push({el:C.node,index:P});var _={i:P,realIndex:P,animationDelay:P,initialSpeed:n.config.chart.animations.speed,dataChangeSpeed:n.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:n.globals.stroke.colors[P],strokeLineCap:n.config.stroke.lineCap},T=null;n.globals.previousPaths.length>0&&(T=i.getPreviousPath(P));for(var L=0;L<p.linePathsTo.length;L++){var z=i.graphics.renderPaths(Ce(Ce({},_),{},{pathFrom:null===T?p.linePathsFrom[L]:T,pathTo:p.linePathsTo[L],strokeWidth:Array.isArray(i.strokeWidth)?i.strokeWidth[P]:i.strokeWidth,fill:"none",drawShadow:!1}));D.add(z);var K=o.fillPath({seriesNumber:P}),W=i.graphics.renderPaths(Ce(Ce({},_),{},{pathFrom:null===T?p.areaPathsFrom[L]:T,pathTo:p.areaPathsTo[L],strokeWidth:0,fill:K,drawShadow:!1}));n.config.chart.dropShadow.enabled&&new oe(i.ctx).dropShadow(W,Object.assign({},n.config.chart.dropShadow,{noUserSpaceOnUse:!0}),P),D.add(W)}I.forEach(function(ie,he){var He=new Ie(i.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:P,dataPointIndex:he}),Fe=i.graphics.drawMarker(w[he].x,w[he].y,He);Fe.attr("rel",he),Fe.attr("j",he),Fe.attr("index",P),Fe.node.setAttribute("default-marker-size",He.pSize);var Ge=i.graphics.group({class:"apexcharts-series-markers"});Ge&&Ge.add(Fe),C.add(Ge),D.add(C);var $e=n.config.dataLabels;if($e.enabled){var ot=$e.formatter(n.globals.series[P][he],{seriesIndex:P,dataPointIndex:he,w:n});u.plotDataLabelsText({x:w[he].x,y:w[he].y,text:ot,textAnchor:"middle",i:P,j:P,parent:E,offsetCorrection:!1,dataLabelsConfig:Ce({},$e)})}D.add(E)}),l.push(D)}),this.drawPolygons({parent:y}),n.config.xaxis.labels.show){var k=this.drawXAxisTexts();y.add(k)}return l.forEach(function(I){y.add(I)}),y.add(this.yaxisLabels),y}},{key:"drawPolygons",value:function(t){for(var i=this,n=this.w,o=t.parent,l=new xs(this.ctx),u=n.globals.yAxisScale[0].result.reverse(),h=u.length,g=[],f=this.size/(h-1),x=0;x<h;x++)g[x]=f*x;g.reverse();var y=[],w=[];g.forEach(function(C,E){var k=Y.getPolygonPos(C,i.dataPointsLen),I="";k.forEach(function(P,O){if(0===E){var D=i.graphics.drawLine(P.x,P.y,0,0,Array.isArray(i.polygons.connectorColors)?i.polygons.connectorColors[O]:i.polygons.connectorColors);w.push(D)}0===O&&i.yaxisLabelsTextsPos.push({x:P.x,y:P.y}),I+=P.x+","+P.y+" "}),y.push(I)}),y.forEach(function(C,E){var k=i.polygons.strokeColors,I=i.polygons.strokeWidth,P=i.graphics.drawPolygon(C,Array.isArray(k)?k[E]:k,Array.isArray(I)?I[E]:I,n.globals.radarPolygons.fill.colors[E]);o.add(P)}),w.forEach(function(C){o.add(C)}),n.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(C,E){var k=l.drawYAxisTexts(C.x,C.y,E,u[E]);i.yaxisLabels.add(k)})}},{key:"drawXAxisTexts",value:function(){var t=this,i=this.w,n=i.config.xaxis.labels,o=this.graphics.group({class:"apexcharts-xaxis"}),l=Y.getPolygonPos(this.size,this.dataPointsLen);return i.globals.labels.forEach(function(u,h){var g=i.config.xaxis.labels.formatter,f=new It(t.ctx);if(l[h]){var x=t.getTextPos(l[h],t.size),y=g(u,{seriesIndex:-1,dataPointIndex:h,w:i});f.plotDataLabelsText({x:x.newX,y:x.newY,text:y,textAnchor:x.textAnchor,i:h,j:h,parent:o,color:Array.isArray(n.style.colors)&&n.style.colors[h]?n.style.colors[h]:"#a8a8a8",dataLabelsConfig:Ce({textAnchor:x.textAnchor,dropShadow:{enabled:!1}},n),offsetCorrection:!1})}}),o}},{key:"createPaths",value:function(t,i){var n=this,o=[],l=[],u=[],h=[];if(t.length){l=[this.graphics.move(i.x,i.y)],h=[this.graphics.move(i.x,i.y)];var g=this.graphics.move(t[0].x,t[0].y),f=this.graphics.move(t[0].x,t[0].y);t.forEach(function(x,y){g+=n.graphics.line(x.x,x.y),f+=n.graphics.line(x.x,x.y),y===t.length-1&&(g+="Z",f+="Z")}),o.push(g),u.push(f)}return{linePathsFrom:l,linePathsTo:o,areaPathsFrom:h,areaPathsTo:u}}},{key:"getTextPos",value:function(t,i){var n="middle",o=t.x,l=t.y;return Math.abs(t.x)>=10?t.x>0?(n="start",o+=10):t.x<0&&(n="end",o-=10):n="middle",Math.abs(t.y)>=i-10&&(t.y<0?l-=10:t.y>0&&(l+=10)),{textAnchor:n,newX:o,newY:l}}},{key:"getPreviousPath",value:function(t){for(var i=this.w,n=null,o=0;o<i.globals.previousPaths.length;o++){var l=i.globals.previousPaths[o];l.paths.length>0&&parseInt(l.realIndex,10)===parseInt(t,10)&&void 0!==i.globals.previousPaths[o].paths[0]&&(n=i.globals.previousPaths[o].paths[0].d)}return n}},{key:"getDataPointsPos",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;t=t||[],i=i||[];for(var o=[],l=0;l<n;l++){var u={};u.x=t[l]*Math.sin(i[l]),u.y=-t[l]*Math.cos(i[l]),o.push(u)}return o}}]),M}(),Hs=function(M){Tt(i,In);var t=Ct(i);function i(n){var o;re(this,i),(o=t.call(this,n)).ctx=n,o.w=n.w,o.animBeginArr=[0],o.animDur=0;var l=o.w;return o.startAngle=l.config.plotOptions.radialBar.startAngle,o.endAngle=l.config.plotOptions.radialBar.endAngle,o.totalAngle=Math.abs(l.config.plotOptions.radialBar.endAngle-l.config.plotOptions.radialBar.startAngle),o.trackStartAngle=l.config.plotOptions.radialBar.track.startAngle,o.trackEndAngle=l.config.plotOptions.radialBar.track.endAngle,o.donutDataLabels=o.w.config.plotOptions.radialBar.dataLabels,o.radialDataLabels=o.donutDataLabels,o.trackStartAngle||(o.trackStartAngle=o.startAngle),o.trackEndAngle||(o.trackEndAngle=o.endAngle),360===o.endAngle&&(o.endAngle=359.99),o.margin=parseInt(l.config.plotOptions.radialBar.track.margin,10),o}return ne(i,[{key:"draw",value:function(n){var o=this.w,l=new j(this.ctx),u=l.group({class:"apexcharts-radialbar"});if(o.globals.noData)return u;var h=l.group(),g=this.defaultSize/2,f=o.globals.gridWidth/2,x=this.defaultSize/2.05;o.config.chart.sparkline.enabled||(x=x-o.config.stroke.width-o.config.chart.dropShadow.blur);var y=o.globals.fill.colors;if(o.config.plotOptions.radialBar.track.show){var w=this.drawTracks({size:x,centerX:f,centerY:g,colorArr:y,series:n});h.add(w)}var C=this.drawArcs({size:x,centerX:f,centerY:g,colorArr:y,series:n}),E=360;o.config.plotOptions.radialBar.startAngle<0&&(E=this.totalAngle);var k=(360-E)/360;if(o.globals.radialSize=x-x*k,this.radialDataLabels.value.show){var I=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);o.globals.radialSize+=I*k}return h.add(C.g),"front"===o.config.plotOptions.radialBar.hollow.position&&(C.g.add(C.elHollow),C.dataLabels&&C.g.add(C.dataLabels)),u.add(h),u}},{key:"drawTracks",value:function(n){var o=this.w,l=new j(this.ctx),u=l.group({class:"apexcharts-tracks"}),h=new oe(this.ctx),g=new Qe(this.ctx),f=this.getStrokeWidth(n);n.size=n.size-f/2;for(var x=0;x<n.series.length;x++){var y=l.group({class:"apexcharts-radialbar-track apexcharts-track"});u.add(y),y.attr({rel:x+1}),n.size=n.size-f-this.margin;var w=o.config.plotOptions.radialBar.track,C=g.fillPath({seriesNumber:0,size:n.size,fillColors:Array.isArray(w.background)?w.background[x]:w.background,solid:!0}),E=this.trackStartAngle,k=this.trackEndAngle;Math.abs(k)+Math.abs(E)>=360&&(k=360-Math.abs(this.startAngle)-.1);var I=l.drawPath({d:"",stroke:C,strokeWidth:f*parseInt(w.strokeWidth,10)/100,fill:"none",strokeOpacity:w.opacity,classes:"apexcharts-radialbar-area"});w.dropShadow.enabled&&h.dropShadow(I,w.dropShadow),y.add(I),I.attr("id","apexcharts-radialbarTrack-"+x),this.animatePaths(I,{centerX:n.centerX,centerY:n.centerY,endAngle:k,startAngle:E,size:n.size,i:x,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:o.globals.easing})}return u}},{key:"drawArcs",value:function(n){var o=this.w,l=new j(this.ctx),u=new Qe(this.ctx),h=new oe(this.ctx),g=l.group(),f=this.getStrokeWidth(n);n.size=n.size-f/2;var x=o.config.plotOptions.radialBar.hollow.background,y=n.size-f*n.series.length-this.margin*n.series.length-f*parseInt(o.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,w=y-o.config.plotOptions.radialBar.hollow.margin;void 0!==o.config.plotOptions.radialBar.hollow.image&&(x=this.drawHollowImage(n,g,y,x));var C=this.drawHollow({size:w,centerX:n.centerX,centerY:n.centerY,fill:x||"transparent"});o.config.plotOptions.radialBar.hollow.dropShadow.enabled&&h.dropShadow(C,o.config.plotOptions.radialBar.hollow.dropShadow);var k=1;!this.radialDataLabels.total.show&&o.globals.series.length>1&&(k=0);var I=null;this.radialDataLabels.show&&(I=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:y,centerX:n.centerX,centerY:n.centerY,opacity:k})),"back"===o.config.plotOptions.radialBar.hollow.position&&(g.add(C),I&&g.add(I));var P=!1;o.config.plotOptions.radialBar.inverseOrder&&(P=!0);for(var O=P?n.series.length-1:0;P?O>=0:O<n.series.length;P?O--:O++){var D=l.group({class:"apexcharts-series apexcharts-radial-series",seriesName:Y.escapeString(o.globals.seriesNames[O])});g.add(D),D.attr({rel:O+1,"data:realIndex":O}),this.ctx.series.addCollapsedClassToSeries(D,O),n.size=n.size-f-this.margin;var p=u.fillPath({seriesNumber:O,size:n.size,value:n.series[O]}),_=this.startAngle,T=void 0,L=Y.negToZero(n.series[O]>100?100:n.series[O])/100,z=Math.round(this.totalAngle*L)+this.startAngle,K=void 0;o.globals.dataChanged&&(T=this.startAngle,K=Math.round(this.totalAngle*Y.negToZero(o.globals.previousPaths[O])/100)+T),Math.abs(z)+Math.abs(_)>=360&&(z-=.01),Math.abs(K)+Math.abs(T)>=360&&(K-=.01);var W=z-_,ee=Array.isArray(o.config.stroke.dashArray)?o.config.stroke.dashArray[O]:o.config.stroke.dashArray,Q=l.drawPath({d:"",stroke:p,strokeWidth:f,fill:"none",fillOpacity:o.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+O,strokeDashArray:ee});j.setAttrs(Q.node,{"data:angle":W,"data:value":n.series[O]}),o.config.chart.dropShadow.enabled&&h.dropShadow(Q,o.config.chart.dropShadow,O),h.setSelectionFilter(Q,0,O),this.addListeners(Q,this.radialDataLabels),D.add(Q),Q.attr({index:0,j:O});var he=0;!this.initialAnim||o.globals.resized||o.globals.dataChanged||(he=o.config.chart.animations.speed),o.globals.dataChanged&&(he=o.config.chart.animations.dynamicAnimation.speed),this.animDur=he/(1.2*n.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(Q,{centerX:n.centerX,centerY:n.centerY,endAngle:z,startAngle:_,prevEndAngle:K,prevStartAngle:T,size:n.size,i:O,totalItems:2,animBeginArr:this.animBeginArr,dur:he,shouldSetPrevPaths:!0,easing:o.globals.easing})}return{g,elHollow:C,dataLabels:I}}},{key:"drawHollow",value:function(n){var o=new j(this.ctx).drawCircle(2*n.size);return o.attr({class:"apexcharts-radialbar-hollow",cx:n.centerX,cy:n.centerY,r:n.size,fill:n.fill}),o}},{key:"drawHollowImage",value:function(n,o,l,u){var h=this.w,g=new Qe(this.ctx),f=Y.randomId(),x=h.config.plotOptions.radialBar.hollow.image;if(h.config.plotOptions.radialBar.hollow.imageClipped)g.clippedImgArea({width:l,height:l,image:x,patternID:"pattern".concat(h.globals.cuid).concat(f)}),u="url(#pattern".concat(h.globals.cuid).concat(f,")");else{var y=h.config.plotOptions.radialBar.hollow.imageWidth,w=h.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===y&&void 0===w){var C=h.globals.dom.Paper.image(x).loaded(function(k){this.move(n.centerX-k.width/2+h.config.plotOptions.radialBar.hollow.imageOffsetX,n.centerY-k.height/2+h.config.plotOptions.radialBar.hollow.imageOffsetY)});o.add(C)}else{var E=h.globals.dom.Paper.image(x).loaded(function(k){this.move(n.centerX-y/2+h.config.plotOptions.radialBar.hollow.imageOffsetX,n.centerY-w/2+h.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(y,w)});o.add(E)}}return u}},{key:"getStrokeWidth",value:function(n){return n.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(n.series.length+1)-this.margin}}]),i}(),Lt=function(){function M(t){re(this,M),this.w=t.w,this.lineCtx=t}return ne(M,[{key:"sameValueSeriesFix",value:function(t,i){var n=this.w;if("line"===n.config.chart.type&&("gradient"===n.config.fill.type||"gradient"===n.config.fill.type[t])&&new ye(this.lineCtx.ctx,n).seriesHaveSameValues(t)){var o=i[t].slice();o[o.length-1]=o[o.length-1]+1e-6,i[t]=o}return i}},{key:"calculatePoints",value:function(t){var i=t.series,o=t.x,l=t.y,u=t.i,h=t.j,g=t.prevY,f=this.w,x=[],y=[];if(0===h){var w=this.lineCtx.categoryAxisCorrection+f.config.markers.offsetX;f.globals.isXNumeric&&(w=(f.globals.seriesX[t.realIndex][0]-f.globals.minX)/this.lineCtx.xRatio+f.config.markers.offsetX),x.push(w),y.push(Y.isNumber(i[u][0])?g+f.config.markers.offsetY:null),x.push(o+f.config.markers.offsetX),y.push(Y.isNumber(i[u][h+1])?l+f.config.markers.offsetY:null)}else x.push(o+f.config.markers.offsetX),y.push(Y.isNumber(i[u][h+1])?l+f.config.markers.offsetY:null);return{x,y}}},{key:"checkPreviousPaths",value:function(t){for(var i=t.pathFromLine,n=t.pathFromArea,o=t.realIndex,l=this.w,u=0;u<l.globals.previousPaths.length;u++){var h=l.globals.previousPaths[u];("line"===h.type||"area"===h.type)&&h.paths.length>0&&parseInt(h.realIndex,10)===parseInt(o,10)&&("line"===h.type?(this.lineCtx.appendPathFrom=!1,i=l.globals.previousPaths[u].paths[0].d):"area"===h.type&&(this.lineCtx.appendPathFrom=!1,n=l.globals.previousPaths[u].paths[0].d,l.config.stroke.show&&l.globals.previousPaths[u].paths[1]&&(i=l.globals.previousPaths[u].paths[1].d)))}return{pathFromLine:i,pathFromArea:n}}},{key:"determineFirstPrevY",value:function(t){var i=t.i,n=t.series,o=t.prevY,l=t.lineYPosition,u=this.w;if(void 0!==n[i][0])o=(l=u.config.chart.stacked&&i>0?this.lineCtx.prevSeriesY[i-1][0]:this.lineCtx.zeroY)-n[i][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?n[i][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(u.config.chart.stacked&&i>0&&void 0===n[i][0])for(var h=i-1;h>=0;h--)if(null!=n[h][0]){o=l=this.lineCtx.prevSeriesY[h][0];break}return{prevY:o,lineYPosition:l}}}]),M}(),Rn=function(){function M(t,i,n){re(this,M),this.ctx=t,this.w=t.w,this.xyRatios=i,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||n,this.scatter=new ri(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Lt(this),this.markers=new Ie(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return ne(M,[{key:"draw",value:function(t,i,n){var o=this.w,l=new j(this.ctx),u=o.globals.comboCharts?i:o.config.chart.type,h=l.group({class:"apexcharts-".concat(u,"-series apexcharts-plot-series")}),g=new ye(this.ctx,o);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,t=g.getLogSeries(t),this.yRatio=g.getLogYRatios(this.yRatio);for(var f=[],x=0;x<t.length;x++){t=this.lineHelpers.sameValueSeriesFix(x,t);var y=o.globals.comboCharts?n[x]:x;this._initSerieVariables(t,x,y);var w=[],C=[],E=o.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,y),o.globals.isXNumeric&&o.globals.seriesX.length>0&&(E=(o.globals.seriesX[y][0]-o.globals.minX)/this.xRatio),C.push(E);var k,I=E,P=I,O=this.zeroY;O=this.lineHelpers.determineFirstPrevY({i:x,series:t,prevY:O,lineYPosition:0}).prevY,w.push(O),k=O;var D=this._calculatePathsFrom({series:t,i:x,realIndex:y,prevX:P,prevY:O}),p=this._iterateOverDataPoints({series:t,realIndex:y,i:x,x:E,y:1,pX:I,pY:k,pathsFrom:D,linePaths:[],areaPaths:[],seriesIndex:n,lineYPosition:0,xArrj:C,yArrj:w});this._handlePaths({type:u,realIndex:y,i:x,paths:p}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),f.push(this.elSeries)}if(o.config.chart.stacked)for(var _=f.length;_>0;_--)h.add(f[_-1]);else for(var T=0;T<f.length;T++)h.add(f[T]);return h}},{key:"_initSerieVariables",value:function(t,i,n){var o=this.w,l=new j(this.ctx);this.xDivision=o.globals.gridWidth/(o.globals.dataPoints-("on"===o.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(o.config.stroke.width)?o.config.stroke.width[n]:o.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=n),this.isReversed=o.config.yaxis[this.yaxisIndex]&&o.config.yaxis[this.yaxisIndex].reversed,this.zeroY=o.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?o.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>o.globals.gridHeight||"end"===o.config.plotOptions.area.fillTo)&&(this.areaBottomY=o.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=l.group({class:"apexcharts-series",seriesName:Y.escapeString(o.globals.seriesNames[n])}),this.elPointsMain=l.group({class:"apexcharts-series-markers-wrap","data:realIndex":n}),this.elDataLabelsWrap=l.group({class:"apexcharts-datalabels","data:realIndex":n}),this.elSeries.attr({"data:longestSeries":t[i].length===o.globals.dataPoints,rel:i+1,"data:realIndex":n}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(t){var i,n,o,l,u=t.series,h=t.i,g=t.realIndex,f=t.prevX,x=t.prevY,y=this.w,w=new j(this.ctx);if(null===u[h][0]){for(var C=0;C<u[h].length;C++)if(null!==u[h][C]){i=w.move(f=this.xDivision*C,x=this.zeroY-u[h][C]/this.yRatio[this.yaxisIndex]),n=w.move(f,this.areaBottomY);break}}else i=w.move(f,x),n=w.move(f,this.areaBottomY)+w.line(f,x);if(o=w.move(-1,this.zeroY)+w.line(-1,this.zeroY),l=w.move(-1,this.zeroY)+w.line(-1,this.zeroY),y.globals.previousPaths.length>0){var E=this.lineHelpers.checkPreviousPaths({pathFromLine:o,pathFromArea:l,realIndex:g});o=E.pathFromLine,l=E.pathFromArea}return{prevX:f,prevY:x,linePath:i,areaPath:n,pathFromLine:o,pathFromArea:l}}},{key:"_handlePaths",value:function(t){var i=t.type,n=t.realIndex,o=t.i,l=t.paths,u=this.w,h=new j(this.ctx),g=new Qe(this.ctx);this.prevSeriesY.push(l.yArrj),u.globals.seriesXvalues[n]=l.xArrj,u.globals.seriesYvalues[n]=l.yArrj;var f=u.config.forecastDataPoints;if(f.count>0){var x=u.globals.seriesXvalues[n][u.globals.seriesXvalues[n].length-f.count-1],y=h.drawRect(x,0,u.globals.gridWidth,u.globals.gridHeight,0);u.globals.dom.elForecastMask.appendChild(y.node);var w=h.drawRect(0,0,x,u.globals.gridHeight,0);u.globals.dom.elNonForecastMask.appendChild(w.node)}this.pointsChart||u.globals.delayedElements.push({el:this.elPointsMain.node,index:n});var C={i:o,realIndex:n,animationDelay:o,initialSpeed:u.config.chart.animations.speed,dataChangeSpeed:u.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(i)};if("area"===i)for(var E=g.fillPath({seriesNumber:n}),k=0;k<l.areaPaths.length;k++){var I=h.renderPaths(Ce(Ce({},C),{},{pathFrom:l.pathFromArea,pathTo:l.areaPaths[k],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:E}));this.elSeries.add(I)}if(u.config.stroke.show&&!this.pointsChart){var P=null;if("line"===i)P=g.fillPath({seriesNumber:n,i:o});else if("solid"===u.config.stroke.fill.type)P=u.globals.stroke.colors[n];else{var O=u.config.fill;u.config.fill=u.config.stroke.fill,P=g.fillPath({seriesNumber:n,i:o}),u.config.fill=O}for(var D=0;D<l.linePaths.length;D++){var p=Ce(Ce({},C),{},{pathFrom:l.pathFromLine,pathTo:l.linePaths[D],stroke:P,strokeWidth:this.strokeWidth,strokeLineCap:u.config.stroke.lineCap,fill:"none"}),_=h.renderPaths(p);if(this.elSeries.add(_),f.count>0){var T=h.renderPaths(p);T.node.setAttribute("stroke-dasharray",f.dashArray),f.strokeWidth&&T.node.setAttribute("stroke-width",f.strokeWidth),this.elSeries.add(T),T.attr("clip-path","url(#forecastMask".concat(u.globals.cuid,")")),_.attr("clip-path","url(#nonForecastMask".concat(u.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(t){for(var i=t.series,n=t.realIndex,o=t.i,l=t.x,u=t.y,h=t.pX,g=t.pY,f=t.pathsFrom,x=t.linePaths,y=t.areaPaths,w=t.seriesIndex,C=t.lineYPosition,E=t.xArrj,k=t.yArrj,I=this.w,P=new j(this.ctx),O=this.yRatio,D=f.prevY,p=f.linePath,_=f.areaPath,T=f.pathFromLine,L=f.pathFromArea,z=Y.isNumber(I.globals.minYArr[n])?I.globals.minYArr[n]:I.globals.minY,K=I.globals.dataPoints>1?I.globals.dataPoints-1:I.globals.dataPoints,W=0;W<K;W++){var ee=null==i[o][W+1];if(I.globals.isXNumeric){var Q=I.globals.seriesX[n][W+1];void 0===I.globals.seriesX[n][W+1]&&(Q=I.globals.seriesX[n][K-1]),l=(Q-I.globals.minX)/this.xRatio}else l+=this.xDivision;C=I.config.chart.stacked&&o>0&&I.globals.collapsedSeries.length<I.config.series.length-1?this.prevSeriesY[function(He){for(var Fe=He,Ge=0;Ge<I.globals.series.length;Ge++)if(I.globals.collapsedSeriesIndices.indexOf(He)>-1){Fe--;break}return Fe>=0?Fe:0}(o-1)][W+1]:this.zeroY,u=ee?C-z/O[this.yaxisIndex]+2*(this.isReversed?z/O[this.yaxisIndex]:0):C-i[o][W+1]/O[this.yaxisIndex]+2*(this.isReversed?i[o][W+1]/O[this.yaxisIndex]:0),E.push(l),k.push(u);var ie=this.lineHelpers.calculatePoints({series:i,x:l,y:u,realIndex:n,i:o,j:W,prevY:D}),he=this._createPaths({series:i,i:o,realIndex:n,j:W,x:l,y:u,pX:h,pY:g,linePath:p,areaPath:_,linePaths:x,areaPaths:y,seriesIndex:w});y=he.areaPaths,x=he.linePaths,h=he.pX,g=he.pY,_=he.areaPath,p=he.linePath,this.appendPathFrom&&(T+=P.line(l,this.zeroY),L+=P.line(l,this.zeroY)),this.handleNullDataPoints(i,ie,o,W,n),this._handleMarkersAndLabels({pointsPos:ie,series:i,x:l,y:u,prevY:D,i:o,j:W,realIndex:n})}return{yArrj:k,xArrj:E,pathFromArea:L,areaPaths:y,pathFromLine:T,linePaths:x}}},{key:"_handleMarkersAndLabels",value:function(t){var i=t.pointsPos,n=t.i,o=t.j,l=t.realIndex,u=this.w,h=new It(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,o,{realIndex:l,pointsPos:i,zRatio:this.zRatio,elParent:this.elPointsMain});else{u.globals.series[n].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var g=this.markers.plotChartMarkers(i,l,o+1);null!==g&&this.elPointsMain.add(g)}var f=h.drawDataLabel(i,l,o+1,null);null!==f&&this.elDataLabelsWrap.add(f)}},{key:"_createPaths",value:function(t){var i=t.series,n=t.i,o=t.realIndex,l=t.j,u=t.x,h=t.y,g=t.pX,f=t.pY,x=t.linePath,y=t.areaPath,w=t.linePaths,C=t.areaPaths,E=t.seriesIndex,k=this.w,I=new j(this.ctx),P=k.config.stroke.curve,O=this.areaBottomY;if(Array.isArray(k.config.stroke.curve)&&(P=Array.isArray(E)?k.config.stroke.curve[E[n]]:k.config.stroke.curve[n]),"smooth"===P){var D=.35*(u-g);k.globals.hasNullValues?(null!==i[n][l]&&(null!==i[n][l+1]?(x=I.move(g,f)+I.curve(g+D,f,u-D,h,u+1,h),y=I.move(g+1,f)+I.curve(g+D,f,u-D,h,u+1,h)+I.line(u,O)+I.line(g,O)+"z"):(x=I.move(g,f),y=I.move(g,f)+"z")),w.push(x),C.push(y)):(x+=I.curve(g+D,f,u-D,h,u,h),y+=I.curve(g+D,f,u-D,h,u,h)),g=u,f=h,l===i[n].length-2&&(y=y+I.curve(g,f,u,h,u,O)+I.move(u,h)+"z",k.globals.hasNullValues||(w.push(x),C.push(y)))}else null===i[n][l+1]&&(x+=I.move(u,h),y=y+I.line(k.globals.isXNumeric?(k.globals.seriesX[o][l]-k.globals.minX)/this.xRatio:u-this.xDivision,O)+I.move(u,h)+"z"),null===i[n][l]&&(x+=I.move(u,h),y+=I.move(u,O)),"stepline"===P?(x=x+I.line(u,null,"H")+I.line(null,h,"V"),y=y+I.line(u,null,"H")+I.line(null,h,"V")):"straight"===P&&(x+=I.line(u,h),y+=I.line(u,h)),l===i[n].length-2&&(y=y+I.line(u,O)+I.move(u,h)+"z",w.push(x),C.push(y));return{linePaths:w,areaPaths:C,pX:g,pY:f,linePath:x,areaPath:y}}},{key:"handleNullDataPoints",value:function(t,i,n,o,l){var u=this.w;if(null===t[n][o]&&u.config.markers.showNullDataPoints||1===t[n].length){var h=this.markers.plotChartMarkers(i,l,o+1,this.strokeWidth-u.config.markers.strokeWidth/2,!0);null!==h&&this.elPointsMain.add(h)}}}]),M}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function M(h,g,f,x){this.xoffset=h,this.yoffset=g,this.height=x,this.width=f,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(y){var w,C=[],E=this.xoffset,k=this.yoffset,I=l(y)/this.height,P=l(y)/this.width;if(this.width>=this.height)for(w=0;w<y.length;w++)C.push([E,k,E+I,k+y[w]/I]),k+=y[w]/I;else for(w=0;w<y.length;w++)C.push([E,k,E+y[w]/P,k+P]),E+=y[w]/P;return C},this.cutArea=function(y){var w;if(this.width>=this.height){var C=y/this.height;w=new M(this.xoffset+C,this.yoffset,this.width-C,this.height)}else{var k=y/this.width;w=new M(this.xoffset,this.yoffset+k,this.width,this.height-k)}return w}}function t(h,g,f,x,y){return x=void 0===x?0:x,y=void 0===y?0:y,function(w){var C,E,k=[];for(C=0;C<w.length;C++)for(E=0;E<w[C].length;E++)k.push(w[C][E]);return k}(i(function(w,C){var E,k=[],I=C/l(w);for(E=0;E<w.length;E++)k[E]=w[E]*I;return k}(h,g*f),[],new M(x,y,g,f),[]))}function i(h,g,f,x){var y,w,C,E,k,I,P;if(0!==h.length)return y=f.shortestEdge(),k=w=h[0],I=y,0===(E=g).length||((P=E.slice()).push(k),n(E,I)>=n(P,I))?(g.push(w),i(h.slice(1),g,f,x)):(C=f.cutArea(l(g),x),x.push(f.getCoordinates(g)),i(h,[],C,x)),x;x.push(f.getCoordinates(g))}function n(h,g){var f=Math.min.apply(Math,h),x=Math.max.apply(Math,h),y=l(h);return Math.max(Math.pow(g,2)*x/Math.pow(y,2),Math.pow(y,2)/(Math.pow(g,2)*f))}function o(h){return h&&h.constructor===Array}function l(h){var g,f=0;for(g=0;g<h.length;g++)f+=h[g];return f}function u(h){var g,f=0;if(o(h[0]))for(g=0;g<h.length;g++)f+=u(h[g]);else f=l(h);return f}return function h(g,f,x,y,w){y=void 0===y?0:y,w=void 0===w?0:w;var C,E,k=[],I=[];if(o(g[0])){for(E=0;E<g.length;E++)k[E]=u(g[E]);for(C=t(k,f,x,y,w),E=0;E<g.length;E++)I.push(h(g[E],C[E][2]-C[E][0],C[E][3]-C[E][1],C[E][0],C[E][1]))}else I=t(g,f,x,y,w);return I}}();var qi,Li,La=function(){function M(t,i){re(this,M),this.ctx=t,this.w=t.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new En(t),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return ne(M,[{key:"draw",value:function(t){var i=this,n=this.w,o=new j(this.ctx),l=new Qe(this.ctx),u=o.group({class:"apexcharts-treemap"});if(n.globals.noData)return u;var h=[];return t.forEach(function(g){var f=g.map(function(x){return Math.abs(x)});h.push(f)}),this.negRange=this.helpers.checkColorRange(),n.config.series.forEach(function(g,f){g.data.forEach(function(x){Array.isArray(i.labels[f])||(i.labels[f]=[]),i.labels[f].push(x.x)})}),window.TreemapSquared.generate(h,n.globals.gridWidth,n.globals.gridHeight).forEach(function(g,f){var x=o.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:Y.escapeString(n.globals.seriesNames[f]),rel:f+1,"data:realIndex":f});if(n.config.chart.dropShadow.enabled){var y=n.config.chart.dropShadow;new oe(i.ctx).dropShadow(u,y,f)}var w=o.group({class:"apexcharts-data-labels"});g.forEach(function(C,E){var k=C[0],I=C[1],P=C[2],O=C[3],D=o.drawRect(k,I,P-k,O-I,0,"#fff",1,i.strokeWidth,n.config.plotOptions.treemap.useFillColorAsStroke?_:n.globals.stroke.colors[f]);D.attr({cx:k,cy:I,index:f,i:f,j:E,width:P-k,height:O-I});var p=i.helpers.getShadeColor(n.config.chart.type,f,E,i.negRange),_=p.color;void 0!==n.config.series[f].data[E]&&n.config.series[f].data[E].fillColor&&(_=n.config.series[f].data[E].fillColor);var T=l.fillPath({color:_,seriesNumber:f,dataPointIndex:E});D.node.classList.add("apexcharts-treemap-rect"),D.attr({fill:T}),i.helpers.addListeners(D);var L={x:k+(P-k)/2,y:I+(O-I)/2,width:0,height:0},z={x:k,y:I,width:P-k,height:O-I};if(n.config.chart.animations.enabled&&!n.globals.dataChanged){var K=1;n.globals.resized||(K=n.config.chart.animations.speed),i.animateTreemap(D,L,z,K)}n.globals.dataChanged&&i.dynamicAnim.enabled&&n.globals.shouldAnimate&&(n.globals.previousPaths[f]&&n.globals.previousPaths[f][E]&&n.globals.previousPaths[f][E].rect&&(L=n.globals.previousPaths[f][E].rect),i.animateTreemap(D,L,z,i.dynamicAnim.speed));var ee=i.getFontSize(C),Q=n.config.dataLabels.formatter(i.labels[f][E],{value:n.globals.series[f][E],seriesIndex:f,dataPointIndex:E,w:n}),ie=i.helpers.calculateDataLabels({text:Q,x:(k+P)/2,y:(I+O)/2+i.strokeWidth/2+ee/3,i:f,j:E,colorProps:p,fontSize:ee,series:t});n.config.dataLabels.enabled&&ie&&i.rotateToFitLabel(ie,ee,Q,k,I,P,O),x.add(D),null!==ie&&x.add(ie)}),x.add(w),u.add(x)}),u}},{key:"getFontSize",value:function(t){var u,i=this.w,h=function g(f){var x,y=0;if(Array.isArray(f[0]))for(x=0;x<f.length;x++)y+=g(f[x]);else for(x=0;x<f.length;x++)y+=f[x].length;return y}(this.labels)/function g(f){var x,y=0;if(Array.isArray(f[0]))for(x=0;x<f.length;x++)y+=g(f[x]);else for(x=0;x<f.length;x++)y+=1;return y}(this.labels);return u=Math.pow((t[2]-t[0])*(t[3]-t[1]),.5),Math.min(u/h,parseInt(i.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(t,i,n,o,l,u,h){var g=new j(this.ctx),f=g.getTextRects(n,i);if(f.width+this.w.config.stroke.width+5>u-o&&f.width<=h-l){var x=g.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(-90 ".concat(x.x," ").concat(x.y,")"))}}},{key:"animateTreemap",value:function(t,i,n,o){var l=new le(this.ctx);l.animateRect(t,{x:i.x,y:i.y,width:i.width,height:i.height},{x:n.x,y:n.y,width:n.width,height:n.height},o,function(){l.animationCompleted(t)})}}]),M}(),nt=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return ne(M,[{key:"calculateTimeScaleTicks",value:function(t,i){var n=this,o=this.w;if(o.globals.allSeriesCollapsed)return o.globals.labels=[],o.globals.timescaleLabels=[],[];var l=new ht(this.ctx),u=(i-t)/864e5;this.determineInterval(u),o.globals.disableZoomIn=!1,o.globals.disableZoomOut=!1,u<.00011574074074074075?o.globals.disableZoomIn=!0:u>5e4&&(o.globals.disableZoomOut=!0);var h=l.getTimeUnitsfromTimestamp(t,i,this.utc),g=o.globals.gridWidth/u,f=g/24,x=f/60,y=x/60,w=Math.floor(24*u),C=Math.floor(1440*u),E=Math.floor(86400*u),k=Math.floor(u),I=Math.floor(u/30),P=Math.floor(u/365),O={minMillisecond:h.minMillisecond,minSecond:h.minSecond,minMinute:h.minMinute,minHour:h.minHour,minDate:h.minDate,minMonth:h.minMonth,minYear:h.minYear},D={firstVal:O,currentMillisecond:O.minMillisecond,currentSecond:O.minSecond,currentMinute:O.minMinute,currentHour:O.minHour,currentMonthDate:O.minDate,currentDate:O.minDate,currentMonth:O.minMonth,currentYear:O.minYear,daysWidthOnXAxis:g,hoursWidthOnXAxis:f,minutesWidthOnXAxis:x,secondsWidthOnXAxis:y,numberOfSeconds:E,numberOfMinutes:C,numberOfHours:w,numberOfDays:k,numberOfMonths:I,numberOfYears:P};switch(this.tickInterval){case"years":this.generateYearScale(D);break;case"months":case"half_year":this.generateMonthScale(D);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(D);break;case"hours":this.generateHourScale(D);break;case"minutes_fives":case"minutes":this.generateMinuteScale(D);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(D)}var p=this.timeScaleArray.map(function(_){var T={position:_.position,unit:_.unit,year:_.year,day:_.day?_.day:1,hour:_.hour?_.hour:0,month:_.month+1};return"month"===_.unit?Ce(Ce({},T),{},{day:1,value:_.value+1}):"day"===_.unit||"hour"===_.unit?Ce(Ce({},T),{},{value:_.value}):"minute"===_.unit?Ce(Ce({},T),{},{value:_.value,minute:_.value}):"second"===_.unit?Ce(Ce({},T),{},{value:_.value,minute:_.minute,second:_.second}):_});return p.filter(function(_){var T=1,L=Math.ceil(o.globals.gridWidth/120),z=_.value;void 0!==o.config.xaxis.tickAmount&&(L=o.config.xaxis.tickAmount),p.length>L&&(T=Math.floor(p.length/L));var K=!1,W=!1;switch(n.tickInterval){case"years":"year"===_.unit&&(K=!0);break;case"half_year":T=7,"year"===_.unit&&(K=!0);break;case"months":T=1,"year"===_.unit&&(K=!0);break;case"months_fortnight":T=15,"year"!==_.unit&&"month"!==_.unit||(K=!0),30===z&&(W=!0);break;case"months_days":T=10,"month"===_.unit&&(K=!0),30===z&&(W=!0);break;case"week_days":T=8,"month"===_.unit&&(K=!0);break;case"days":T=1,"month"===_.unit&&(K=!0);break;case"hours":"day"===_.unit&&(K=!0);break;case"minutes_fives":case"seconds_fives":z%5!=0&&(W=!0);break;case"seconds_tens":z%10!=0&&(W=!0)}if("hours"===n.tickInterval||"minutes_fives"===n.tickInterval||"seconds_tens"===n.tickInterval||"seconds_fives"===n.tickInterval){if(!W)return!0}else if((z%T==0||K)&&!W)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(t,i){var n=this.w,o=this.formatDates(t),l=this.removeOverlappingTS(o);n.globals.timescaleLabels=l.slice(),new ci(this.ctx).plotCoords()}},{key:"determineInterval",value:function(t){var i=24*t,n=60*i;switch(!0){case t/365>5:this.tickInterval="years";break;case t>800:this.tickInterval="half_year";break;case t>180:this.tickInterval="months";break;case t>90:this.tickInterval="months_fortnight";break;case t>60:this.tickInterval="months_days";break;case t>30:this.tickInterval="week_days";break;case t>2:this.tickInterval="days";break;case i>2.4:this.tickInterval="hours";break;case n>15:this.tickInterval="minutes_fives";break;case n>5:this.tickInterval="minutes";break;case n>1:this.tickInterval="seconds_tens";break;case 60*n>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(t){var i=t.firstVal,n=t.currentMonth,o=t.currentYear,l=t.daysWidthOnXAxis,u=t.numberOfYears,h=i.minYear,g=0,f=new ht(this.ctx),x="year";if(i.minDate>1||i.minMonth>0){var y=f.determineRemainingDaysOfYear(i.minYear,i.minMonth,i.minDate);g=(f.determineDaysOfYear(i.minYear)-y+1)*l,this.timeScaleArray.push({position:g,value:h=i.minYear+1,unit:x,year:h,month:Y.monthMod(n+1)})}else 1===i.minDate&&0===i.minMonth&&this.timeScaleArray.push({position:g,value:h,unit:x,year:o,month:Y.monthMod(n+1)});for(var w=h,C=g,E=0;E<u;E++)w++,C=f.determineDaysOfYear(w-1)*l+C,this.timeScaleArray.push({position:C,value:w,unit:x,year:w,month:1})}},{key:"generateMonthScale",value:function(t){var i=t.firstVal,n=t.currentMonthDate,o=t.currentMonth,l=t.currentYear,u=t.daysWidthOnXAxis,h=t.numberOfMonths,g=o,f=0,x=new ht(this.ctx),y="month",w=0;if(i.minDate>1){f=(x.determineDaysOfMonths(o+1,i.minYear)-n+1)*u,g=Y.monthMod(o+1);var C=l+w,E=Y.monthMod(g),k=g;0===g&&(y="year",k=C,E=1,C+=w+=1),this.timeScaleArray.push({position:f,value:k,unit:y,year:C,month:E})}else this.timeScaleArray.push({position:f,value:g,unit:y,year:l,month:Y.monthMod(o)});for(var I=g+1,P=f,O=0,D=1;O<h;O++,D++){0===(I=Y.monthMod(I))?(y="year",w+=1):y="month";var p=this._getYear(l,I,w);P=x.determineDaysOfMonths(I,p)*u+P,this.timeScaleArray.push({position:P,value:0===I?p:I,unit:y,year:p,month:0===I?1:I}),I++}}},{key:"generateDayScale",value:function(t){var i=t.firstVal,n=t.currentMonth,o=t.currentYear,l=t.hoursWidthOnXAxis,u=t.numberOfDays,h=new ht(this.ctx),g="day",f=i.minDate+1,x=f,y=function(D,p,_){return D>h.determineDaysOfMonths(p+1,_)&&(x=1,g="month",C=p+=1),p},w=(24-i.minHour)*l,C=f,E=y(x,n,o);0===i.minHour&&1===i.minDate?(w=0,C=Y.monthMod(i.minMonth),g="month",x=i.minDate,u++):1!==i.minDate&&0===i.minHour&&0===i.minMinute&&(w=0,C=f=i.minDate,E=y(x=f,n,o)),this.timeScaleArray.push({position:w,value:C,unit:g,year:this._getYear(o,E,0),month:Y.monthMod(E),day:x});for(var k=w,I=0;I<u;I++){g="day",E=y(x+=1,E,this._getYear(o,E,0));var P=this._getYear(o,E,0);k=24*l+k;var O=1===x?Y.monthMod(E):x;this.timeScaleArray.push({position:k,value:O,unit:g,year:P,month:Y.monthMod(E),day:O})}}},{key:"generateHourScale",value:function(t){var i=t.firstVal,n=t.currentDate,o=t.currentMonth,l=t.currentYear,u=t.minutesWidthOnXAxis,h=t.numberOfHours,g=new ht(this.ctx),f="hour",y=function(T,L){return T>g.determineDaysOfMonths(L+1,l)?L+=1:L},w=60-(i.minMinute+i.minSecond/60),C=w*u,E=i.minHour+1,k=E+1;60===w&&(C=0,k=(E=i.minHour)+1);var T,L,I=n,P=y(I,o);this.timeScaleArray.push({position:C,value:E,unit:f,day:I,hour:k,year:l,month:Y.monthMod(P)});for(var O=C,D=0;D<h;D++){f="hour",k>=24&&(k=0,f="day",P=(T=I+=1,L=P,T>g.determineDaysOfMonths(L+1,l)&&(I=1,L+=1),{month:L,date:I}).month,P=y(I,P));var p=this._getYear(l,P,0);this.timeScaleArray.push({position:O=0===k&&0===D?w*u:60*u+O,value:0===k?I:k,unit:f,hour:k,day:I,year:p,month:Y.monthMod(P)}),k++}}},{key:"generateMinuteScale",value:function(t){for(var f=t.minutesWidthOnXAxis,y=t.numberOfMinutes,w=t.currentMinute+1,C=t.currentDate,E=t.currentMonth,k=t.currentYear,I=t.currentHour,P=(60-t.currentSecond-t.currentMillisecond/1e3)*t.secondsWidthOnXAxis,O=0;O<y;O++)w>=60&&(w=0,24===(I+=1)&&(I=0)),this.timeScaleArray.push({position:P,value:w,unit:"minute",hour:I,minute:w,day:C,year:this._getYear(k,E,0),month:Y.monthMod(E)}),P+=f,w++}},{key:"generateSecondScale",value:function(t){for(var f=t.secondsWidthOnXAxis,x=t.numberOfSeconds,y=t.currentSecond+1,w=t.currentMinute,C=t.currentDate,E=t.currentMonth,k=t.currentYear,I=t.currentHour,P=(1e3-t.currentMillisecond)/1e3*f,O=0;O<x;O++)y>=60&&(y=0,++w>=60&&(w=0,24==++I&&(I=0))),this.timeScaleArray.push({position:P,value:y,unit:"second",hour:I,minute:w,second:y,day:C,year:this._getYear(k,E,0),month:Y.monthMod(E)}),P+=f,y++}},{key:"createRawDateString",value:function(t,i){var n=t.year;return 0===t.month&&(t.month=1),n+="-"+("0"+t.month.toString()).slice(-2),n+="day"===t.unit?"day"===t.unit?"-"+("0"+i).slice(-2):"-01":"-"+("0"+(t.day?t.day:"1")).slice(-2),n+="hour"===t.unit?"hour"===t.unit?"T"+("0"+i).slice(-2):"T00":"T"+("0"+(t.hour?t.hour:"0")).slice(-2),n+="minute"===t.unit?":"+("0"+i).slice(-2):":"+(t.minute?("0"+t.minute).slice(-2):"00"),n+="second"===t.unit?":"+("0"+i).slice(-2):":00",this.utc&&(n+=".000Z"),n}},{key:"formatDates",value:function(t){var i=this,n=this.w;return t.map(function(o){var l=o.value.toString(),u=new ht(i.ctx),h=i.createRawDateString(o,l),g=u.getDate(u.parseDate(h));if(i.utc||(g=u.getDate(u.parseDateWithTimezone(h))),void 0===n.config.xaxis.labels.format){var f="dd MMM",x=n.config.xaxis.labels.datetimeFormatter;"year"===o.unit&&(f=x.year),"month"===o.unit&&(f=x.month),"day"===o.unit&&(f=x.day),"hour"===o.unit&&(f=x.hour),"minute"===o.unit&&(f=x.minute),"second"===o.unit&&(f=x.second),l=u.formatDate(g,f)}else l=u.formatDate(g,n.config.xaxis.labels.format);return{dateString:h,position:o.position,value:l,unit:o.unit,year:o.year,month:o.month}})}},{key:"removeOverlappingTS",value:function(t){var i,n=this,o=new j(this.ctx),l=!1;t.length>0&&t[0].value&&t.every(function(g){return g.value.length===t[0].value.length})&&(l=!0,i=o.getTextRects(t[0].value).width);var u=0;return t.map(function(g,f){if(f>0&&n.w.config.xaxis.labels.hideOverlappingLabels){var x=l?i:o.getTextRects(t[u].value).width;return g.position>t[u].position+x+10?(u=f,g):null}return g}).filter(function(g){return null!==g})}},{key:"_getYear",value:function(t,i,n){return t+Math.floor(i/12)+n}}]),M}(),eo=function(){function M(t,i){re(this,M),this.ctx=i,this.w=i.w,this.el=t}return ne(M,[{key:"setupElements",value:function(){var t=this.w.globals,i=this.w.config,n=i.chart.type;t.axisCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(n)>-1,t.xyCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble"].indexOf(n)>-1,t.isBarHorizontal=("bar"===i.chart.type||"rangeBar"===i.chart.type||"boxPlot"===i.chart.type)&&i.plotOptions.bar.horizontal,t.chartClass=".apexcharts"+t.chartID,t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),j.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas "+t.chartClass.substring(1)}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=new window.SVG.Doc(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(i.chart.offsetX,", ").concat(i.chart.offsetY,")")}),t.dom.Paper.node.style.background=i.chart.background,this.setSVGDimensions(),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elAnnotations=t.dom.Paper.group().attr({class:"apexcharts-annotations"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elWrap.appendChild(t.dom.elLegendWrap),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(t,i){var n=this.w,o=n.config,l=n.globals,u={series:[],i:[]},h={series:[],i:[]},g={series:[],i:[]},f={series:[],i:[]},x={series:[],i:[]},y={series:[],i:[]},w={series:[],i:[]};l.series.map(function(_,T){var L=0;void 0!==t[T].type?("column"===t[T].type||"bar"===t[T].type?(l.series.length>1&&o.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),x.series.push(_),x.i.push(T),L++,n.globals.columnSeries=x.series):"area"===t[T].type?(h.series.push(_),h.i.push(T),L++):"line"===t[T].type?(u.series.push(_),u.i.push(T),L++):"scatter"===t[T].type?(g.series.push(_),g.i.push(T)):"bubble"===t[T].type?(f.series.push(_),f.i.push(T),L++):"candlestick"===t[T].type?(y.series.push(_),y.i.push(T),L++):"boxPlot"===t[T].type?(w.series.push(_),w.i.push(T),L++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),L>1&&(l.comboCharts=!0)):(u.series.push(_),u.i.push(T))});var C=new Rn(this.ctx,i),E=new Bs(this.ctx,i);this.ctx.pie=new In(this.ctx);var k=new Hs(this.ctx);this.ctx.rangeBar=new gs(this.ctx,i);var I=new Ln(this.ctx),P=[];if(l.comboCharts){if(h.series.length>0&&P.push(C.draw(h.series,"area",h.i)),x.series.length>0)if(n.config.chart.stacked){var O=new Ia(this.ctx,i);P.push(O.draw(x.series,x.i))}else this.ctx.bar=new Me(this.ctx,i),P.push(this.ctx.bar.draw(x.series,x.i));if(u.series.length>0&&P.push(C.draw(u.series,"line",u.i)),y.series.length>0&&P.push(E.draw(y.series,y.i)),w.series.length>0&&P.push(E.draw(w.series,w.i)),g.series.length>0){var D=new Rn(this.ctx,i,!0);P.push(D.draw(g.series,"scatter",g.i))}if(f.series.length>0){var p=new Rn(this.ctx,i,!0);P.push(p.draw(f.series,"bubble",f.i))}}else switch(o.chart.type){case"line":P=C.draw(l.series,"line");break;case"area":P=C.draw(l.series,"area");break;case"bar":o.chart.stacked?P=new Ia(this.ctx,i).draw(l.series):(this.ctx.bar=new Me(this.ctx,i),P=this.ctx.bar.draw(l.series));break;case"candlestick":case"boxPlot":P=new Bs(this.ctx,i).draw(l.series);break;case"rangeBar":P=this.ctx.rangeBar.draw(l.series);break;case"heatmap":P=new Tn(this.ctx,i).draw(l.series);break;case"treemap":P=new La(this.ctx,i).draw(l.series);break;case"pie":case"donut":case"polarArea":P=this.ctx.pie.draw(l.series);break;case"radialBar":P=k.draw(l.series);break;case"radar":P=I.draw(l.series);break;default:P=C.draw(l.series)}return P}},{key:"setSVGDimensions",value:function(){var t=this.w.globals,i=this.w.config;t.svgWidth=i.chart.width,t.svgHeight=i.chart.height;var n=Y.getDimensions(this.el),o=i.chart.width.toString().split(/[0-9]+/g).pop();"%"===o?Y.isNumber(n[0])&&(0===n[0].width&&(n=Y.getDimensions(this.el.parentNode)),t.svgWidth=n[0]*parseInt(i.chart.width,10)/100):"px"!==o&&""!==o||(t.svgWidth=parseInt(i.chart.width,10));var l=i.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==t.svgHeight&&""!==t.svgHeight)if("%"===l){var u=Y.getDimensions(this.el.parentNode);t.svgHeight=u[1]*parseInt(i.chart.height,10)/100}else t.svgHeight=parseInt(i.chart.height,10);else t.svgHeight=t.axisCharts?t.svgWidth/1.61:t.svgWidth/1.2;t.svgWidth<0&&(t.svgWidth=0),t.svgHeight<0&&(t.svgHeight=0),j.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),"%"!==l&&(t.dom.Paper.node.parentNode.parentNode.style.minHeight=t.svgHeight+(i.chart.sparkline.enabled?0:t.axisCharts?i.chart.parentHeightOffset:0)+"px"),t.dom.elWrap.style.width=t.svgWidth+"px",t.dom.elWrap.style.height=t.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var t=this.w.globals;j.setAttrs(t.dom.elGraphical.node,{transform:"translate("+t.translateX+", "+t.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var t=this.w,i=t.globals,n=0,o=t.config.chart.sparkline.enabled?1:15;o+=t.config.grid.padding.bottom,"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||!t.config.legend.show||t.config.legend.floating||(n=new _n(this.ctx).legendHelpers.getLegendBBox().clwh+10);var l=t.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),u=2.05*t.globals.radialSize;if(l&&!t.config.chart.sparkline.enabled&&0!==t.config.plotOptions.radialBar.startAngle){var h=Y.getBoundingClientRect(l);u=h.bottom,u=Math.max(2.05*t.globals.radialSize,h.bottom-h.top)}var f=u+i.translateY+n+o;i.dom.elLegendForeign&&i.dom.elLegendForeign.setAttribute("height",f),t.config.chart.height&&String(t.config.chart.height).indexOf("%")>0||(i.dom.elWrap.style.height=f+"px",j.setAttrs(i.dom.Paper.node,{height:f}),i.dom.Paper.node.parentNode.parentNode.style.minHeight=f+"px")}},{key:"coreCalculations",value:function(){new bn(this.ctx).init()}},{key:"resetGlobals",value:function(){var t=this,i=function(){return t.w.config.series.map(function(l){return[]})},n=new De,o=this.w.globals;n.initGlobalVars(o),o.seriesXvalues=i(),o.seriesYvalues=i()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var t=null,i=this.w;if(i.globals.axisCharts){if("back"===i.config.xaxis.crosshairs.position&&new vn(this.ctx).drawXCrosshairs(),"back"===i.config.yaxis[0].crosshairs.position&&new vn(this.ctx).drawYCrosshairs(),"datetime"===i.config.xaxis.type&&void 0===i.config.xaxis.labels.formatter){this.ctx.timeScale=new nt(this.ctx);var n=[];isFinite(i.globals.minX)&&isFinite(i.globals.maxX)&&!i.globals.isBarHorizontal?n=this.ctx.timeScale.calculateTimeScaleTicks(i.globals.minX,i.globals.maxX):i.globals.isBarHorizontal&&(n=this.ctx.timeScale.calculateTimeScaleTicks(i.globals.minY,i.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(n)}t=new ye(this.ctx).getCalculatedRatios()}return t}},{key:"updateSourceChart",value:function(t){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:t.w.globals.minX,max:t.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var t=this,i=this.w;if(i.config.chart.brush.enabled&&"function"!=typeof i.config.chart.events.selection){var n=i.config.chart.brush.targets||[i.config.chart.brush.target];n.forEach(function(o){var l=ApexCharts.getChartByID(o);l.w.globals.brushSource=t.ctx,"function"!=typeof l.w.config.chart.events.zoomed&&(l.w.config.chart.events.zoomed=function(){t.updateSourceChart(l)}),"function"!=typeof l.w.config.chart.events.scrolled&&(l.w.config.chart.events.scrolled=function(){t.updateSourceChart(l)})}),i.config.chart.events.selection=function(o,l){n.forEach(function(u){var h=ApexCharts.getChartByID(u),g=Y.clone(i.config.yaxis);if(i.config.chart.brush.autoScaleYaxis&&1===h.w.globals.series.length){var f=new Ei(h);g=f.autoScaleY(h,g,l)}var x=h.w.config.yaxis.reduce(function(y,w,C){return[].concat(Z(y),[Ce(Ce({},h.w.config.yaxis[C]),{},{min:g[0].min,max:g[0].max})])},[]);h.ctx.updateHelpers._updateOptions({xaxis:{min:l.xaxis.min,max:l.xaxis.max},yaxis:x},!1,!1,!1,!1)})}}}}]),M}(),to=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"_updateOptions",value:function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(h){var g=[i.ctx];l&&(g=i.ctx.getSyncedCharts()),i.ctx.w.globals.isExecCalled&&(g=[i.ctx],i.ctx.w.globals.isExecCalled=!1),g.forEach(function(f,x){var y=f.w;if(y.globals.shouldAnimate=o,n||(y.globals.resized=!0,y.globals.dataChanged=!0,o&&f.series.getPreviousPaths()),t&&"object"===Je(t)&&(f.config=new ut(t),t=ye.extendArrayProps(f.config,t,y),f.w.globals.chartID!==i.ctx.w.globals.chartID&&delete t.series,y.config=Y.extend(y.config,t),u&&(y.globals.lastXAxis=t.xaxis?Y.clone(t.xaxis):[],y.globals.lastYAxis=t.yaxis?Y.clone(t.yaxis):[],y.globals.initialConfig=Y.extend({},y.config),y.globals.initialSeries=Y.clone(y.config.series),t.series))){for(var w=0;w<y.globals.collapsedSeriesIndices.length;w++){var C=y.config.series[y.globals.collapsedSeriesIndices[w]];y.globals.collapsedSeries[w].data=y.globals.axisCharts?C.data.slice():C}for(var E=0;E<y.globals.ancillaryCollapsedSeriesIndices.length;E++){var k=y.config.series[y.globals.ancillaryCollapsedSeriesIndices[E]];y.globals.ancillaryCollapsedSeries[E].data=y.globals.axisCharts?k.data.slice():k}f.series.emptyCollapsedSeries(y.config.series)}return f.update(t).then(function(){x===g.length-1&&h(f)})})})}},{key:"_updateSeries",value:function(t,i){var n=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(l){var u,h=n.w;return h.globals.shouldAnimate=i,h.globals.dataChanged=!0,i&&n.ctx.series.getPreviousPaths(),h.globals.axisCharts?(0===(u=t.map(function(g,f){return n._extendSeries(g,f)})).length&&(u=[{data:[]}]),h.config.series=u):h.config.series=t.slice(),o&&(h.globals.initialConfig.series=Y.clone(h.config.series),h.globals.initialSeries=Y.clone(h.config.series)),n.ctx.update().then(function(){l(n.ctx)})})}},{key:"_extendSeries",value:function(t,i){var n=this.w,o=n.config.series[i];return Ce(Ce({},n.config.series[i]),{},{name:t.name?t.name:o&&o.name,color:t.color?t.color:o&&o.color,type:t.type?t.type:o&&o.type,data:t.data?t.data:o&&o.data})}},{key:"toggleDataPointSelection",value:function(t,i){var n=this.w,o=null,l=".apexcharts-series[data\\:realIndex='".concat(t,"']");return n.globals.axisCharts?o=n.globals.dom.Paper.select("".concat(l," path[j='").concat(i,"'], ").concat(l," circle[j='").concat(i,"'], ").concat(l," rect[j='").concat(i,"']")).members[0]:void 0===i&&(o=n.globals.dom.Paper.select("".concat(l," path[j='").concat(t,"']")).members[0],"pie"!==n.config.chart.type&&"polarArea"!==n.config.chart.type&&"donut"!==n.config.chart.type||this.ctx.pie.pieClicked(t)),o?(new j(this.ctx).pathMouseDown(o,null),o.node?o.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(t){var i=this.w;if(["min","max"].forEach(function(o){void 0!==t.xaxis[o]&&(i.config.xaxis[o]=t.xaxis[o],i.globals.lastXAxis[o]=t.xaxis[o])}),t.xaxis.categories&&t.xaxis.categories.length&&(i.config.xaxis.categories=t.xaxis.categories),i.config.xaxis.convertedCatToNumeric){var n=new Ui(t);t=n.convertCatToNumericXaxis(t,this.ctx)}return t}},{key:"forceYAxisUpdate",value:function(t){return t.chart&&t.chart.stacked&&"100%"===t.chart.stackType&&(Array.isArray(t.yaxis)?t.yaxis.forEach(function(i,n){t.yaxis[n].min=0,t.yaxis[n].max=100}):(t.yaxis.min=0,t.yaxis.max=100)),t}},{key:"revertDefaultAxisMinMax",value:function(t){var i=this,n=this.w,o=n.globals.lastXAxis,l=n.globals.lastYAxis;t&&t.xaxis&&(o=t.xaxis),t&&t.yaxis&&(l=t.yaxis),n.config.xaxis.min=o.min,n.config.xaxis.max=o.max,n.config.yaxis.map(function(h,g){n.globals.zoomed||void 0!==l[g]?function(h){void 0!==l[h]&&(n.config.yaxis[h].min=l[h].min,n.config.yaxis[h].max=l[h].max)}(g):void 0!==i.ctx.opts.yaxis[g]&&(h.min=i.ctx.opts.yaxis[g].min,h.max=i.ctx.opts.yaxis[g].max)})}}]),M}();qi=typeof window<"u"?window:void 0,Li=function(M,t){var i=(void 0!==this?this:M).SVG=function(p){if(i.supported)return p=new i.Doc(p),i.parser.draw||i.prepare(),p};if(i.ns="http://www.w3.org/2000/svg",i.xmlns="http://www.w3.org/2000/xmlns/",i.xlink="http://www.w3.org/1999/xlink",i.svgjs="http://svgjs.dev",i.supported=!0,!i.supported)return!1;i.did=1e3,i.eid=function(p){return"Svgjs"+x(p)+i.did++},i.create=function(p){var _=t.createElementNS(this.ns,p);return _.setAttribute("id",this.eid(p)),_},i.extend=function(){var p,_;_=(p=[].slice.call(arguments)).pop();for(var T=p.length-1;T>=0;T--)if(p[T])for(var L in _)p[T].prototype[L]=_[L];i.Set&&i.Set.inherit&&i.Set.inherit()},i.invent=function(p){var _="function"==typeof p.create?p.create:function(){this.constructor.call(this,i.create(p.create))};return p.inherit&&(_.prototype=new p.inherit),p.extend&&i.extend(_,p.extend),p.construct&&i.extend(p.parent||i.Container,p.construct),_},i.adopt=function(p){return p?p.instance?p.instance:((_="svg"==p.nodeName?p.parentNode instanceof M.SVGElement?new i.Nested:new i.Doc:"linearGradient"==p.nodeName?new i.Gradient("linear"):"radialGradient"==p.nodeName?new i.Gradient("radial"):i[x(p.nodeName)]?new(i[x(p.nodeName)]):new i.Element(p)).type=p.nodeName,_.node=p,p.instance=_,_ instanceof i.Doc&&_.namespace().defs(),_.setData(JSON.parse(p.getAttribute("svgjs:data"))||{}),_):null;var _},i.prepare=function(){var p=t.getElementsByTagName("body")[0],_=(p?new i.Doc(p):i.adopt(t.documentElement).nested()).size(2,0);i.parser={body:p||t.documentElement,draw:_.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:_.polyline().node,path:_.path().node,native:i.create("svg")}},i.parser={native:i.create("svg")},t.addEventListener("DOMContentLoaded",function(){i.parser.draw||i.prepare()},!1),i.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},i.utils={map:function(p,_){for(var T=p.length,L=[],z=0;z<T;z++)L.push(_(p[z]));return L},filter:function(p,_){for(var T=p.length,L=[],z=0;z<T;z++)_(p[z])&&L.push(p[z]);return L},filterSVGElements:function(p){return this.filter(p,function(_){return _ instanceof M.SVGElement})}},i.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},i.Color=function(p){var _,T;this.r=0,this.g=0,this.b=0,p&&("string"==typeof p?i.regex.isRgb.test(p)?(_=i.regex.rgb.exec(p.replace(i.regex.whitespace,"")),this.r=parseInt(_[1]),this.g=parseInt(_[2]),this.b=parseInt(_[3])):i.regex.isHex.test(p)&&(_=i.regex.hex.exec(4==(T=p).length?["#",T.substring(1,2),T.substring(1,2),T.substring(2,3),T.substring(2,3),T.substring(3,4),T.substring(3,4)].join(""):T),this.r=parseInt(_[1],16),this.g=parseInt(_[2],16),this.b=parseInt(_[3],16)):"object"===Je(p)&&(this.r=p.r,this.g=p.g,this.b=p.b))},i.extend(i.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+y(this.r)+y(this.g)+y(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(p){return this.destination=new i.Color(p),this},at:function(p){return this.destination?new i.Color({r:~~(this.r+(this.destination.r-this.r)*(p=p<0?0:p>1?1:p)),g:~~(this.g+(this.destination.g-this.g)*p),b:~~(this.b+(this.destination.b-this.b)*p)}):this}}),i.Color.test=function(p){return i.regex.isHex.test(p+="")||i.regex.isRgb.test(p)},i.Color.isRgb=function(p){return p&&"number"==typeof p.r&&"number"==typeof p.g&&"number"==typeof p.b},i.Color.isColor=function(p){return i.Color.isRgb(p)||i.Color.test(p)},i.Array=function(p,_){0==(p=(p||[]).valueOf()).length&&_&&(p=_.valueOf()),this.value=this.parse(p)},i.extend(i.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(p){return p=p.valueOf(),Array.isArray(p)?p:this.split(p)}}),i.PointArray=function(p,_){i.Array.call(this,p,_||[[0,0]])},i.PointArray.prototype=new i.Array,i.PointArray.prototype.constructor=i.PointArray;for(var n={M:function(p,_,T){return _.x=T.x=p[0],_.y=T.y=p[1],["M",_.x,_.y]},L:function(p,_){return _.x=p[0],_.y=p[1],["L",p[0],p[1]]},H:function(p,_){return _.x=p[0],["H",p[0]]},V:function(p,_){return _.y=p[0],["V",p[0]]},C:function(p,_){return _.x=p[4],_.y=p[5],["C",p[0],p[1],p[2],p[3],p[4],p[5]]},Q:function(p,_){return _.x=p[2],_.y=p[3],["Q",p[0],p[1],p[2],p[3]]},Z:function(p,_,T){return _.x=T.x,_.y=T.y,["Z"]}},o="mlhvqtcsaz".split(""),l=0,u=o.length;l<u;++l)n[o[l]]=function(p){return function(_,T,L){if("H"==p)_[0]=_[0]+T.x;else if("V"==p)_[0]=_[0]+T.y;else if("A"==p)_[5]=_[5]+T.x,_[6]=_[6]+T.y;else for(var z=0,K=_.length;z<K;++z)_[z]=_[z]+(z%2?T.y:T.x);if(n&&"function"==typeof n[p])return n[p](_,T,L)}}(o[l].toUpperCase());i.PathArray=function(p,_){i.Array.call(this,p,_||[["M",0,0]])},i.PathArray.prototype=new i.Array,i.PathArray.prototype.constructor=i.PathArray,i.extend(i.PathArray,{toString:function(){return function(p){for(var _=0,T=p.length,L="";_<T;_++)L+=p[_][0],null!=p[_][1]&&(L+=p[_][1],null!=p[_][2]&&(L+=" ",L+=p[_][2],null!=p[_][3]&&(L+=" ",L+=p[_][3],L+=" ",L+=p[_][4],null!=p[_][5]&&(L+=" ",L+=p[_][5],L+=" ",L+=p[_][6],null!=p[_][7]&&(L+=" ",L+=p[_][7])))));return L+" "}(this.value)},move:function(p,_){return this.bbox(),this},at:function(p){if(!this.destination)return this;for(var _=this.value,T=this.destination.value,L=[],z=new i.PathArray,K=0,W=_.length;K<W;K++){L[K]=[_[K][0]];for(var ee=1,Q=_[K].length;ee<Q;ee++)L[K][ee]=_[K][ee]+(T[K][ee]-_[K][ee])*p;"A"===L[K][0]&&(L[K][4]=+(0!=L[K][4]),L[K][5]=+(0!=L[K][5]))}return z.value=L,z},parse:function(p){if(p instanceof i.PathArray)return p.valueOf();var _,T={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};p="string"==typeof p?p.replace(i.regex.numbersWithDots,g).replace(i.regex.pathLetters," $& ").replace(i.regex.hyphen,"$1 -").trim().split(i.regex.delimiter):p.reduce(function(Q,ie){return[].concat.call(Q,ie)},[]);var L=[],z=new i.Point,K=new i.Point,W=0,ee=p.length;do{i.regex.isPathLetter.test(p[W])?(_=p[W],++W):"M"==_?_="L":"m"==_&&(_="l"),L.push(n[_].call(null,p.slice(W,W+=T[_.toUpperCase()]).map(parseFloat),z,K))}while(ee>W);return L},bbox:function(){return i.parser.draw||i.prepare(),i.parser.path.setAttribute("d",this.toString()),i.parser.path.getBBox()}}),i.Number=i.invent({create:function(p,_){this.value=0,this.unit=_||"","number"==typeof p?this.value=isNaN(p)?0:isFinite(p)?p:p<0?-34e37:34e37:"string"==typeof p?(_=p.match(i.regex.numberAndUnit))&&(this.value=parseFloat(_[1]),"%"==_[5]?this.value/=100:"s"==_[5]&&(this.value*=1e3),this.unit=_[5]):p instanceof i.Number&&(this.value=p.valueOf(),this.unit=p.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(p){return p=new i.Number(p),new i.Number(this+p,this.unit||p.unit)},minus:function(p){return p=new i.Number(p),new i.Number(this-p,this.unit||p.unit)},times:function(p){return p=new i.Number(p),new i.Number(this*p,this.unit||p.unit)},divide:function(p){return p=new i.Number(p),new i.Number(this/p,this.unit||p.unit)},to:function(p){var _=new i.Number(this);return"string"==typeof p&&(_.unit=p),_},morph:function(p){return this.destination=new i.Number(p),p.relative&&(this.destination.value+=this.value),this},at:function(p){return this.destination?new i.Number(this.destination).minus(this).times(p).plus(this):this}}}),i.Element=i.invent({create:function(p){this._stroke=i.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=p)&&(this.type=p.nodeName,this.node.instance=this,this._stroke=p.getAttribute("stroke")||this._stroke)},extend:{x:function(p){return this.attr("x",p)},y:function(p){return this.attr("y",p)},cx:function(p){return null==p?this.x()+this.width()/2:this.x(p-this.width()/2)},cy:function(p){return null==p?this.y()+this.height()/2:this.y(p-this.height()/2)},move:function(p,_){return this.x(p).y(_)},center:function(p,_){return this.cx(p).cy(_)},width:function(p){return this.attr("width",p)},height:function(p){return this.attr("height",p)},size:function(p,_){var T=w(this,p,_);return this.width(new i.Number(T.width)).height(new i.Number(T.height))},clone:function(p){this.writeDataToDom();var _=k(this.node.cloneNode(!0));return p?p.add(_):this.after(_),_},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(p){return this.after(p).remove(),p},addTo:function(p){return p.put(this)},putIn:function(p){return p.add(this)},id:function(p){return this.attr("id",p)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var p=this.attr("class");return null==p?[]:p.trim().split(i.regex.delimiter)},hasClass:function(p){return-1!=this.classes().indexOf(p)},addClass:function(p){if(!this.hasClass(p)){var _=this.classes();_.push(p),this.attr("class",_.join(" "))}return this},removeClass:function(p){return this.hasClass(p)&&this.attr("class",this.classes().filter(function(_){return _!=p}).join(" ")),this},toggleClass:function(p){return this.hasClass(p)?this.removeClass(p):this.addClass(p)},reference:function(p){return i.get(this.attr(p))},parent:function(p){var _=this;if(!_.node.parentNode)return null;if(_=i.adopt(_.node.parentNode),!p)return _;for(;_&&_.node instanceof M.SVGElement;){if("string"==typeof p?_.matches(p):_ instanceof p)return _;if(!_.node.parentNode||"#document"==_.node.parentNode.nodeName)return null;_=i.adopt(_.node.parentNode)}},doc:function(){return this instanceof i.Doc?this:this.parent(i.Doc)},parents:function(p){var _=[],T=this;do{if(!(T=T.parent(p))||!T.node)break;_.push(T)}while(T.parent);return _},matches:function(p){return((_=this.node).matches||_.matchesSelector||_.msMatchesSelector||_.mozMatchesSelector||_.webkitMatchesSelector||_.oMatchesSelector).call(_,p);var _},native:function(){return this.node},svg:function(p){var _=t.createElement("svg");if(!(p&&this instanceof i.Parent))return _.appendChild(p=t.createElement("svg")),this.writeDataToDom(),p.appendChild(this.node.cloneNode(!0)),_.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");_.innerHTML="<svg>"+p.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var T=0,L=_.firstChild.childNodes.length;T<L;T++)this.node.appendChild(_.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(p){return this.dom=p,this},is:function(p){return this instanceof p}}}),i.easing={"-":function(p){return p},"<>":function(p){return-Math.cos(p*Math.PI)/2+.5},">":function(p){return Math.sin(p*Math.PI/2)},"<":function(p){return 1-Math.cos(p*Math.PI/2)}},i.morph=function(p){return function(_,T){return new i.MorphObj(_,T).at(p)}},i.Situation=i.invent({create:function(p){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new i.Number(p.duration).valueOf(),this.delay=new i.Number(p.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=p.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),i.FX=i.invent({create:function(p){this._target=p,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(p,_,T){"object"===Je(p)&&(_=p.ease,T=p.delay,p=p.duration);var L=new i.Situation({duration:p||1e3,delay:T||0,ease:i.easing[_||"-"]||_});return this.queue(L),this},target:function(p){return p&&p instanceof i.Element?(this._target=p,this):this._target},timeToAbsPos:function(p){return(p-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(p){return this.situation.duration/this._speed*p+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=M.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){M.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(p){return("function"==typeof p||p instanceof i.Situation)&&this.situations.push(p),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof i.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var p,_=this.situation;if(_.init)return this;for(var T in _.animations){p=this.target()[T](),Array.isArray(p)||(p=[p]),Array.isArray(_.animations[T])||(_.animations[T]=[_.animations[T]]);for(var L=p.length;L--;)_.animations[T][L]instanceof i.Number&&(p[L]=new i.Number(p[L])),_.animations[T][L]=p[L].morph(_.animations[T][L])}for(var T in _.attrs)_.attrs[T]=new i.MorphObj(this.target().attr(T),_.attrs[T]);for(var T in _.styles)_.styles[T]=new i.MorphObj(this.target().style(T),_.styles[T]);return _.initialTransformation=this.target().matrixify(),_.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(p,_){var T=this.active;return this.active=!1,_&&this.clearQueue(),p&&this.situation&&(!T&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(p){var _=this.last();return this.target().on("finished.fx",function T(L){L.detail.situation==_&&(p.call(this,_),this.off("finished.fx",T))}),this._callStart()},during:function(p){var _=this.last(),T=function(L){L.detail.situation==_&&p.call(this,L.detail.pos,i.morph(L.detail.pos),L.detail.eased,_)};return this.target().off("during.fx",T).on("during.fx",T),this.after(function(){this.off("during.fx",T)}),this._callStart()},afterAll:function(p){var _=function T(L){p.call(this),this.off("allfinished.fx",T)};return this.target().off("allfinished.fx",_).on("allfinished.fx",_),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(p,_,T){return this.last()[T||"animations"][p]=_,this._callStart()},step:function(p){var _,T,L;p||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(_=Math.max(this.absPos,0),T=Math.floor(_),!0===this.situation.loops||T<this.situation.loops?(this.pos=_-T,L=this.situation.loop,this.situation.loop=T):(this.absPos=this.situation.loops,this.pos=1,L=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-L)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var z=this.situation.ease(this.pos);for(var K in this.situation.once)K>this.lastPos&&K<=z&&(this.situation.once[K].call(this.target(),this.pos,z),delete this.situation.once[K]);return this.active&&this.target().fire("during",{pos:this.pos,eased:z,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=z,this):this},eachAt:function(){var p,_=this,T=this.target(),L=this.situation;for(var z in L.animations)p=[].concat(L.animations[z]).map(function(ee){return"string"!=typeof ee&&ee.at?ee.at(L.ease(_.pos),_.pos):ee}),T[z].apply(T,p);for(var z in L.attrs)p=[z].concat(L.attrs[z]).map(function(Q){return"string"!=typeof Q&&Q.at?Q.at(L.ease(_.pos),_.pos):Q}),T.attr.apply(T,p);for(var z in L.styles)p=[z].concat(L.styles[z]).map(function(Q){return"string"!=typeof Q&&Q.at?Q.at(L.ease(_.pos),_.pos):Q}),T.style.apply(T,p);if(L.transforms.length){p=L.initialTransformation,z=0;for(var K=L.transforms.length;z<K;z++){var W=L.transforms[z];W instanceof i.Matrix?p=W.relative?p.multiply((new i.Matrix).morph(W).at(L.ease(this.pos))):p.morph(W).at(L.ease(this.pos)):(W.relative||W.undo(p.extract()),p=p.multiply(W.at(L.ease(this.pos))))}T.matrix(p)}return this},once:function(p,_,T){var L=this.last();return T||(p=L.ease(p)),L.once[p]=_,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:i.Element,construct:{animate:function(p,_,T){return(this.fx||(this.fx=new i.FX(this))).animate(p,_,T)},delay:function(p){return(this.fx||(this.fx=new i.FX(this))).delay(p)},stop:function(p,_){return this.fx&&this.fx.stop(p,_),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),i.MorphObj=i.invent({create:function(p,_){return i.Color.isColor(_)?new i.Color(p).morph(_):i.regex.delimiter.test(p)?i.regex.pathLetters.test(p)?new i.PathArray(p).morph(_):new i.Array(p).morph(_):i.regex.numberAndUnit.test(_)?new i.Number(p).morph(_):(this.value=p,void(this.destination=_))},extend:{at:function(p,_){return _<1?this.value:this.destination},valueOf:function(){return this.value}}}),i.extend(i.FX,{attr:function(p,_,T){if("object"===Je(p))for(var L in p)this.attr(L,p[L]);else this.add(p,_,"attrs");return this},plot:function(p,_,T,L){return 4==arguments.length?this.plot([p,_,T,L]):this.add("plot",new(this.target().morphArray)(p))}}),i.Box=i.invent({create:function(p,_,T,L){if(!("object"!==Je(p)||p instanceof i.Element))return i.Box.call(this,null!=p.left?p.left:p.x,null!=p.top?p.top:p.y,p.width,p.height);4==arguments.length&&(this.x=p,this.y=_,this.width=T,this.height=L),I(this)}}),i.BBox=i.invent({create:function(p){if(i.Box.apply(this,[].slice.call(arguments)),p instanceof i.Element){var _;try{if(!t.documentElement.contains){for(var T=p.node;T.parentNode;)T=T.parentNode;if(T!=t)throw new Error("Element not in the dom")}_=p.node.getBBox()}catch{if(p instanceof i.Shape){i.parser.draw||i.prepare();var L=p.clone(i.parser.draw.instance).show();L&&L.node&&"function"==typeof L.node.getBBox&&(_=L.node.getBBox()),L&&"function"==typeof L.remove&&L.remove()}else _={x:p.node.clientLeft,y:p.node.clientTop,width:p.node.clientWidth,height:p.node.clientHeight}}i.Box.call(this,_)}},inherit:i.Box,parent:i.Element,construct:{bbox:function(){return new i.BBox(this)}}}),i.BBox.prototype.constructor=i.BBox,i.Matrix=i.invent({create:function(p){var _=E([1,0,0,1,0,0]);p=null===p?_:p instanceof i.Element?p.matrixify():"string"==typeof p?E(p.split(i.regex.delimiter).map(parseFloat)):6==arguments.length?E([].slice.call(arguments)):Array.isArray(p)?E(p):p&&"object"===Je(p)?p:_;for(var T=O.length-1;T>=0;--T)this[O[T]]=null!=p[O[T]]?p[O[T]]:_[O[T]]},extend:{extract:function(){var p=C(this,0,1);C(this,1,0);var _=180/Math.PI*Math.atan2(p.y,p.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(_*Math.PI/180)+this.f*Math.sin(_*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(_*Math.PI/180)+this.e*Math.sin(-_*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:_,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new i.Matrix(this)}},clone:function(){return new i.Matrix(this)},morph:function(p){return this.destination=new i.Matrix(p),this},multiply:function(p){return new i.Matrix(this.native().multiply((_=p,_ instanceof i.Matrix||(_=new i.Matrix(_)),_).native()));var _},inverse:function(){return new i.Matrix(this.native().inverse())},translate:function(p,_){return new i.Matrix(this.native().translate(p||0,_||0))},native:function(){for(var p=i.parser.native.createSVGMatrix(),_=O.length-1;_>=0;_--)p[O[_]]=this[O[_]];return p},toString:function(){return"matrix("+P(this.a)+","+P(this.b)+","+P(this.c)+","+P(this.d)+","+P(this.e)+","+P(this.f)+")"}},parent:i.Element,construct:{ctm:function(){return new i.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof i.Nested){var p=this.rect(1,1),_=p.node.getScreenCTM();return p.remove(),new i.Matrix(_)}return new i.Matrix(this.node.getScreenCTM())}}}),i.Point=i.invent({create:function(p,_){var T;T=Array.isArray(p)?{x:p[0],y:p[1]}:"object"===Je(p)?{x:p.x,y:p.y}:null!=p?{x:p,y:_??p}:{x:0,y:0},this.x=T.x,this.y=T.y},extend:{clone:function(){return new i.Point(this)},morph:function(p,_){return this.destination=new i.Point(p,_),this}}}),i.extend(i.Element,{point:function(p,_){return new i.Point(p,_).transform(this.screenCTM().inverse())}}),i.extend(i.Element,{attr:function(p,_,T){if(null==p){for(p={},T=(_=this.node.attributes).length-1;T>=0;T--)p[_[T].nodeName]=i.regex.isNumber.test(_[T].nodeValue)?parseFloat(_[T].nodeValue):_[T].nodeValue;return p}if("object"===Je(p))for(var L in p)this.attr(L,p[L]);else if(null===_)this.node.removeAttribute(p);else{if(null==_)return null==(_=this.node.getAttribute(p))?i.defaults.attrs[p]:i.regex.isNumber.test(_)?parseFloat(_):_;"stroke-width"==p?this.attr("stroke",parseFloat(_)>0?this._stroke:null):"stroke"==p&&(this._stroke=_),"fill"!=p&&"stroke"!=p||(i.regex.isImage.test(_)&&(_=this.doc().defs().image(_,0,0)),_ instanceof i.Image&&(_=this.doc().defs().pattern(0,0,function(){this.add(_)}))),"number"==typeof _?_=new i.Number(_):i.Color.isColor(_)?_=new i.Color(_):Array.isArray(_)&&(_=new i.Array(_)),"leading"==p?this.leading&&this.leading(_):"string"==typeof T?this.node.setAttributeNS(T,p,_.toString()):this.node.setAttribute(p,_.toString()),!this.rebuild||"font-size"!=p&&"x"!=p||this.rebuild(p,_)}return this}}),i.extend(i.Element,{transform:function(p,_){var T;return"object"!==Je(p)?(T=new i.Matrix(this).extract(),"string"==typeof p?T[p]:T):(T=new i.Matrix(this),_=!!_||!!p.relative,null!=p.a&&(T=_?T.multiply(new i.Matrix(p)):new i.Matrix(p)),this.attr("transform",T))}}),i.extend(i.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(i.regex.transforms).slice(0,-1).map(function(p){var _=p.trim().split("(");return[_[0],_[1].split(i.regex.delimiter).map(function(T){return parseFloat(T)})]}).reduce(function(p,_){return"matrix"==_[0]?p.multiply(E(_[1])):p[_[0]].apply(p,_[1])},new i.Matrix)},toParent:function(p){if(this==p)return this;var _=this.screenCTM(),T=p.screenCTM().inverse();return this.addTo(p).untransform().transform(T.multiply(_)),this},toDoc:function(){return this.toParent(this.doc())}}),i.Transformation=i.invent({create:function(p,_){if(arguments.length>1&&"boolean"!=typeof _)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(p))for(var T=0,L=this.arguments.length;T<L;++T)this[this.arguments[T]]=p[T];else if(p&&"object"===Je(p))for(T=0,L=this.arguments.length;T<L;++T)this[this.arguments[T]]=p[this.arguments[T]];this.inversed=!1,!0===_&&(this.inversed=!0)}}),i.Translate=i.invent({parent:i.Matrix,inherit:i.Transformation,create:function(p,_){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),i.extend(i.Element,{style:function(p,_){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===Je(p))for(var T in p)this.style(T,p[T]);else{if(!i.regex.isCss.test(p))return this.node.style[f(p)];for(p=p.split(/\s*;\s*/).filter(function(L){return!!L}).map(function(L){return L.split(/\s*:\s*/)});_=p.pop();)this.style(_[0],_[1])}else this.node.style[f(p)]=null===_||i.regex.isBlank.test(_)?"":_;return this}}),i.Parent=i.invent({create:function(p){this.constructor.call(this,p)},inherit:i.Element,extend:{children:function(){return i.utils.map(i.utils.filterSVGElements(this.node.childNodes),function(p){return i.adopt(p)})},add:function(p,_){return null==_?this.node.appendChild(p.node):p.node!=this.node.childNodes[_]&&this.node.insertBefore(p.node,this.node.childNodes[_]),this},put:function(p,_){return this.add(p,_),p},has:function(p){return this.index(p)>=0},index:function(p){return[].slice.call(this.node.childNodes).indexOf(p.node)},get:function(p){return i.adopt(this.node.childNodes[p])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(p,_){for(var T=this.children(),L=0,z=T.length;L<z;L++)T[L]instanceof i.Element&&p.apply(T[L],[L,T]),_&&T[L]instanceof i.Container&&T[L].each(p,_);return this},removeElement:function(p){return this.node.removeChild(p.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),i.extend(i.Parent,{ungroup:function(p,_){return 0===_||this instanceof i.Defs||this.node==i.parser.draw||(p=p||(this instanceof i.Doc?this:this.parent(i.Parent)),_=_||1/0,this.each(function(){return this instanceof i.Defs?this:this instanceof i.Parent?this.ungroup(p,_-1):this.toParent(p)}),this.node.firstChild||this.remove()),this},flatten:function(p,_){return this.ungroup(p,_)}}),i.Container=i.invent({create:function(p){this.constructor.call(this,p)},inherit:i.Parent}),i.ViewBox=i.invent({parent:i.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(p){i.Element.prototype[p]=function(_){return i.on(this.node,p,_),this}}),i.listeners=[],i.handlerMap=[],i.listenerId=0,i.on=function(p,_,T,L,z){var K=T.bind(L||p.instance||p),W=(i.handlerMap.indexOf(p)+1||i.handlerMap.push(p))-1,ee=_.split(".")[0],Q=_.split(".")[1]||"*";i.listeners[W]=i.listeners[W]||{},i.listeners[W][ee]=i.listeners[W][ee]||{},i.listeners[W][ee][Q]=i.listeners[W][ee][Q]||{},T._svgjsListenerId||(T._svgjsListenerId=++i.listenerId),i.listeners[W][ee][Q][T._svgjsListenerId]=K,p.addEventListener(ee,K,z||{passive:!0})},i.off=function(p,_,T){var L=i.handlerMap.indexOf(p),z=_&&_.split(".")[0],K=_&&_.split(".")[1],W="";if(-1!=L)if(T){if("function"==typeof T&&(T=T._svgjsListenerId),!T)return;i.listeners[L][z]&&i.listeners[L][z][K||"*"]&&(p.removeEventListener(z,i.listeners[L][z][K||"*"][T],!1),delete i.listeners[L][z][K||"*"][T])}else if(K&&z){if(i.listeners[L][z]&&i.listeners[L][z][K]){for(var ee in i.listeners[L][z][K])i.off(p,[z,K].join("."),ee);delete i.listeners[L][z][K]}}else if(K)for(var Q in i.listeners[L])for(var W in i.listeners[L][Q])K===W&&i.off(p,[Q,K].join("."));else if(z){if(i.listeners[L][z]){for(var W in i.listeners[L][z])i.off(p,[z,W].join("."));delete i.listeners[L][z]}}else{for(var Q in i.listeners[L])i.off(p,Q);delete i.listeners[L],delete i.handlerMap[L]}},i.extend(i.Element,{on:function(p,_,T,L){return i.on(this.node,p,_,T,L),this},off:function(p,_){return i.off(this.node,p,_),this},fire:function(p,_){return this.node.dispatchEvent(p instanceof M.Event?p:p=new i.CustomEvent(p,{detail:_,cancelable:!0})),this._event=p,this},event:function(){return this._event}}),i.Defs=i.invent({create:"defs",inherit:i.Container}),i.G=i.invent({create:"g",inherit:i.Container,extend:{x:function(p){return null==p?this.transform("x"):this.transform({x:p-this.x()},!0)}},construct:{group:function(){return this.put(new i.G)}}}),i.Doc=i.invent({create:function(p){p&&("svg"==(p="string"==typeof p?t.getElementById(p):p).nodeName?this.constructor.call(this,p):(this.constructor.call(this,i.create("svg")),p.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:i.Container,extend:{namespace:function(){return this.attr({xmlns:i.ns,version:"1.1"}).attr("xmlns:xlink",i.xlink,i.xmlns).attr("xmlns:svgjs",i.svgjs,i.xmlns)},defs:function(){var p;return this._defs||(this._defs=(p=this.node.getElementsByTagName("defs")[0])?i.adopt(p):new i.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,i.parser.draw&&!i.parser.draw.parentNode&&this.node.appendChild(i.parser.draw),this},clone:function(p){this.writeDataToDom();var _=this.node,T=k(_.cloneNode(!0));return p?(p.node||p).appendChild(T.node):_.parentNode.insertBefore(T.node,_.nextSibling),T}}}),i.extend(i.Element,{}),i.Gradient=i.invent({create:function(p){this.constructor.call(this,i.create(p+"Gradient")),this.type=p},inherit:i.Container,extend:{at:function(p,_,T){return this.put(new i.Stop).update(p,_,T)},update:function(p){return this.clear(),"function"==typeof p&&p.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(p,_,T){return"transform"==p&&(p="gradientTransform"),i.Container.prototype.attr.call(this,p,_,T)}},construct:{gradient:function(p,_){return this.defs().gradient(p,_)}}}),i.extend(i.Gradient,i.FX,{from:function(p,_){return this.attr("radial"==(this._target||this).type?{fx:new i.Number(p),fy:new i.Number(_)}:{x1:new i.Number(p),y1:new i.Number(_)})},to:function(p,_){return this.attr("radial"==(this._target||this).type?{cx:new i.Number(p),cy:new i.Number(_)}:{x2:new i.Number(p),y2:new i.Number(_)})}}),i.extend(i.Defs,{gradient:function(p,_){return this.put(new i.Gradient(p)).update(_)}}),i.Stop=i.invent({create:"stop",inherit:i.Element,extend:{update:function(p){return("number"==typeof p||p instanceof i.Number)&&(p={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=p.opacity&&this.attr("stop-opacity",p.opacity),null!=p.color&&this.attr("stop-color",p.color),null!=p.offset&&this.attr("offset",new i.Number(p.offset)),this}}}),i.Pattern=i.invent({create:"pattern",inherit:i.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(p){return this.clear(),"function"==typeof p&&p.call(this,this),this},toString:function(){return this.fill()},attr:function(p,_,T){return"transform"==p&&(p="patternTransform"),i.Container.prototype.attr.call(this,p,_,T)}},construct:{pattern:function(p,_,T){return this.defs().pattern(p,_,T)}}}),i.extend(i.Defs,{pattern:function(p,_,T){return this.put(new i.Pattern).update(T).attr({x:0,y:0,width:p,height:_,patternUnits:"userSpaceOnUse"})}}),i.Shape=i.invent({create:function(p){this.constructor.call(this,p)},inherit:i.Element}),i.Symbol=i.invent({create:"symbol",inherit:i.Container,construct:{symbol:function(){return this.put(new i.Symbol)}}}),i.Use=i.invent({create:"use",inherit:i.Shape,extend:{element:function(p,_){return this.attr("href",(_||"")+"#"+p,i.xlink)}},construct:{use:function(p,_){return this.put(new i.Use).element(p,_)}}}),i.Rect=i.invent({create:"rect",inherit:i.Shape,construct:{rect:function(p,_){return this.put(new i.Rect).size(p,_)}}}),i.Circle=i.invent({create:"circle",inherit:i.Shape,construct:{circle:function(p){return this.put(new i.Circle).rx(new i.Number(p).divide(2)).move(0,0)}}}),i.extend(i.Circle,i.FX,{rx:function(p){return this.attr("r",p)},ry:function(p){return this.rx(p)}}),i.Ellipse=i.invent({create:"ellipse",inherit:i.Shape,construct:{ellipse:function(p,_){return this.put(new i.Ellipse).size(p,_).move(0,0)}}}),i.extend(i.Ellipse,i.Rect,i.FX,{rx:function(p){return this.attr("rx",p)},ry:function(p){return this.attr("ry",p)}}),i.extend(i.Circle,i.Ellipse,{x:function(p){return null==p?this.cx()-this.rx():this.cx(p+this.rx())},y:function(p){return null==p?this.cy()-this.ry():this.cy(p+this.ry())},cx:function(p){return null==p?this.attr("cx"):this.attr("cx",p)},cy:function(p){return null==p?this.attr("cy"):this.attr("cy",p)},width:function(p){return null==p?2*this.rx():this.rx(new i.Number(p).divide(2))},height:function(p){return null==p?2*this.ry():this.ry(new i.Number(p).divide(2))},size:function(p,_){var T=w(this,p,_);return this.rx(new i.Number(T.width).divide(2)).ry(new i.Number(T.height).divide(2))}}),i.Line=i.invent({create:"line",inherit:i.Shape,extend:{array:function(){return new i.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(p,_,T,L){return null==p?this.array():(p=void 0!==_?{x1:p,y1:_,x2:T,y2:L}:new i.PointArray(p).toLine(),this.attr(p))},move:function(p,_){return this.attr(this.array().move(p,_).toLine())},size:function(p,_){var T=w(this,p,_);return this.attr(this.array().size(T.width,T.height).toLine())}},construct:{line:function(p,_,T,L){return i.Line.prototype.plot.apply(this.put(new i.Line),null!=p?[p,_,T,L]:[0,0,0,0])}}}),i.Polyline=i.invent({create:"polyline",inherit:i.Shape,construct:{polyline:function(p){return this.put(new i.Polyline).plot(p||new i.PointArray)}}}),i.Polygon=i.invent({create:"polygon",inherit:i.Shape,construct:{polygon:function(p){return this.put(new i.Polygon).plot(p||new i.PointArray)}}}),i.extend(i.Polyline,i.Polygon,{array:function(){return this._array||(this._array=new i.PointArray(this.attr("points")))},plot:function(p){return null==p?this.array():this.clear().attr("points","string"==typeof p?p:this._array=new i.PointArray(p))},clear:function(){return delete this._array,this},move:function(p,_){return this.attr("points",this.array().move(p,_))},size:function(p,_){var T=w(this,p,_);return this.attr("points",this.array().size(T.width,T.height))}}),i.extend(i.Line,i.Polyline,i.Polygon,{morphArray:i.PointArray,x:function(p){return null==p?this.bbox().x:this.move(p,this.bbox().y)},y:function(p){return null==p?this.bbox().y:this.move(this.bbox().x,p)},width:function(p){var _=this.bbox();return null==p?_.width:this.size(p,_.height)},height:function(p){var _=this.bbox();return null==p?_.height:this.size(_.width,p)}}),i.Path=i.invent({create:"path",inherit:i.Shape,extend:{morphArray:i.PathArray,array:function(){return this._array||(this._array=new i.PathArray(this.attr("d")))},plot:function(p){return null==p?this.array():this.clear().attr("d","string"==typeof p?p:this._array=new i.PathArray(p))},clear:function(){return delete this._array,this}},construct:{path:function(p){return this.put(new i.Path).plot(p||new i.PathArray)}}}),i.Image=i.invent({create:"image",inherit:i.Shape,extend:{load:function(p){if(!p)return this;var _=this,T=new M.Image;return i.on(T,"load",function(){i.off(T);var L=_.parent(i.Pattern);null!==L&&(0==_.width()&&0==_.height()&&_.size(T.width,T.height),L&&0==L.width()&&0==L.height()&&L.size(_.width(),_.height()),"function"==typeof _._loaded&&_._loaded.call(_,{width:T.width,height:T.height,ratio:T.width/T.height,url:p}))}),i.on(T,"error",function(L){i.off(T),"function"==typeof _._error&&_._error.call(_,L)}),this.attr("href",T.src=this.src=p,i.xlink)},loaded:function(p){return this._loaded=p,this},error:function(p){return this._error=p,this}},construct:{image:function(p,_,T){return this.put(new i.Image).load(p).size(_||0,T||_||0)}}}),i.Text=i.invent({create:function(){this.constructor.call(this,i.create("text")),this.dom.leading=new i.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",i.defaults.attrs["font-family"])},inherit:i.Shape,extend:{x:function(p){return null==p?this.attr("x"):this.attr("x",p)},text:function(p){if(void 0===p){p="";for(var _=this.node.childNodes,T=0,L=_.length;T<L;++T)0!=T&&3!=_[T].nodeType&&1==i.adopt(_[T]).dom.newLined&&(p+="\n"),p+=_[T].textContent;return p}if(this.clear().build(!0),"function"==typeof p)p.call(this,this);else{T=0;for(var z=(p=p.split("\n")).length;T<z;T++)this.tspan(p[T]).newLine()}return this.build(!1).rebuild()},size:function(p){return this.attr("font-size",p).rebuild()},leading:function(p){return null==p?this.dom.leading:(this.dom.leading=new i.Number(p),this.rebuild())},lines:function(){var p=(this.textPath&&this.textPath()||this).node,_=i.utils.map(i.utils.filterSVGElements(p.childNodes),function(T){return i.adopt(T)});return new i.Set(_)},rebuild:function(p){if("boolean"==typeof p&&(this._rebuild=p),this._rebuild){var _=this,T=0,L=this.dom.leading*new i.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(_.textPath()||this.attr("x",_.attr("x")),"\n"==this.text()?T+=L:(this.attr("dy",L+T),T=0))}),this.fire("rebuild")}return this},build:function(p){return this._build=!!p,this},setData:function(p){return this.dom=p,this.dom.leading=new i.Number(p.leading||1.3),this}},construct:{text:function(p){return this.put(new i.Text).text(p)},plain:function(p){return this.put(new i.Text).plain(p)}}}),i.Tspan=i.invent({create:"tspan",inherit:i.Shape,extend:{text:function(p){return null==p?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof p?p.call(this,this):this.plain(p),this)},dx:function(p){return this.attr("dx",p)},dy:function(p){return this.attr("dy",p)},newLine:function(){var p=this.parent(i.Text);return this.dom.newLined=!0,this.dy(p.dom.leading*p.attr("font-size")).attr("x",p.x())}}}),i.extend(i.Text,i.Tspan,{plain:function(p){return!1===this._build&&this.clear(),this.node.appendChild(t.createTextNode(p)),this},tspan:function(p){var _=(this.textPath&&this.textPath()||this).node,T=new i.Tspan;return!1===this._build&&this.clear(),_.appendChild(T.node),T.text(p)},clear:function(){for(var p=(this.textPath&&this.textPath()||this).node;p.hasChildNodes();)p.removeChild(p.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),i.TextPath=i.invent({create:"textPath",inherit:i.Parent,parent:i.Text,construct:{morphArray:i.PathArray,array:function(){var p=this.track();return p?p.array():null},plot:function(p){var _=this.track(),T=null;return _&&(T=_.plot(p)),null==p?T:this},track:function(){var p=this.textPath();if(p)return p.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return i.adopt(this.node.firstChild)}}}),i.Nested=i.invent({create:function(){this.constructor.call(this,i.create("svg")),this.style("overflow","visible")},inherit:i.Container,construct:{nested:function(){return this.put(new i.Nested)}}});var h={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(p,_){return"color"==_?p:p+"-"+_}};function g(p,_,T,L){return T+L.replace(i.regex.dots," .")}function f(p){return p.toLowerCase().replace(/-(.)/g,function(_,T){return T.toUpperCase()})}function x(p){return p.charAt(0).toUpperCase()+p.slice(1)}function y(p){var _=p.toString(16);return 1==_.length?"0"+_:_}function w(p,_,T){if(null==_||null==T){var L=p.bbox();null==_?_=L.width/L.height*T:null==T&&(T=L.height/L.width*_)}return{width:_,height:T}}function C(p,_,T){return{x:_*p.a+T*p.c+0,y:_*p.b+T*p.d+0}}function E(p){return{a:p[0],b:p[1],c:p[2],d:p[3],e:p[4],f:p[5]}}function k(p){for(var _=p.childNodes.length-1;_>=0;_--)p.childNodes[_]instanceof M.SVGElement&&k(p.childNodes[_]);return i.adopt(p).id(i.eid(p.nodeName))}function I(p){return null==p.x&&(p.x=0,p.y=0,p.width=0,p.height=0),p.w=p.width,p.h=p.height,p.x2=p.x+p.width,p.y2=p.y+p.height,p.cx=p.x+p.width/2,p.cy=p.y+p.height/2,p}function P(p){return Math.abs(p)>1e-37?p:0}["fill","stroke"].forEach(function(p){var _={};_[p]=function(T){if(void 0===T)return this;if("string"==typeof T||i.Color.isRgb(T)||T&&"function"==typeof T.fill)this.attr(p,T);else for(var L=h[p].length-1;L>=0;L--)null!=T[h[p][L]]&&this.attr(h.prefix(p,h[p][L]),T[h[p][L]]);return this},i.extend(i.Element,i.FX,_)}),i.extend(i.Element,i.FX,{translate:function(p,_){return this.transform({x:p,y:_})},matrix:function(p){return this.attr("transform",new i.Matrix(6==arguments.length?[].slice.call(arguments):p))},opacity:function(p){return this.attr("opacity",p)},dx:function(p){return this.x(new i.Number(p).plus(this instanceof i.FX?0:this.x()),!0)},dy:function(p){return this.y(new i.Number(p).plus(this instanceof i.FX?0:this.y()),!0)}}),i.extend(i.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(p){return this.node.getPointAtLength(p)}}),i.Set=i.invent({create:function(p){Array.isArray(p)?this.members=p:this.clear()},extend:{add:function(){for(var p=[].slice.call(arguments),_=0,T=p.length;_<T;_++)this.members.push(p[_]);return this},remove:function(p){var _=this.index(p);return _>-1&&this.members.splice(_,1),this},each:function(p){for(var _=0,T=this.members.length;_<T;_++)p.apply(this.members[_],[_,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(p){return this.index(p)>=0},index:function(p){return this.members.indexOf(p)},get:function(p){return this.members[p]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(p){return new i.Set(p)}}}),i.FX.Set=i.invent({create:function(p){this.set=p}}),i.Set.inherit=function(){var p=[];for(var _ in i.Shape.prototype)"function"==typeof i.Shape.prototype[_]&&"function"!=typeof i.Set.prototype[_]&&p.push(_);for(var _ in p.forEach(function(L){i.Set.prototype[L]=function(){for(var z=0,K=this.members.length;z<K;z++)this.members[z]&&"function"==typeof this.members[z][L]&&this.members[z][L].apply(this.members[z],arguments);return"animate"==L?this.fx||(this.fx=new i.FX.Set(this)):this}}),p=[],i.FX.prototype)"function"==typeof i.FX.prototype[_]&&"function"!=typeof i.FX.Set.prototype[_]&&p.push(_);p.forEach(function(T){i.FX.Set.prototype[T]=function(){for(var L=0,z=this.set.members.length;L<z;L++)this.set.members[L].fx[T].apply(this.set.members[L].fx,arguments);return this}})},i.extend(i.Element,{}),i.extend(i.Element,{remember:function(p,_){if("object"===Je(arguments[0]))for(var T in p)this.remember(T,p[T]);else{if(1==arguments.length)return this.memory()[p];this.memory()[p]=_}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var p=arguments.length-1;p>=0;p--)delete this.memory()[arguments[p]];return this},memory:function(){return this._memory||(this._memory={})}}),i.get=function(p){var _=t.getElementById(function(T){var L=(T||"").toString().match(i.regex.reference);if(L)return L[1]}(p)||p);return i.adopt(_)},i.select=function(p,_){return new i.Set(i.utils.map((_||t).querySelectorAll(p),function(T){return i.adopt(T)}))},i.extend(i.Parent,{select:function(p){return i.select(p,this.node)}});var O="abcdef".split("");if("function"!=typeof M.CustomEvent){var D=function(p,_){_=_||{bubbles:!1,cancelable:!1,detail:void 0};var T=t.createEvent("CustomEvent");return T.initCustomEvent(p,_.bubbles,_.cancelable,_.detail),T};D.prototype=M.Event.prototype,i.CustomEvent=D}else i.CustomEvent=M.CustomEvent;return i},void 0!==(bt=function(){return Li(qi,qi.document)}.call(Ai,_e,Ai,ds))&&(ds.exports=bt),function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(h,g){return this.add(h,g),!h.attr("in")&&this.autoSetIn&&h.attr("in",this.source),h.attr("result")||h.attr("result",h),h},blend:function(h,g,f){return this.put(new SVG.BlendEffect(h,g,f))},colorMatrix:function(h,g){return this.put(new SVG.ColorMatrixEffect(h,g))},convolveMatrix:function(h){return this.put(new SVG.ConvolveMatrixEffect(h))},componentTransfer:function(h){return this.put(new SVG.ComponentTransferEffect(h))},composite:function(h,g,f){return this.put(new SVG.CompositeEffect(h,g,f))},flood:function(h,g){return this.put(new SVG.FloodEffect(h,g))},offset:function(h,g){return this.put(new SVG.OffsetEffect(h,g))},image:function(h){return this.put(new SVG.ImageEffect(h))},merge:function(){var h=[void 0];for(var g in arguments)h.push(arguments[g]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,h)))},gaussianBlur:function(h,g){return this.put(new SVG.GaussianBlurEffect(h,g))},morphology:function(h,g){return this.put(new SVG.MorphologyEffect(h,g))},diffuseLighting:function(h,g,f){return this.put(new SVG.DiffuseLightingEffect(h,g,f))},displacementMap:function(h,g,f,x,y){return this.put(new SVG.DisplacementMapEffect(h,g,f,x,y))},specularLighting:function(h,g,f,x){return this.put(new SVG.SpecularLightingEffect(h,g,f,x))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(h,g,f,x,y){return this.put(new SVG.TurbulenceEffect(h,g,f,x,y))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(h){var g=this.put(new SVG.Filter);return"function"==typeof h&&h.call(g,g),g}}),SVG.extend(SVG.Container,{filter:function(h){return this.defs().filter(h)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(h){return this.filterer=h instanceof SVG.Element?h:this.doc().filter(h),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(h){return this.filterer&&!0===h&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(h){return null==h?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",h)},result:function(h){return null==h?this.attr("result"):this.attr("result",h)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(h){return null==h?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",h)},result:function(h){return null==h?this.attr("result"):this.attr("result",h)},toString:function(){return this.result()}}});var M={blend:function(h,g){return this.parent()&&this.parent().blend(this,h,g)},colorMatrix:function(h,g){return this.parent()&&this.parent().colorMatrix(h,g).in(this)},convolveMatrix:function(h){return this.parent()&&this.parent().convolveMatrix(h).in(this)},componentTransfer:function(h){return this.parent()&&this.parent().componentTransfer(h).in(this)},composite:function(h,g){return this.parent()&&this.parent().composite(this,h,g)},flood:function(h,g){return this.parent()&&this.parent().flood(h,g)},offset:function(h,g){return this.parent()&&this.parent().offset(h,g).in(this)},image:function(h){return this.parent()&&this.parent().image(h)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(h,g){return this.parent()&&this.parent().gaussianBlur(h,g).in(this)},morphology:function(h,g){return this.parent()&&this.parent().morphology(h,g).in(this)},diffuseLighting:function(h,g,f){return this.parent()&&this.parent().diffuseLighting(h,g,f).in(this)},displacementMap:function(h,g,f,x){return this.parent()&&this.parent().displacementMap(this,h,g,f,x)},specularLighting:function(h,g,f,x){return this.parent()&&this.parent().specularLighting(h,g,f,x).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(h,g,f,x,y){return this.parent()&&this.parent().turbulence(h,g,f,x,y).in(this)}};SVG.extend(SVG.Effect,M),SVG.extend(SVG.ParentEffect,M),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(h){this.attr("in",h)}}});var t={blend:function(h,g,f){this.attr({in:h,in2:g,mode:f||"normal"})},colorMatrix:function(h,g){"matrix"==h&&(g=o(g)),this.attr({type:h,values:void 0===g?null:g})},convolveMatrix:function(h){h=o(h),this.attr({order:Math.sqrt(h.split(" ").length),kernelMatrix:h})},composite:function(h,g,f){this.attr({in:h,in2:g,operator:f})},flood:function(h,g){this.attr("flood-color",h),null!=g&&this.attr("flood-opacity",g)},offset:function(h,g){this.attr({dx:h,dy:g})},image:function(h){this.attr("href",h,SVG.xlink)},displacementMap:function(h,g,f,x,y){this.attr({in:h,in2:g,scale:f,xChannelSelector:x,yChannelSelector:y})},gaussianBlur:function(h,g){this.attr("stdDeviation",null!=h||null!=g?l(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(h,g){this.attr({operator:h,radius:g})},tile:function(){},turbulence:function(h,g,f,x,y){this.attr({numOctaves:g,seed:f,stitchTiles:x,baseFrequency:h,type:y})}},i={merge:function(){var h;if(arguments[0]instanceof SVG.Set){var g=this;arguments[0].each(function(x){this instanceof SVG.MergeNode?g.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&g.put(new SVG.MergeNode(this))})}else{h=Array.isArray(arguments[0])?arguments[0]:arguments;for(var f=0;f<h.length;f++)h[f]instanceof SVG.MergeNode?this.put(h[f]):this.put(new SVG.MergeNode(h[f]))}},componentTransfer:function(h){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(f){this[f]=new(SVG["Func"+f.toUpperCase()])("identity"),this.rgb.add(this[f]),this.node.appendChild(this[f].node)}.bind(this)),h)for(var g in h.rgb&&(["r","g","b"].forEach(function(f){this[f].attr(h.rgb)}.bind(this)),delete h.rgb),h)this[g].attr(h[g])},diffuseLighting:function(h,g,f){this.attr({surfaceScale:h,diffuseConstant:g,kernelUnitLength:f})},specularLighting:function(h,g,f,x){this.attr({surfaceScale:h,diffuseConstant:g,specularExponent:f,kernelUnitLength:x})}},n={distantLight:function(h,g){this.attr({azimuth:h,elevation:g})},pointLight:function(h,g,f){this.attr({x:h,y:g,z:f})},spotLight:function(h,g,f,x,y,w){this.attr({x:h,y:g,z:f,pointsAtX:x,pointsAtY:y,pointsAtZ:w})},mergeNode:function(h){this.attr("in",h)}};function o(h){return Array.isArray(h)&&(h=new SVG.Array(h)),h.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function l(h){if(!Array.isArray(h))return h;for(var g=0,f=h.length,x=[];g<f;g++)x.push(h[g]);return x.join(" ")}function u(){var h=function(){};for(var g in"function"==typeof arguments[arguments.length-1]&&(h=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var f in arguments[g])h(arguments[g][f],f,arguments[g])}["r","g","b","a"].forEach(function(h){n["Func"+h.toUpperCase()]=function(g){switch(this.attr("type",g),g){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),u(t,function(h,g){var f=g.charAt(0).toUpperCase()+g.slice(1);SVG[f+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+f)),h.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),u(i,function(h,g){var f=g.charAt(0).toUpperCase()+g.slice(1);SVG[f+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+f)),h.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),u(n,function(h,g){var f=g.charAt(0).toUpperCase()+g.slice(1);SVG[f]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+f)),h.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(h){return h instanceof SVG.MergeNode?this.add(h,0):this.add(new SVG.MergeNode(h),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(h){return null==h?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",h)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function M(l,u,h,g,f,x,y){for(var w=l.slice(u,h||y),C=g.slice(f,x||y),E=0,k={pos:[0,0],start:[0,0]},I={pos:[0,0],start:[0,0]};w[E]=t.call(k,w[E]),C[E]=t.call(I,C[E]),w[E][0]!=C[E][0]||"M"==w[E][0]||"A"==w[E][0]&&(w[E][4]!=C[E][4]||w[E][5]!=C[E][5])?(Array.prototype.splice.apply(w,[E,1].concat(n.call(k,w[E]))),Array.prototype.splice.apply(C,[E,1].concat(n.call(I,C[E])))):(w[E]=i.call(k,w[E]),C[E]=i.call(I,C[E])),++E!=w.length||E!=C.length;)E==w.length&&w.push(["C",k.pos[0],k.pos[1],k.pos[0],k.pos[1],k.pos[0],k.pos[1]]),E==C.length&&C.push(["C",I.pos[0],I.pos[1],I.pos[0],I.pos[1],I.pos[0],I.pos[1]]);return{start:w,dest:C}}function t(l){switch(l[0]){case"z":case"Z":l[0]="L",l[1]=this.start[0],l[2]=this.start[1];break;case"H":l[0]="L",l[2]=this.pos[1];break;case"V":l[0]="L",l[2]=l[1],l[1]=this.pos[0];break;case"T":l[0]="Q",l[3]=l[1],l[4]=l[2],l[1]=this.reflection[1],l[2]=this.reflection[0];break;case"S":l[0]="C",l[6]=l[4],l[5]=l[3],l[4]=l[2],l[3]=l[1],l[2]=this.reflection[1],l[1]=this.reflection[0]}return l}function i(l){var u=l.length;return this.pos=[l[u-2],l[u-1]],-1!="SCQT".indexOf(l[0])&&(this.reflection=[2*this.pos[0]-l[u-4],2*this.pos[1]-l[u-3]]),l}function n(l){var u=[l];switch(l[0]){case"M":return this.pos=this.start=[l[1],l[2]],u;case"L":l[5]=l[3]=l[1],l[6]=l[4]=l[2],l[1]=this.pos[0],l[2]=this.pos[1];break;case"Q":l[6]=l[4],l[5]=l[3],l[4]=1*l[4]/3+2*l[2]/3,l[3]=1*l[3]/3+2*l[1]/3,l[2]=1*this.pos[1]/3+2*l[2]/3,l[1]=1*this.pos[0]/3+2*l[1]/3;break;case"A":l=(u=function(h,g){var f,x,y,w,C,E,k,I,P,O,D,p,_,T,L,z,K,W,ee,Q,ie,he,He,Fe,Ge,$e,ot=Math.abs(g[1]),qt=Math.abs(g[2]),Ri=g[3]%360,Ma=g[4],Pn=g[5],Jt=g[6],Fn=g[7],mt=new SVG.Point(h),et=new SVG.Point(Jt,Fn),Gs=[];if(0===ot||0===qt||mt.x===et.x&&mt.y===et.y)return[["C",mt.x,mt.y,et.x,et.y,et.x,et.y]];for((x=(f=new SVG.Point((mt.x-et.x)/2,(mt.y-et.y)/2).transform((new SVG.Matrix).rotate(Ri))).x*f.x/(ot*ot)+f.y*f.y/(qt*qt))>1&&(ot*=x=Math.sqrt(x),qt*=x),y=(new SVG.Matrix).rotate(Ri).scale(1/ot,1/qt).rotate(-Ri),mt=mt.transform(y),E=(w=[(et=et.transform(y)).x-mt.x,et.y-mt.y])[0]*w[0]+w[1]*w[1],C=Math.sqrt(E),w[0]/=C,w[1]/=C,k=E<4?Math.sqrt(1-E/4):0,Ma===Pn&&(k*=-1),I=new SVG.Point((et.x+mt.x)/2+k*-w[1],(et.y+mt.y)/2+k*w[0]),P=new SVG.Point(mt.x-I.x,mt.y-I.y),O=new SVG.Point(et.x-I.x,et.y-I.y),D=Math.acos(P.x/Math.sqrt(P.x*P.x+P.y*P.y)),P.y<0&&(D*=-1),p=Math.acos(O.x/Math.sqrt(O.x*O.x+O.y*O.y)),O.y<0&&(p*=-1),Pn&&D>p&&(p+=2*Math.PI),!Pn&&D<p&&(p-=2*Math.PI),z=[],K=D,_=(p-D)/(T=Math.ceil(2*Math.abs(D-p)/Math.PI)),L=4*Math.tan(_/4)/3,ie=0;ie<=T;ie++)ee=Math.cos(K),W=Math.sin(K),Q=new SVG.Point(I.x+ee,I.y+W),z[ie]=[new SVG.Point(Q.x+L*W,Q.y-L*ee),Q,new SVG.Point(Q.x-L*W,Q.y+L*ee)],K+=_;for(z[0][0]=z[0][1].clone(),z[z.length-1][2]=z[z.length-1][1].clone(),y=(new SVG.Matrix).rotate(Ri).scale(ot,qt).rotate(-Ri),ie=0,he=z.length;ie<he;ie++)z[ie][0]=z[ie][0].transform(y),z[ie][1]=z[ie][1].transform(y),z[ie][2]=z[ie][2].transform(y);for(ie=1,he=z.length;ie<he;ie++)He=(Q=z[ie-1][2]).x,Fe=Q.y,Ge=(Q=z[ie][0]).x,$e=Q.y,Jt=(Q=z[ie][1]).x,Gs.push(["C",He,Fe,Ge,$e,Jt,Fn=Q.y]);return Gs}(this.pos,l))[0]}return l[0]="C",this.pos=[l[5],l[6]],this.reflection=[2*l[5]-l[3],2*l[6]-l[4]],u}function o(l,u){if(!1===u)return!1;for(var h=u,g=l.length;h<g;++h)if("M"==l[h][0])return h;return!1}SVG.extend(SVG.PathArray,{morph:function(l){for(var u=this.value,h=this.parse(l),g=0,f=0,x=!1,y=!1;!1!==g||!1!==f;){var w;x=o(u,!1!==g&&g+1),y=o(h,!1!==f&&f+1),!1===g&&(g=0==(w=new SVG.PathArray(C.start).bbox()).height||0==w.width?u.push(u[0])-1:u.push(["M",w.x+w.width/2,w.y+w.height/2])-1),!1===f&&(f=0==(w=new SVG.PathArray(C.dest).bbox()).height||0==w.width?h.push(h[0])-1:h.push(["M",w.x+w.width/2,w.y+w.height/2])-1);var C=M(u,g,x,h,f,y);u=u.slice(0,g).concat(C.start,!1===x?[]:u.slice(x)),h=h.slice(0,f).concat(C.dest,!1===y?[]:h.slice(y)),g=!1!==x&&g+C.start.length,f=!1!==y&&f+C.dest.length}return this.value=u,this.destination=new SVG.PathArray,this.destination.value=h,this}})}(),function(){function M(t){t.remember("_draggable",this),this.el=t}M.prototype.init=function(t,i){var n=this;this.constraint=t,this.value=i,this.el.on("mousedown.drag",function(o){n.start(o)}),this.el.on("touchstart.drag",function(o){n.start(o)})},M.prototype.transformPoint=function(t,i){var n=(t=t||window.event).changedTouches&&t.changedTouches[0]||t;return this.p.x=n.clientX-(i||0),this.p.y=n.clientY,this.p.matrixTransform(this.m)},M.prototype.getBBox=function(){var t=this.el.bbox();return this.el instanceof SVG.Nested&&(t=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(t.x=this.el.x(),t.y=this.el.y()),t},M.prototype.start=function(t){if("click"!=t.type&&"mousedown"!=t.type&&"mousemove"!=t.type||1==(t.which||t.buttons)){var i=this;if(this.el.fire("beforedrag",{event:t,handler:this}),!this.el.event().defaultPrevented){t.preventDefault(),t.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var n,o=this.getBBox();if(this.el instanceof SVG.Text)switch(n=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":n/=2;break;case"start":n=0}this.startPoints={point:this.transformPoint(t,n),box:o,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(l){i.drag(l)}),SVG.on(window,"touchmove.drag",function(l){i.drag(l)}),SVG.on(window,"mouseup.drag",function(l){i.end(l)}),SVG.on(window,"touchend.drag",function(l){i.end(l)}),this.el.fire("dragstart",{event:t,p:this.startPoints.point,m:this.m,handler:this})}}},M.prototype.drag=function(t){var i=this.getBBox(),n=this.transformPoint(t),o=this.startPoints.box.x+n.x-this.startPoints.point.x,l=this.startPoints.box.y+n.y-this.startPoints.point.y,u=this.constraint,h=n.x-this.startPoints.point.x,g=n.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:t,p:n,m:this.m,handler:this}),this.el.event().defaultPrevented)return n;if("function"==typeof u){var f=u.call(this.el,o,l,this.m);"boolean"==typeof f&&(f={x:f,y:f}),!0===f.x?this.el.x(o):!1!==f.x&&this.el.x(f.x),!0===f.y?this.el.y(l):!1!==f.y&&this.el.y(f.y)}else"object"==typeof u&&(null!=u.minX&&o<u.minX?h=(o=u.minX)-this.startPoints.box.x:null!=u.maxX&&o>u.maxX-i.width&&(h=(o=u.maxX-i.width)-this.startPoints.box.x),null!=u.minY&&l<u.minY?g=(l=u.minY)-this.startPoints.box.y:null!=u.maxY&&l>u.maxY-i.height&&(g=(l=u.maxY-i.height)-this.startPoints.box.y),null!=u.snapToGrid&&(o-=o%u.snapToGrid,l-=l%u.snapToGrid,h-=h%u.snapToGrid,g-=g%u.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:h,y:g},!0):this.el.move(o,l));return n},M.prototype.end=function(t){var i=this.drag(t);this.el.fire("dragend",{event:t,p:i,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(t,i){"function"!=typeof t&&"object"!=typeof t||(i=t,t=!0);var n=this.remember("_draggable")||new M(this);return(t=void 0===t||t)?n.init(i||{},t):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function M(t){this.el=t,t.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(i,n,o){var l="string"!=typeof i?i:n[i];return o?l/2:l},this.pointCoords=function(i,n){var o=this.pointsList[i];return{x:this.pointCoord(o[0],n,"t"===i||"b"===i),y:this.pointCoord(o[1],n,"r"===i||"l"===i)}}}M.prototype.init=function(t,i){var n=this.el.bbox();this.options={};var o=this.el.selectize.defaults.points;for(var l in this.el.selectize.defaults)this.options[l]=this.el.selectize.defaults[l],void 0!==i[l]&&(this.options[l]=i[l]);var u=["points","pointsExclude"];for(var l in u){var h=this.options[u[l]];"string"==typeof h?h=h.length>0?h.split(/\s*,\s*/i):[]:"boolean"==typeof h&&"points"===u[l]&&(h=h?o:[]),this.options[u[l]]=h}this.options.points=[o,this.options.points].reduce(function(g,f){return g.filter(function(x){return f.indexOf(x)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(g,f){return g.filter(function(x){return f.indexOf(x)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(n.x,n.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(t):this.selectRect(t),this.observe(),this.cleanup()},M.prototype.selectPoints=function(t){return this.pointSelection.isSelected=t,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},M.prototype.getPointArray=function(){var t=this.el.bbox();return this.el.array().valueOf().map(function(i){return[i[0]-t.x,i[1]-t.y]})},M.prototype.drawPoints=function(){for(var t=this,i=this.getPointArray(),n=0,o=i.length;n<o;++n){var l=function(h){return function(g){(g=g||window.event).preventDefault?g.preventDefault():g.returnValue=!1,g.stopPropagation(),t.el.fire("point",{x:g.pageX||g.touches[0].pageX,y:g.pageY||g.touches[0].pageY,i:h,event:g})}}(n),u=this.drawPoint(i[n][0],i[n][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",l).on("mousedown",l);this.pointSelection.set.add(u)}},M.prototype.drawPoint=function(t,i){var n=this.options.pointType;switch(n){case"circle":return this.drawCircle(t,i);case"rect":return this.drawRect(t,i);default:if("function"==typeof n)return n.call(this,t,i);throw new Error("Unknown "+n+" point type!")}},M.prototype.drawCircle=function(t,i){return this.nested.circle(this.options.pointSize).center(t,i)},M.prototype.drawRect=function(t,i){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(t,i)},M.prototype.updatePointSelection=function(){var t=this.getPointArray();this.pointSelection.set.each(function(i){this.cx()===t[i][0]&&this.cy()===t[i][1]||this.center(t[i][0],t[i][1])})},M.prototype.updateRectSelection=function(){var t=this,i=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:i.width,height:i.height}),this.options.points.length&&this.options.points.map(function(o,l){var u=t.pointCoords(o,i);t.rectSelection.set.get(l+1).center(u.x,u.y)}),this.options.rotationPoint){var n=this.rectSelection.set.length();this.rectSelection.set.get(n-1).center(i.width/2,20)}},M.prototype.selectRect=function(t){var i=this,n=this.el.bbox();function o(h){return function(g){(g=g||window.event).preventDefault?g.preventDefault():g.returnValue=!1,g.stopPropagation(),i.el.fire(h,{x:g.pageX||g.touches[0].pageX,y:g.pageY||g.touches[0].pageY,event:g})}}if(this.rectSelection.isSelected=t,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(n.width,n.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(h,g){var f=i.pointCoords(h,n),x=i.drawPoint(f.x,f.y).attr("class",i.options.classPoints+"_"+h).on("mousedown",o(h)).on("touchstart",o(h));i.rectSelection.set.add(x)}),this.rectSelection.set.each(function(){this.addClass(i.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var l=function(h){(h=h||window.event).preventDefault?h.preventDefault():h.returnValue=!1,h.stopPropagation(),i.el.fire("rot",{x:h.pageX||h.touches[0].pageX,y:h.pageY||h.touches[0].pageY,event:h})},u=this.drawPoint(n.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",l).on("mousedown",l);this.rectSelection.set.add(u)}},M.prototype.handler=function(){var t=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(t.x,t.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},M.prototype.observe=function(){var t=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){t.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){t.handler()})},M.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(t,i){return"object"==typeof t&&(i=t,t=!0),(this.remember("_selectHandler")||new M(this)).init(void 0===t||t,i||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function M(t){t.remember("_resizeHandler",this),this.el=t,this.parameters={},this.lastUpdateCall=null,this.p=t.doc().node.createSVGPoint()}M.prototype.transformPoint=function(t,i,n){return this.p.x=t-(this.offset.x-window.pageXOffset),this.p.y=i-(this.offset.y-window.pageYOffset),this.p.matrixTransform(n||this.m)},M.prototype._extractPosition=function(t){return{x:null!=t.clientX?t.clientX:t.touches[0].clientX,y:null!=t.clientY?t.clientY:t.touches[0].clientY}},M.prototype.init=function(t){var i=this;if(this.stop(),"stop"!==t){for(var n in this.options={},this.el.resize.defaults)this.options[n]=this.el.resize.defaults[n],void 0!==t[n]&&(this.options[n]=t[n]);this.el.on("lt.resize",function(o){i.resize(o||window.event)}),this.el.on("rt.resize",function(o){i.resize(o||window.event)}),this.el.on("rb.resize",function(o){i.resize(o||window.event)}),this.el.on("lb.resize",function(o){i.resize(o||window.event)}),this.el.on("t.resize",function(o){i.resize(o||window.event)}),this.el.on("r.resize",function(o){i.resize(o||window.event)}),this.el.on("b.resize",function(o){i.resize(o||window.event)}),this.el.on("l.resize",function(o){i.resize(o||window.event)}),this.el.on("rot.resize",function(o){i.resize(o||window.event)}),this.el.on("point.resize",function(o){i.resize(o||window.event)}),this.update()}},M.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},M.prototype.resize=function(t){var i=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var n=this._extractPosition(t.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(n.x,n.y),x:t.detail.x,y:t.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==t.detail.i){var o=this.el.array().valueOf();this.parameters.i=t.detail.i,this.parameters.pointCoords=[o[t.detail.i][0],o[t.detail.i][1]]}switch(t.type){case"lt":this.calc=function(l,u){var h=this.snapToGrid(l,u);if(this.parameters.box.width-h[0]>0&&this.parameters.box.height-h[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+h[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-h[0]);h=this.checkAspectRatio(h),this.el.move(this.parameters.box.x+h[0],this.parameters.box.y+h[1]).size(this.parameters.box.width-h[0],this.parameters.box.height-h[1])}};break;case"rt":this.calc=function(l,u){var h=this.snapToGrid(l,u,2);if(this.parameters.box.width+h[0]>0&&this.parameters.box.height-h[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-h[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+h[0]);h=this.checkAspectRatio(h,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+h[1]).size(this.parameters.box.width+h[0],this.parameters.box.height-h[1])}};break;case"rb":this.calc=function(l,u){var h=this.snapToGrid(l,u,0);if(this.parameters.box.width+h[0]>0&&this.parameters.box.height+h[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-h[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+h[0]);h=this.checkAspectRatio(h),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+h[0],this.parameters.box.height+h[1])}};break;case"lb":this.calc=function(l,u){var h=this.snapToGrid(l,u,1);if(this.parameters.box.width-h[0]>0&&this.parameters.box.height+h[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+h[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-h[0]);h=this.checkAspectRatio(h,!0),this.el.move(this.parameters.box.x+h[0],this.parameters.box.y).size(this.parameters.box.width-h[0],this.parameters.box.height+h[1])}};break;case"t":this.calc=function(l,u){var h=this.snapToGrid(l,u,2);if(this.parameters.box.height-h[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+h[1]).height(this.parameters.box.height-h[1])}};break;case"r":this.calc=function(l,u){var h=this.snapToGrid(l,u,0);if(this.parameters.box.width+h[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+h[0])}};break;case"b":this.calc=function(l,u){var h=this.snapToGrid(l,u,0);if(this.parameters.box.height+h[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+h[1])}};break;case"l":this.calc=function(l,u){var h=this.snapToGrid(l,u,1);if(this.parameters.box.width-h[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+h[0],this.parameters.box.y).width(this.parameters.box.width-h[0])}};break;case"rot":this.calc=function(l,u){var h=l+this.parameters.p.x,g=u+this.parameters.p.y,f=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),x=Math.atan2(g-this.parameters.box.y-this.parameters.box.height/2,h-this.parameters.box.x-this.parameters.box.width/2),y=this.parameters.rotation+180*(x-f)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(y-y%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(l,u){var h=this.snapToGrid(l,u,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),g=this.el.array().valueOf();g[this.parameters.i][0]=this.parameters.pointCoords[0]+h[0],g[this.parameters.i][1]=this.parameters.pointCoords[1]+h[1],this.el.plot(g)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:t}),SVG.on(window,"touchmove.resize",function(l){i.update(l||window.event)}),SVG.on(window,"touchend.resize",function(){i.done()}),SVG.on(window,"mousemove.resize",function(l){i.update(l||window.event)}),SVG.on(window,"mouseup.resize",function(){i.done()})},M.prototype.update=function(t){if(t){var i=this._extractPosition(t),n=this.transformPoint(i.x,i.y),o=n.x-this.parameters.p.x,l=n.y-this.parameters.p.y;this.lastUpdateCall=[o,l],this.calc(o,l),this.el.fire("resizing",{dx:o,dy:l,event:t})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},M.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},M.prototype.snapToGrid=function(t,i,n,o){var l;return l=void 0!==o?[(n+t)%this.options.snapToGrid,(o+i)%this.options.snapToGrid]:[(this.parameters.box.x+t+(1&(n=n??3)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+i+(2&n?0:this.parameters.box.height))%this.options.snapToGrid],t<0&&(l[0]-=this.options.snapToGrid),i<0&&(l[1]-=this.options.snapToGrid),t-=Math.abs(l[0])<this.options.snapToGrid/2?l[0]:l[0]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),i-=Math.abs(l[1])<this.options.snapToGrid/2?l[1]:l[1]-(i<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(t,i,n,o)},M.prototype.constraintToBox=function(t,i,n,o){var l,u,h=this.options.constraint||{};return void 0!==o?(l=n,u=o):(l=this.parameters.box.x+(1&n?0:this.parameters.box.width),u=this.parameters.box.y+(2&n?0:this.parameters.box.height)),void 0!==h.minX&&l+t<h.minX&&(t=h.minX-l),void 0!==h.maxX&&l+t>h.maxX&&(t=h.maxX-l),void 0!==h.minY&&u+i<h.minY&&(i=h.minY-u),void 0!==h.maxY&&u+i>h.maxY&&(i=h.maxY-u),[t,i]},M.prototype.checkAspectRatio=function(t,i){if(!this.options.saveAspectRatio)return t;var n=t.slice(),o=this.parameters.box.width/this.parameters.box.height,l=this.parameters.box.width+t[0],u=this.parameters.box.height-t[1],h=l/u;return h<o?(n[1]=l/o-this.parameters.box.height,i&&(n[1]=-n[1])):h>o&&(n[0]=this.parameters.box.width-u*o,i&&(n[0]=-n[0])),n},SVG.extend(SVG.Element,{resize:function(t){return(this.remember("_resizeHandler")||new M(this)).init(t||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var Mn=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new le(this.ctx),this.ctx.axes=new Ys(this.ctx),this.ctx.core=new eo(this.ctx.el,this.ctx),this.ctx.config=new ut({}),this.ctx.data=new yn(this.ctx),this.ctx.grid=new oi(this.ctx),this.ctx.graphics=new j(this.ctx),this.ctx.coreUtils=new ye(this.ctx),this.ctx.crosshairs=new vn(this.ctx),this.ctx.events=new Ii(this.ctx),this.ctx.exports=new Ve(this.ctx),this.ctx.localization=new li(this.ctx),this.ctx.options=new fe,this.ctx.responsive=new fs(this.ctx),this.ctx.series=new pe(this.ctx),this.ctx.theme=new ps(this.ctx),this.ctx.formatters=new Zi(this.ctx),this.ctx.titleSubtitle=new Aa(this.ctx),this.ctx.legend=new _n(this.ctx),this.ctx.toolbar=new Cn(this.ctx),this.ctx.dimensions=new ci(this.ctx),this.ctx.updateHelpers=new to(this.ctx),this.ctx.zoomPanSelection=new it(this.ctx),this.ctx.w.globals.tooltip=new Qr(this.ctx)}}]),M}(),Ra=function(){function M(t){re(this,M),this.ctx=t,this.w=t.w}return ne(M,[{key:"clear",value:function(t){var i=t.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:i})}},{key:"killSVG",value:function(t){t.each(function(i,n){this.removeClass("*"),this.off(),this.stop()},!0),t.ungroup(),t.clear()}},{key:"clearDomElements",value:function(t){var i=this,o=this.w.globals.dom.Paper.node;o.parentNode&&o.parentNode.parentNode&&!t.isUpdating&&(o.parentNode.parentNode.style.minHeight="unset");var l=this.w.globals.dom.baseEl;l&&this.ctx.eventList.forEach(function(h){l.removeEventListener(h,i.ctx.events.documentEvent)});var u=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(u.Paper),u.Paper.remove(),u.elWrap=null,u.elGraphical=null,u.elAnnotations=null,u.elLegendWrap=null,u.baseEl=null,u.elGridRect=null,u.elGridRectMask=null,u.elGridRectMarkerMask=null,u.elForecastMask=null,u.elNonForecastMask=null,u.elDefs=null}}]),M}(),Rt=new WeakMap,io=function(){function M(t,i){re(this,M),this.opts=i,this.ctx=this,this.w=new Sa(i).init(),this.el=t,this.w.globals.cuid=Y.randomId(),this.w.globals.chartID=this.w.config.chart.id?Y.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Mn(this).initModules(),this.create=Y.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return ne(M,[{key:"render",value:function(){var t=this;return new Promise(function(i,n){if(null!==t.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),t.w.config.chart.id&&Apex._chartInstances.push({id:t.w.globals.chartID,group:t.w.config.chart.group,chart:t}),t.setLocale(t.w.config.chart.defaultLocale);var o=t.w.config.chart.events.beforeMount;if("function"==typeof o&&o(t,t.w),t.events.fireEvent("beforeMount",[t,t.w]),window.addEventListener("resize",t.windowResizeHandler),function(x,y){var w=!1;if(x.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var C=x.getBoundingClientRect();"none"!==x.style.display&&0!==C.width||(w=!0)}var E=new ResizeObserver(function(k){w&&y.call(x,k),w=!0});x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(x.children).forEach(function(k){return E.observe(k)}):E.observe(x),Rt.set(y,E)}(t.el.parentNode,t.parentResizeHandler),!t.css){var l=t.el.getRootNode&&t.el.getRootNode(),u=Y.is("ShadowRoot",l),h=t.el.ownerDocument,g=h.getElementById("apexcharts-css");!u&&g||(t.css=document.createElement("style"),t.css.id="apexcharts-css",t.css.textContent='.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-title:empty,\n.apexcharts-tooltip-text-y-label:empty,\n.apexcharts-tooltip-text-y-value:empty,\n.apexcharts-tooltip-text-goals-label:empty,\n.apexcharts-tooltip-text-goals-value:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-goals-group, \n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  display: flex;\n}\n.apexcharts-tooltip-text-goals-label:not(:empty),\n.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-box, .apexcharts-custom-tooltip {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-xaxis-annotation-label,\n.apexcharts-yaxis-annotation-label,\n.apexcharts-point-annotation-label,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}',u?l.prepend(t.css):h.head.appendChild(t.css))}var f=t.create(t.w.config.series,{});if(!f)return i(t);t.mount(f).then(function(){"function"==typeof t.w.config.chart.events.mounted&&t.w.config.chart.events.mounted(t,t.w),t.events.fireEvent("mounted",[t,t.w]),i(f)}).catch(function(x){n(x)})}else n(new Error("Element not found"))})}},{key:"create",value:function(t,i){var n=this.w;new Mn(this).initModules();var o=this.w.globals;if(o.noData=!1,o.animationEnded=!1,this.responsive.checkResponsiveConfig(i),n.config.xaxis.convertedCatToNumeric&&new Ui(n.config).convertCatToNumericXaxis(n.config,this.ctx),null===this.el||(this.core.setupElements(),"treemap"===n.config.chart.type&&(n.config.grid.show=!1,n.config.yaxis[0].show=!1),0===o.svgWidth))return o.animationEnded=!0,null;var l=ye.checkComboSeries(t);o.comboCharts=l.comboCharts,o.comboBarCount=l.comboBarCount;var u=t.every(function(y){return y.data&&0===y.data.length});(0===t.length||u)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(t),this.theme.init(),new Ie(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),o.noData&&o.collapsedSeries.length!==o.series.length&&!n.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),o.axisCharts&&(this.core.coreCalculations(),"category"!==n.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=n.globals.minX,this.ctx.toolbar.maxX=n.globals.maxX),this.formatters.heatmapLabelFormatters(),new ye(this).getLargestMarkerSize(),this.dimensions.plotCoords();var h=this.core.xySettings();this.grid.createGridMask();var g=this.core.plotChartType(t,h),f=new It(this);return f.bringForward(),n.config.dataLabels.background.enabled&&f.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:g,xyRatios:h,elInner:n.globals.dom.elGraphical,dimensions:{plot:{left:n.globals.translateX,top:n.globals.translateY,width:n.globals.gridWidth,height:n.globals.gridHeight}}}}},{key:"mount",value:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this,o=n.w;return new Promise(function(l,u){if(null===n.el)return u(new Error("Not enough data to display or target element not found"));(null===i||o.globals.allSeriesCollapsed)&&n.series.handleNoData(),"treemap"!==o.config.chart.type&&n.axes.drawAxis(o.config.chart.type,i.xyRatios),n.grid=new oi(n);var h=n.grid.drawGrid();n.annotations=new we(n),n.annotations.drawImageAnnos(),n.annotations.drawTextAnnos(),"back"===o.config.grid.position&&h&&o.globals.dom.elGraphical.add(h.el);var g=new Ki(t.ctx),f=new Ti(t.ctx);if(null!==h&&(g.xAxisLabelCorrections(h.xAxisTickWidth),f.setYAxisTextAlignments(),o.config.yaxis.map(function(w,C){-1===o.globals.ignoreYAxisIndexes.indexOf(C)&&f.yAxisTitleRotate(C,w.opposite)})),"back"===o.config.annotations.position&&(o.globals.dom.Paper.add(o.globals.dom.elAnnotations),n.annotations.drawAxesAnnotations()),Array.isArray(i.elGraph))for(var x=0;x<i.elGraph.length;x++)o.globals.dom.elGraphical.add(i.elGraph[x]);else o.globals.dom.elGraphical.add(i.elGraph);if("front"===o.config.grid.position&&h&&o.globals.dom.elGraphical.add(h.el),"front"===o.config.xaxis.crosshairs.position&&n.crosshairs.drawXCrosshairs(),"front"===o.config.yaxis[0].crosshairs.position&&n.crosshairs.drawYCrosshairs(),"front"===o.config.annotations.position&&(o.globals.dom.Paper.add(o.globals.dom.elAnnotations),n.annotations.drawAxesAnnotations()),!o.globals.noData){if(o.config.tooltip.enabled&&!o.globals.noData&&n.w.globals.tooltip.drawTooltip(i.xyRatios),o.globals.axisCharts&&(o.globals.isXNumeric||o.config.xaxis.convertedCatToNumeric||o.globals.isRangeBar))(o.config.chart.zoom.enabled||o.config.chart.selection&&o.config.chart.selection.enabled||o.config.chart.pan&&o.config.chart.pan.enabled)&&n.zoomPanSelection.init({xyRatios:i.xyRatios});else{var y=o.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(w){y[w]=!1})}o.config.chart.toolbar.show&&!o.globals.allSeriesCollapsed&&n.toolbar.createToolbar()}o.globals.memory.methodsToExec.length>0&&o.globals.memory.methodsToExec.forEach(function(w){w.method(w.params,!1,w.context)}),o.globals.axisCharts||o.globals.noData||n.core.resizeNonAxisCharts(),l(n)})}},{key:"destroy",value:function(){var t,i;window.removeEventListener("resize",this.windowResizeHandler),(i=Rt.get(t=this.parentResizeHandler))&&(i.disconnect(),Rt.delete(t));var n=this.w.config.chart.id;n&&Apex._chartInstances.forEach(function(o,l){o.id===Y.escapeString(n)&&Apex._chartInstances.splice(l,1)}),new Ra(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],h=this.w;return h.globals.selection=void 0,t.series&&(this.series.resetSeries(!1,!0,!1),t.series.length&&t.series[0].data&&(t.series=t.series.map(function(g,f){return i.updateHelpers._extendSeries(g,f)})),this.updateHelpers.revertDefaultAxisMinMax()),t.xaxis&&(t=this.updateHelpers.forceXAxisUpdate(t)),t.yaxis&&(t=this.updateHelpers.forceYAxisUpdate(t)),h.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),t.theme&&(t=this.theme.updateThemeOptions(t)),this.updateHelpers._updateOptions(t,n,o,l,u)}},{key:"updateSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(t,i,n)}},{key:"appendSeries",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.w.config.series.slice();return o.push(t),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(o,i,n)}},{key:"appendData",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;n.w.globals.dataChanged=!0,n.series.getPreviousPaths();for(var o=n.w.config.series.slice(),l=0;l<o.length;l++)if(null!=t[l])for(var u=0;u<t[l].data.length;u++)o[l].data.push(t[l].data[u]);return n.w.config.series=o,i&&(n.w.globals.initialSeries=Y.clone(n.w.config.series)),this.update()}},{key:"update",value:function(t){var i=this;return new Promise(function(n,o){new Ra(i.ctx).clear({isUpdating:!0});var l=i.create(i.w.config.series,t);if(!l)return n(i);i.mount(l).then(function(){"function"==typeof i.w.config.chart.events.updated&&i.w.config.chart.events.updated(i,i.w),i.events.fireEvent("updated",[i,i.w]),i.w.globals.isDirty=!0,n(i)}).catch(function(u){o(u)})})}},{key:"getSyncedCharts",value:function(){var t=this.getGroupedCharts(),i=[this];return t.length&&(i=[],t.forEach(function(n){i.push(n)})),i}},{key:"getGroupedCharts",value:function(){var t=this;return Apex._chartInstances.filter(function(i){if(i.group)return!0}).map(function(i){return t.w.config.chart.group===i.group?i.chart:t})}},{key:"toggleSeries",value:function(t){return this.series.toggleSeries(t)}},{key:"highlightSeriesOnLegendHover",value:function(t,i){return this.series.toggleSeriesOnHover(t,i)}},{key:"showSeries",value:function(t){this.series.showSeries(t)}},{key:"hideSeries",value:function(t){this.series.hideSeries(t)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(t,i)}},{key:"addEventListener",value:function(t,i){this.events.addEventListener(t,i)}},{key:"removeEventListener",value:function(t,i){this.events.removeEventListener(t,i)}},{key:"addXaxisAnnotation",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=this;n&&(o=n),o.annotations.addXaxisAnnotationExternal(t,i,o)}},{key:"addYaxisAnnotation",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=this;n&&(o=n),o.annotations.addYaxisAnnotationExternal(t,i,o)}},{key:"addPointAnnotation",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=this;n&&(o=n),o.annotations.addPointAnnotationExternal(t,i,o)}},{key:"clearAnnotations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=this;t&&(i=t),i.annotations.clearAnnotations(i)}},{key:"removeAnnotation",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this;i&&(n=i),n.annotations.removeAnnotation(n,t)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(t,i){return this.coreUtils.getSeriesTotalsXRange(t,i)}},{key:"getHighestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=new bn(this.ctx);return i.getMinYMaxY(t).highestY}},{key:"getLowestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=new bn(this.ctx);return i.getMinYMaxY(t).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(t,i){return this.updateHelpers.toggleDataPointSelection(t,i)}},{key:"zoomX",value:function(t,i){this.ctx.toolbar.zoomUpdateOptions(t,i)}},{key:"setLocale",value:function(t){this.localization.setCurrentLocaleValues(t)}},{key:"dataURI",value:function(t){return new Ve(this.ctx).dataURI(t)}},{key:"exportToCSV",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=new Ve(this.ctx);return i.exportToCSV(t)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var t=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){t.w.globals.resized=!0,t.w.globals.dataChanged=!1,t.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var t=this.w.config.chart.redrawOnWindowResize;"function"==typeof t&&(t=t()),t&&this._windowResize()}}],[{key:"getChartByID",value:function(t){var i=Y.escapeString(t),n=Apex._chartInstances.filter(function(o){return o.id===i})[0];return n&&n.chart}},{key:"initOnLoad",value:function(){for(var t=document.querySelectorAll("[data-apexcharts]"),i=0;i<t.length;i++)new M(t[i],JSON.parse(t[i].getAttribute("data-options"))).render()}},{key:"exec",value:function(t,i){var n=this.getChartByID(t);if(n){n.w.globals.isExecCalled=!0;var o=null;if(-1!==n.publicMethods.indexOf(i)){for(var l=arguments.length,u=new Array(l>2?l-2:0),h=2;h<l;h++)u[h-2]=arguments[h];o=n[i].apply(n,u)}return o}}},{key:"merge",value:function(t,i){return Y.extend(t,i)}}]),M}();ds.exports=io},2402:function(ds){ds.exports=function(){"use strict";function Ai(Z,J,ae,Y,le){!function oe(j,ye,Pe,Le,Be){for(;Le>Pe;){if(Le-Pe>600){var ze=Le-Pe+1,Ue=ye-Pe+1,fe=Math.log(ze),we=.5*Math.exp(2*fe/3),Qe=.5*Math.sqrt(fe*we*(ze-we)/ze)*(Ue-ze/2<0?-1:1);oe(j,ye,Math.max(Pe,Math.floor(ye-Ue*we/ze+Qe)),Math.min(Le,Math.floor(ye+(ze-Ue)*we/ze+Qe)),Be)}var It=j[ye],Ut=Pe,pe=Le;for(_e(j,Pe,ye),Be(j[Le],It)>0&&_e(j,Pe,Le);Ut<pe;){for(_e(j,Ut,pe),Ut++,pe--;Be(j[Ut],It)<0;)Ut++;for(;Be(j[pe],It)>0;)pe--}0===Be(j[Pe],It)?_e(j,Pe,pe):_e(j,++pe,Le),pe<=ye&&(Pe=pe+1),ye<=pe&&(Le=pe-1)}}(Z,J,ae||0,Y||Z.length-1,le||bt)}function _e(Z,J,ae){var Y=Z[J];Z[J]=Z[ae],Z[ae]=Y}function bt(Z,J){return Z<J?-1:Z>J?1:0}var Ye=function(Z){void 0===Z&&(Z=9),this._maxEntries=Math.max(4,Z),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Ce(Z,J,ae){if(!ae)return J.indexOf(Z);for(var Y=0;Y<J.length;Y++)if(ae(Z,J[Y]))return Y;return-1}function Je(Z,J){re(Z,0,Z.children.length,J,Z)}function re(Z,J,ae,Y,le){le||(le=Ct(null)),le.minX=1/0,le.minY=1/0,le.maxX=-1/0,le.maxY=-1/0;for(var oe=J;oe<ae;oe++){var j=Z.children[oe];rt(le,Z.leaf?Y(j):j)}return le}function rt(Z,J){return Z.minX=Math.min(Z.minX,J.minX),Z.minY=Math.min(Z.minY,J.minY),Z.maxX=Math.max(Z.maxX,J.maxX),Z.maxY=Math.max(Z.maxY,J.maxY),Z}function ne(Z,J){return Z.minX-J.minX}function ki(Z,J){return Z.minY-J.minY}function Tt(Z){return(Z.maxX-Z.minX)*(Z.maxY-Z.minY)}function ai(Z){return Z.maxX-Z.minX+(Z.maxY-Z.minY)}function _t(Z,J){return Z.minX<=J.minX&&Z.minY<=J.minY&&J.maxX<=Z.maxX&&J.maxY<=Z.maxY}function jt(Z,J){return J.minX<=Z.maxX&&J.minY<=Z.maxY&&J.maxX>=Z.minX&&J.maxY>=Z.minY}function Ct(Z){return{children:Z,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ji(Z,J,ae,Y,le){for(var oe=[J,ae];oe.length;)if(!((ae=oe.pop())-(J=oe.pop())<=Y)){var j=J+Math.ceil((ae-J)/Y/2)*Y;Ai(Z,j,J,ae,le),oe.push(J,j,j,ae)}}return Ye.prototype.all=function(){return this._all(this.data,[])},Ye.prototype.search=function(Z){var J=this.data,ae=[];if(!jt(Z,J))return ae;for(var Y=this.toBBox,le=[];J;){for(var oe=0;oe<J.children.length;oe++){var j=J.children[oe],ye=J.leaf?Y(j):j;jt(Z,ye)&&(J.leaf?ae.push(j):_t(Z,ye)?this._all(j,ae):le.push(j))}J=le.pop()}return ae},Ye.prototype.collides=function(Z){var J=this.data;if(!jt(Z,J))return!1;for(var ae=[];J;){for(var Y=0;Y<J.children.length;Y++){var le=J.children[Y],oe=J.leaf?this.toBBox(le):le;if(jt(Z,oe)){if(J.leaf||_t(Z,oe))return!0;ae.push(le)}}J=ae.pop()}return!1},Ye.prototype.load=function(Z){if(!Z||!Z.length)return this;if(Z.length<this._minEntries){for(var J=0;J<Z.length;J++)this.insert(Z[J]);return this}var ae=this._build(Z.slice(),0,Z.length-1,0);if(this.data.children.length)if(this.data.height===ae.height)this._splitRoot(this.data,ae);else{if(this.data.height<ae.height){var Y=this.data;this.data=ae,ae=Y}this._insert(ae,this.data.height-ae.height-1,!0)}else this.data=ae;return this},Ye.prototype.insert=function(Z){return Z&&this._insert(Z,this.data.height-1),this},Ye.prototype.clear=function(){return this.data=Ct([]),this},Ye.prototype.remove=function(Z,J){if(!Z)return this;for(var ae,Y,le,oe=this.data,j=this.toBBox(Z),ye=[],Pe=[];oe||ye.length;){if(oe||(oe=ye.pop(),Y=ye[ye.length-1],ae=Pe.pop(),le=!0),oe.leaf){var Le=Ce(Z,oe.children,J);if(-1!==Le)return oe.children.splice(Le,1),ye.push(oe),this._condense(ye),this}le||oe.leaf||!_t(oe,j)?Y?(ae++,oe=Y.children[ae],le=!1):oe=null:(ye.push(oe),Pe.push(ae),ae=0,Y=oe,oe=oe.children[0])}return this},Ye.prototype.toBBox=function(Z){return Z},Ye.prototype.compareMinX=function(Z,J){return Z.minX-J.minX},Ye.prototype.compareMinY=function(Z,J){return Z.minY-J.minY},Ye.prototype.toJSON=function(){return this.data},Ye.prototype.fromJSON=function(Z){return this.data=Z,this},Ye.prototype._all=function(Z,J){for(var ae=[];Z;)Z.leaf?J.push.apply(J,Z.children):ae.push.apply(ae,Z.children),Z=ae.pop();return J},Ye.prototype._build=function(Z,J,ae,Y){var le,oe=ae-J+1,j=this._maxEntries;if(oe<=j)return Je(le=Ct(Z.slice(J,ae+1)),this.toBBox),le;Y||(Y=Math.ceil(Math.log(oe)/Math.log(j)),j=Math.ceil(oe/Math.pow(j,Y-1))),(le=Ct([])).leaf=!1,le.height=Y;var ye=Math.ceil(oe/j),Pe=ye*Math.ceil(Math.sqrt(j));ji(Z,J,ae,Pe,this.compareMinX);for(var Le=J;Le<=ae;Le+=Pe){var Be=Math.min(Le+Pe-1,ae);ji(Z,Le,Be,ye,this.compareMinY);for(var ze=Le;ze<=Be;ze+=ye){var Ue=Math.min(ze+ye-1,Be);le.children.push(this._build(Z,ze,Ue,Y-1))}}return Je(le,this.toBBox),le},Ye.prototype._chooseSubtree=function(Z,J,ae,Y){for(;Y.push(J),!J.leaf&&Y.length-1!==ae;){for(var le=1/0,oe=1/0,j=void 0,ye=0;ye<J.children.length;ye++){var Pe=J.children[ye],Le=Tt(Pe),Be=(ze=Z,Ue=Pe,(Math.max(Ue.maxX,ze.maxX)-Math.min(Ue.minX,ze.minX))*(Math.max(Ue.maxY,ze.maxY)-Math.min(Ue.minY,ze.minY))-Le);Be<oe?(oe=Be,le=Le<le?Le:le,j=Pe):Be===oe&&Le<le&&(le=Le,j=Pe)}J=j||J.children[0]}var ze,Ue;return J},Ye.prototype._insert=function(Z,J,ae){var Y=ae?Z:this.toBBox(Z),le=[],oe=this._chooseSubtree(Y,this.data,J,le);for(oe.children.push(Z),rt(oe,Y);J>=0&&le[J].children.length>this._maxEntries;)this._split(le,J),J--;this._adjustParentBBoxes(Y,le,J)},Ye.prototype._split=function(Z,J){var ae=Z[J],Y=ae.children.length,le=this._minEntries;this._chooseSplitAxis(ae,le,Y);var oe=this._chooseSplitIndex(ae,le,Y),j=Ct(ae.children.splice(oe,ae.children.length-oe));j.height=ae.height,j.leaf=ae.leaf,Je(ae,this.toBBox),Je(j,this.toBBox),J?Z[J-1].children.push(j):this._splitRoot(ae,j)},Ye.prototype._splitRoot=function(Z,J){this.data=Ct([Z,J]),this.data.height=Z.height+1,this.data.leaf=!1,Je(this.data,this.toBBox)},Ye.prototype._chooseSplitIndex=function(Z,J,ae){for(var Y,le,oe,j,ye,Pe,Le,Be=1/0,ze=1/0,Ue=J;Ue<=ae-J;Ue++){var fe=re(Z,0,Ue,this.toBBox),we=re(Z,Ue,ae,this.toBBox),Qe=(le=fe,oe=we,void 0,void 0,void 0,void 0,j=Math.max(le.minX,oe.minX),ye=Math.max(le.minY,oe.minY),Pe=Math.min(le.maxX,oe.maxX),Le=Math.min(le.maxY,oe.maxY),Math.max(0,Pe-j)*Math.max(0,Le-ye)),Ie=Tt(fe)+Tt(we);Qe<Be?(Be=Qe,Y=Ue,ze=Ie<ze?Ie:ze):Qe===Be&&Ie<ze&&(ze=Ie,Y=Ue)}return Y||ae-J},Ye.prototype._chooseSplitAxis=function(Z,J,ae){var Y=Z.leaf?this.compareMinX:ne,le=Z.leaf?this.compareMinY:ki;this._allDistMargin(Z,J,ae,Y)<this._allDistMargin(Z,J,ae,le)&&Z.children.sort(Y)},Ye.prototype._allDistMargin=function(Z,J,ae,Y){Z.children.sort(Y);for(var le=this.toBBox,oe=re(Z,0,J,le),j=re(Z,ae-J,ae,le),ye=ai(oe)+ai(j),Pe=J;Pe<ae-J;Pe++){var Le=Z.children[Pe];rt(oe,Z.leaf?le(Le):Le),ye+=ai(oe)}for(var Be=ae-J-1;Be>=J;Be--){var ze=Z.children[Be];rt(j,Z.leaf?le(ze):ze),ye+=ai(j)}return ye},Ye.prototype._adjustParentBBoxes=function(Z,J,ae){for(var Y=ae;Y>=0;Y--)rt(J[Y],Z)},Ye.prototype._condense=function(Z){for(var J=Z.length-1,ae=void 0;J>=0;J--)0===Z[J].children.length?J>0?(ae=Z[J-1].children).splice(ae.indexOf(Z[J]),1):this.clear():Je(Z[J],this.toBBox)},Ye}()},9038:()=>{}}]);