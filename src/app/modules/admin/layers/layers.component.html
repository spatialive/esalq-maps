<div #containerMap class="flex flex-col flex-auto min-w-0 h-full">
    <div class="flex flex-wrap items-center justify-around w-full h-full p-2">
        <ol-map
            [lat]="-15.496032 "
            [lon]="-50.053711"
            [zoom]="2.8"
            [width]="mapWidth"
            [height]="mapHeight"
            (ready)="onMapReady($event)"
            (clickPoint)="handlePoint($event)">
            <ol-control class="mobileHide" control="FullScreen"></ol-control>
            <ol-control class="mobileHide" control="scaleline"></ol-control>
            <ol-layer *ngFor="let layer of layers" [layer]="layer"></ol-layer>
        </ol-map>
    </div>
</div>

<fuse-card *ngIf="displayFeatureInfo" id="overlay" class=" ol-popup min-w-140 flex p-2">
    <div class="flex flex-col w-full">
        <div class="flex  justify-between">
            <div class="text-lg text-center w-full font-bold">{{displayFeatureInfo?.TITULO}}</div>
            <button
                mat-icon-button
                [color]="'primary'"
                (click)="hidePopup()">
                <mat-icon
                    class="icon-size-5"
                    [svgIcon]="'mat_outline:close'"></mat-icon>
            </button>
        </div>

        <div class="mt-2 justify-center">
            <table mat-table matSort [dataSource]="dataSource" class="mat-elevation-z2 w-full">
                <ng-container [matColumnDef]="'label'">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef>Dado</th>
                    <td mat-cell *matCellDef="let element">
                       <span [innerHTML]="element.label"></span>
                    </td>
                </ng-container>
                <ng-container [matColumnDef]="'value'">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef>Valor</th>
                    <td mat-cell *matCellDef="let element">
                       <span>
                           <span> {{element.value | safeNumber:'1.0-2'}} </span>
                       </span>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
            <mat-toolbar class="w-full mt-2">
                <mat-toolbar-row class="flex flex-col md:flex-row justify-between items-center">
                    <div class="flex mb-2 md:mb-0" *ngIf="displayFeatureInfo?.coordinate">
                        <span>Ponto: {{displayFeatureInfo?.coordinate[1].toFixed(4)}}, {{displayFeatureInfo?.coordinate[0].toFixed(4)}}</span>
                    </div>
                    <mat-paginator #paginator [pageSize]="5" [pageSizeOptions]="[2, 5, 10, 25, 100]"></mat-paginator>
                </mat-toolbar-row>
            </mat-toolbar>
        </div>
    </div>
</fuse-card>
